(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ad0a1ad"],{"18c6":function(e,t,i){"use strict";i.d(t,"a",(function(){return I})),i.d(t,"b",(function(){return E})),i.d(t,"c",(function(){return T})),i.d(t,"d",(function(){return P})),i.d(t,"e",(function(){return j})),i.d(t,"f",(function(){return F})),i.d(t,"g",(function(){return C})),i.d(t,"h",(function(){return k}));var r=i("ce50"),n=i("c84e"),o=i("9b77");function a(e,t){const i=n["e"].SIZE_FIELD_STOPS|n["e"].SIZE_MINMAX_VALUE|n["e"].SIZE_SCALE_STOPS|n["e"].SIZE_UNIT_VALUE,r=(e&(n["f"].FIELD_TARGETS_OUTLINE|n["f"].MINMAX_TARGETS_OUTLINE|n["f"].SCALE_TARGETS_OUTLINE|n["f"].UNIT_TARGETS_OUTLINE))>>>4;return t.isOutline||t.isOutlinedFill?i&r:i&~r}const s=0,l=8,c=7,f=8,u=11,m=11,h=12,d=13,p=14,y=15,v=15,b=16,S=17,g=18,O=19,N=20,M=21,x=22;function C(e,t){switch(e){case n["d"].FILL:return I.from(t);case n["d"].LINE:return T.from(t);case n["d"].MARKER:return P.from(t);case n["d"].TEXT:return F.from(t);case n["d"].LABEL:return E.from(t);default:throw new Error("Unable to createMaterialKey for unknown geometryType "+e)}}function k(e){switch(j.load(e).geometryType){case n["d"].MARKER:return new P(e);case n["d"].FILL:return new I(e);case n["d"].LINE:return new T(e);case n["d"].TEXT:return new F(e);case n["d"].LABEL:return new E(e)}}class j{constructor(e){this._data=0,this._data=e}static load(e){const t=this.shared;return t.data=e,t}set data(e){this._data=e}get data(){return this._data}get geometryType(){return this.bits(f,u)}set geometryType(e){this.setBits(e,f,u)}get mapAligned(){return!!this.bit(N)}set mapAligned(e){this.setBit(N,e)}get sdf(){return!!this.bit(m)}set sdf(e){this.setBit(m,e)}get pattern(){return!!this.bit(h)}set pattern(e){this.setBit(h,e)}get textureBinding(){return this.bits(s,l)}set textureBinding(e){this.setBits(e,s,l)}get geometryTypeString(){switch(this.geometryType){case n["d"].FILL:return"fill";case n["d"].MARKER:return"marker";case n["d"].LINE:return"line";case n["d"].TEXT:return"text";case n["d"].LABEL:return"label";default:throw new r["a"]("Unable to handle unknown geometryType: "+this.geometryType)}}setBit(e,t){const i=1<<e;t?this._data|=i:this._data&=~i}bit(e){return(this._data&1<<e)>>e}setBits(e,t,i){for(let r=t,n=0;r<i;r++,n++)this.setBit(r,0!=(e&1<<n))}bits(e,t){let i=0;for(let r=e,n=0;r<t;r++,n++)i|=this.bit(r)<<n;return i}hasVV(){return!1}setVV(e,t){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}}getVariationHash(){return this._data&~(c&this.textureBinding)}}j.shared=new j(0);const z=e=>class extends e{get vvSizeMinMaxValue(){return 0!==this.bit(b)}set vvSizeMinMaxValue(e){this.setBit(b,e)}get vvSizeScaleStops(){return 0!==this.bit(S)}set vvSizeScaleStops(e){this.setBit(S,e)}get vvSizeFieldStops(){return 0!==this.bit(g)}set vvSizeFieldStops(e){this.setBit(g,e)}get vvSizeUnitValue(){return 0!==this.bit(O)}set vvSizeUnitValue(e){this.setBit(O,e)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(e,t){super.setVV(e,t);const i=a(e,t)&e;this.vvSizeMinMaxValue=!!(i&n["e"].SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(i&n["e"].SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(i&n["e"].SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(i&n["e"].SIZE_SCALE_STOPS)}},V=e=>class extends e{get vvRotation(){return 0!==this.bit(y)}set vvRotation(e){this.setBit(y,e)}hasVV(){return super.hasVV()||this.vvRotation}setVV(e,t){super.setVV(e,t),this.vvRotation=!t.isOutline&&!!(e&n["e"].ROTATION)}},w=e=>class extends e{get vvColor(){return 0!==this.bit(d)}set vvColor(e){this.setBit(d,e)}hasVV(){return super.hasVV()||this.vvColor}setVV(e,t){super.setVV(e,t),this.vvColor=!t.isOutline&&!!(e&n["e"].COLOR)}},L=e=>class extends e{get vvOpacity(){return 0!==this.bit(p)}set vvOpacity(e){this.setBit(p,e)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(e,t){super.setVV(e,t),this.vvOpacity=!t.isOutline&&!!(e&n["e"].OPACITY)}};class I extends(w(L(z(j)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=n["d"].FILL,t.dotDensity="dot-density"===e.stride.fill,t.simple="simple"===e.stride.fill,t.outlinedFill=e.isOutlinedFill,t.dotDensity||t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),dotDensity:this.dotDensity,outlinedFill:this.outlinedFill,simple:this.simple,vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}get dotDensity(){return!!this.bit(v)}set dotDensity(e){this.setBit(v,e)}get simple(){return!!this.bit(x)}set simple(e){this.setBit(x,e)}get outlinedFill(){return!!this.bit(M)}set outlinedFill(e){this.setBit(M,e)}}I.shared=new I(0);class P extends(w(L(V(z(j))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=n["d"].MARKER,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}P.shared=new P(0);class T extends(w(L(z(j)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=n["d"].LINE,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}T.shared=new T(0);class F extends(w(L(V(z(j))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=n["d"].TEXT,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}F.shared=new F(0);class E extends(z(j)){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=n["d"].LABEL,t.setVV(e.vvFlags,e),t.mapAligned=Object(o["a"])(e.placement),t.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}E.shared=new E(0)},"405c":function(e,t,i){"use strict";i.d(t,"a",(function(){return m})),i.d(t,"b",(function(){return f})),i.d(t,"c",(function(){return a})),i.d(t,"d",(function(){return u}));var r=i("661c"),n=i("a9ab"),o=i("0eee");function a(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":{const t=e.symbolLayers;return t&&1===t.length?a(t[0]):null}case"CIMVectorMarker":{var t;const i=e.markerGraphics;if(!i||1!==i.length)return null;const r=i[0];if(!r)return null;const n=r.geometry;if(!n)return null;const o=r.symbol;return!o||"CIMPolygonSymbol"!==o.type&&"CIMLineSymbol"!==o.type||null!=(t=o.symbolLayers)&&t.some(e=>!!e.effects)?null:{geom:n,asFill:"CIMPolygonSymbol"===o.type}}case"sdf":return{geom:e.geom,asFill:e.asFill}}return null}function s(e){return e?e.rings?e.rings:e.paths?e.paths:void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:null:null}function l(e){let t=1/0,i=-1/0,r=1/0,n=-1/0;for(const o of e)for(const e of o)e[0]<t&&(t=e[0]),e[0]>i&&(i=e[0]),e[1]<r&&(r=e[1]),e[1]>n&&(n=e[1]);return new o["a"](t,r,i-t,n-r)}function c(e){let t=1/0,i=-1/0,r=1/0,n=-1/0;for(const o of e)for(const e of o)e[0]<t&&(t=e[0]),e[0]>i&&(i=e[0]),e[1]<r&&(r=e[1]),e[1]>n&&(n=e[1]);return[t,r,i,n]}function f(e){return e?e.rings?c(e.rings):e.paths?c(e.paths):Object(n["d"])(e)?[e.xmin,e.ymin,e.xmax,e.ymax]:null:null}function u(e,t,i,r,n){const[o,a,s,l]=e;if(s<o||l<a)return[0,0,0];const c=s-o,f=l-a,u=128,m=1,h=Math.floor(.5*(.5*u-m)),d=(u-2*(h+m))/Math.max(c,f),p=Math.round(c*d)+2*h,y=Math.round(f*d)+2*h;let v=1;t&&(v=y/d/(t.ymax-t.ymin));let b=0,S=0;if(r)if(n){if(t&&i&&t.ymax-t.ymin>0){const e=(t.xmax-t.xmin)/(t.ymax-t.ymin);b=r.x/(i*e),S=r.y/i}}else b=r.x,S=r.y;return b=.5*(t.xmax+t.xmin)+b*(t.xmax-t.xmin),S=.5*(t.ymax+t.ymin)+S*(t.ymax-t.ymin),b-=o,S-=a,b*=d,S*=d,b+=h,S+=h,[v,b/p-.5,-(S/y-.5)]}function m(e){const t=s(e.geom),i=l(t),r=128,n=1,o=Math.floor(.5*(.5*r-n)),a=(r-2*(o+n))/Math.max(i.width,i.height),c=Math.round(i.width*a)+2*o,f=Math.round(i.height*a)+2*o,u=[];for(const s of t)if(s&&s.length>1){const t=[];for(const r of s){let[n,s]=r;n-=i.x,s-=i.y,n*=a,s*=a,n+=o-.5,s+=o-.5,e.asFill?t.push([n,s]):t.push([Math.round(n),Math.round(s)])}if(e.asFill){const e=t.length-1;t[0][0]===t[e][0]&&t[0][1]===t[e][1]||t.push(t[0])}u.push(t)}const m=h(u,c,f,o);return e.asFill&&d(u,c,f,o,m),[p(m,o),c,f]}function h(e,t,i,r){const n=t*i,o=new Array(n),a=r*r+1;for(let s=0;s<n;++s)o[s]=a;for(const s of e){const e=s.length;for(let n=1;n<e;++n){const e=s[n-1],a=s[n];let l,c,f,u;e[0]<a[0]?(l=e[0],c=a[0]):(l=a[0],c=e[0]),e[1]<a[1]?(f=e[1],u=a[1]):(f=a[1],u=e[1]);let m=Math.floor(l)-r,h=Math.floor(c)+r,d=Math.floor(f)-r,p=Math.floor(u)+r;m<0&&(m=0),h>t&&(h=t),d<0&&(d=0),p>i&&(p=i);const y=a[0]-e[0],v=a[1]-e[1],b=y*y+v*v;for(let r=m;r<h;r++)for(let n=d;n<p;n++){let s,l,c=(r-e[0])*y+(n-e[1])*v;c<0?(s=e[0],l=e[1]):c>b?(s=a[0],l=a[1]):(c/=b,s=e[0]+c*y,l=e[1]+c*v);const f=(r-s)*(r-s)+(n-l)*(n-l),u=(i-n-1)*t+r;f<o[u]&&(o[u]=f)}}}for(let s=0;s<n;++s)o[s]=Math.sqrt(o[s]);return o}function d(e,t,i,r,n){for(const o of e){const e=o.length;for(let a=1;a<e;++a){const e=o[a-1],s=o[a];let l,c,f,u;e[0]<s[0]?(l=e[0],c=s[0]):(l=s[0],c=e[0]),e[1]<s[1]?(f=e[1],u=s[1]):(f=s[1],u=e[1]);let m=Math.floor(l),h=Math.floor(c)+1,d=Math.floor(f),p=Math.floor(u)+1;m<r&&(m=r),h>t-r&&(h=t-r),d<r&&(d=r),p>i-r&&(p=i-r);for(let o=d;o<p;++o){if(e[1]>o==s[1]>o)continue;const a=(i-o-1)*t;for(let t=m;t<h;++t)t<(s[0]-e[0])*(o-e[1])/(s[1]-e[1])+e[0]&&(n[a+t]=-n[a+t]);for(let e=r;e<m;++e)n[a+e]=-n[a+e]}}}}function p(e,t){const i=2*t,n=e.length,o=new Uint8Array(4*n);for(let a=0;a<n;++a){const t=.5-e[a]/i;Object(r["a"])(t,o,4*a)}return o}},"4fcb":function(e,t,i){"use strict";i.d(t,"a",(function(){return Y})),i.d(t,"b",(function(){return M}));var r=i("9ef0"),n=i("e92d"),o=i("b2b2"),a=i("a915"),s=i("b3b6"),l=i("82fa"),c=i("793f"),f=i("405c"),u=i("36b8"),m=i("5dbb"),h=i("89cb");const d=n["a"].getLogger("esri.symbols.cim.cimAnalyzer");function p(e){switch(e){case"Butt":return 0;case"Square":return 2;default:return 1}}function y(e){switch(e){case"Bevel":return 0;case"Miter":return 2;default:return 1}}function v(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":return"center";case"Justify":return"justify"}}function b(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function S(e){let t="",i="";if(e){const r=e.toLowerCase();-1!==r.indexOf("italic")?t="italic":-1!==r.indexOf("oblique")&&(t="oblique"),-1!==r.indexOf("bold")?i="bold":-1!==r.indexOf("light")&&(i="lighter")}return{style:t,weight:i}}function g(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function O(e,t,i,r){let n;e[t]?n=e[t]:(n={},e[t]=n),n[i]=r}function N(e){const t=e.markerPlacement;return t&&t.angleToLine?1:0}async function M(e,t,i,r,n){const o=null!=r?r:[];if(!e)return o;let a,s;const c={};if("CIMSymbolReference"!==e.type)return d.error("Expect cim type to be 'CIMSymbolReference'"),o;if(a=e.symbol,s=e.primitiveOverrides,s){const e=[];for(const i of s){const r=i.valueExpressionInfo;if(r&&t){const n=r.expression,o=Object(l["d"])(n,t.spatialReference,t.fields).then(e=>{e&&O(c,i.primitiveName,i.propertyName,e)});e.push(o)}else null!=i.value&&O(c,i.primitiveName,i.propertyName,i.value)}e.length>0&&await Promise.all(e)}const f=[];switch($(a,i,f),f.length>0&&await Promise.all(f),a.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":x(a,s,c,t,o,i,n)}return o}function x(e,t,i,r,n,o,a){if(!e)return;const s=e.symbolLayers;if(!s)return;const l=e.effects;let f;const u=c["b"].getSize(e);"CIMPointSymbol"===e.type&&"Map"===e.angleAlignment&&(f=1);let m=s.length;for(;m--;){const h=s[m];if(!h||!1===h.enable)continue;let p;l&&l.length&&(p=[...l]);const y=h.effects;y&&y.length&&(l?p.push(...y):p=[...y]);const v=[];switch(c["c"].findApplicableOverrides(h,t,v),h.type){case"CIMSolidFill":C(h,p,i,v,r,n);break;case"CIMPictureFill":k(h,p,i,v,r,o,n);break;case"CIMHatchFill":j(h,p,i,v,r,n);break;case"CIMGradientFill":z(h,p,i,v,r,n);break;case"CIMSolidStroke":V(h,p,i,v,r,n,"CIMPolygonSymbol"===e.type,u);break;case"CIMPictureStroke":w(h,p,i,v,r,n,"CIMPolygonSymbol"===e.type,u);break;case"CIMGradientStroke":L(h,p,i,v,r,n,"CIMPolygonSymbol"===e.type,u);break;case"CIMCharacterMarker":if(I(h,p,i,v,r,n))break;break;case"CIMPictureMarker":if(I(h,p,i,v,r,n))break;"CIMLineSymbol"===e.type&&(f=N(h)),P(h,p,i,v,r,o,n,f,u);break;case"CIMVectorMarker":if(I(h,p,i,v,r,n))break;"CIMLineSymbol"===e.type&&(f=N(h)),T(h,p,i,v,r,n,o,f,u,a);break;default:d.error("Cannot analyze CIM layer",h.type)}}}function C(e,t,i,r,n,o){const a=e.primitiveName,l=Object(u["e"])(e.color),[c,f]=B(r,a),m=Object(s["b"])(JSON.stringify(e)+f).toString();o.push({type:"fill",templateHash:m,materialHash:c?()=>m:m,cim:e,materialOverrides:null,colorLocked:e.colorLocked,color:U(a,i,"Color",n,l,J),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:t})}function k(e,t,i,r,n,a,l){const c=e.primitiveName,f=e.tintColor?Object(u["e"])(e.tintColor):{r:255,g:255,b:255,a:1},[m,h]=B(r,c),d=Object(s["b"])(JSON.stringify(e)+h).toString(),p=Object(s["b"])(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString();let y=Object(u["f"])(e.scaleX);if("width"in e){const t=e.width;let i=1;const r=a.getResource(e.url);Object(o["l"])(r)&&(i=r.width/r.height),y/=i*(e.height/t)}l.push({type:"fill",templateHash:d,materialHash:m?()=>p:p,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:t,color:U(c,i,"TintColor",n,f,J),height:U(c,i,"Height",n,e.height),scaleX:U(c,i,"ScaleX",n,y),angle:U(c,i,"Rotation",n,Object(u["f"])(e.rotation)),offsetX:U(c,i,"OffsetX",n,Object(u["f"])(e.offsetX)),offsetY:U(c,i,"OffsetY",n,Object(u["f"])(e.offsetY)),url:e.url})}function j(e,t,i,r,n,o){const a=["Rotation","OffsetX","OffsetY"],l=r.filter(t=>t.primitiveName!==e.primitiveName&&-1===a.indexOf(t.propertyName)),c=e.primitiveName,[f,m]=B(r,c),h=Object(s["b"])(JSON.stringify(e)+m).toString(),d=Object(s["b"])(`${e.separation}${JSON.stringify(e.lineSymbol)}`).toString();o.push({type:"fill",templateHash:h,materialHash:f?_(d,i,l,n):d,cim:e,materialOverrides:l,colorLocked:e.colorLocked,effects:t,color:{r:255,g:255,b:255,a:1},height:U(c,i,"Separation",n,e.separation),scaleX:1,angle:U(c,i,"Rotation",n,Object(u["f"])(e.rotation)),offsetX:U(c,i,"OffsetX",n,Object(u["f"])(e.offsetX)),offsetY:U(c,i,"OffsetY",n,Object(u["f"])(e.offsetY))})}function z(e,t,i,r,n,o){const a=e.primitiveName,[l,c]=B(r,a),f=Object(s["b"])(JSON.stringify(e)+c).toString();o.push({type:"fill",templateHash:f,materialHash:l?_(f,i,r,n):f,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:t,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1})}function V(e,t,i,r,n,o,a,l){const c=e.primitiveName,f=Object(u["e"])(e.color),m=void 0!==e.width?e.width:4,h=p(e.capStyle),d=y(e.joinStyle),v=e.miterLimit,[b,S]=B(r,c),g=Object(s["b"])(JSON.stringify(e)+S).toString();let O,N;if(t&&t.length>0){const i=t[t.length-1];if("CIMGeometricEffectDashes"===i.type&&"NoConstraint"===i.lineDashEnding){const i=(t=[...e.effects]).pop();O=i.dashTemplate,N=i.scaleDash}}o.push({type:"line",templateHash:g,materialHash:b?()=>g:g,cim:e,materialOverrides:null,isOutline:a,colorLocked:e.colorLocked,effects:t,color:U(c,i,"Color",n,f,J),width:U(c,i,"Width",n,m),cap:U(c,i,"CapStyle",n,h),join:U(c,i,"JoinStyle",n,d),miterLimit:U(c,i,"MiterLimit",n,v),referenceWidth:l,zOrder:H(e.name),dashTemplate:O,scaleDash:N})}function w(e,t,i,r,n,o,a,l){const c=Object(s["b"])(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString(),f=e.primitiveName,m=Object(u["e"])(e.tintColor),h=void 0!==e.width?e.width:4,d=p(e.capStyle),v=y(e.joinStyle),b=e.miterLimit,[S,g]=B(r,f),O=Object(s["b"])(JSON.stringify(e)+g).toString();o.push({type:"line",templateHash:O,materialHash:S?()=>c:c,cim:e,materialOverrides:null,isOutline:a,colorLocked:e.colorLocked,effects:t,color:U(f,i,"TintColor",n,m,J),width:U(f,i,"Width",n,h),cap:U(f,i,"CapStyle",n,d),join:U(f,i,"JoinStyle",n,v),miterLimit:U(f,i,"MiterLimit",n,b),referenceWidth:l,zOrder:H(e.name),dashTemplate:null,scaleDash:!1,url:e.url})}function L(e,t,i,r,n,o,a,l){const c=e.primitiveName,f=void 0!==e.width?e.width:4,u=p(e.capStyle),m=y(e.joinStyle),h=e.miterLimit,[d,v]=B(r,c),b=Object(s["b"])(JSON.stringify(e)+v).toString();o.push({type:"line",templateHash:b,materialHash:d?_(b,i,r,n):b,cim:e,materialOverrides:null,isOutline:a,colorLocked:e.colorLocked,effects:t,color:{r:128,g:128,b:128,a:1},width:U(c,i,"Width",n,f),cap:U(c,i,"CapStyle",n,u),join:U(c,i,"JoinStyle",n,m),miterLimit:U(c,i,"MiterLimit",n,h),referenceWidth:l,zOrder:H(e.name),dashTemplate:null,scaleDash:!1})}function I(e,t,i,r,n,o){const a=e.markerPlacement;if(!a||"CIMMarkerPlacementInsidePolygon"!==a.type)return!1;const l=a,c=["Rotation","OffsetX","OffsetY"],f=r.filter(t=>t.primitiveName!==e.primitiveName&&-1===c.indexOf(t.propertyName)),m="url"in e?e.url:null,[h,d]=B(r,l.primitiveName),p=Object(s["b"])(JSON.stringify(e)+d).toString();let y=l.stepY,v=null,b=1;return a.shiftOddRows&&(y*=2,v=function(e){return e?2*e:0},b=.5),o.push({type:"fill",templateHash:p,materialHash:h?_(p,i,f,n):p,cim:e,materialOverrides:f,colorLocked:e.colorLocked,effects:t,color:{r:255,g:255,b:255,a:1},height:U(l.primitiveName,i,"StepY",n,y,v),scaleX:b,angle:U(l.primitiveName,i,"GridAngle",n,l.gridAngle),offsetX:U(l.primitiveName,i,"OffsetX",n,Object(u["f"])(l.offsetX)),offsetY:U(l.primitiveName,i,"OffsetY",n,Object(u["f"])(l.offsetY)),url:m}),!0}function P(e,t,i,r,n,a,l,c,f){var m;const h=e.primitiveName,d=Object(u["f"])(e.size);let p=Object(u["f"])(e.scaleX);const y=Object(u["f"])(e.rotation),v=Object(u["f"])(e.offsetX),b=Object(u["f"])(e.offsetY),S=e.tintColor?Object(u["e"])(e.tintColor):{r:255,g:255,b:255,a:1},g=Object(s["b"])(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString(),[O,N]=B(r,h),M=Object(s["b"])(JSON.stringify(e)+N).toString(),x=null!=(m=e.anchorPoint)?m:{x:0,y:0};if("width"in e){const t=e.width;let i=1;const r=a.getResource(e.url);Object(o["l"])(r)&&(i=r.width/r.height),p/=i*(d/t)}l.push({type:"marker",templateHash:M,materialHash:O?()=>g:g,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:t,scaleSymbolsProportionally:!1,alignment:c,size:U(h,i,"Size",n,d),scaleX:U(h,i,"ScaleX",n,p),rotation:U(h,i,"Rotation",n,y),offsetX:U(h,i,"OffsetX",n,v),offsetY:U(h,i,"OffsetY",n,b),color:U(h,i,"TintColor",n,S,J),anchorPoint:{x:x.x,y:-x.y},isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:e.rotateClockwise,referenceSize:f,sizeRatio:1,markerPlacement:e.markerPlacement,url:e.url})}function T(e,t,i,r,n,o,a,s,l,c){const f=e.markerGraphics;if(!f)return;let u=0;if(e.scaleSymbolsProportionally){const t=e.frame;t&&(u=t.ymax-t.ymin)}for(const m of f)if(m){const f=m.symbol;if(!f)continue;switch(f.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":E(e,t,m,r,i,n,o,a,s,l,u,c);break;case"CIMTextSymbol":F(e,t,m,i,r,n,o,s,l,u)}}}function F(e,t,i,r,n,o,a,l,f,m){const h=[];c["c"].findApplicableOverrides(i,n,h);const d=i.geometry;if(!("x"in d)||!("y"in d))return;const p=i.symbol,y=g(p),O=S(p.fontStyleName),N=Object(u["m"])(p.fontFamilyName);p.font={family:N,decoration:y,...O};const M=e.frame,x=d.x-.5*(M.xmin+M.xmax),C=d.y-.5*(M.ymin+M.ymax),k=e.size/m,j=e.primitiveName,z=Object(u["f"])(p.height)*k,V=Object(u["f"])(p.angle),w=(Object(u["f"])(p.offsetX)+x)*k,L=(Object(u["f"])(p.offsetY)+C)*k,I=Object(u["e"])(c["b"].getFillColor(p));let P=Object(u["e"])(c["b"].getStrokeColor(p)),T=c["b"].getStrokeWidth(p);T||(P=Object(u["e"])(c["b"].getFillColor(p.haloSymbol)),T=p.haloSize*k);const[F,E]=B(n,j),A=JSON.stringify(e.effects)+Number(e.colorLocked)+JSON.stringify(e.anchorPoint)+e.anchorPointUnits+JSON.stringify(e.markerPlacement),R=Object(s["b"])(JSON.stringify(i)+A+E).toString(),X=U(i.primitiveName,r,"TextString",o,i.textString,u["a"],p.textCase),{fontStyleName:H}=p,J=N+(H?"-"+H.toLowerCase():"-regular"),_=J;a.push({type:"text",templateHash:R,materialHash:F||"function"==typeof X||X.match(/\[(.*?)\]/)?(e,t,i)=>_+"-"+Object(u["d"])(X,e,t,i):_+"-"+Object(s["b"])(X),cim:p,materialOverrides:null,colorLocked:e.colorLocked,effects:t,alignment:l,anchorPoint:{x:e.anchorPoint?e.anchorPoint.x:0,y:e.anchorPoint?e.anchorPoint.y:0},isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,fontName:J,decoration:y,weight:U(j,r,"Weight",o,O.weight),style:U(j,r,"Size",o,O.style),size:U(j,r,"Size",o,z),angle:U(j,r,"Rotation",o,V),offsetX:U(j,r,"OffsetX",o,w),offsetY:U(j,r,"OffsetY",o,L),horizontalAlignment:v(p.horizontalAlignment),verticalAlignment:b(p.verticalAlignment),text:X,color:I,outlineColor:P,outlineSize:T,referenceSize:f,sizeRatio:1,markerPlacement:e.markerPlacement})}function E(e,t,i,r,n,o,a,l,h,d,p,y){const v=i.symbol,b=v.symbolLayers;if(!b)return;if(y)return void R(e,t,i,n,r,o,a,l,h,d,p);let S=b.length;if(D(b))return void A(e,i,b,r,n,o,a,h,d,p);const g=m["a"].applyEffects(v.effects,i.geometry);if(g)for(;S--;){const y=b[S];if(y&&!1!==y.enable)switch(y.type){case"CIMSolidFill":case"CIMSolidStroke":{var O;const l=m["a"].applyEffects(y.effects,g),v=Object(f["b"])(l);if(!v)continue;const[b,S,N]=Object(f["d"])(v,e.frame,e.size,e.anchorPoint,"Relative"!==e.anchorPointUnits),M="CIMSolidFill"===y.type,x={type:"sdf",geom:l,asFill:M},C=e.primitiveName,k=null!=(O=Object(u["f"])(e.size))?O:10,j=Object(u["f"])(e.rotation),z=Object(u["f"])(e.offsetX),V=Object(u["f"])(e.offsetY),w=y.path,L=y.primitiveName,I=Object(u["e"])(M?c["b"].getFillColor(y):c["b"].getStrokeColor(y)),P=M?{r:0,g:0,b:0,a:0}:Object(u["e"])(c["b"].getStrokeColor(y)),T=c["b"].getStrokeWidth(y);if(!M&&!T)break;let F=!1,E="";for(const e of r)e.primitiveName!==L&&e.primitiveName!==C||(void 0!==e.value?E+=`-${e.primitiveName}-${e.propertyName}-${JSON.stringify(e.value)}`:e.valueExpressionInfo&&(F=!0));const A=JSON.stringify({...e,markerGraphics:null}),R=Object(s["b"])(JSON.stringify(x)+w).toString(),X={type:"marker",templateHash:Object(s["b"])(JSON.stringify(i)+JSON.stringify(y)+A+E).toString(),materialHash:F?()=>R:R,cim:x,materialOverrides:null,colorLocked:e.colorLocked,effects:t,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:h,anchorPoint:{x:S,y:N},isAbsoluteAnchorPoint:!1,size:U(e.primitiveName,n,"Size",o,k),rotation:U(e.primitiveName,n,"Rotation",o,j),offsetX:U(e.primitiveName,n,"OffsetX",o,z),offsetY:U(e.primitiveName,n,"OffsetY",o,V),scaleX:1,frameHeight:p,rotateClockwise:e.rotateClockwise,referenceSize:d,sizeRatio:b,color:U(L,n,"Color",o,I,J),outlineColor:U(L,n,"Color",o,P,J),outlineWidth:U(L,n,"Width",o,T),markerPlacement:e.markerPlacement,path:w};a.push(X);break}default:R(e,t,i,n,r,o,a,l,h,d,p)}}}function A(e,t,i,r,n,o,a,l,m,h){const d=t.geometry,p=i[0],y=i[1],v=Object(f["b"])(d);if(!v)return;const[b,S,g]=Object(f["d"])(v,e.frame,e.size,e.anchorPoint,"Relative"!==e.anchorPointUnits),O={type:"sdf",geom:d,asFill:!0},N=e.primitiveName,M=Object(u["f"])(e.size),x=Object(u["f"])(e.rotation),C=Object(u["f"])(e.offsetX),k=Object(u["f"])(e.offsetY),j=y.path,z=y.primitiveName,V=p.primitiveName,w=Object(u["e"])(c["b"].getFillColor(y)),L=Object(u["e"])(c["b"].getStrokeColor(p)),I=c["b"].getStrokeWidth(p);let P=!1,T="";for(const s of r)s.primitiveName!==z&&s.primitiveName!==V&&s.primitiveName!==N||(void 0!==s.value?T+=`-${s.primitiveName}-${s.propertyName}-${JSON.stringify(s.value)}`:s.valueExpressionInfo&&(P=!0));const F=JSON.stringify({...e,markerGraphics:null}),E=Object(s["b"])(JSON.stringify(O)+j).toString(),A={type:"marker",templateHash:Object(s["b"])(JSON.stringify(t)+JSON.stringify(y)+JSON.stringify(p)+F+T).toString(),materialHash:P?()=>E:E,cim:O,materialOverrides:null,colorLocked:e.colorLocked,effects:e.effects,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:l,anchorPoint:{x:S,y:g},isAbsoluteAnchorPoint:!1,size:U(e.primitiveName,n,"Size",o,M),rotation:U(e.primitiveName,n,"Rotation",o,x),offsetX:U(e.primitiveName,n,"OffsetX",o,C),offsetY:U(e.primitiveName,n,"OffsetY",o,k),scaleX:1,frameHeight:h,rotateClockwise:e.rotateClockwise,referenceSize:m,sizeRatio:b,color:U(z,n,"Color",o,w,J),outlineColor:U(V,n,"Color",o,L,J),outlineWidth:U(V,n,"Width",o,I),markerPlacement:e.markerPlacement,path:j};a.push(A)}function R(e,t,i,r,n,o,l,f,m,h,d){const p=X(e,i);let y=[];const v=["Rotation","OffsetX","OffsetY"];y=n.filter(t=>t.primitiveName!==e.primitiveName||-1===v.indexOf(t.propertyName));let b="";for(const a of n)void 0!==a.value&&(b+=`-${a.primitiveName}-${a.propertyName}-${JSON.stringify(a.value)}`);const[S,g,O]=c["b"].getTextureAnchor(p,f),N=e.primitiveName,M=Object(u["f"])(e.rotation),x=Object(u["f"])(e.offsetX),C=Object(u["f"])(e.offsetY),k=Object(s["b"])(JSON.stringify(p)+b).toString(),j={type:"marker",templateHash:k,materialHash:0===y.length?k:_(k,r,y,o),cim:p,materialOverrides:y,colorLocked:e.colorLocked,effects:t,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:m,anchorPoint:{x:S,y:g},isAbsoluteAnchorPoint:!1,size:e.size,rotation:U(N,r,"Rotation",o,M),offsetX:U(N,r,"OffsetX",o,x),offsetY:U(N,r,"OffsetY",o,C),color:{r:255,g:255,b:255,a:1},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:d,rotateClockwise:e.rotateClockwise,referenceSize:h,sizeRatio:O/Object(a["g"])(e.size),markerPlacement:e.markerPlacement};l.push(j)}function X(e,t){return{type:e.type,enable:!0,name:e.name,colorLocked:e.colorLocked,primitiveName:e.primitiveName,anchorPoint:e.anchorPoint,anchorPointUnits:e.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:e.rotateClockwise,rotation:0,size:e.size,billboardMode3D:e.billboardMode3D,depth3D:e.depth3D,frame:e.frame,markerGraphics:[t],scaleSymbolsProportionally:e.scaleSymbolsProportionally,respectFrame:e.respectFrame,clippingPath:e.clippingPath}}function H(e){if(e&&0===e.indexOf("Level_")){const t=parseInt(e.substr(6),10);if(NaN!==t)return t}return 0}function J(e){if(!e||0===e.length)return null;const t=new r["a"](e).toRgba();return{r:t[0],g:t[1],b:t[2],a:t[3]}}function U(e,t,i,r,n,o,a){const s=t[e];if(s){const e=s[i];if("string"==typeof e||"number"==typeof e||e instanceof Array)return o?o.call(null,e,a):e;if(null!=e&&e instanceof l["a"])return(t,i,s)=>{let l=Object(h["a"])(e,t,{$view:s},r.geometryType,i);return null!==l&&o&&(l=o.call(null,l,a)),null!==l?l:n}}return n}function _(e,t,i,r){for(const n of i)if(n.valueExpressionInfo){const e=t[n.primitiveName]&&t[n.primitiveName][n.propertyName];e instanceof l["a"]&&(n.fn=(t,i,n)=>Object(h["a"])(e,t,{$view:n},r.geometryType,i))}return(t,r,n)=>{for(const e of i)e.fn&&(e.value=e.fn(t,r,n));return Object(s["b"])(e+c["c"].buildOverrideKey(i)).toString()}}function Y(e,t){if(!t||0===t.length)return e;const i=JSON.parse(JSON.stringify(e));return c["c"].applyOverrides(i,t),i}function B(e,t){let i=!1,r="";for(const n of e)n.primitiveName===t&&(void 0!==n.value?r+=`-${n.primitiveName}-${n.propertyName}-${JSON.stringify(n.value)}`:n.valueExpressionInfo&&(i=!0));return[i,r]}function $(e,t,i){if(e&&t)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const r=e.symbolLayers;if(!r)return;for(const e of r)switch(e.type){case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMCharacterMarker":case"CIMPictureMarker":"url"in e&&e.url&&i.push(t.fetchResource(e.url,null));break;case"CIMVectorMarker":{const r=e.markerGraphics;if(!r)continue;for(const e of r)if(e){const r=e.symbol;r&&$(r,t,i)}}}}}}const D=e=>e&&2===e.length&&e[0].enable&&e[1].enable&&"CIMSolidStroke"===e[0].type&&"CIMSolidFill"===e[1].type&&!e[0].effects&&!e[1].effects},"5dbb":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var r=i("a9ab"),n=i("b6a7"),o=i("fe24"),a=i("9344");const s=96/72;class l{static executeEffects(e,t){const i=Object(n["c"])(t),r=s;let l=new o["a"](i);for(const n of e){const e=Object(a["a"])(n);e&&(l=e.execute(l,n,r,!0))}return l}static next(e){const t=e.next();return Object(n["d"])(t),t}static applyEffects(e,t){if(!e)return t;let i=new o["a"](t);for(const r of e){const e=Object(a["a"])(r);e&&(i=e.execute(i,r,1,!1))}let n,s=null;for(;n=i.next();)s?Object(r["h"])(s)?Object(r["h"])(n)&&s.paths.push(...n.paths):Object(r["g"])(s)&&Object(r["g"])(n)&&s.rings.push(...n.rings):s=n;return s}}},"9b77":function(e,t,i){"use strict";function r(e){switch(e){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}i.d(t,"a",(function(){return r}))},f47d:function(e,t,i){"use strict";i.d(t,"a",(function(){return O})),i.d(t,"b",(function(){return g}));var r=i("4fcb"),n=i("c84e"),o=i("18c6");const a={marker:n["d"].MARKER,fill:n["d"].FILL,line:n["d"].LINE,text:n["d"].TEXT};class s{constructor(e,t,i,r){const n={minScale:null==t?void 0:t.minScale,maxScale:null==t?void 0:t.maxScale},s=l(n);this.layers=e,this.data=t,this.hash=this._createHash()+s,this.rendererKey=i;const c={isOutline:!1,isOutlinedFill:!1,placement:null,stride:{fill:"default"},vvFlags:i};for(const l of e){const e=a[l.type];l.materialKey=Object(o["g"])(e,c),l.maxVVSize=r,l.scaleInfo=n,l.templateHash+=s}}get type(){return"expanded-cim"}_createHash(){let e="";for(const t of this.layers)e+=t.templateHash;return e}}function l(e){return e.minScale||e.maxScale?e.minScale+"-"+e.maxScale:""}var c=i("49b8"),f=i("ce50"),u=i("f4cc"),m=i("e041"),h=i("0224"),d=i("fcf2"),p=i("343a");async function y(e,t,i){if(!e.name)return Promise.reject(new f["a"]("style-symbol-reference-name-missing","Missing name in style symbol reference"));if(e.styleName&&"Esri2DPointSymbolsStyle"===e.styleName)return v(e,i);try{return b(await Object(p["b"])(e,t,i),e.name,t,i)}catch(r){return Object(u["w"])(r),null}}async function v(e,t){const i=p["a"].replace(/\{SymbolName\}/gi,e.name);try{const e=await Object(p["d"])(i,t);return Object(p["c"])(e.data)}catch(r){return Object(u["w"])(r),null}}async function b(e,t,i,r){const n=e.data,o={portal:i&&i.portal||h["a"].getDefault(),url:Object(m["K"])(e.baseUrl),origin:"portal-item"},a=n.items.find(e=>e.name===t);if(!a)throw new f["a"]("symbolstyleutils:symbol-name-not-found",`The symbol name '${t}' could not be found`,{symbolName:t});let s=Object(d["a"])(Object(p["e"])(a,"cimRef"),o);Object(c["b"])()&&(s=Object(c["a"])(s));try{const e=await Object(p["d"])(s,r);return Object(p["c"])(e.data)}catch(l){return Object(u["w"])(l),null}}const S=async(e,t,i)=>new s(await Object(r["b"])(e.data,t,i),e.data,e.rendererKey,e.maxVVSize),g=async(e,t,i,r)=>{if(!e)return null;if("cim"===e.type)return S(e,t,i);if("web-style"===e.type){const n={type:"cim",data:await y(e,null,r),rendererKey:e.rendererKey,maxVVSize:e.maxVVSize};return S(n,t,i)}return e};function O(e){if(!e)return null;const{type:t,cim:i,url:r,materialHash:n}=e,o={cim:i,type:t,mosaicHash:n,url:r,size:null,dashTemplate:null,path:null,text:null,fontName:null};switch(t){case"marker":o.size=e.size,o.path=e.path;break;case"line":o.dashTemplate=e.dashTemplate;break;case"text":o.text=e.text,o.fontName=e.fontName}return o}}}]);
//# sourceMappingURL=chunk-7ad0a1ad.470e5589.js.map