{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/views/2d/layers/TileLayerView2D.js","webpack:///./node_modules/@arcgis/core/views/2d/layers/BitmapTileLayerView2D.js","webpack:///./node_modules/@arcgis/core/views/layers/TileLayerView.js","webpack:///./node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js","webpack:///./node_modules/@arcgis/core/views/layers/RefreshableLayerView.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/webgl/Mesh2D.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/webgl/ClippingInfo.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/webgl/WGLContainer.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/Bitmap.js","webpack:///./node_modules/@arcgis/core/views/2d/layers/support/imageUtils.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/BitmapTile.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/BitmapTileContainer.js","webpack:///./node_modules/@arcgis/core/views/support/drapedUtils.js"],"names":["d","getLogger","_","I","super","arguments","this","_tileStrategy","_fetchQueue","layer","e","tileInfo","i","spatialReference","s","equals","view","watch","doRefresh","addResolvingPromise","Promise","reject","resampling","pause","state","update","resume","notifyChange","tileServers","_tileInfoView","fullExtent","tileInfoView","concurrency","length","process","t","fetchTile","cachePolicy","acquireTile","releaseTile","requestUpdate","container","requestRender","attach","detach","destroy","clear","removeAllChildren","updateRequested","suspended","reset","tiles","forEach","_enqueueTileFetch","_bitmapView","createTile","bitmap","x","y","getTileCoords","key","resolution","getTileResolution","width","height","size","addChild","abort","id","removeChild","once","tilemapCache","signal","r","resamplingLevel","a","_fetchImage","c","getTileParentId","l","o","fetchAvailabilityUpsample","level","row","col","has","push","source","error","prototype","T","timeline","record","title","type","get","allSublayers","toArray","filter","minScale","maxScale","popupTemplate","popupEnabled","visible","map","async","createQuery","event","renderer","geometry","createFetchPopupFeaturesQueryGeometry","outFields","getRequiredFields","queryFeatures","features","then","concat","value","Boolean","xoffset","Math","max","abs","yoffset","n","stops","maxSize","minSize","f","floor","pointerType","visualVariables","symbol","uniqueValueInfos","classBreakInfos","sortChildren","setStencilReference","renderChildren","createRenderParams","requiredLevel","getClosestInfoForScale","scale","displayLevel","scaleToZoom","prepareRenderPasses","registerRenderPass","name","brushes","drawPhase","DEBUG","MAP","HIGHLIGHT","target","getStencilTarget","children","setTransform","stencilRef","handles","add","dataChanged","catch","declaredClass","pixelBlock","extent","originalPixelBlock","getAsRGBA","createImageData","data","set","putImageData","renderedRasterPixels","Uint8Array","buffer","BYTES_PER_ELEMENT","coords","lengths","slice","h","_cache","vertices","indices","primitiveType","isMapSpace","fromScreenExtent","xmin","ymin","xmax","ymax","path","Uint32Array","fromPolygon","fromMapExtent","fromRect","m","u","toScreen","indexBuffer","dispose","vertexBuffers","createIndex","Object","keys","reduce","createVertex","parseFloat","_clip","stage","_handle","_invalidate","ready","mesh","vao","_destroyGL","remove","_lastWidth","_lastHeight","_createMesh","getIndexBuffer","getVertexBuffers","dvs","left","right","top","bottom","_createScreenRect","fromPath","fromGeometry","constructor","_clips","clips","_updateClippingInfo","painter","globalOpacity","profiler","LABEL","computedOpacity","recordContainerStart","beforeRenderLayer","_clippingInfos","updateTransforms","compositeLayer","recordContainerEnd","_renderPasses","beforeRender","render","afterRender","requireFBO","requiresDedicatedFBO","clip","LABEL_ALPHA","onAttach","onDetach","items","fromClipArea","document","createElement","getContext","pixelFormat","internalFormat","dataType","wrapMode","g","requestRenderOnSourceChangedEnabled","_textureInvalidated","coordScale","_height","pixelRatio","rotation","_source","_width","blendFunction","bind","_texture","sourceWidth","sourceHeight","invalidateTexture","HTMLImageElement","naturalHeight","naturalWidth","updateTexture","context","transforms","toScreenNoRotation","PI","displayViewMat3","mips","descriptor","hasMipmap","generateMipmap","setSamplingMode","samplingMode","bindTexture","resize","getRenderedRasterPixels","setData","getLODInfoAt","getXForColumn","getYForRow","v","w","round","M","F","L","drawImage","tileMat3","some","getTileBounds","doRender","overlayPixelSizeInMapUnits","basemapSpatialReference","p","min"],"mappings":"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","file":"js/chunk-002f2ba8.fff427b3.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import i from\"../../../core/Logger.js\";import{isAbortError as s}from\"../../../core/promiseUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{BitmapTileLayerView2D as l}from\"./BitmapTileLayerView2D.js\";import{LayerView2DMixin as o}from\"./LayerView2D.js\";import{createBlankImage as h,resampleImage as n}from\"./support/imageUtils.js\";import c from\"../tiling/TileInfoView.js\";import u from\"../tiling/TileKey.js\";import p from\"../tiling/TileQueue.js\";import f from\"../tiling/TileStrategy.js\";import m from\"../../layers/LayerView.js\";import{RefreshableLayerView as y}from\"../../layers/RefreshableLayerView.js\";import{TileLayerView as w}from\"../../layers/TileLayerView.js\";import{createQueryGeometry as g}from\"../../support/drapedUtils.js\";const d=i.getLogger(\"esri.views.2d.layers.TileLayerView2D\"),_=[0,0];let I=class extends(w(y(l(o(m))))){constructor(){super(...arguments),this._tileStrategy=null,this._fetchQueue=null,this.layer=null}initialize(){const e=this.layer.tileInfo,i=e&&e.spatialReference;let s;i||(s=new t(\"layerview:tiling-information-missing\",\"The layer doesn't provide tiling information\",{layer:this.layer})),i.equals(this.view.spatialReference)||(s=new t(\"layerview:spatial-reference-incompatible\",\"The spatial reference of this layer does not meet the requirements of the view\",{layer:this.layer})),this.watch(\"resampling\",(()=>{this.doRefresh()})),s&&this.addResolvingPromise(Promise.reject(s))}get resampling(){return!(\"resampling\"in this.layer)||!1!==this.layer.resampling}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume(),this.notifyChange(\"updating\")}attach(){const e=\"tileServers\"in this.layer?this.layer.tileServers:null;this._tileInfoView=new c(this.layer.tileInfo,this.layer.fullExtent),this._fetchQueue=new p({tileInfoView:this._tileInfoView,concurrency:e&&10*e.length||10,process:(e,t)=>this.fetchTile(e,t)}),this._tileStrategy=new f({cachePolicy:\"keep\",resampling:this.resampling,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView}),this.requestUpdate(),this.container.requestRender(),super.attach()}detach(){super.detach(),this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}createFetchPopupFeaturesQueryGeometry(e,t){return g(e,t,this.view)}async doRefresh(){this.updateRequested||this.suspended||(this._fetchQueue.reset(),this._tileStrategy.tiles.forEach((e=>this._enqueueTileFetch(e))),this.notifyChange(\"updating\"))}isUpdating(){var e;return(null==(e=this._fetchQueue)?void 0:e.length)>0}acquireTile(e){const t=this._bitmapView.createTile(e),i=t.bitmap;return[i.x,i.y]=this._tileInfoView.getTileCoords(_,t.key),i.resolution=this._tileInfoView.getTileResolution(t.key),[i.width,i.height]=this._tileInfoView.tileInfo.size,this._enqueueTileFetch(t),this._bitmapView.addChild(t),this.requestUpdate(),t}releaseTile(e){this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once(\"detach\",(()=>e.destroy())),this.requestUpdate()}async fetchTile(e,t={}){const i=\"tilemapCache\"in this.layer?this.layer.tilemapCache:null,{signal:r,resamplingLevel:a=0}=t;if(!i)try{return await this._fetchImage(e,r)}catch(c){if(!s(c)&&!this.resampling)return h(this._tileInfoView.tileInfo.size);if(a<3){const i=this._tileInfoView.getTileParentId(e.id);if(i){const s=new u(i),r=await this.fetchTile(s,{...t,resamplingLevel:a+1});return n(this._tileInfoView,r,s,e)}}throw c}const l=new u(0,0,0,0);let o;try{if(await i.fetchAvailabilityUpsample(e.level,e.row,e.col,l,{signal:r}),l.level!==e.level&&!this.resampling)return h(this._tileInfoView.tileInfo.size);o=await this._fetchImage(l,r)}catch(c){if(s(c))throw c;o=await this._fetchImage(e,r)}return this.resampling?n(this._tileInfoView,o,l,e):o}async _enqueueTileFetch(e){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key);e.bitmap.source=t,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.once(\"attach\",(()=>this.requestUpdate()))}catch(t){s(t)||d.error(t)}this.requestUpdate()}}async _fetchImage(e,t){return this.layer.fetchTile(e.level,e.row,e.col,{signal:t})}};e([r()],I.prototype,\"resampling\",null),I=e([a(\"esri.views.2d.layers.TileLayerView2D\")],I);const T=I;export{T as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/set.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{BitmapTileContainer as t}from\"../engine/BitmapTileContainer.js\";const r=r=>{let s=class extends r{attach(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`),this._bitmapView=new t(this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){var e;this.container.removeChild(this._bitmapView),null==(e=this._bitmapView)||e.removeAllChildren()}};return s=e([i(\"esri.views.2d.layers.BitmapTileLayerView2D\")],s),s};export{r as BitmapTileLayerView2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{isSome as t}from\"../../core/maybe.js\";import{eachAlways as o}from\"../../core/promiseUtils.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{calculateTolerance as p}from\"../../renderers/support/clickToleranceUtils.js\";const i=i=>{let c=class extends i{async fetchPopupFeatures(e,s){const{layer:a}=this;if(!e)return Promise.reject(new r(\"tilelayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:a}));if(\"tile\"!==a.type)return Promise.reject(new r(\"tilelayerview:fetchPopupFeatures\",\"Layer type should be 'tile'\",{type:a.type}));const i=this.get(\"view.scale\"),c=a.allSublayers.toArray().filter((e=>{const r=0===e.minScale||i<=e.minScale,t=0===e.maxScale||i>=e.maxScale;return e.popupTemplate&&e.popupEnabled&&e.visible&&r&&t}));return o(c.map((async r=>{const o=r.createQuery(),a=t(s)?s.event:null,i=p({renderer:r.renderer,event:a});o.geometry=this.createFetchPopupFeaturesQueryGeometry(e,i),o.outFields=await r.popupTemplate.getRequiredFields();return(await r.queryFeatures(o)).features}))).then((e=>[].concat(...e.map((e=>e.value)).filter(Boolean))))}};return e([s()],c.prototype,\"layer\",void 0),c=e([a(\"esri.layers.mixins.TileLayerView\")],c),c};export{i as TileLayerView,i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/has.js\";import{WGLDrawPhase as r}from\"./enums.js\";import s from\"./WGLContainer.js\";import t from\"./brushes/WGLBrushInfo.js\";import n from\"./brushes/WGLBrushStencil.js\";const i=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;class o extends s{constructor(e){super(),this._tileInfoView=e}get requiresDedicatedFBO(){return!1}renderChildren(e){this.sortChildren(i),this.setStencilReference(),super.renderChildren(e)}createRenderParams(e){const{state:r}=e,s=super.createRenderParams(e);return s.requiredLevel=this._tileInfoView.getClosestInfoForScale(r.scale).level,s.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(r.scale),s}prepareRenderPasses(s){const i=super.prepareRenderPasses(s);return i.push(s.registerRenderPass({name:\"stencil\",brushes:[n],drawPhase:r.DEBUG|r.MAP|r.HIGHLIGHT,target:()=>this.getStencilTarget()})),e(\"esri-tiles-debug\")&&i.push(s.registerRenderPass({name:\"tileInfo\",brushes:[t],drawPhase:r.DEBUG,target:()=>this.children})),i}getStencilTarget(){return this.children}updateTransforms(e){for(const r of this.children){const s=this._tileInfoView.getTileResolution(r.key);r.setTransform(e,s)}}setStencilReference(){let e=1;for(const r of this.children)r.stencilRef=e++}}export{o as default,i as sortByLevel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Logger.js\";import{isAbortError as s}from\"../../core/promiseUtils.js\";import{on as o}from\"../../core/watchUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";const i=i=>{let c=class extends i{initialize(){this.handles.add(o(this,\"layer\",\"refresh\",(r=>{this.doRefresh(r.dataChanged).catch((r=>{s(r)||e.getLogger(this.declaredClass).error(r)}))})),\"RefreshableLayerView\")}};return r([t()],c.prototype,\"layer\",void 0),c=r([a(\"esri.layers.mixins.RefreshableLayerView\")],c),c};export{i as RefreshableLayerView,i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../core/maybe.js\";class i{constructor(e,t,i){this.pixelBlock=e,this.extent=t,this.originalPixelBlock=i}get width(){return e(this.pixelBlock)?this.pixelBlock.width:0}get height(){return e(this.pixelBlock)?this.pixelBlock.height:0}render(e){const i=this.pixelBlock;if(t(i))return;const l=this.filter({pixelBlock:i});if(t(l.pixelBlock))return;const r=l.pixelBlock.getAsRGBA(),o=e.createImageData(l.pixelBlock.width,l.pixelBlock.height);o.data.set(r),e.putImageData(o,0,0)}getRenderedRasterPixels(){const e=this.filter({pixelBlock:this.pixelBlock});return t(e.pixelBlock)?null:{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)}}}export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import t from\"../../../../core/Logger.js\";import{isSome as r}from\"../../../../core/maybe.js\";import{e as s}from\"../../../../chunks/earcut.js\";import{s as n}from\"../../../../chunks/vec2.js\";import{a as o}from\"../../../../chunks/vec2f64.js\";import{convertFromNestedArray as c,convertFromPolygon as i}from\"../../../../layers/graphics/featureConversionUtils.js\";import a from\"../../../../layers/graphics/OptimizedGeometry.js\";import{i1616to32 as f}from\"./number.js\";import h from\"../../../webgl/BufferObject.js\";const m=t.getLogger(\"esri.views.2d.engine.webgl.Mesh2D\"),u=t=>{switch(t.BYTES_PER_ELEMENT){case 1:return 5121;case 2:return 5123;case 4:return 5125;default:throw new e(\"Cannot get DataType of array\")}},y=(e,t,r,s)=>{let n=0;for(let o=1;o<r;o++){const r=e[2*(t+o-1)],s=e[2*(t+o-1)+1];n+=(e[2*(t+o)]-r)*(e[2*(t+o)+1]+s)}return s?n>0:n<0},x=({coords:e,lengths:t},r)=>{const n=[];for(let o=0,c=0;o<t.length;c+=t[o],o+=1){const i=c,a=[];for(;o<t.length-1&&y(e,c+t[o],t[o+1],r);o+=1,c+=t[o])a.push(c+t[o]-i);const f=e.slice(2*i,2*(c+t[o])),h=s(f,a,2);for(const e of h)n.push(e+i)}return n};class g{constructor(e,t,r,s=!1){this._cache={},this.vertices=e,this.indices=t,this.primitiveType=r,this.isMapSpace=s}static fromRect({x:e,y:t,width:r,height:s}){const n=e,o=t,c=n+r,i=o+s;return g.fromScreenExtent({xmin:n,ymin:o,xmax:c,ymax:i})}static fromPath(e){const t=c(new a,e.path,!1,!1),r=t.coords,s=new Uint32Array(x(t,!0)),n=new Uint32Array(r.length/2);for(let o=0;o<n.length;o++)n[o]=f(Math.floor(r[2*o]),Math.floor(r[2*o+1]));return new g({geometry:n},s,4)}static fromGeometry(t,r){const s=r.geometry.type;switch(s){case\"polygon\":return g.fromPolygon(t,r.geometry);case\"extent\":return g.fromMapExtent(t,r.geometry);default:return m.error(new e(\"mapview-bad-type\",`Unable to create a mesh from type ${s}`,r)),g.fromRect({x:0,y:0,width:1,height:1})}}static fromPolygon(e,t){const r=i(new a,t,!1,!1),s=r.coords,c=new Uint32Array(x(r,!1)),h=new Uint32Array(s.length/2),m=o(),u=o();for(let o=0;o<h.length;o++)n(m,s[2*o],s[2*o+1]),e.toScreen(u,m),h[o]=f(Math.floor(u[0]),Math.floor(u[1]));return new g({geometry:h},c,4,!0)}static fromScreenExtent({xmin:e,xmax:t,ymin:r,ymax:s}){const n={geometry:new Uint32Array([f(e,r),f(t,r),f(e,s),f(e,s),f(t,r),f(t,s)])},o=new Uint32Array([0,1,2,3,4,5]);return new g(n,o,4)}static fromMapExtent(e,t){const[r,s]=e.toScreen([0,0],[t.xmin,t.ymin]),[n,o]=e.toScreen([0,0],[t.xmax,t.ymax]),c={geometry:new Uint32Array([f(r,s),f(n,s),f(r,o),f(r,o),f(n,s),f(n,o)])},i=new Uint32Array([0,1,2,3,4,5]);return new g(c,i,4)}destroy(){r(this._cache.indexBuffer)&&this._cache.indexBuffer.dispose();for(const e in this._cache.vertexBuffers)r(this._cache.vertexBuffers[e])&&this._cache.vertexBuffers[e].dispose()}get elementType(){return u(this.indices)}getIndexBuffer(e,t=35044){return this._cache.indexBuffer||(this._cache.indexBuffer=h.createIndex(e,t,this.indices)),this._cache.indexBuffer}getVertexBuffers(e,t=35044){return this._cache.vertexBuffers||(this._cache.vertexBuffers=Object.keys(this.vertices).reduce(((r,s)=>({...r,[s]:h.createVertex(e,t,this.vertices[s])})),{})),this._cache.vertexBuffers}}export{g as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/Error.js\";import e from\"../../../../core/Logger.js\";import{isSome as r,isNone as s}from\"../../../../core/maybe.js\";import{c as i}from\"../../../../chunks/mat3f32.js\";import{DisplayObject as o}from\"../DisplayObject.js\";import h from\"./Mesh2D.js\";import a from\"../../../webgl/VertexArrayObject.js\";const c=e.getLogger(\"esri.views.2d.engine.webgl.ClippingInfo\"),n=t=>parseFloat(t)/100;class m extends o{constructor(t,e){super(),this._clip=e,this._cache={},this.stage=t,this._handle=e.watch(\"version\",(()=>this._invalidate())),this.ready()}static fromClipArea(t,e){return new m(t,e)}_destroyGL(){r(this._cache.mesh)&&(this._cache.mesh.destroy(),this._cache.mesh=null),r(this._cache.vao)&&(this._cache.vao.dispose(),this._cache.vao=null)}destroy(){this._destroyGL(),this._handle.remove()}getVAO(t,e,r,i){const[o,h]=e.size;if(\"geometry\"!==this._clip.type&&this._lastWidth===o&&this._lastHeight===h||(this._lastWidth=o,this._lastHeight=h,this._destroyGL()),s(this._cache.vao)){const s=this._createMesh(e,this._clip),o=s.getIndexBuffer(t),h=s.getVertexBuffers(t);this._cache.mesh=s,this._cache.vao=new a(t,r,i,h,o)}return this._cache.vao}_createTransforms(){return{dvs:i()}}_invalidate(){this._destroyGL(),this.requestRender()}_createScreenRect(t,e){const[r,s]=t.size,i=\"string\"==typeof e.left?n(e.left)*r:e.left,o=\"string\"==typeof e.right?n(e.right)*r:e.right,h=\"string\"==typeof e.top?n(e.top)*s:e.top,a=\"string\"==typeof e.bottom?n(e.bottom)*s:e.bottom,c=i,m=h;return{x:c,y:m,width:Math.max(r-o-c,0),height:Math.max(s-a-m,0)}}_createMesh(e,r){switch(r.type){case\"rect\":return h.fromRect(this._createScreenRect(e,r));case\"path\":return h.fromPath(r);case\"geometry\":return h.fromGeometry(e,r);default:return c.error(new t(\"mapview-bad-type\",\"Unable to create ClippingInfo mesh from clip of type: ${clip.type}\")),h.fromRect({x:0,y:0,width:1,height:1})}}}export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{isNone as e,isSome as r}from\"../../../../core/maybe.js\";import{c as s}from\"../../../../chunks/mat3f32.js\";import{brushes as t}from\"../brushes.js\";import{Container as i}from\"../Container.js\";import n from\"./ClippingInfo.js\";import{WGLDrawPhase as o}from\"./enums.js\";class a extends i{constructor(){super(...arguments),this.name=this.constructor.name}set clips(e){this._clips=e,this.children.forEach((r=>r.clips=e)),this._updateClippingInfo()}_createTransforms(){return{dvs:s()}}doRender(e){const r=this.createRenderParams(e),{painter:s,globalOpacity:t,profiler:i,drawPhase:n}=r,a=n===o.LABEL||n===o.HIGHLIGHT?1:t*this.computedOpacity;i.recordContainerStart(this.name),s.beforeRenderLayer(r,this._clippingInfos?255:0,a),this.updateTransforms(e.state),this.renderChildren(r),s.compositeLayer(r,a),i.recordContainerEnd()}renderChildren(r){e(this._renderPasses)&&(this._renderPasses=this.prepareRenderPasses(r.painter));for(const e of this.children)e.beforeRender(r);for(const e of this._renderPasses)try{e.render(r)}catch(s){}for(const e of this.children)e.afterRender(r)}createRenderParams(e){return e.requireFBO=this.requiresDedicatedFBO,e}prepareRenderPasses(e){return[e.registerRenderPass({name:\"clip\",brushes:[t.clip],target:()=>this._clippingInfos,drawPhase:o.MAP|o.LABEL|o.LABEL_ALPHA|o.DEBUG|o.HIGHLIGHT})]}updateTransforms(e){for(const r of this.children)r.setTransform(e)}onAttach(){super.onAttach(),this._updateClippingInfo()}onDetach(){super.onDetach(),this._updateClippingInfo()}_updateClippingInfo(){if(r(this._clippingInfos)&&(this._clippingInfos.forEach((e=>e.destroy())),this._clippingInfos=null),!this.stage)return;const e=this._clips;r(e)&&e.length&&(this._clippingInfos=e.items.map((e=>n.fromClipArea(this.stage,e)))),this.requestRender()}}export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../core/maybe.js\";import{b as e,c as i,r as s,j as r,m as h}from\"../../../chunks/mat3.js\";import{c as n}from\"../../../chunks/mat3f32.js\";import{f as u}from\"../../../chunks/vec2f32.js\";import{DisplayObject as o}from\"./DisplayObject.js\";import a from\"./ImageryBitmapSource.js\";import d from\"../../webgl/Texture.js\";function c(t){return t&&\"render\"in t}function l(t){return t&&!(\"render\"in t)}function x(t){const e=document.createElement(\"canvas\");return e.width=t.width,e.height=t.height,t.render(e.getContext(\"2d\")),e}function _(t,e,i){const s={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071};return e&&i&&(s.width=e,s.height=i),new d(t,s)}class g extends o{constructor(t=null,e,i=!0){super(),this.requestRenderOnSourceChangedEnabled=i,this._textureInvalidated=!0,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.blendFunction=e,this.source=t,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null)}get isSourceScaled(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}get height(){return void 0!==this._height?this._height:this.sourceHeight}set height(t){this._height=t}get source(){return this._source}set source(t){this._source=t,this.invalidateTexture()}get sourceHeight(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}get sourceWidth(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}get width(){return void 0!==this._width?this._width:this.sourceWidth}set width(t){this._width=t}beforeRender(t){super.beforeRender(t),this.updateTexture(t.context)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}_createTransforms(){return{dvs:n()}}setTransform(t){const n=e(this.transforms.dvs),[o,a]=t.toScreenNoRotation([0,0],[this.x,this.y]),d=this.resolution/this.pixelRatio/t.resolution,c=d*this.width,l=d*this.height,x=Math.PI*this.rotation/180;i(n,n,u(o,a)),i(n,n,u(c/2,l/2)),s(n,n,-x),i(n,n,u(-c/2,-l/2)),r(n,n,u(c,l)),h(this.transforms.dvs,t.displayViewMat3,n)}setSamplingProfile(t){this._texture&&(t.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(t.samplingMode))}bind(t,e){this._texture&&t.bindTexture(this._texture,e)}updateTexture(e){var i;if(!this.stage)return null==(i=this._texture)||i.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this.source?this._texture=_(e,this.sourceWidth,this.sourceHeight):this._texture=_(e));const s=this.source;if(s){if(this._texture.resize(this.sourceWidth,this.sourceHeight),c(s))if(s instanceof a){const e=s.getRenderedRasterPixels();this._texture.setData(t(e)?e.renderedRasterPixels:null)}else this._texture.setData(x(s));else l(s)&&this._texture.setData(s);this.ready()}else this._texture.setData(null)}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}}export{g as Bitmap,c as isImageSource,x as rasterize};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction e(e){return e instanceof HTMLImageElement?e.naturalWidth:e.width}function t(e){return e instanceof HTMLImageElement?e.naturalHeight:e.height}function n(n,l,r,u){if(r.level===u.level)return l;const i=n.tileInfo.size,a=n.getTileResolution(r.level),c=n.getTileResolution(u.level);let g=n.getLODInfoAt(u.level);const h=g.getXForColumn(u.col),d=g.getYForRow(u.row);g=n.getLODInfoAt(r.level);const f=g.getXForColumn(r.col),s=g.getYForRow(r.row),m=e(l)/i[0],v=t(l)/i[1],w=Math.round(m*((h-f)/a)),I=Math.round(v*(-(d-s)/a)),M=Math.round(m*i[0]*(c/a)),F=Math.round(v*i[1]*(c/a)),L=o(i);return L.getContext(\"2d\").drawImage(l,w,I,M,F,0,0,i[0],i[1]),L}function o(e){const t=document.createElement(\"canvas\");return[t.width,t.height]=e,t}export{o as createBlankImage,n as resampleImage};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{c as t}from\"../../../chunks/mat3f32.js\";import{Bitmap as e}from\"./Bitmap.js\";import{TiledDisplayObject as s}from\"./webgl/TiledDisplayObject.js\";class r extends s{constructor(t,s,r,i,a,n=null){super(t,s,r,i,a),this.bitmap=new e(n,\"standard\",!1),this.bitmap.coordScale=[i,a],this.bitmap.once(\"isReady\",(()=>this.ready()))}destroy(){super.destroy(),this.bitmap.destroy()}beforeRender(t){super.beforeRender(t),this.bitmap.beforeRender(t)}afterRender(t){super.afterRender(t),this.bitmap.afterRender(t)}set stencilRef(t){this.bitmap.stencilRef=t}get stencilRef(){return this.bitmap.stencilRef}_createTransforms(){return{dvs:t(),tileMat3:t()}}setTransform(t,e){super.setTransform(t,e),this.bitmap.transforms.dvs=this.transforms.dvs}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap&&(this.bitmap.stage=null)}}export{r as BitmapTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../geometry/support/aaBoundingRect.js\";import{BitmapTile as r}from\"./BitmapTile.js\";import{brushes as s}from\"./brushes.js\";import{WGLDrawPhase as t}from\"./webgl/enums.js\";import i from\"./webgl/TileContainer.js\";class n extends i{get requiresDedicatedFBO(){return this.children.some((e=>\"additive\"===e.bitmap.blendFunction))}createTile(s){const t=this._tileInfoView.getTileBounds(e(),s),[i,n]=this._tileInfoView.tileInfo.size;return new r(s,t[0],t[3],i,n)}destroyTile(){}prepareRenderPasses(e){const r=e.registerRenderPass({name:\"bitmap (tile)\",brushes:[s.bitmap],target:()=>this.children.map((e=>e.bitmap)),drawPhase:t.MAP});return[...super.prepareRenderPasses(e),r]}doRender(e){this.visible&&e.drawPhase===t.MAP&&super.doRender(e)}}export{n as BitmapTileContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{isSome as e,isNone as t}from\"../../core/maybe.js\";import{getMetersPerUnitForSR as r}from\"../../core/unitUtils.js\";import{calculateTolerance as n}from\"../../renderers/support/clickToleranceUtils.js\";import i from\"../../geometry/Extent.js\";function a(t,n,a,o=new i){let s;if(\"2d\"===a.type)s=n*a.resolution;else if(\"3d\"===a.type){const i=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?r(o)/r(a.spatialReference):n*i}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,i){const o=i.toMap(e);if(t(o))return!1;return a(o,n(),i,s).intersects(r)}const s=new i;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n"],"sourceRoot":""}