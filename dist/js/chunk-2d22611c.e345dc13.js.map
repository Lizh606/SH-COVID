{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/portal/support/resourceUtils.js"],"names":["async","c","e","t","a","load","o","itemUrl","start","n","num","sortOrder","u","sortField","i","l","query","token","apiKey","signal","p","portal","_request","total","nextStart","resources","map","created","size","r","resource","Date","resourceFromPath","hasPath","portalItem","userItemUrl","d","path","m","h","f","FormData","append","access","method","body","deleteAll","lastIndexOf","slice","length","Blob","url","responseType","data","w"],"mappings":"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","file":"js/chunk-2d22611c.e345dc13.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../core/Error.js\";import{get as r,isSome as a,isNone as o}from\"../../core/maybe.js\";import{join as s,getPathExtension as n}from\"../../core/urlUtils.js\";async function c(e,t={},a){await e.load(a);const o=s(e.itemUrl,\"resources\"),{start:n=1,num:c=10,sortOrder:u=\"asc\",sortField:i=\"created\"}=t,l={query:{start:n,num:c,sortOrder:u,sortField:i,token:e.apiKey},signal:r(a,\"signal\")},p=await e.portal._request(o,l);return{total:p.total,nextStart:p.nextStart,resources:p.resources.map((({created:t,size:r,resource:a})=>({created:new Date(t),size:r,resource:e.resourceFromPath(a)})))}}async function u(e,o,n,c){if(!e.hasPath())throw new t(`portal-item-resource-${o}:invalid-path`,\"Resource does not have a valid path\");const u=e.portalItem;await u.load(c);const i=s(u.userItemUrl,\"add\"===o?\"addResources\":\"updateResources\"),[l,d]=p(e.path),m=await h(n),f=new FormData;return l&&\".\"!==l&&f.append(\"resourcesPrefix\",l),f.append(\"fileName\",d),f.append(\"file\",m,d),f.append(\"f\",\"json\"),a(c)&&c.access&&f.append(\"access\",c.access),await u.portal._request(i,{method:\"post\",body:f,signal:r(c,\"signal\")}),e}async function i(e,a,o){if(!a.hasPath())throw new t(\"portal-item-resources-remove:invalid-path\",\"Resource does not have a valid path\");await e.load(o);const n=s(e.userItemUrl,\"removeResources\");await e.portal._request(n,{method:\"post\",query:{resource:a.path},signal:r(o,\"signal\")}),a.portalItem=null}async function l(e,t){await e.load(t);const a=s(e.userItemUrl,\"removeResources\");return e.portal._request(a,{method:\"post\",query:{deleteAll:!0},signal:r(t,\"signal\")})}function p(e){const t=e.lastIndexOf(\"/\");return-1===t?[\".\",e]:[e.slice(0,t),e.slice(t+1)]}function d(e){const[t,r]=m(e),[a,o]=p(t);return[a,o,r]}function m(e){const t=n(e);return o(t)?[e,\"\"]:[e.slice(0,e.length-t.length-1),`.${t}`]}async function h(t){if(t instanceof Blob)return t;return(await e(t.url,{responseType:\"blob\"})).data}function f(e,t){if(!e.hasPath())return null;const[r,,a]=d(e.path);return e.portalItem.resourceFromPath(s(r,t+a))}function w(e,t){if(!e.hasPath())return null;const[r,,a]=d(e.path);return e.portalItem.resourceFromPath(s(r,t+a))}export{u as addOrUpdateResource,h as contentToBlob,c as fetchResources,f as getSiblingOfSameType,w as getSiblingOfSameTypeI,l as removeAllResources,i as removeResource,d as splitPrefixFileNameAndExtension};\n"],"sourceRoot":""}