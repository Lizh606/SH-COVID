{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/symbols/support/previewCIMSymbol.js"],"names":["o","n","async","s","t","size","c","maxSize","r","node","m","opacity","f","h","cimOptions","feature","y","fieldMap","d","geometryType","p","style","u","g","w","Math","min","clone","preserveOutlineWidth","M","data","symbol","type","b","rasterizeCIMSymbolAsync","scaleFactor","C","document","createElement","width","imageData","height","getContext","putImageData","D","I","scale","e","ceil","S","Image","src","toDataURL","j","effectView","shape","x","fill","stroke","offset","appendChild"],"mappings":"gHAAA,4GAImP,MAAMA,EAAE,IAAI,yBAAE,MAAK,GAAIC,EAAE,IAAIC,eAAeC,EAAEC,EAAED,EAAE,IAAI,MAAME,KAAKC,EAAEC,QAAQC,EAAEC,KAAKC,EAAEC,QAAQC,GAAGT,EAAEU,EAAEV,EAAEW,YAAYX,GAAGY,QAAQC,EAAEC,SAASC,EAAEC,aAAaC,EAAEC,MAAMC,GAAGT,EAAEU,EAAE,eAAEnB,GAAGoB,EAAEC,KAAKC,IAAI,MAAMpB,EAAEA,EAAEiB,EAAE,MAAMf,EAAEA,EAAE,eAAEP,IAAIuB,IAAID,IAAInB,EAAEA,EAAEuB,QAAQ,eAAEvB,EAAEoB,EAAE,CAACI,sBAAqB,KAAM,IAAIC,EAAE,EAAEzB,GAAGA,EAAE0B,MAAM1B,EAAE0B,KAAKC,QAAQ,mBAAmB3B,EAAE0B,KAAKC,OAAOC,OAAOH,EAAE,GAAG,MAAMI,QAAQjC,EAAEkC,wBAAwB9B,EAAEY,EAAEE,EAAEE,EAAE,CAACe,YAAYN,EAAER,MAAMC,IAAIc,EAAEC,SAASC,cAAc,UAAUF,EAAEG,MAAMN,EAAEO,UAAUD,MAAMH,EAAEK,OAAOR,EAAEO,UAAUC,OAAOL,EAAEM,WAAW,MAAMC,aAAaV,EAAEO,UAAU,EAAE,GAAG,IAAII,EAAER,EAAEG,MAAMV,EAAEgB,EAAET,EAAEK,OAAOZ,EAAE,GAAG,MAAMvB,IAAI,OAAO,MAAMH,OAAE,EAAOA,EAAE2C,SAAS,MAAM3C,OAAE,EAAOA,EAAE2C,QAAQ,CAAC,MAAMC,EAAEH,EAAEC,EAAED,EAAEG,GAAG,EAAEtB,KAAKuB,KAAKxB,EAAEuB,GAAGvB,EAAEqB,EAAEE,GAAG,EAAEvB,EAAEC,KAAKuB,KAAKxB,EAAEuB,GAAG,MAAME,EAAE,IAAIC,MAAMN,EAAEC,GAAGI,EAAEE,IAAIf,EAAEgB,YAAY,MAAMxC,IAAIqC,EAAE5B,MAAMV,QAAQ,GAAGC,GAAK,IAAIyC,EAAEJ,EAAE,GAAG,MAAM9C,EAAEmD,WAAW,CAAC,MAAMP,EAAE,CAACQ,MAAM,CAACvB,KAAK,QAAQwB,EAAE,EAAExC,EAAE,EAAEuB,MAAMK,EAAEH,OAAOI,EAAEM,IAAIF,EAAEE,KAAKM,KAAK,KAAKC,OAAO,KAAKC,OAAO,CAAC,EAAE,IAAIN,EAAE,eAAE,CAAC,CAACN,IAAI,CAACH,EAAEC,GAAG,CAACS,WAAWnD,EAAEmD,aAAa,OAAO5C,GAAGA,EAAEkD,YAAYP,GAAGA","file":"js/chunk-2d237e8a.18e13e67.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{px2pt as e}from\"../../core/screenUtils.js\";import{CIMSymbolRasterizer as t}from\"../cim/CIMSymbolRasterizer.js\";import{getCIMSymbolSize as l,scaleCIMSymbolTo as i}from\"./cimSymbolUtils.js\";import{renderSymbol as a}from\"./renderUtils.js\";const o=new t(null,!0),n=120;async function s(t,s={}){const{size:c,maxSize:r,node:m,opacity:f}=s,h=s.cimOptions||s,{feature:y,fieldMap:d,geometryType:p,style:u}=h,g=l(t),w=Math.min(null!=c?c:g,null!=r?r:e(n));w!==g&&(t=t.clone(),i(t,w,{preserveOutlineWidth:!0}));let M=3;t&&t.data&&t.data.symbol&&\"CIMPointSymbol\"!==t.data.symbol.type&&(M=1);const b=await o.rasterizeCIMSymbolAsync(t,y,d,p,{scaleFactor:M,style:u}),C=document.createElement(\"canvas\");C.width=b.imageData.width,C.height=b.imageData.height;C.getContext(\"2d\").putImageData(b.imageData,0,0);let D=C.width/M,I=C.height/M;if(null!=c&&(null==(null==s?void 0:s.scale)||(null==s?void 0:s.scale))){const e=D/I;D=e<=1?Math.ceil(w*e):w,I=e<=1?w:Math.ceil(w/e)}const S=new Image(D,I);S.src=C.toDataURL(),null!=f&&(S.style.opacity=`${f}`);let j=S;if(null!=s.effectView){const e={shape:{type:\"image\",x:0,y:0,width:D,height:I,src:S.src},fill:null,stroke:null,offset:[0,0]};j=a([[e]],[D,I],{effectView:s.effectView})}return m&&m.appendChild(j),j}export{s as previewCIMSymbol};\n"],"sourceRoot":""}