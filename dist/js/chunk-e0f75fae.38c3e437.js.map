{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/views/2d/layers/BitmapTileLayerView2D.js","webpack:///./node_modules/@arcgis/core/views/2d/layers/WMTSLayerView2D.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js","webpack:///./node_modules/@arcgis/core/views/layers/RefreshableLayerView.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/webgl/Mesh2D.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/webgl/ClippingInfo.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/webgl/WGLContainer.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/Bitmap.js","webpack:///./node_modules/@arcgis/core/views/2d/layers/support/imageUtils.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/BitmapTile.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/BitmapTileContainer.js"],"names":["r","s","this","view","timeline","record","layer","title","_bitmapView","_tileInfoView","container","addChild","e","removeChild","removeAllChildren","d","y","m","getLogger","w","super","arguments","_tileStrategy","_fetchQueue","_tileRequests","Map","activeLayer","tileMatrixSetId","tileMatrixSet","_getTileMatrixSetBySpatialReference","id","pause","state","update","resume","notifyChange","tileInfo","tileInfoView","concurrency","process","t","fetchTile","cachePolicy","resampling","acquireTile","releaseTile","handles","add","watch","_refresh","declaredClass","attach","detach","remove","destroy","requestUpdate","abort","key","once","createTile","i","bitmap","x","getTileCoords","resolution","getTileResolution","width","height","size","_enqueueTileFetch","updateRequested","suspended","length","tilemapCache","signal","resamplingLevel","a","_fetchImage","l","o","fetchAvailabilityUpsample","level","row","col","c","getTileParentId","canResume","has","push","source","error","reset","tiles","forEach","fulfilled","promise","then","catch","finally","requestRender","set","spatialReference","tileMatrixSets","find","wkid","isWebMercator","indexOf","prototype","readOnly","_","sortChildren","setStencilReference","renderChildren","createRenderParams","requiredLevel","getClosestInfoForScale","scale","displayLevel","scaleToZoom","prepareRenderPasses","registerRenderPass","name","brushes","drawPhase","DEBUG","MAP","HIGHLIGHT","target","getStencilTarget","children","setTransform","stencilRef","doRefresh","dataChanged","pixelBlock","extent","originalPixelBlock","filter","getAsRGBA","createImageData","data","putImageData","renderedRasterPixels","Uint8Array","buffer","BYTES_PER_ELEMENT","n","coords","lengths","f","slice","h","_cache","vertices","indices","primitiveType","isMapSpace","fromScreenExtent","xmin","ymin","xmax","ymax","path","Uint32Array","Math","floor","geometry","type","fromPolygon","fromMapExtent","fromRect","u","toScreen","indexBuffer","dispose","vertexBuffers","createIndex","Object","keys","reduce","createVertex","parseFloat","_clip","stage","_handle","_invalidate","ready","mesh","vao","_destroyGL","_lastWidth","_lastHeight","_createMesh","getIndexBuffer","getVertexBuffers","dvs","left","right","top","bottom","max","_createScreenRect","fromPath","fromGeometry","constructor","_clips","clips","_updateClippingInfo","painter","globalOpacity","profiler","LABEL","computedOpacity","recordContainerStart","beforeRenderLayer","_clippingInfos","updateTransforms","compositeLayer","recordContainerEnd","_renderPasses","beforeRender","render","afterRender","requireFBO","requiresDedicatedFBO","clip","LABEL_ALPHA","onAttach","onDetach","items","map","fromClipArea","document","createElement","getContext","pixelFormat","internalFormat","dataType","wrapMode","g","requestRenderOnSourceChangedEnabled","_textureInvalidated","coordScale","_height","pixelRatio","rotation","_source","_width","blendFunction","bind","_texture","sourceWidth","sourceHeight","invalidateTexture","HTMLImageElement","naturalHeight","naturalWidth","updateTexture","context","transforms","toScreenNoRotation","PI","displayViewMat3","mips","descriptor","hasMipmap","generateMipmap","setSamplingMode","samplingMode","bindTexture","resize","getRenderedRasterPixels","setData","getLODInfoAt","getXForColumn","getYForRow","v","round","I","M","F","L","drawImage","tileMat3","some","getTileBounds","visible","doRender"],"mappings":"mHAAA,8HAI0Y,MAAMA,EAAEA,IAAI,IAAIC,EAAE,cAAcD,EAAE,SAASE,KAAKC,KAAKC,SAASC,OAAUH,KAAKI,MAAMC,MAAd,6BAAgDL,KAAKM,YAAY,IAAI,OAAEN,KAAKO,eAAeP,KAAKQ,UAAUC,SAAST,KAAKM,aAAa,SAAS,IAAII,EAAEV,KAAKQ,UAAUG,YAAYX,KAAKM,aAAa,OAAOI,EAAEV,KAAKM,cAAcI,EAAEE,sBAAsB,OAAOb,EAAE,eAAE,CAAC,eAAE,+CAA+CA,GAAGA,I,kCCJpwB,4PAI02B,MAAMc,EAAE,CAAC,OAAO,OAAO,KAAK,KAAK,QAAQC,EAAE,CAAC,EAAE,GAAGC,EAAE,OAAEC,UAAU,wCAAwC,IAAIC,EAAE,cAAc,cAAD,CAAG,eAAE,eAAE,WAAM,cAAcC,SAASC,WAAWnB,KAAKoB,cAAc,KAAKpB,KAAKqB,YAAY,KAAKrB,KAAKsB,cAAc,IAAIC,IAAIvB,KAAKI,MAAM,KAAK,oBAAoB,GAAGJ,KAAKI,MAAMoB,YAAYC,gBAAgB,OAAOzB,KAAKI,MAAMoB,YAAYE,cAAc,MAAMhB,EAAEV,KAAK2B,oCAAoC3B,KAAKI,MAAMoB,aAAa,OAAOd,GAAGV,KAAKI,MAAMoB,YAAYC,gBAAgBf,EAAEkB,GAAGlB,GAAG,KAAK,OAAOA,GAAGV,KAAKqB,YAAYQ,QAAQ7B,KAAKqB,YAAYS,MAAMpB,EAAEoB,MAAM9B,KAAKoB,cAAcW,OAAOrB,GAAGV,KAAKqB,YAAYW,SAAShC,KAAKiC,aAAa,YAAY,SAAS,IAAIjC,KAAK0B,cAAc,OAAO,MAAMQ,SAASxB,GAAGV,KAAK0B,cAAc1B,KAAKO,cAAc,IAAI,OAAEG,GAAGV,KAAKqB,YAAY,IAAI,OAAE,CAACc,aAAanC,KAAKO,cAAc6B,YAAY,GAAGC,QAAQ,CAAC3B,EAAE4B,IAAItC,KAAKuC,UAAU7B,EAAE4B,KAAKtC,KAAKoB,cAAc,IAAI,OAAE,CAACoB,YAAY,OAAOC,YAAW,EAAGC,YAAYhC,GAAGV,KAAK0C,YAAYhC,GAAGiC,YAAYjC,GAAGV,KAAK2C,YAAYjC,GAAGyB,aAAanC,KAAKO,gBAAgBP,KAAK4C,QAAQC,IAAI7C,KAAK8C,MAAM,CAAC,4BAA4B,iBAAiB,IAAK9C,KAAK+C,YAAa/C,KAAKgD,eAAe9B,MAAM+B,SAAS,SAAS,IAAIvC,EAAE4B,EAAEpB,MAAMgC,SAASlD,KAAK4C,QAAQO,OAAOnD,KAAKgD,eAAe,OAAOtC,EAAEV,KAAKoB,gBAAgBV,EAAE0C,UAAU,OAAOd,EAAEtC,KAAKqB,cAAciB,EAAEc,UAAUpD,KAAKqB,YAAYrB,KAAKoB,cAAcpB,KAAKO,cAAc,KAAK,YAAYP,KAAKqD,gBAAgB,aAAarD,KAAKqD,gBAAgB,UAAUrD,KAAKqD,gBAAgB,YAAY3C,GAAGV,KAAKqB,YAAYiC,MAAM5C,EAAE6C,IAAI3B,IAAI5B,KAAKM,YAAYK,YAAYD,GAAGA,EAAE8C,KAAK,SAAS,IAAK9C,EAAE0C,WAAYpD,KAAKqD,gBAAgB,YAAY3C,GAAG,MAAM4B,EAAEtC,KAAKM,YAAYmD,WAAW/C,GAAGgD,EAAEpB,EAAEqB,OAAO,OAAOD,EAAEE,EAAEF,EAAE5C,GAAGd,KAAKO,cAAcsD,cAAc/C,EAAEwB,EAAEiB,KAAKG,EAAEI,WAAW9D,KAAKO,cAAcwD,kBAAkBzB,EAAEiB,MAAMG,EAAEM,MAAMN,EAAEO,QAAQjE,KAAKO,cAAc2B,SAASgC,KAAKlE,KAAKmE,kBAAkB7B,GAAGtC,KAAKM,YAAYG,SAAS6B,GAAGtC,KAAKqD,gBAAgBf,EAAE,kBAAkBtC,KAAKoE,iBAAiBpE,KAAKqE,WAAWrE,KAAK+C,WAAW,aAAa,OAAO/C,KAAKqB,YAAYiD,OAAO,EAAE,gBAAgB5D,EAAE4B,EAAE,IAAI,MAAMvC,EAAE,iBAAiBC,KAAKI,MAAMJ,KAAKI,MAAMmE,aAAa,MAAMC,OAAO1E,EAAE2E,gBAAgBC,EAAE,GAAGpC,EAAE,IAAIvC,EAAE,OAAOC,KAAK2E,YAAYjE,EAAEZ,GAAG,MAAM8E,EAAE,IAAI,OAAE,EAAE,EAAE,EAAE,GAAG,IAAIC,EAAE,UAAU9E,EAAE+E,0BAA0BpE,EAAEqE,MAAMrE,EAAEsE,IAAItE,EAAEuE,IAAIL,EAAE,CAACJ,OAAO1E,IAAI+E,QAAQ7E,KAAK2E,YAAYC,EAAE9E,GAAG,MAAMoF,GAAG,GAAG,eAAEA,GAAG,MAAMA,EAAE,GAAGR,EAAE,EAAE,CAAC,MAAMhB,EAAE1D,KAAKO,cAAc4E,gBAAgBzE,EAAEkB,IAAI,GAAG8B,EAAE,CAAC,MAAM3D,EAAE,IAAI,OAAE2D,GAAG5D,QAAQE,KAAKuC,UAAUxC,EAAE,IAAIuC,EAAEmC,gBAAgBC,EAAE,IAAI,OAAO,eAAE1E,KAAKO,cAAcT,EAAEC,EAAEW,IAAI,MAAMwE,EAAE,OAAO,eAAElF,KAAKO,cAAcsE,EAAED,EAAElE,GAAG,YAAY,MAAMA,EAAEQ,MAAMkE,YAAY,OAAO1E,EAAE,OAAOV,KAAK0B,cAAchB,EAAE,wBAAwBA,GAAG,IAAIV,KAAKqB,YAAYgE,IAAI3E,EAAE6C,IAAI3B,IAAI,CAAC,IAAI,MAAMU,QAAQtC,KAAKqB,YAAYiE,KAAK5E,EAAE6C,KAAK7C,EAAEiD,OAAO4B,OAAOjD,EAAE5B,EAAEiD,OAAOK,MAAMhE,KAAKO,cAAc2B,SAASgC,KAAK,GAAGxD,EAAEiD,OAAOM,OAAOjE,KAAKO,cAAc2B,SAASgC,KAAK,GAAGxD,EAAE8C,KAAK,SAAS,IAAKxD,KAAKqD,iBAAkB,MAAMf,GAAG,eAAEA,IAAIvB,EAAEyE,MAAMlD,GAAGtC,KAAKqD,iBAAiB,kBAAkB3C,EAAE4B,GAAG,OAAOtC,KAAKI,MAAMmC,UAAU7B,EAAEqE,MAAMrE,EAAEsE,IAAItE,EAAEuE,IAAI,CAACT,OAAOlC,IAAI,WAAWtC,KAAKqB,YAAYoE,QAAQzF,KAAKoB,cAAcsE,MAAMC,QAASjF,IAAI,IAAIA,EAAEiD,OAAO4B,OAAO,OAAO,MAAMjD,EAAE,CAACV,GAAGlB,EAAE6C,IAAI3B,GAAGgE,WAAU,EAAGC,QAAQ7F,KAAKqB,YAAYiE,KAAK5E,EAAE6C,KAAKuC,KAAMxD,IAAI5B,EAAEiD,OAAO4B,OAAOjD,IAAKyD,MAAOzD,IAAI,eAAEA,KAAK5B,EAAEiD,OAAO4B,OAAO,QAASS,QAAQ,KAAMtF,EAAEuF,gBAAgBjG,KAAKiC,aAAa,YAAYK,EAAEsD,WAAU,KAAO5F,KAAKsB,cAAc4E,IAAIxF,EAAE4B,KAAMtC,KAAKiC,aAAa,YAAY,oCAAoCvB,GAAG,MAAM4B,EAAEtC,KAAKC,KAAKkG,iBAAiB,IAAIzF,EAAE0F,eAAe,OAAO,KAAK,IAAI1C,EAAEhD,EAAE0F,eAAeC,KAAM3F,GAAGA,EAAEwB,SAASiE,iBAAiBG,OAAOhE,EAAEgE,MAAO,OAAO5C,GAAGpB,EAAEiE,gBAAgB7C,EAAEhD,EAAE0F,eAAeC,KAAM3F,GAAGG,EAAE2F,QAAQ9F,EAAEwB,SAASiE,iBAAiBG,OAAO,IAAK5C,IAAI,eAAE,CAAC,kBAAKzC,EAAEwF,UAAU,iBAAY,GAAQ,eAAE,CAAC,eAAE,CAACC,UAAS,KAAMzF,EAAEwF,UAAU,gBAAgB,MAAMxF,EAAE,eAAE,CAAC,eAAE,yCAAyCA,GAAG,MAAM0F,EAAE1F,G,kCCJ5oJ,kGAIuM,MAAMyC,EAAE,CAAChD,EAAEZ,IAAIY,EAAE6C,IAAIwB,MAAMjF,EAAEyD,IAAIwB,OAAO,EAAErE,EAAE6C,IAAIwB,MAAMjF,EAAEyD,IAAIwB,MAAMrE,EAAE6C,IAAIyB,IAAIlF,EAAEyD,IAAIyB,KAAK,EAAEtE,EAAE6C,IAAIyB,IAAIlF,EAAEyD,IAAIyB,IAAItE,EAAE6C,IAAI0B,IAAInF,EAAEyD,IAAI0B,IAAI,MAAMJ,UAAU,OAAE,YAAYnE,GAAGQ,QAAQlB,KAAKO,cAAcG,EAAE,2BAA2B,OAAM,EAAG,eAAeA,GAAGV,KAAK4G,aAAalD,GAAG1D,KAAK6G,sBAAsB3F,MAAM4F,eAAepG,GAAG,mBAAmBA,GAAG,MAAMoB,MAAMhC,GAAGY,EAAEX,EAAEmB,MAAM6F,mBAAmBrG,GAAG,OAAOX,EAAEiH,cAAchH,KAAKO,cAAc0G,uBAAuBnH,EAAEoH,OAAOnC,MAAMhF,EAAEoH,aAAanH,KAAKO,cAAc2B,SAASkF,YAAYtH,EAAEoH,OAAOnH,EAAE,oBAAoBA,GAAG,MAAM2D,EAAExC,MAAMmG,oBAAoBtH,GAAG,OAAO2D,EAAE4B,KAAKvF,EAAEuH,mBAAmB,CAACC,KAAK,UAAUC,QAAQ,CAAC,QAAGC,UAAU,OAAEC,MAAM,OAAEC,IAAI,OAAEC,UAAUC,OAAO,IAAI7H,KAAK8H,sBAAsB,eAAE,qBAAqBpE,EAAE4B,KAAKvF,EAAEuH,mBAAmB,CAACC,KAAK,WAAWC,QAAQ,CAAC,QAAGC,UAAU,OAAEC,MAAMG,OAAO,IAAI7H,KAAK+H,YAAYrE,EAAE,mBAAmB,OAAO1D,KAAK+H,SAAS,iBAAiBrH,GAAG,IAAI,MAAMZ,KAAKE,KAAK+H,SAAS,CAAC,MAAMhI,EAAEC,KAAKO,cAAcwD,kBAAkBjE,EAAEyD,KAAKzD,EAAEkI,aAAatH,EAAEX,IAAI,sBAAsB,IAAIW,EAAE,EAAE,IAAI,MAAMZ,KAAKE,KAAK+H,SAASjI,EAAEmI,WAAWvH,O,oCCJ3wC,8IAIgc,MAAMgD,EAAEA,IAAI,IAAIwB,EAAE,cAAcxB,EAAE,aAAa1D,KAAK4C,QAAQC,IAAI,eAAE7C,KAAK,QAAQ,UAAWF,IAAIE,KAAKkI,UAAUpI,EAAEqI,aAAapC,MAAOjG,IAAI,eAAEA,IAAI,OAAEkB,UAAUhB,KAAKgD,eAAewC,MAAM1F,OAAS,0BAA0B,OAAO,eAAE,CAAC,kBAAKoF,EAAEuB,UAAU,aAAQ,GAAQvB,EAAE,eAAE,CAAC,eAAE,4CAA4CA,GAAGA,I,oCCJvvB,kDAI4D,MAAMxB,EAAE,YAAYhD,EAAE4B,EAAEoB,GAAG1D,KAAKoI,WAAW1H,EAAEV,KAAKqI,OAAO/F,EAAEtC,KAAKsI,mBAAmB5E,EAAE,YAAY,OAAO,eAAE1D,KAAKoI,YAAYpI,KAAKoI,WAAWpE,MAAM,EAAE,aAAa,OAAO,eAAEhE,KAAKoI,YAAYpI,KAAKoI,WAAWnE,OAAO,EAAE,OAAOvD,GAAG,MAAMgD,EAAE1D,KAAKoI,WAAW,GAAG,eAAE1E,GAAG,OAAO,MAAMkB,EAAE5E,KAAKuI,OAAO,CAACH,WAAW1E,IAAI,GAAG,eAAEkB,EAAEwD,YAAY,OAAO,MAAMtI,EAAE8E,EAAEwD,WAAWI,YAAY3D,EAAEnE,EAAE+H,gBAAgB7D,EAAEwD,WAAWpE,MAAMY,EAAEwD,WAAWnE,QAAQY,EAAE6D,KAAKxC,IAAIpG,GAAGY,EAAEiI,aAAa9D,EAAE,EAAE,GAAG,0BAA0B,MAAMnE,EAAEV,KAAKuI,OAAO,CAACH,WAAWpI,KAAKoI,aAAa,OAAO,eAAE1H,EAAE0H,YAAY,KAAK,CAACpE,MAAMtD,EAAE0H,WAAWpE,MAAMC,OAAOvD,EAAE0H,WAAWnE,OAAO2E,qBAAqB,IAAIC,WAAWnI,EAAE0H,WAAWI,YAAYM,Y,4PCApL,MAAM,EAAE,OAAE9H,UAAU,qCAAqC,EAAEsB,IAAI,OAAOA,EAAEyG,mBAAmB,KAAK,EAAE,OAAO,KAAK,KAAK,EAAE,OAAO,KAAK,KAAK,EAAE,OAAO,KAAK,QAAQ,MAAM,IAAI,OAAE,kCAAkCjI,EAAE,CAACJ,EAAE4B,EAAExC,EAAEC,KAAK,IAAIiJ,EAAE,EAAE,IAAI,IAAInE,EAAE,EAAEA,EAAE/E,EAAE+E,IAAI,CAAC,MAAM/E,EAAEY,EAAE,GAAG4B,EAAEuC,EAAE,IAAI9E,EAAEW,EAAE,GAAG4B,EAAEuC,EAAE,GAAG,GAAGmE,IAAItI,EAAE,GAAG4B,EAAEuC,IAAI/E,IAAIY,EAAE,GAAG4B,EAAEuC,GAAG,GAAG9E,GAAG,OAAOA,EAAEiJ,EAAE,EAAEA,EAAE,GAAGpF,EAAE,EAAEqF,OAAOvI,EAAEwI,QAAQ5G,GAAGxC,KAAK,MAAMkJ,EAAE,GAAG,IAAI,IAAInE,EAAE,EAAEK,EAAE,EAAEL,EAAEvC,EAAEgC,OAAOY,GAAG5C,EAAEuC,GAAGA,GAAG,EAAE,CAAC,MAAMnB,EAAEwB,EAAER,EAAE,GAAG,KAAKG,EAAEvC,EAAEgC,OAAO,GAAGxD,EAAEJ,EAAEwE,EAAE5C,EAAEuC,GAAGvC,EAAEuC,EAAE,GAAG/E,GAAG+E,GAAG,EAAEK,GAAG5C,EAAEuC,GAAGH,EAAEY,KAAKJ,EAAE5C,EAAEuC,GAAGnB,GAAG,MAAMyF,EAAEzI,EAAE0I,MAAM,EAAE1F,EAAE,GAAGwB,EAAE5C,EAAEuC,KAAKwE,EAAE,eAAEF,EAAEzE,EAAE,GAAG,IAAI,MAAMhE,KAAK2I,EAAEL,EAAE1D,KAAK5E,EAAEgD,GAAG,OAAOsF,GAAG,MAAM,EAAE,YAAYtI,EAAE4B,EAAExC,EAAEC,GAAE,GAAIC,KAAKsJ,OAAO,GAAGtJ,KAAKuJ,SAAS7I,EAAEV,KAAKwJ,QAAQlH,EAAEtC,KAAKyJ,cAAc3J,EAAEE,KAAK0J,WAAW3J,EAAE,iBAAiB6D,EAAElD,EAAEI,EAAEwB,EAAE0B,MAAMlE,EAAEmE,OAAOlE,IAAI,MAAMiJ,EAAEtI,EAAEmE,EAAEvC,EAAE4C,EAAE8D,EAAElJ,EAAE4D,EAAEmB,EAAE9E,EAAE,OAAO,EAAE4J,iBAAiB,CAACC,KAAKZ,EAAEa,KAAKhF,EAAEiF,KAAK5E,EAAE6E,KAAKrG,IAAI,gBAAgBhD,GAAG,MAAM4B,EAAE,eAAE,IAAI,OAAE5B,EAAEsJ,MAAK,GAAG,GAAIlK,EAAEwC,EAAE2G,OAAOlJ,EAAE,IAAIkK,YAAYrG,EAAEtB,GAAE,IAAK0G,EAAE,IAAIiB,YAAYnK,EAAEwE,OAAO,GAAG,IAAI,IAAIO,EAAE,EAAEA,EAAEmE,EAAE1E,OAAOO,IAAImE,EAAEnE,GAAG,eAAEqF,KAAKC,MAAMrK,EAAE,EAAE+E,IAAIqF,KAAKC,MAAMrK,EAAE,EAAE+E,EAAE,KAAK,OAAO,IAAI,EAAE,CAACuF,SAASpB,GAAGjJ,EAAE,GAAG,oBAAoBuC,EAAExC,GAAG,MAAMC,EAAED,EAAEsK,SAASC,KAAK,OAAOtK,GAAG,IAAI,UAAU,OAAO,EAAEuK,YAAYhI,EAAExC,EAAEsK,UAAU,IAAI,SAAS,OAAO,EAAEG,cAAcjI,EAAExC,EAAEsK,UAAU,QAAQ,OAAO,EAAE5E,MAAM,IAAI,OAAE,mBAAmB,qCAAqCzF,EAAID,IAAI,EAAE0K,SAAS,CAAC5G,EAAE,EAAE9C,EAAE,EAAEkD,MAAM,EAAEC,OAAO,KAAK,mBAAmBvD,EAAE4B,GAAG,MAAMxC,EAAE,eAAE,IAAI,OAAEwC,GAAE,GAAG,GAAIvC,EAAED,EAAEmJ,OAAO/D,EAAE,IAAI+E,YAAYrG,EAAE9D,GAAE,IAAKuJ,EAAE,IAAIY,YAAYlK,EAAEuE,OAAO,GAAGvD,EAAE,iBAAI0J,EAAE,iBAAI,IAAI,IAAI5F,EAAE,EAAEA,EAAEwE,EAAE/E,OAAOO,IAAI,eAAE9D,EAAEhB,EAAE,EAAE8E,GAAG9E,EAAE,EAAE8E,EAAE,IAAInE,EAAEgK,SAASD,EAAE1J,GAAGsI,EAAExE,GAAG,eAAEqF,KAAKC,MAAMM,EAAE,IAAIP,KAAKC,MAAMM,EAAE,KAAK,OAAO,IAAI,EAAE,CAACL,SAASf,GAAGnE,EAAE,GAAE,GAAI,yBAAyB0E,KAAKlJ,EAAEoJ,KAAKxH,EAAEuH,KAAK/J,EAAEiK,KAAKhK,IAAI,MAAMiJ,EAAE,CAACoB,SAAS,IAAIH,YAAY,CAAC,eAAEvJ,EAAEZ,GAAG,eAAEwC,EAAExC,GAAG,eAAEY,EAAEX,GAAG,eAAEW,EAAEX,GAAG,eAAEuC,EAAExC,GAAG,eAAEwC,EAAEvC,MAAM8E,EAAE,IAAIoF,YAAY,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,IAAI,OAAO,IAAI,EAAEjB,EAAEnE,EAAE,GAAG,qBAAqBnE,EAAE4B,GAAG,MAAMxC,EAAEC,GAAGW,EAAEgK,SAAS,CAAC,EAAE,GAAG,CAACpI,EAAEsH,KAAKtH,EAAEuH,QAAQb,EAAEnE,GAAGnE,EAAEgK,SAAS,CAAC,EAAE,GAAG,CAACpI,EAAEwH,KAAKxH,EAAEyH,OAAO7E,EAAE,CAACkF,SAAS,IAAIH,YAAY,CAAC,eAAEnK,EAAEC,GAAG,eAAEiJ,EAAEjJ,GAAG,eAAED,EAAE+E,GAAG,eAAE/E,EAAE+E,GAAG,eAAEmE,EAAEjJ,GAAG,eAAEiJ,EAAEnE,MAAMnB,EAAE,IAAIuG,YAAY,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,IAAI,OAAO,IAAI,EAAE/E,EAAExB,EAAE,GAAG,UAAU,eAAE1D,KAAKsJ,OAAOqB,cAAc3K,KAAKsJ,OAAOqB,YAAYC,UAAU,IAAI,MAAMlK,KAAKV,KAAKsJ,OAAOuB,cAAc,eAAE7K,KAAKsJ,OAAOuB,cAAcnK,KAAKV,KAAKsJ,OAAOuB,cAAcnK,GAAGkK,UAAU,kBAAkB,OAAO,EAAE5K,KAAKwJ,SAAS,eAAe9I,EAAE4B,EAAE,OAAO,OAAOtC,KAAKsJ,OAAOqB,cAAc3K,KAAKsJ,OAAOqB,YAAY,OAAEG,YAAYpK,EAAE4B,EAAEtC,KAAKwJ,UAAUxJ,KAAKsJ,OAAOqB,YAAY,iBAAiBjK,EAAE4B,EAAE,OAAO,OAAOtC,KAAKsJ,OAAOuB,gBAAgB7K,KAAKsJ,OAAOuB,cAAcE,OAAOC,KAAKhL,KAAKuJ,UAAU0B,OAAO,CAAEnL,EAAEC,KAAI,IAAKD,EAAE,CAACC,GAAG,OAAEmL,aAAaxK,EAAE4B,EAAEtC,KAAKuJ,SAASxJ,MAAO,KAAKC,KAAKsJ,OAAOuB,e,gBCAzwF,MAAM,EAAE,OAAE7J,UAAU,2CAA2C,EAAEsB,GAAG6I,WAAW7I,GAAG,IAAI,MAAM,UAAU,OAAE,YAAYA,EAAE5B,GAAGQ,QAAQlB,KAAKoL,MAAM1K,EAAEV,KAAKsJ,OAAO,GAAGtJ,KAAKqL,MAAM/I,EAAEtC,KAAKsL,QAAQ5K,EAAEoC,MAAM,UAAU,IAAK9C,KAAKuL,eAAgBvL,KAAKwL,QAAQ,oBAAoBlJ,EAAE5B,GAAG,OAAO,IAAI,EAAE4B,EAAE5B,GAAG,aAAa,eAAEV,KAAKsJ,OAAOmC,QAAQzL,KAAKsJ,OAAOmC,KAAKrI,UAAUpD,KAAKsJ,OAAOmC,KAAK,MAAM,eAAEzL,KAAKsJ,OAAOoC,OAAO1L,KAAKsJ,OAAOoC,IAAId,UAAU5K,KAAKsJ,OAAOoC,IAAI,MAAM,UAAU1L,KAAK2L,aAAa3L,KAAKsL,QAAQnI,SAAS,OAAOb,EAAE5B,EAAEZ,EAAE4D,GAAG,MAAMmB,EAAEwE,GAAG3I,EAAEwD,KAAK,GAAG,aAAalE,KAAKoL,MAAMf,MAAMrK,KAAK4L,aAAa/G,GAAG7E,KAAK6L,cAAcxC,IAAIrJ,KAAK4L,WAAW/G,EAAE7E,KAAK6L,YAAYxC,EAAErJ,KAAK2L,cAAc,eAAE3L,KAAKsJ,OAAOoC,KAAK,CAAC,MAAM3L,EAAEC,KAAK8L,YAAYpL,EAAEV,KAAKoL,OAAOvG,EAAE9E,EAAEgM,eAAezJ,GAAG+G,EAAEtJ,EAAEiM,iBAAiB1J,GAAGtC,KAAKsJ,OAAOmC,KAAK1L,EAAEC,KAAKsJ,OAAOoC,IAAI,IAAI,OAAEpJ,EAAExC,EAAE4D,EAAE2F,EAAExE,GAAG,OAAO7E,KAAKsJ,OAAOoC,IAAI,oBAAoB,MAAM,CAACO,IAAI,kBAAK,cAAcjM,KAAK2L,aAAa3L,KAAKiG,gBAAgB,kBAAkB3D,EAAE5B,GAAG,MAAMZ,EAAEC,GAAGuC,EAAE4B,KAAKR,EAAE,iBAAiBhD,EAAEwL,KAAK,EAAExL,EAAEwL,MAAMpM,EAAEY,EAAEwL,KAAKrH,EAAE,iBAAiBnE,EAAEyL,MAAM,EAAEzL,EAAEyL,OAAOrM,EAAEY,EAAEyL,MAAM9C,EAAE,iBAAiB3I,EAAE0L,IAAI,EAAE1L,EAAE0L,KAAKrM,EAAEW,EAAE0L,IAAI1H,EAAE,iBAAiBhE,EAAE2L,OAAO,EAAE3L,EAAE2L,QAAQtM,EAAEW,EAAE2L,OAAOnH,EAAExB,EAAE3C,EAAEsI,EAAE,MAAM,CAACzF,EAAEsB,EAAEpE,EAAEC,EAAEiD,MAAMkG,KAAKoC,IAAIxM,EAAE+E,EAAEK,EAAE,GAAGjB,OAAOiG,KAAKoC,IAAIvM,EAAE2E,EAAE3D,EAAE,IAAI,YAAYL,EAAEZ,GAAG,OAAOA,EAAEuK,MAAM,IAAI,OAAO,OAAO,EAAEG,SAASxK,KAAKuM,kBAAkB7L,EAAEZ,IAAI,IAAI,OAAO,OAAO,EAAE0M,SAAS1M,GAAG,IAAI,WAAW,OAAO,EAAE2M,aAAa/L,EAAEZ,GAAG,QAAQ,OAAO,EAAE0F,MAAM,IAAI,OAAE,mBAAmB,uEAAuE,EAAEgF,SAAS,CAAC5G,EAAE,EAAE9C,EAAE,EAAEkD,MAAM,EAAEC,OAAO,M,gBCA3hD,MAAM,UAAU,OAAE,cAAc/C,SAASC,WAAWnB,KAAKuH,KAAKvH,KAAK0M,YAAYnF,KAAK,UAAU7G,GAAGV,KAAK2M,OAAOjM,EAAEV,KAAK+H,SAASpC,QAAS7F,GAAGA,EAAE8M,MAAMlM,GAAIV,KAAK6M,sBAAsB,oBAAoB,MAAM,CAACZ,IAAI,kBAAK,SAASvL,GAAG,MAAMZ,EAAEE,KAAK+G,mBAAmBrG,IAAIoM,QAAQ/M,EAAEgN,cAAczK,EAAE0K,SAAStJ,EAAE+D,UAAUuB,GAAGlJ,EAAE4E,EAAEsE,IAAI,OAAEiE,OAAOjE,IAAI,OAAEpB,UAAU,EAAEtF,EAAEtC,KAAKkN,gBAAgBxJ,EAAEyJ,qBAAqBnN,KAAKuH,MAAMxH,EAAEqN,kBAAkBtN,EAAEE,KAAKqN,eAAe,IAAI,EAAE3I,GAAG1E,KAAKsN,iBAAiB5M,EAAEoB,OAAO9B,KAAK8G,eAAehH,GAAGC,EAAEwN,eAAezN,EAAE4E,GAAGhB,EAAE8J,qBAAqB,eAAe1N,GAAG,eAAEE,KAAKyN,iBAAiBzN,KAAKyN,cAAczN,KAAKqH,oBAAoBvH,EAAEgN,UAAU,IAAI,MAAMpM,KAAKV,KAAK+H,SAASrH,EAAEgN,aAAa5N,GAAG,IAAI,MAAMY,KAAKV,KAAKyN,cAAc,IAAI/M,EAAEiN,OAAO7N,GAAG,MAAMC,IAAI,IAAI,MAAMW,KAAKV,KAAK+H,SAASrH,EAAEkN,YAAY9N,GAAG,mBAAmBY,GAAG,OAAOA,EAAEmN,WAAW7N,KAAK8N,qBAAqBpN,EAAE,oBAAoBA,GAAG,MAAM,CAACA,EAAE4G,mBAAmB,CAACC,KAAK,OAAOC,QAAQ,CAAC,OAAEuG,MAAMlG,OAAO,IAAI7H,KAAKqN,eAAe5F,UAAU,OAAEE,IAAI,OAAEsF,MAAM,OAAEe,YAAY,OAAEtG,MAAM,OAAEE,aAAa,iBAAiBlH,GAAG,IAAI,MAAMZ,KAAKE,KAAK+H,SAASjI,EAAEkI,aAAatH,GAAG,WAAWQ,MAAM+M,WAAWjO,KAAK6M,sBAAsB,WAAW3L,MAAMgN,WAAWlO,KAAK6M,sBAAsB,sBAAsB,GAAG,eAAE7M,KAAKqN,kBAAkBrN,KAAKqN,eAAe1H,QAASjF,GAAGA,EAAE0C,WAAYpD,KAAKqN,eAAe,OAAOrN,KAAKqL,MAAM,OAAO,MAAM3K,EAAEV,KAAK2M,OAAO,eAAEjM,IAAIA,EAAE4D,SAAStE,KAAKqN,eAAe3M,EAAEyN,MAAMC,IAAK1N,GAAG,EAAE2N,aAAarO,KAAKqL,MAAM3K,KAAMV,KAAKiG,mB,kCCJlvD,0HAIuV,SAASf,EAAE5C,GAAG,OAAOA,GAAG,WAAWA,EAAE,SAASsC,EAAEtC,GAAG,OAAOA,KAAK,WAAWA,GAAG,SAASsB,EAAEtB,GAAG,MAAM5B,EAAE4N,SAASC,cAAc,UAAU,OAAO7N,EAAEsD,MAAM1B,EAAE0B,MAAMtD,EAAEuD,OAAO3B,EAAE2B,OAAO3B,EAAEqL,OAAOjN,EAAE8N,WAAW,OAAO9N,EAAE,SAASiG,EAAErE,EAAE5B,EAAEgD,GAAG,MAAM3D,EAAE,CAAC8H,OAAO,KAAK4G,YAAY,KAAKC,eAAe,KAAKC,SAAS,KAAKC,SAAS,OAAO,OAAOlO,GAAGgD,IAAI3D,EAAEiE,MAAMtD,EAAEX,EAAEkE,OAAOP,GAAG,IAAI,OAAEpB,EAAEvC,GAAG,MAAM8O,UAAU,OAAE,YAAYvM,EAAE,KAAK5B,EAAEgD,GAAE,GAAIxC,QAAQlB,KAAK8O,oCAAoCpL,EAAE1D,KAAK+O,qBAAoB,EAAG/O,KAAKiI,WAAW,EAAEjI,KAAKgP,WAAW,CAAC,EAAE,GAAGhP,KAAKiP,aAAQ,EAAOjP,KAAKkP,WAAW,EAAElP,KAAK8D,WAAW,EAAE9D,KAAKmP,SAAS,EAAEnP,KAAKoP,QAAQ,KAAKpP,KAAKqP,YAAO,EAAOrP,KAAK4D,EAAE,EAAE5D,KAAKc,EAAE,EAAEd,KAAKsP,cAAc5O,EAAEV,KAAKuF,OAAOjD,EAAEtC,KAAKiG,cAAcjG,KAAKiG,cAAcsJ,KAAKvP,MAAM,UAAUA,KAAKwP,WAAWxP,KAAKwP,SAAS5E,UAAU5K,KAAKwP,SAAS,MAAM,qBAAqB,OAAOxP,KAAKgE,QAAQhE,KAAKyP,aAAazP,KAAKiE,SAASjE,KAAK0P,aAAa,aAAa,YAAO,IAAS1P,KAAKiP,QAAQjP,KAAKiP,QAAQjP,KAAK0P,aAAa,WAAWpN,GAAGtC,KAAKiP,QAAQ3M,EAAE,aAAa,OAAOtC,KAAKoP,QAAQ,WAAW9M,GAAGtC,KAAKoP,QAAQ9M,EAAEtC,KAAK2P,oBAAoB,mBAAmB,OAAO3P,KAAKoP,mBAAmBQ,iBAAiB5P,KAAKoP,QAAQS,cAAc7P,KAAKoP,QAAQnL,OAAO,kBAAkB,OAAOjE,KAAKoP,mBAAmBQ,iBAAiB5P,KAAKoP,QAAQU,aAAa9P,KAAKoP,QAAQpL,MAAM,YAAY,YAAO,IAAShE,KAAKqP,OAAOrP,KAAKqP,OAAOrP,KAAKyP,YAAY,UAAUnN,GAAGtC,KAAKqP,OAAO/M,EAAE,aAAaA,GAAGpB,MAAMwM,aAAapL,GAAGtC,KAAK+P,cAAczN,EAAE0N,SAAS,oBAAoBhQ,KAAK+O,sBAAsB/O,KAAK+O,qBAAoB,EAAG/O,KAAK8O,qCAAqC9O,KAAKiG,iBAAiB,oBAAoB,MAAM,CAACgG,IAAI,kBAAK,aAAa3J,GAAG,MAAM0G,EAAE,eAAEhJ,KAAKiQ,WAAWhE,MAAMpH,EAAEH,GAAGpC,EAAE4N,mBAAmB,CAAC,EAAE,GAAG,CAAClQ,KAAK4D,EAAE5D,KAAKc,IAAID,EAAEb,KAAK8D,WAAW9D,KAAKkP,WAAW5M,EAAEwB,WAAWoB,EAAErE,EAAEb,KAAKgE,MAAMY,EAAE/D,EAAEb,KAAKiE,OAAOL,EAAEsG,KAAKiG,GAAGnQ,KAAKmP,SAAS,IAAI,eAAEnG,EAAEA,EAAE,eAAEnE,EAAEH,IAAI,eAAEsE,EAAEA,EAAE,eAAE9D,EAAE,EAAEN,EAAE,IAAI,eAAEoE,EAAEA,GAAGpF,GAAG,eAAEoF,EAAEA,EAAE,gBAAG9D,EAAE,GAAGN,EAAE,IAAI,eAAEoE,EAAEA,EAAE,eAAE9D,EAAEN,IAAI,eAAE5E,KAAKiQ,WAAWhE,IAAI3J,EAAE8N,gBAAgBpH,GAAG,mBAAmB1G,GAAGtC,KAAKwP,WAAWlN,EAAE+N,OAAOrQ,KAAKwP,SAASc,WAAWC,WAAWvQ,KAAKwP,SAASgB,iBAAiBxQ,KAAKwP,SAASiB,gBAAgBnO,EAAEoO,eAAe,KAAKpO,EAAE5B,GAAGV,KAAKwP,UAAUlN,EAAEqO,YAAY3Q,KAAKwP,SAAS9O,GAAG,cAAcA,GAAG,IAAIgD,EAAE,IAAI1D,KAAKqL,MAAM,OAAO,OAAO3H,EAAE1D,KAAKwP,WAAW9L,EAAEkH,eAAe5K,KAAKwP,SAAS,MAAM,IAAIxP,KAAK+O,oBAAoB,OAAO/O,KAAK+O,qBAAoB,EAAG/O,KAAKwP,WAAWxP,KAAKuF,OAAOvF,KAAKwP,SAAS7I,EAAEjG,EAAEV,KAAKyP,YAAYzP,KAAK0P,cAAc1P,KAAKwP,SAAS7I,EAAEjG,IAAI,MAAMX,EAAEC,KAAKuF,OAAO,GAAGxF,EAAE,CAAC,GAAGC,KAAKwP,SAASoB,OAAO5Q,KAAKyP,YAAYzP,KAAK0P,cAAcxK,EAAEnF,GAAG,GAAGA,aAAa,OAAE,CAAC,MAAMW,EAAEX,EAAE8Q,0BAA0B7Q,KAAKwP,SAASsB,QAAQ,eAAEpQ,GAAGA,EAAEkI,qBAAqB,WAAW5I,KAAKwP,SAASsB,QAAQlN,EAAE7D,SAAS6E,EAAE7E,IAAIC,KAAKwP,SAASsB,QAAQ/Q,GAAGC,KAAKwL,aAAaxL,KAAKwP,SAASsB,QAAQ,MAAM,WAAW9Q,KAAK2P,oBAAoB,WAAW3P,KAAK2P,uB,kCCAlmG,SAASjP,EAAEA,GAAG,OAAOA,aAAakP,iBAAiBlP,EAAEoP,aAAapP,EAAEsD,MAAM,SAAS1B,EAAE5B,GAAG,OAAOA,aAAakP,iBAAiBlP,EAAEmP,cAAcnP,EAAEuD,OAAO,SAAS+E,EAAEA,EAAEpE,EAAE9E,EAAE2K,GAAG,GAAG3K,EAAEiF,QAAQ0F,EAAE1F,MAAM,OAAOH,EAAE,MAAMlB,EAAEsF,EAAE9G,SAASgC,KAAKQ,EAAEsE,EAAEjF,kBAAkBjE,EAAEiF,OAAOG,EAAE8D,EAAEjF,kBAAkB0G,EAAE1F,OAAO,IAAI8J,EAAE7F,EAAE+H,aAAatG,EAAE1F,OAAO,MAAMsE,EAAEwF,EAAEmC,cAAcvG,EAAExF,KAAKpE,EAAEgO,EAAEoC,WAAWxG,EAAEzF,KAAK6J,EAAE7F,EAAE+H,aAAajR,EAAEiF,OAAO,MAAMoE,EAAE0F,EAAEmC,cAAclR,EAAEmF,KAAKlF,EAAE8O,EAAEoC,WAAWnR,EAAEkF,KAAKjE,EAAEL,EAAEkE,GAAGlB,EAAE,GAAGwN,EAAE5O,EAAEsC,GAAGlB,EAAE,GAAGzC,EAAEiJ,KAAKiH,MAAMpQ,IAAIsI,EAAEF,GAAGzE,IAAI0M,EAAElH,KAAKiH,MAAMD,KAAKrQ,EAAEd,GAAG2E,IAAI2M,EAAEnH,KAAKiH,MAAMpQ,EAAE2C,EAAE,IAAIwB,EAAER,IAAI4M,EAAEpH,KAAKiH,MAAMD,EAAExN,EAAE,IAAIwB,EAAER,IAAI6M,EAAE1M,EAAEnB,GAAG,OAAO6N,EAAE/C,WAAW,MAAMgD,UAAU5M,EAAE3D,EAAEmQ,EAAEC,EAAEC,EAAE,EAAE,EAAE5N,EAAE,GAAGA,EAAE,IAAI6N,EAAE,SAAS1M,EAAEnE,GAAG,MAAM4B,EAAEgM,SAASC,cAAc,UAAU,OAAOjM,EAAE0B,MAAM1B,EAAE2B,QAAQvD,EAAE4B,EAJ3tB,qE,wHCIuJ,MAAM,UAAU,OAAE,YAAYA,EAAEvC,EAAED,EAAE4D,EAAEgB,EAAEsE,EAAE,MAAM9H,MAAMoB,EAAEvC,EAAED,EAAE4D,EAAEgB,GAAG1E,KAAK2D,OAAO,IAAI,OAAEqF,EAAE,YAAW,GAAIhJ,KAAK2D,OAAOqL,WAAW,CAACtL,EAAEgB,GAAG1E,KAAK2D,OAAOH,KAAK,UAAU,IAAKxD,KAAKwL,SAAU,UAAUtK,MAAMkC,UAAUpD,KAAK2D,OAAOP,UAAU,aAAad,GAAGpB,MAAMwM,aAAapL,GAAGtC,KAAK2D,OAAO+J,aAAapL,GAAG,YAAYA,GAAGpB,MAAM0M,YAAYtL,GAAGtC,KAAK2D,OAAOiK,YAAYtL,GAAG,eAAeA,GAAGtC,KAAK2D,OAAOsE,WAAW3F,EAAE,iBAAiB,OAAOtC,KAAK2D,OAAOsE,WAAW,oBAAoB,MAAM,CAACgE,IAAI,iBAAIwF,SAAS,kBAAK,aAAanP,EAAE5B,GAAGQ,MAAM8G,aAAa1F,EAAE5B,GAAGV,KAAK2D,OAAOsM,WAAWhE,IAAIjM,KAAKiQ,WAAWhE,IAAI,WAAWjM,KAAK2D,OAAO0H,MAAMrL,KAAKqL,MAAM,WAAWrL,KAAK2D,SAAS3D,KAAK2D,OAAO0H,MAAM,O,wCCA9jB,MAAM,UAAU,OAAE,2BAA2B,OAAOrL,KAAK+H,SAAS2J,KAAMhR,GAAG,aAAaA,EAAEiD,OAAO2L,eAAgB,WAAWvP,GAAG,MAAMuC,EAAEtC,KAAKO,cAAcoR,cAAc,iBAAI5R,IAAI2D,EAAEsF,GAAGhJ,KAAKO,cAAc2B,SAASgC,KAAK,OAAO,IAAI,EAAEnE,EAAEuC,EAAE,GAAGA,EAAE,GAAGoB,EAAEsF,GAAG,eAAe,oBAAoBtI,GAAG,MAAMZ,EAAEY,EAAE4G,mBAAmB,CAACC,KAAK,gBAAgBC,QAAQ,CAAC,OAAE7D,QAAQkE,OAAO,IAAI7H,KAAK+H,SAASqG,IAAK1N,GAAGA,EAAEiD,QAAS8D,UAAU,OAAEE,MAAM,MAAM,IAAIzG,MAAMmG,oBAAoB3G,GAAGZ,GAAG,SAASY,GAAGV,KAAK4R,SAASlR,EAAE+G,YAAY,OAAEE,KAAKzG,MAAM2Q,SAASnR","file":"js/chunk-e0f75fae.38c3e437.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/set.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{BitmapTileContainer as t}from\"../engine/BitmapTileContainer.js\";const r=r=>{let s=class extends r{attach(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`),this._bitmapView=new t(this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){var e;this.container.removeChild(this._bitmapView),null==(e=this._bitmapView)||e.removeAllChildren()}};return s=e([i(\"esri.views.2d.layers.BitmapTileLayerView2D\")],s),s};export{r as BitmapTileLayerView2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Logger.js\";import{isAbortError as i}from\"../../../core/promiseUtils.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import{BitmapTileLayerView2D as a}from\"./BitmapTileLayerView2D.js\";import{LayerView2DMixin as l}from\"./LayerView2D.js\";import{resampleImage as h}from\"./support/imageUtils.js\";import o from\"../tiling/TileInfoView.js\";import n from\"../tiling/TileKey.js\";import c from\"../tiling/TileQueue.js\";import u from\"../tiling/TileStrategy.js\";import f from\"../../layers/LayerView.js\";import{RefreshableLayerView as p}from\"../../layers/RefreshableLayerView.js\";const d=[102113,102100,3857,3785,900913],y=[0,0],m=t.getLogger(\"esri.views.2d.layers.WMTSLayerView2D\");let w=class extends(p(a(l(f)))){constructor(){super(...arguments),this._tileStrategy=null,this._fetchQueue=null,this._tileRequests=new Map,this.layer=null}get tileMatrixSet(){if(this.layer.activeLayer.tileMatrixSetId)return this.layer.activeLayer.tileMatrixSet;const e=this._getTileMatrixSetBySpatialReference(this.layer.activeLayer);return e?(this.layer.activeLayer.tileMatrixSetId=e.id,e):null}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume(),this.notifyChange(\"updating\")}attach(){if(!this.tileMatrixSet)return;const{tileInfo:e}=this.tileMatrixSet;this._tileInfoView=new o(e),this._fetchQueue=new c({tileInfoView:this._tileInfoView,concurrency:16,process:(e,t)=>this.fetchTile(e,t)}),this._tileStrategy=new u({cachePolicy:\"keep\",resampling:!0,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView}),this.handles.add(this.watch([\"layer.activeLayer.styleId\",\"tileMatrixSet\"],(()=>this._refresh())),this.declaredClass),super.attach()}detach(){var e,t;super.detach(),this.handles.remove(this.declaredClass),null==(e=this._tileStrategy)||e.destroy(),null==(t=this._fetchQueue)||t.destroy(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}releaseTile(e){this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once(\"detach\",(()=>e.destroy())),this.requestUpdate()}acquireTile(e){const t=this._bitmapView.createTile(e),i=t.bitmap;return[i.x,i.y]=this._tileInfoView.getTileCoords(y,t.key),i.resolution=this._tileInfoView.getTileResolution(t.key),[i.width,i.height]=this._tileInfoView.tileInfo.size,this._enqueueTileFetch(t),this._bitmapView.addChild(t),this.requestUpdate(),t}async doRefresh(){this.updateRequested||this.suspended||this._refresh()}isUpdating(){return this._fetchQueue.length>0}async fetchTile(e,t={}){const s=\"tilemapCache\"in this.layer?this.layer.tilemapCache:null,{signal:r,resamplingLevel:a=0}=t;if(!s)return this._fetchImage(e,r);const l=new n(0,0,0,0);let o;try{await s.fetchAvailabilityUpsample(e.level,e.row,e.col,l,{signal:r}),o=await this._fetchImage(l,r)}catch(c){if(i(c))throw c;if(a<3){const i=this._tileInfoView.getTileParentId(e.id);if(i){const s=new n(i),r=await this.fetchTile(s,{...t,resamplingLevel:a+1});return h(this._tileInfoView,r,s,e)}}throw c}return h(this._tileInfoView,o,l,e)}canResume(){const e=super.canResume();return e?null!==this.tileMatrixSet:e}async _enqueueTileFetch(e){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key);e.bitmap.source=t,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.once(\"attach\",(()=>this.requestUpdate()))}catch(t){i(t)||m.error(t)}this.requestUpdate()}}async _fetchImage(e,t){return this.layer.fetchTile(e.level,e.row,e.col,{signal:t})}_refresh(){this._fetchQueue.reset(),this._tileStrategy.tiles.forEach((e=>{if(!e.bitmap.source)return;const t={id:e.key.id,fulfilled:!1,promise:this._fetchQueue.push(e.key).then((t=>{e.bitmap.source=t})).catch((t=>{i(t)||(e.bitmap.source=null)})).finally((()=>{e.requestRender(),this.notifyChange(\"updating\"),t.fulfilled=!0}))};this._tileRequests.set(e,t)})),this.notifyChange(\"updating\")}_getTileMatrixSetBySpatialReference(e){const t=this.view.spatialReference;if(!e.tileMatrixSets)return null;let i=e.tileMatrixSets.find((e=>e.tileInfo.spatialReference.wkid===t.wkid));return!i&&t.isWebMercator&&(i=e.tileMatrixSets.find((e=>d.indexOf(e.tileInfo.spatialReference.wkid)>-1))),i}};e([s()],w.prototype,\"suspended\",void 0),e([s({readOnly:!0})],w.prototype,\"tileMatrixSet\",null),w=e([r(\"esri.views.2d.layers.WMTSLayerView2D\")],w);const _=w;export{_ as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/has.js\";import{WGLDrawPhase as r}from\"./enums.js\";import s from\"./WGLContainer.js\";import t from\"./brushes/WGLBrushInfo.js\";import n from\"./brushes/WGLBrushStencil.js\";const i=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;class o extends s{constructor(e){super(),this._tileInfoView=e}get requiresDedicatedFBO(){return!1}renderChildren(e){this.sortChildren(i),this.setStencilReference(),super.renderChildren(e)}createRenderParams(e){const{state:r}=e,s=super.createRenderParams(e);return s.requiredLevel=this._tileInfoView.getClosestInfoForScale(r.scale).level,s.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(r.scale),s}prepareRenderPasses(s){const i=super.prepareRenderPasses(s);return i.push(s.registerRenderPass({name:\"stencil\",brushes:[n],drawPhase:r.DEBUG|r.MAP|r.HIGHLIGHT,target:()=>this.getStencilTarget()})),e(\"esri-tiles-debug\")&&i.push(s.registerRenderPass({name:\"tileInfo\",brushes:[t],drawPhase:r.DEBUG,target:()=>this.children})),i}getStencilTarget(){return this.children}updateTransforms(e){for(const r of this.children){const s=this._tileInfoView.getTileResolution(r.key);r.setTransform(e,s)}}setStencilReference(){let e=1;for(const r of this.children)r.stencilRef=e++}}export{o as default,i as sortByLevel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Logger.js\";import{isAbortError as s}from\"../../core/promiseUtils.js\";import{on as o}from\"../../core/watchUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";const i=i=>{let c=class extends i{initialize(){this.handles.add(o(this,\"layer\",\"refresh\",(r=>{this.doRefresh(r.dataChanged).catch((r=>{s(r)||e.getLogger(this.declaredClass).error(r)}))})),\"RefreshableLayerView\")}};return r([t()],c.prototype,\"layer\",void 0),c=r([a(\"esri.layers.mixins.RefreshableLayerView\")],c),c};export{i as RefreshableLayerView,i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../core/maybe.js\";class i{constructor(e,t,i){this.pixelBlock=e,this.extent=t,this.originalPixelBlock=i}get width(){return e(this.pixelBlock)?this.pixelBlock.width:0}get height(){return e(this.pixelBlock)?this.pixelBlock.height:0}render(e){const i=this.pixelBlock;if(t(i))return;const l=this.filter({pixelBlock:i});if(t(l.pixelBlock))return;const r=l.pixelBlock.getAsRGBA(),o=e.createImageData(l.pixelBlock.width,l.pixelBlock.height);o.data.set(r),e.putImageData(o,0,0)}getRenderedRasterPixels(){const e=this.filter({pixelBlock:this.pixelBlock});return t(e.pixelBlock)?null:{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)}}}export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import t from\"../../../../core/Logger.js\";import{isSome as r}from\"../../../../core/maybe.js\";import{e as s}from\"../../../../chunks/earcut.js\";import{s as n}from\"../../../../chunks/vec2.js\";import{a as o}from\"../../../../chunks/vec2f64.js\";import{convertFromNestedArray as c,convertFromPolygon as i}from\"../../../../layers/graphics/featureConversionUtils.js\";import a from\"../../../../layers/graphics/OptimizedGeometry.js\";import{i1616to32 as f}from\"./number.js\";import h from\"../../../webgl/BufferObject.js\";const m=t.getLogger(\"esri.views.2d.engine.webgl.Mesh2D\"),u=t=>{switch(t.BYTES_PER_ELEMENT){case 1:return 5121;case 2:return 5123;case 4:return 5125;default:throw new e(\"Cannot get DataType of array\")}},y=(e,t,r,s)=>{let n=0;for(let o=1;o<r;o++){const r=e[2*(t+o-1)],s=e[2*(t+o-1)+1];n+=(e[2*(t+o)]-r)*(e[2*(t+o)+1]+s)}return s?n>0:n<0},x=({coords:e,lengths:t},r)=>{const n=[];for(let o=0,c=0;o<t.length;c+=t[o],o+=1){const i=c,a=[];for(;o<t.length-1&&y(e,c+t[o],t[o+1],r);o+=1,c+=t[o])a.push(c+t[o]-i);const f=e.slice(2*i,2*(c+t[o])),h=s(f,a,2);for(const e of h)n.push(e+i)}return n};class g{constructor(e,t,r,s=!1){this._cache={},this.vertices=e,this.indices=t,this.primitiveType=r,this.isMapSpace=s}static fromRect({x:e,y:t,width:r,height:s}){const n=e,o=t,c=n+r,i=o+s;return g.fromScreenExtent({xmin:n,ymin:o,xmax:c,ymax:i})}static fromPath(e){const t=c(new a,e.path,!1,!1),r=t.coords,s=new Uint32Array(x(t,!0)),n=new Uint32Array(r.length/2);for(let o=0;o<n.length;o++)n[o]=f(Math.floor(r[2*o]),Math.floor(r[2*o+1]));return new g({geometry:n},s,4)}static fromGeometry(t,r){const s=r.geometry.type;switch(s){case\"polygon\":return g.fromPolygon(t,r.geometry);case\"extent\":return g.fromMapExtent(t,r.geometry);default:return m.error(new e(\"mapview-bad-type\",`Unable to create a mesh from type ${s}`,r)),g.fromRect({x:0,y:0,width:1,height:1})}}static fromPolygon(e,t){const r=i(new a,t,!1,!1),s=r.coords,c=new Uint32Array(x(r,!1)),h=new Uint32Array(s.length/2),m=o(),u=o();for(let o=0;o<h.length;o++)n(m,s[2*o],s[2*o+1]),e.toScreen(u,m),h[o]=f(Math.floor(u[0]),Math.floor(u[1]));return new g({geometry:h},c,4,!0)}static fromScreenExtent({xmin:e,xmax:t,ymin:r,ymax:s}){const n={geometry:new Uint32Array([f(e,r),f(t,r),f(e,s),f(e,s),f(t,r),f(t,s)])},o=new Uint32Array([0,1,2,3,4,5]);return new g(n,o,4)}static fromMapExtent(e,t){const[r,s]=e.toScreen([0,0],[t.xmin,t.ymin]),[n,o]=e.toScreen([0,0],[t.xmax,t.ymax]),c={geometry:new Uint32Array([f(r,s),f(n,s),f(r,o),f(r,o),f(n,s),f(n,o)])},i=new Uint32Array([0,1,2,3,4,5]);return new g(c,i,4)}destroy(){r(this._cache.indexBuffer)&&this._cache.indexBuffer.dispose();for(const e in this._cache.vertexBuffers)r(this._cache.vertexBuffers[e])&&this._cache.vertexBuffers[e].dispose()}get elementType(){return u(this.indices)}getIndexBuffer(e,t=35044){return this._cache.indexBuffer||(this._cache.indexBuffer=h.createIndex(e,t,this.indices)),this._cache.indexBuffer}getVertexBuffers(e,t=35044){return this._cache.vertexBuffers||(this._cache.vertexBuffers=Object.keys(this.vertices).reduce(((r,s)=>({...r,[s]:h.createVertex(e,t,this.vertices[s])})),{})),this._cache.vertexBuffers}}export{g as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/Error.js\";import e from\"../../../../core/Logger.js\";import{isSome as r,isNone as s}from\"../../../../core/maybe.js\";import{c as i}from\"../../../../chunks/mat3f32.js\";import{DisplayObject as o}from\"../DisplayObject.js\";import h from\"./Mesh2D.js\";import a from\"../../../webgl/VertexArrayObject.js\";const c=e.getLogger(\"esri.views.2d.engine.webgl.ClippingInfo\"),n=t=>parseFloat(t)/100;class m extends o{constructor(t,e){super(),this._clip=e,this._cache={},this.stage=t,this._handle=e.watch(\"version\",(()=>this._invalidate())),this.ready()}static fromClipArea(t,e){return new m(t,e)}_destroyGL(){r(this._cache.mesh)&&(this._cache.mesh.destroy(),this._cache.mesh=null),r(this._cache.vao)&&(this._cache.vao.dispose(),this._cache.vao=null)}destroy(){this._destroyGL(),this._handle.remove()}getVAO(t,e,r,i){const[o,h]=e.size;if(\"geometry\"!==this._clip.type&&this._lastWidth===o&&this._lastHeight===h||(this._lastWidth=o,this._lastHeight=h,this._destroyGL()),s(this._cache.vao)){const s=this._createMesh(e,this._clip),o=s.getIndexBuffer(t),h=s.getVertexBuffers(t);this._cache.mesh=s,this._cache.vao=new a(t,r,i,h,o)}return this._cache.vao}_createTransforms(){return{dvs:i()}}_invalidate(){this._destroyGL(),this.requestRender()}_createScreenRect(t,e){const[r,s]=t.size,i=\"string\"==typeof e.left?n(e.left)*r:e.left,o=\"string\"==typeof e.right?n(e.right)*r:e.right,h=\"string\"==typeof e.top?n(e.top)*s:e.top,a=\"string\"==typeof e.bottom?n(e.bottom)*s:e.bottom,c=i,m=h;return{x:c,y:m,width:Math.max(r-o-c,0),height:Math.max(s-a-m,0)}}_createMesh(e,r){switch(r.type){case\"rect\":return h.fromRect(this._createScreenRect(e,r));case\"path\":return h.fromPath(r);case\"geometry\":return h.fromGeometry(e,r);default:return c.error(new t(\"mapview-bad-type\",\"Unable to create ClippingInfo mesh from clip of type: ${clip.type}\")),h.fromRect({x:0,y:0,width:1,height:1})}}}export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{isNone as e,isSome as r}from\"../../../../core/maybe.js\";import{c as s}from\"../../../../chunks/mat3f32.js\";import{brushes as t}from\"../brushes.js\";import{Container as i}from\"../Container.js\";import n from\"./ClippingInfo.js\";import{WGLDrawPhase as o}from\"./enums.js\";class a extends i{constructor(){super(...arguments),this.name=this.constructor.name}set clips(e){this._clips=e,this.children.forEach((r=>r.clips=e)),this._updateClippingInfo()}_createTransforms(){return{dvs:s()}}doRender(e){const r=this.createRenderParams(e),{painter:s,globalOpacity:t,profiler:i,drawPhase:n}=r,a=n===o.LABEL||n===o.HIGHLIGHT?1:t*this.computedOpacity;i.recordContainerStart(this.name),s.beforeRenderLayer(r,this._clippingInfos?255:0,a),this.updateTransforms(e.state),this.renderChildren(r),s.compositeLayer(r,a),i.recordContainerEnd()}renderChildren(r){e(this._renderPasses)&&(this._renderPasses=this.prepareRenderPasses(r.painter));for(const e of this.children)e.beforeRender(r);for(const e of this._renderPasses)try{e.render(r)}catch(s){}for(const e of this.children)e.afterRender(r)}createRenderParams(e){return e.requireFBO=this.requiresDedicatedFBO,e}prepareRenderPasses(e){return[e.registerRenderPass({name:\"clip\",brushes:[t.clip],target:()=>this._clippingInfos,drawPhase:o.MAP|o.LABEL|o.LABEL_ALPHA|o.DEBUG|o.HIGHLIGHT})]}updateTransforms(e){for(const r of this.children)r.setTransform(e)}onAttach(){super.onAttach(),this._updateClippingInfo()}onDetach(){super.onDetach(),this._updateClippingInfo()}_updateClippingInfo(){if(r(this._clippingInfos)&&(this._clippingInfos.forEach((e=>e.destroy())),this._clippingInfos=null),!this.stage)return;const e=this._clips;r(e)&&e.length&&(this._clippingInfos=e.items.map((e=>n.fromClipArea(this.stage,e)))),this.requestRender()}}export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../core/maybe.js\";import{b as e,c as i,r as s,j as r,m as h}from\"../../../chunks/mat3.js\";import{c as n}from\"../../../chunks/mat3f32.js\";import{f as u}from\"../../../chunks/vec2f32.js\";import{DisplayObject as o}from\"./DisplayObject.js\";import a from\"./ImageryBitmapSource.js\";import d from\"../../webgl/Texture.js\";function c(t){return t&&\"render\"in t}function l(t){return t&&!(\"render\"in t)}function x(t){const e=document.createElement(\"canvas\");return e.width=t.width,e.height=t.height,t.render(e.getContext(\"2d\")),e}function _(t,e,i){const s={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071};return e&&i&&(s.width=e,s.height=i),new d(t,s)}class g extends o{constructor(t=null,e,i=!0){super(),this.requestRenderOnSourceChangedEnabled=i,this._textureInvalidated=!0,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.blendFunction=e,this.source=t,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null)}get isSourceScaled(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}get height(){return void 0!==this._height?this._height:this.sourceHeight}set height(t){this._height=t}get source(){return this._source}set source(t){this._source=t,this.invalidateTexture()}get sourceHeight(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}get sourceWidth(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}get width(){return void 0!==this._width?this._width:this.sourceWidth}set width(t){this._width=t}beforeRender(t){super.beforeRender(t),this.updateTexture(t.context)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}_createTransforms(){return{dvs:n()}}setTransform(t){const n=e(this.transforms.dvs),[o,a]=t.toScreenNoRotation([0,0],[this.x,this.y]),d=this.resolution/this.pixelRatio/t.resolution,c=d*this.width,l=d*this.height,x=Math.PI*this.rotation/180;i(n,n,u(o,a)),i(n,n,u(c/2,l/2)),s(n,n,-x),i(n,n,u(-c/2,-l/2)),r(n,n,u(c,l)),h(this.transforms.dvs,t.displayViewMat3,n)}setSamplingProfile(t){this._texture&&(t.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(t.samplingMode))}bind(t,e){this._texture&&t.bindTexture(this._texture,e)}updateTexture(e){var i;if(!this.stage)return null==(i=this._texture)||i.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this.source?this._texture=_(e,this.sourceWidth,this.sourceHeight):this._texture=_(e));const s=this.source;if(s){if(this._texture.resize(this.sourceWidth,this.sourceHeight),c(s))if(s instanceof a){const e=s.getRenderedRasterPixels();this._texture.setData(t(e)?e.renderedRasterPixels:null)}else this._texture.setData(x(s));else l(s)&&this._texture.setData(s);this.ready()}else this._texture.setData(null)}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}}export{g as Bitmap,c as isImageSource,x as rasterize};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction e(e){return e instanceof HTMLImageElement?e.naturalWidth:e.width}function t(e){return e instanceof HTMLImageElement?e.naturalHeight:e.height}function n(n,l,r,u){if(r.level===u.level)return l;const i=n.tileInfo.size,a=n.getTileResolution(r.level),c=n.getTileResolution(u.level);let g=n.getLODInfoAt(u.level);const h=g.getXForColumn(u.col),d=g.getYForRow(u.row);g=n.getLODInfoAt(r.level);const f=g.getXForColumn(r.col),s=g.getYForRow(r.row),m=e(l)/i[0],v=t(l)/i[1],w=Math.round(m*((h-f)/a)),I=Math.round(v*(-(d-s)/a)),M=Math.round(m*i[0]*(c/a)),F=Math.round(v*i[1]*(c/a)),L=o(i);return L.getContext(\"2d\").drawImage(l,w,I,M,F,0,0,i[0],i[1]),L}function o(e){const t=document.createElement(\"canvas\");return[t.width,t.height]=e,t}export{o as createBlankImage,n as resampleImage};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{c as t}from\"../../../chunks/mat3f32.js\";import{Bitmap as e}from\"./Bitmap.js\";import{TiledDisplayObject as s}from\"./webgl/TiledDisplayObject.js\";class r extends s{constructor(t,s,r,i,a,n=null){super(t,s,r,i,a),this.bitmap=new e(n,\"standard\",!1),this.bitmap.coordScale=[i,a],this.bitmap.once(\"isReady\",(()=>this.ready()))}destroy(){super.destroy(),this.bitmap.destroy()}beforeRender(t){super.beforeRender(t),this.bitmap.beforeRender(t)}afterRender(t){super.afterRender(t),this.bitmap.afterRender(t)}set stencilRef(t){this.bitmap.stencilRef=t}get stencilRef(){return this.bitmap.stencilRef}_createTransforms(){return{dvs:t(),tileMat3:t()}}setTransform(t,e){super.setTransform(t,e),this.bitmap.transforms.dvs=this.transforms.dvs}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap&&(this.bitmap.stage=null)}}export{r as BitmapTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../geometry/support/aaBoundingRect.js\";import{BitmapTile as r}from\"./BitmapTile.js\";import{brushes as s}from\"./brushes.js\";import{WGLDrawPhase as t}from\"./webgl/enums.js\";import i from\"./webgl/TileContainer.js\";class n extends i{get requiresDedicatedFBO(){return this.children.some((e=>\"additive\"===e.bitmap.blendFunction))}createTile(s){const t=this._tileInfoView.getTileBounds(e(),s),[i,n]=this._tileInfoView.tileInfo.size;return new r(s,t[0],t[3],i,n)}destroyTile(){}prepareRenderPasses(e){const r=e.registerRenderPass({name:\"bitmap (tile)\",brushes:[s.bitmap],target:()=>this.children.map((e=>e.bitmap)),drawPhase:t.MAP});return[...super.prepareRenderPasses(e),r]}doRender(e){this.visible&&e.drawPhase===t.MAP&&super.doRender(e)}}export{n as BitmapTileContainer};\n"],"sourceRoot":""}