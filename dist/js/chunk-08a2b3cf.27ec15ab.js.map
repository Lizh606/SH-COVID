{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/views/2d/layers/features/FeatureStore2D.js","webpack:///./node_modules/@arcgis/core/layers/graphics/data/utils.js","webpack:///./node_modules/@arcgis/core/geometry/support/intersects.js","webpack:///./node_modules/@arcgis/core/layers/graphics/contains.js","webpack:///./node_modules/@arcgis/core/layers/graphics/data/spatialQuerySupport.js","webpack:///./node_modules/@arcgis/core/views/2d/layers/features/support/whereUtils.js","webpack:///./node_modules/@arcgis/core/views/2d/layers/features/support/FeatureFilter.js","webpack:///./node_modules/@arcgis/core/views/2d/arcade/callExpressionWithCursor.js","webpack:///./node_modules/@arcgis/core/views/2d/layers/features/Store2D.js","webpack:///./node_modules/@arcgis/core/core/CircularArray.js","webpack:///./node_modules/@arcgis/core/layers/graphics/data/timeSupport.js","webpack:///./node_modules/@arcgis/core/views/2d/layers/features/support/FeatureSetReaderPBFIndirect.js"],"names":["h","t","e","c","I","u","getObjectId","getAttributes","readAttributes","getAttribute","readAttribute","cloneWithGeometry","getGeometry","readHydratedGeometry","getCentroid","readCentroid","l","s","a","r","super","this","featureAdapter","events","_featureSetsByInstance","Map","_objectIdToDisplayId","_spatialIndexInvalid","_indexSearchCache","_index","minX","_storage","getXMin","minY","getYMin","maxX","getXMax","maxY","getYMax","mode","forEach","readGeometry","isPoint","lengths","reduce","length","featureCount","vertexCount","ringCount","has","addOrUpdate","attachStorage","getCursor","next","getDisplayId","setComputedAttributes","scale","set","instance","_insertFeature","emit","_rebuildIndex","id","find","tileId","readers","n","_searchIndex","bounds","i","getInstanceId","get","push","from","enqueue","getIndex","createDisplayId","setDisplayId","setInstanceId","delete","releaseDisplayId","removeAtIndex","isEmpty","_lookupFeature","_getFeatureSet","setIndex","lookupFeatureByDisplayId","unsetAttributeData","search","setBounds","clear","load","j","esriSRUnit_Meter","esriSRUnit_Kilometer","esriSRUnit_Foot","esriSRUnit_StatuteMile","esriSRUnit_NauticalMile","esriSRUnit_USNauticalMile","U","Object","freeze","M","F","G","N","esriGeometryPoint","esriGeometryPolyline","esriGeometryPolygon","esriGeometryMultipoint","O","o","hasZ","hasM","J","m","f","g","geometry","async","P","outFields","orderByFields","groupByFieldsForStatistics","outStatistics","trim","onStatisticField","outSR","spatialReference","Z","where","test","b","distance","units","spatialRel","toJSON","fromJSON","then","x","geodesicBuffer","z","B","JSON","parse","stringify","E","coords","d","R","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","S","spatialRelationship","queryGeometry","esriGeometryEnvelope","layerGeometry","v","y","Promise","resolve","bind","query","rings","getLogger","field","WhereClause","create","isStandardized","error","readArcadeFeature","testFeature","warn","_","p","_geometryBounds","_idToVisibility","_serviceInfo","_hash","_applyFilter","_resetAllHiddenIds","update","show","hide","Set","timeExtent","objectIds","all","_setGeometryFilter","_setIdFilter","_setAttributeFilter","_setTimeFilter","_clause","fieldsIndex","_idsToShow","_idsToHide","hiddenIds","_spatialQueryOperator","geometryType","_timeOperator","timeInfo","_filterByGeometry","_filterById","_filterByTime","_filterByExpression","size","referencesGeometry","evaluate","$feature","_canCacheExpressionValue","_sourceInfo","_bitsets","computed","getBitset","createBitset","_schema","console","debug","targets","name","attributes","type","_createArcadeComputedField","_createLabelArcadeComputedField","_computedFields","some","expression","referencesScale","_statisticFields","_evaluateField","resultType","setComputedNumericAtIndex","fieldIndex","setComputedStringAtIndex","valueExpression","createLabelFunction","label","builder","$view","_start","maxSize","_buffer","Array","dequeue","startTimeField","endTimeField","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","isNaN","Math","min","max","start","end","createInstance","_currentIndex","_reader","_indices","copy","_nextIndex","_getExists","setArcadeSpatialReference","hasFeatures","exceededTransferLimit","getStorage","getComputedNumericAtIndex","getComputedStringAtIndex","transform","joinAttributes","hasField","setField","keys","castToText","getQuantizationTransform","getAttributeHash","getGroupId","setGroupId","getXHydrated","getYHydrated","getX","getY","readLegacyFeature","readOptimizedFeature","readLegacyPointGeometry","readLegacyGeometry","readLegacyCentroid","readGeometryArea","readUnquantizedGeometry","Error"],"mappings":"kHAAA,wKAI2b,SAASA,EAAEC,EAAEC,GAAG,OAAOD,GAAG,GAAGC,EAAE,SAASC,EAAEF,GAAG,OAAO,WAAWA,KAAK,GAAG,SAASG,EAAEH,GAAG,OAAO,MAAMA,EAAE,MAAMI,EAAE,CAACC,YAAYL,GAAGA,EAAEK,cAAcC,cAAcN,GAAGA,EAAEO,iBAAiBC,aAAa,CAACR,EAAEC,IAAID,EAAES,cAAcR,GAAGS,kBAAkB,CAACV,EAAEC,IAAID,EAAEW,YAAYX,GAAGA,EAAEY,uBAAuBC,YAAY,CAACb,EAAEC,IAAID,EAAEc,gBAAgB,MAAMC,UAAU,OAAE,YAAYC,EAAEC,EAAEC,GAAGC,MAAMH,EAAEC,GAAGG,KAAKC,eAAejB,EAAEgB,KAAKE,OAAO,IAAI,OAAEF,KAAKG,uBAAuB,IAAIC,IAAIJ,KAAKK,qBAAqB,IAAID,IAAIJ,KAAKM,sBAAqB,EAAGN,KAAKO,kBAAkB,IAAI,OAAE,IAAIP,KAAKQ,OAAO,eAAE,EAAG5B,IAAG,CAAE6B,KAAKT,KAAKU,SAASC,QAAQ/B,GAAGgC,KAAKZ,KAAKU,SAASG,QAAQjC,GAAGkC,KAAKd,KAAKU,SAASK,QAAQnC,GAAGoC,KAAKhB,KAAKU,SAASO,QAAQrC,MAAOoB,KAAKU,SAASb,EAAEG,KAAKkB,KAAKpB,EAAE,cAAc,OAAOE,KAAKU,SAAS,sBAAsB,IAAI9B,EAAE,EAAEC,EAAE,EAAEe,EAAE,EAAE,OAAOI,KAAKmB,QAAStB,IAAI,MAAMC,EAAED,EAAEuB,eAAetB,IAAIjB,GAAGiB,EAAEuB,QAAQ,EAAEvB,EAAEwB,QAAQC,OAAO,CAAE3C,EAAEC,IAAID,EAAEC,EAAG,GAAGe,GAAGE,EAAEuB,QAAQ,EAAEvB,EAAEwB,QAAQE,OAAO5C,GAAG,KAAM,CAAC6C,aAAa7C,EAAE8C,YAAY7C,EAAE8C,UAAU/B,GAAG,YAAYhB,GAAG,OAAOoB,KAAKG,uBAAuByB,IAAIhD,GAAG,WAAWA,EAAEC,GAAG,GAAG,eAAEA,EAAEgD,aAAa,OAAOhD,EAAE,GAAGA,EAAEgD,YAAYC,cAAc9B,KAAKU,UAAU,aAAaV,KAAKkB,KAAK,CAAC,MAAMtB,EAAEf,EAAEgD,YAAYE,YAAY,KAAKnC,EAAEoC,QAAQ,CAAC,MAAMnD,EAAEe,EAAEqC,eAAejC,KAAKkC,sBAAsBlC,KAAKU,SAASd,EAAEf,EAAED,EAAEuD,OAAO,OAAOtD,EAAEmB,KAAKG,uBAAuBiC,IAAIvD,EAAEgD,YAAYQ,SAASxD,EAAEgD,aAAa,MAAMhC,EAAEhB,EAAEgD,YAAYE,YAAY,KAAKlC,EAAEmC,QAAQhC,KAAKsC,eAAezC,EAAEjB,EAAEuD,OAAO,OAAOnC,KAAKM,sBAAqB,EAAGN,KAAKE,OAAOqC,KAAK,WAAW1D,EAAE,OAAOD,GAAGoB,KAAKwC,gBAAgB,MAAM3D,EAAED,EAAE6D,GAAG7C,EAAEI,KAAKO,kBAAkBmC,KAAM9D,GAAGA,EAAE+D,SAAS9D,GAAI,GAAG,eAAEe,GAAG,OAAOA,EAAEgD,QAAQ,MAAM9C,EAAE,IAAIM,IAAIyC,EAAE7C,KAAK8C,aAAalE,EAAEmE,QAAQC,EAAE,GAAG,IAAI,MAAMnD,KAAKgD,EAAE,CAAC,MAAMjE,EAAEoB,KAAKU,SAASuC,cAAcpD,GAAGhB,EAAEC,EAAEF,GAAGgB,EAAEb,EAAEH,GAAGkB,EAAE8B,IAAI/C,IAAIiB,EAAEsC,IAAIvD,EAAE,IAAIiB,EAAEoD,IAAIrE,GAAGsE,KAAKvD,GAAG,OAAOE,EAAEqB,QAAQ,CAAEvC,EAAEC,KAAK,MAAMe,EAAEI,KAAKG,uBAAuB+C,IAAIrE,GAAGmE,EAAEG,KAAK,OAAEC,KAAKxD,EAAEhB,MAAOoB,KAAKO,kBAAkB8C,QAAQ,CAACV,OAAO9D,EAAE+D,QAAQI,IAAIA,EAAE,OAAOpE,GAAG,MAAMC,EAAED,EAAEmD,YAAYnC,EAAEI,KAAKU,SAAS,KAAK7B,EAAEmD,QAAQ,CAAC,IAAInC,EAAE,MAAMjB,EAAED,EAAEE,EAAEwD,SAASxD,EAAEyE,YAAYxD,EAAEjB,EAAEI,cAAc4D,EAAE,OAAOhD,EAAEG,KAAKK,qBAAqB6C,IAAIpD,IAAID,EAAEG,KAAKU,SAAS6C,kBAAkB1E,EAAE2E,aAAaX,GAAGjD,EAAE6D,cAAcZ,EAAEjE,GAAGoB,KAAKK,qBAAqB+B,IAAItC,EAAE+C,GAAG7C,KAAKG,uBAAuBiC,IAAIxD,EAAEyD,SAASzD,GAAGoB,KAAKM,sBAAqB,EAAG,OAAO1B,GAAG,MAAMC,EAAEmB,KAAKK,qBAAqB6C,IAAItE,GAAG,IAAIC,EAAE,OAAO,MAAMe,EAAEI,KAAKU,SAASuC,cAAcpE,GAAGgB,EAAEd,EAAEa,GAAGE,EAAEhB,EAAEc,GAAGiD,EAAE7C,KAAKG,uBAAuB+C,IAAIpD,GAAGE,KAAKK,qBAAqBqD,OAAO9E,GAAGoB,KAAKU,SAASiD,iBAAiB9E,GAAGgE,EAAEe,cAAc/D,GAAGgD,EAAEgB,SAAS7D,KAAKG,uBAAuBuD,OAAO5D,GAAGE,KAAKM,sBAAqB,EAAG,QAAQ1B,GAAGoB,KAAKK,qBAAqBc,QAAStC,IAAI,MAAMe,EAAEI,KAAKU,SAASuC,cAAcpE,GAAGgB,EAAEG,KAAK8D,eAAelE,GAAGhB,EAAEiB,KAAM,cAAcjB,GAAGoB,KAAKK,qBAAqBc,QAAStC,IAAI,MAAMe,EAAEI,KAAKU,SAASuC,cAAcpE,GAAGgB,EAAEf,EAAEc,GAAGE,EAAEf,EAAEa,GAAGiD,EAAE7C,KAAK+D,eAAelE,GAAGgD,EAAEmB,SAASlE,GAAGlB,EAAEiE,KAAM,gBAAgBjE,EAAEC,GAAG,MAAMe,EAAEI,KAAK8C,aAAalE,GAAG,IAAI,MAAMiB,KAAKD,EAAE,CAAC,MAAMhB,EAAEoB,KAAKiE,yBAAyBpE,EAAEG,KAAKU,UAAU7B,EAAE,eAAED,KAAK,cAAcA,EAAEC,EAAEe,GAAGI,KAAKwC,gBAAgB,MAAM3C,EAAE,CAAC,EAAE,EAAE,EAAE,GAAG,IAAI,MAAMC,KAAKlB,EAAE,CAAC,IAAIkB,EAAEsB,eAAe,SAAS,MAAMxC,EAAEkB,EAAEmC,eAAepC,EAAE,GAAGG,KAAKU,SAASC,QAAQ/B,GAAGiB,EAAE,GAAGG,KAAKU,SAASG,QAAQjC,GAAGiB,EAAE,GAAGG,KAAKU,SAASK,QAAQnC,GAAGiB,EAAE,GAAGG,KAAKU,SAASO,QAAQrC,GAAGC,EAAE,eAAEe,EAAEC,KAAK,cAAcjB,EAAEC,EAAEe,GAAGI,KAAKM,sBAAqB,EAAGN,KAAKK,qBAAqBc,QAAQ,CAAEtB,EAAEC,KAAKlB,EAAEgD,IAAI/B,KAAKhB,EAAE8E,iBAAiB9D,GAAGD,GAAGA,EAAEsE,mBAAmBrE,GAAGG,KAAKK,qBAAqBqD,OAAO5D,MAAOE,KAAKE,OAAOqC,KAAK,WAAW,iBAAiB3D,GAAGoB,KAAKM,sBAAqB,EAAGN,KAAKG,uBAAuBgB,QAAQ,CAAEtC,EAAEe,KAAKhB,EAAEgD,IAAIhC,IAAII,KAAKG,uBAAuBuD,OAAO9D,KAAM,eAAehB,EAAEC,GAAG,MAAMgB,EAAEG,KAAKiE,yBAAyBrF,EAAEC,GAAG,OAAO,eAAEgB,GAAG,KAAKA,EAAEZ,cAAc,gBAAgBL,GAAG,OAAOoB,KAAKK,qBAAqB6C,IAAItE,GAAG,yBAAyBA,EAAEC,GAAG,MAAMe,EAAEf,EAAEoE,cAAcrE,GAAG,OAAOoB,KAAK8D,eAAelE,GAAG,wBAAwBhB,GAAG,MAAMC,EAAEmB,KAAKU,SAASuC,cAAcrE,GAAGgB,EAAEd,EAAED,GAAGgB,EAAEd,EAAEF,GAAGiB,EAAEE,KAAK+D,eAAenE,GAAG,OAAOE,GAAGA,EAAEkE,SAASnE,GAAGC,GAAG,KAAK,eAAelB,EAAEC,GAAG,MAAMe,EAAEI,KAAKU,SAASb,EAAEjB,EAAEK,cAAca,EAAEnB,EAAEC,EAAEyD,SAASzD,EAAE0E,YAAY1D,EAAEqD,cAAcrE,EAAEqD,gBAAgB,IAAIY,EAAE7C,KAAKK,qBAAqB6C,IAAIrD,GAAGgD,IAAIA,EAAEjD,EAAE2D,kBAAkBvD,KAAKK,qBAAqB+B,IAAIvC,EAAEgD,GAAG7C,KAAKM,sBAAqB,GAAI1B,EAAE4E,aAAaX,GAAGjD,EAAE6D,cAAcZ,EAAE/C,GAAGE,KAAKkC,sBAAsBtC,EAAEhB,EAAEiE,EAAEhE,GAAG,aAAaD,GAAGoB,KAAKwC,gBAAgB,MAAM3D,EAAE,CAAC4B,KAAK7B,EAAE,GAAGgC,KAAKhC,EAAE,GAAGkC,KAAKlC,EAAE,GAAGoC,KAAKpC,EAAE,IAAI,OAAOoB,KAAKQ,OAAO2D,OAAOtF,GAAG,gBAAgB,IAAImB,KAAKM,qBAAqB,OAAO,MAAM1B,EAAE,GAAG,aAAaoB,KAAKkB,KAAKlB,KAAKG,uBAAuBgB,QAAStC,IAAI,MAAMe,EAAEf,EAAEkD,YAAY,KAAKnC,EAAEoC,QAAQ,CAAC,MAAMnD,EAAEe,EAAEqC,eAAejC,KAAKU,SAAS0D,UAAUvF,EAAEe,IAAIhB,EAAEuE,KAAKtE,MAAOmB,KAAKK,qBAAqBc,QAAStC,IAAI,MAAMe,EAAEI,KAAKU,SAASuC,cAAcpE,GAAGmB,KAAKU,SAAS0D,UAAUvF,EAAEmB,KAAK8D,eAAelE,KAAKhB,EAAEuE,KAAKtE,KAAMmB,KAAKQ,OAAO6D,QAAQrE,KAAKQ,OAAO8D,KAAK1F,GAAGoB,KAAKO,kBAAkB8D,QAAQrE,KAAKM,sBAAqB,EAAG,eAAe1B,GAAG,MAAMC,EAAEC,EAAEF,GAAGgB,EAAEb,EAAEH,GAAGiB,EAAEG,KAAK+D,eAAelF,GAAG,IAAIgB,EAAE,OAAO,KAAK,MAAMC,EAAED,EAAEkC,YAAY,OAAOjC,EAAEkE,SAASpE,GAAGE,EAAE,eAAelB,GAAG,OAAOoB,KAAKG,uBAAuB+C,IAAItE,M,oCCJ17K,oVAI04B,MAAM2F,EAAE,IAAI,OAAE,CAACC,iBAAiB,SAASC,qBAAqB,aAAaC,gBAAgB,OAAOC,uBAAuB,QAAQC,wBAAwB,iBAAiBC,0BAA0B,sBAAsBC,EAAEC,OAAOC,OAAO,IAAIC,EAAE,IAAI,OAAEC,EAAE,IAAI,OAAEC,EAAE,IAAI,OAAEC,EAAE,CAACC,kBAAkB,OAAEC,qBAAqB,OAAEC,oBAAoB,OAAEC,uBAAuB,QAAG,SAASC,EAAE5G,EAAEiB,EAAEkD,EAAE0C,EAAE7G,EAAE8G,KAAK9C,EAAEhE,EAAE+G,MAAM,GAAG,eAAE9F,GAAG,OAAO,KAAK,MAAMF,EAAEf,EAAE8G,MAAMD,EAAE/F,EAAEd,EAAE+G,MAAM/C,EAAE,GAAGG,EAAE,CAAC,MAAMpE,EAAE,eAAEuG,EAAErF,EAAEjB,EAAE8G,KAAK9G,EAAE+G,KAAK,oBAAoB5C,EAAE0C,EAAE7C,GAAG,OAAO,eAAEjE,EAAEgB,EAAED,GAAG,OAAO,eAAEG,EAAEF,EAAED,GAAmL,SAASkG,EAAEhH,EAAEmE,EAAE0C,EAAE7C,EAAEjD,EAAED,EAAEE,EAAEmD,EAAE8C,EAAEJ,GAAG,MAAM5G,EAAEkE,GAAGnD,EAAEkG,EAAEL,GAAGI,EAAEE,EAAE,eAAEnD,GAAG,WAAWA,EAAEA,EAAEA,EAAEoD,SAAS,KAAK,GAAG,eAAED,GAAG,OAAO,KAAK,GAAGpG,EAAE,CAAC,IAAIhB,EAAE,eAAEsG,EAAEc,EAAEhD,EAAE0C,EAAE7G,EAAEe,EAAEC,EAAEiG,GAAG,OAAOnG,IAAIf,EAAE,eAAEuG,EAAEvG,EAAEE,EAAEiH,EAAElH,EAAEc,IAAIyF,EAAEvG,GAAGD,EAAEE,EAAEiH,GAAG,GAAGpG,EAAE,CAAC,MAAMf,EAAE,eAAEuG,EAAEa,EAAEhD,EAAE0C,EAAE7G,EAAEc,EAAEE,EAAEiG,GAAG,OAAOV,EAAEvG,GAAGD,EAAEE,EAAEiH,GAAG,OAAO,eAAEd,EAAEe,EAAEhD,EAAE0C,EAAE7F,EAAEiG,GAAGV,EAAEvG,GAAGoG,EAAEnG,EAAEiH,GAAGG,eAAeC,EAAEtH,EAAED,EAAEkB,GAAG,MAAMsG,UAAUpD,EAAEqD,cAAcX,EAAEY,2BAA2BzD,EAAE0D,cAAc3G,GAAGf,EAAE,GAAGmE,EAAE,IAAI,IAAIrD,EAAE,EAAEA,EAAEqD,EAAExB,OAAO7B,IAAIqD,EAAErD,GAAGqD,EAAErD,GAAG6G,OAAO,GAAGd,EAAE,IAAI,IAAI/F,EAAE,EAAEA,EAAE+F,EAAElE,OAAO7B,IAAI+F,EAAE/F,GAAG+F,EAAE/F,GAAG6G,OAAO,GAAG3D,EAAE,IAAI,IAAIlD,EAAE,EAAEA,EAAEkD,EAAErB,OAAO7B,IAAIkD,EAAElD,GAAGkD,EAAElD,GAAG6G,OAAO,GAAG5G,EAAE,IAAI,IAAID,EAAE,EAAEA,EAAEC,EAAE4B,OAAO7B,IAAIC,EAAED,GAAG8G,mBAAmB7G,EAAED,GAAG8G,iBAAiB7G,EAAED,GAAG8G,iBAAiBD,QAAQ,OAAO3H,EAAEoH,WAAWpH,EAAE6H,QAAQ7H,EAAE6H,MAAM7H,EAAEoH,SAASU,kBAAkBC,EAAE/H,EAAED,EAAEkB,GAA2CoG,eAAeU,EAAE/H,EAAEiB,EAAEkD,GAAG,IAAInE,EAAE,OAAO,KAAK,IAAIgI,MAAMlH,GAAGd,EAAE,GAAGA,EAAEgI,MAAMlH,EAAEA,GAAGA,EAAE6G,SAAS7G,GAAG,YAAYmH,KAAKnH,IAAIG,GAAGA,IAAIH,KAAKd,EAAEgI,MAAM,OAAOhI,EAAEoH,SAAS,OAAOpH,EAAE,IAAIgB,QAAQkH,EAAElI,GAAG,GAAGA,EAAEmI,SAAS,EAAEnI,EAAEoI,MAAM,KAAK,qCAAqCpI,EAAEqI,WAAW,CAAC,MAAMP,iBAAiB/H,GAAGC,EAAEoH,SAASpG,EAAE,eAAEA,GAAGA,EAAE8G,iBAAiB/H,EAAEC,EAAEoH,SAASpG,QAAQ,eAAEA,EAAE8G,iBAAiB3D,GAAG,MAAM8C,SAAS,eAAE,eAAEjG,KAAK,GAAG,GAAG,eAAEiG,GAAG,MAAMhB,EAAE,MAAMhG,EAAEgH,EAAEqB,SAASnI,QAAQ,eAAEF,EAAEA,EAAE6H,iBAAiB3D,GAAG,IAAIhE,EAAE,MAAM8F,EAAE,OAAO9F,EAAE2H,iBAAiB3D,EAAEnE,EAAEoH,SAASjH,EAAEH,EAAEqH,eAAea,EAAElI,GAAG,MAAMoH,SAASrH,EAAEoI,SAASlH,EAAEmH,MAAMvB,GAAG7G,EAAE,GAAG,MAAMiB,GAAG,qBAAqBlB,EAAE,OAAOA,EAAE,MAAMiE,EAAEjE,EAAE+H,iBAAiB/G,EAAE8F,EAAEnB,EAAE6C,SAAS1B,GAAG,eAAE7C,GAAG/D,EAAE+D,IAAI,eAAEA,IAAI,eAAEA,IAAIjE,QAAQ,eAAEiE,EAAE,QAAGwE,KAAK,IAAK,eAAEzI,EAAE,SAAK,aAAa0I,KAAKxI,EAAE6H,iBAAiB7H,EAAEgB,EAAEF,GAAGsG,eAAeoB,IAAI,aAAa,iDAAmDC,eAAe,SAASC,EAAE3I,GAAG,OAAOA,GAAG4I,KAAK5I,EAAE6I,KAAKC,MAAMD,KAAKE,UAAU/I,EAAEgJ,IAAIhJ,EAAE,MAAM4I,EAAE,aAAaI,EAAE,CAAChJ,EAAED,IAAIC,IAAI4I,EAAE7I,OAAE,G,kLCAp8F,SAAS,EAAEiE,GAAG,MAAM,SAASA,EAAE,OAAE,eAAEA,G,4BCA5V,SAAS,EAAEA,EAAEjE,GAAG,OAAOiE,EAAEjE,EAAE,EAAE,EAAEA,EAAE,EAAE,EAAE,SAAS,EAAEiE,EAAEjE,EAAEkB,EAAEjB,GAAG,OAAO,EAAEgE,EAAEjE,EAAEkB,EAAEjB,EAAEiJ,OAAO,GAAGjJ,EAAEiJ,OAAO,IAAI,SAAS,EAAElJ,EAAEkB,EAAEjB,EAAEC,EAAEE,EAAE+G,GAAG,MAAMnG,EAAE,EAAEZ,EAAE+G,IAAI+B,OAAO9E,EAAE1B,QAAQ3B,GAAGb,EAAE,IAAIa,EAAE,OAAM,EAAG,IAAI,IAAIkD,EAAE,EAAEkF,EAAE,EAAElF,EAAElD,EAAE6B,OAAOqB,IAAIkF,GAAGnI,EAAE,IAAI,EAAEhB,EAAEkB,EAAEjB,EAAEmE,EAAE+E,GAAG/E,EAAE+E,EAAE,IAAI,OAAM,EAAG,OAAM,EAAG,SAAS,EAAEnJ,EAAEkB,EAAE4F,EAAE5G,EAAEE,GAAG,IAAIJ,EAAE,OAAM,EAAG,MAAMmH,EAAE,EAAEjG,EAAE4F,IAAIoC,OAAOlI,EAAE0B,QAAQ0B,GAAGpE,EAAE,IAAIe,GAAE,EAAGoI,EAAE,EAAE,IAAI,MAAMlF,KAAKG,EAAErD,EAAE,EAAEA,EAAEC,EAAEmG,EAAEgC,EAAElF,EAAE/D,EAAEE,GAAG+I,GAAGlF,EAAEkD,EAAE,OAAOpG,EAAE,SAAS,EAAEkD,EAAEjE,EAAEkB,EAAE4F,EAAE7G,EAAEC,EAAEE,GAAG,IAAI+G,EAAElD,EAAEjD,EAAE8F,EAAE,IAAI,IAAI1C,EAAE0C,EAAE/F,EAAE+F,EAAE7G,EAAEiB,EAAEkD,EAAErD,EAAEqD,GAAGlD,EAAE,CAACF,EAAEoD,EAAElD,EAAEF,IAAID,IAAIC,EAAE8F,GAAG,MAAM7C,EAAEjE,EAAEoE,GAAGnE,EAAED,EAAEoE,EAAE,GAAG+E,EAAEnJ,EAAEgB,GAAGoG,EAAEpH,EAAEgB,EAAE,IAAIf,EAAEG,GAAGgH,GAAGhH,GAAGgH,EAAEhH,GAAGH,GAAGG,IAAI6D,GAAG7D,EAAEH,IAAImH,EAAEnH,IAAIkJ,EAAElF,GAAG/D,IAAIiH,GAAGA,GAAG,OAAOA,E,oDCAkH,MAAM,EAAE,kCAAkCiC,EAAE,CAACC,yBAAyB,aAAaC,uBAAuB,WAAWC,sBAAsB,UAAUC,uBAAuB,WAAWC,iCAAiC,aAAaC,8BAA8B,KAAKC,uBAAuB,WAAWC,sBAAsB,UAAUC,qBAAqB,SAASC,uBAAuB,MAAMC,EAAE,CAACC,oBAAoB,CAACX,0BAAyB,EAAGC,wBAAuB,EAAGO,sBAAqB,EAAGN,uBAAsB,EAAGC,wBAAuB,EAAGI,uBAAsB,EAAGD,wBAAuB,EAAGF,kCAAiC,EAAGC,+BAA8B,EAAGI,wBAAuB,GAAIG,cAAc,CAACxD,mBAAkB,EAAGG,wBAAuB,EAAGF,sBAAqB,EAAGC,qBAAoB,EAAGuD,sBAAqB,GAAIC,cAAc,CAAC1D,mBAAkB,EAAGG,wBAAuB,EAAGF,sBAAqB,EAAGC,qBAAoB,EAAGuD,sBAAqB,IAAK,SAAS3D,EAAEtG,GAAG,OAAM,IAAK8J,EAAEC,oBAAoB/J,GAAG,SAASmH,EAAEnH,GAAG,OAAM,IAAK8J,EAAEE,cAAc,eAAEhK,IAAI,SAAS0F,EAAE1F,GAAG,OAAM,IAAK8J,EAAEI,cAAclK,GAAG,SAASF,IAAI,OAAO,gDAAkD,SAASqK,EAAEnK,EAAEgE,EAAElD,EAAEsJ,EAAEnK,GAAG,GAAG,eAAE+D,IAAI,sBAAsBlD,IAAI,6BAA6Bd,GAAG,2BAA2BA,GAAG,CAAC,MAAMA,EAAE,eAAE,IAAI,OAAEgE,GAAE,GAAG,GAAI,OAAOqG,QAAQC,QAASrJ,GAAG,EAAEjB,GAAE,GAAG,EAAGiB,IAAK,GAAG,eAAE+C,IAAI,2BAA2BlD,EAAE,CAAC,MAAMG,EAAE,eAAE,IAAI,OAAE+C,GAAE,GAAG,GAAI,GAAG,2BAA2BhE,EAAE,OAAOqK,QAAQC,QAAStK,GAAG,EAAEiB,GAAE,GAAG,EAAGjB,EAAEoK,EAAEnK,IAAK,GAAG,eAAE+D,IAAI,sBAAsBlD,IAAI,6BAA6Bd,GAAG,2BAA2BA,GAAG,OAAOqK,QAAQC,QAAStK,GAAG,eAAEgE,EAAE,eAAElD,EAAEsJ,EAAEnK,EAAED,KAAM,GAAG,eAAEgE,IAAI,2BAA2BlD,GAAG,2BAA2Bd,EAAE,OAAOqK,QAAQC,QAAStK,GAAG,eAAEgE,EAAE,eAAElD,EAAEsJ,EAAEnK,EAAED,KAAM,GAAG,eAAEgE,IAAI,6BAA6BhE,EAAE,CAAC,MAAMA,EAAE,EAAEc,GAAG,OAAOuJ,QAAQC,QAASrJ,GAAGjB,EAAEgE,EAAE,eAAElD,EAAEsJ,EAAEnK,EAAEgB,KAAM,OAAOnB,IAAI0I,KAAMvH,IAAI,MAAMlB,EAAEkB,EAAEkI,EAAEnJ,IAAIuK,KAAK,KAAKvG,EAAE8D,iBAAiB9D,GAAG,OAAOhE,GAAGD,EAAE,eAAEe,EAAEsJ,EAAEnK,EAAED,MAAOqH,eAAeC,EAAErG,EAAElB,EAAEoE,GAAG,MAAMkE,WAAWtH,EAAEqG,SAASP,GAAG5F,EAAE,GAAG4F,EAAE,CAAC,IAAIP,EAAEvF,GAAG,MAAM,IAAI,OAAE,EAAE,yCAAyC,CAACyJ,MAAMvJ,IAAI,GAAG,eAAE4F,EAAEiB,mBAAmB,eAAE3D,GAAG,CAAC,IAAIgD,EAAEN,GAAG,MAAM,IAAI,OAAE,EAAE,kCAAkC,CAAC2D,MAAMvJ,IAAI,IAAIyE,EAAE3F,GAAG,MAAM,IAAI,OAAE,EAAE,kCAAkC,CAACyK,MAAMvJ,IAAI,GAAGA,EAAE4G,MAAM,OAAO,eAAE5G,EAAEmG,UAAUnG,EAAEmG,SAASU,iBAAiB7G,EAAE4G,SAAS,SAAS3H,EAAEF,GAAG,GAAG,eAAEA,GAAG,OAAM,EAAG,GAAG,eAAEA,GAAG,CAAC,IAAI,MAAMiB,KAAKjB,EAAEyK,MAAM,CAAC,GAAG,IAAIxJ,EAAE0B,OAAO,OAAM,EAAG,GAAG1B,EAAE,GAAG,KAAKA,EAAE,GAAG,IAAIA,EAAE,GAAG,KAAKA,EAAE,GAAG,IAAIA,EAAE,GAAG,KAAKA,EAAE,GAAG,IAAIA,EAAE,GAAG,KAAKA,EAAE,GAAG,IAAIA,EAAE,GAAG,KAAKA,EAAE,GAAG,IAAIA,EAAE,GAAG,KAAKA,EAAE,GAAG,GAAG,OAAM,EAAG,OAAM,EAAG,OAAM,I,+MCAtlG,MAAM,EAAE,OAAEyJ,UAAU,oDAAoD1J,EAAE,CAACT,aAAa,CAACP,EAAEiB,IAAIjB,EAAE2K,MAAM1J,IAAIoG,eAAe,EAAEpG,EAAEF,GAAG,MAAMiD,QAAQ,gDAAiD,IAAI,MAAM6C,EAAE7C,EAAE4G,YAAYC,OAAO5J,EAAEF,GAAG,IAAI8F,EAAEiE,eAAe,CAAC,MAAM7J,EAAE,IAAI,OAAE,sBAAsB,qFAAqF4F,GAAG,EAAEkE,MAAM9J,GAAG,OAAOjB,IAAI,MAAMiB,EAAEjB,EAAEgL,oBAAoB,OAAOnE,EAAEoE,YAAYhK,EAAED,IAAI,MAAM6F,GAAG,OAAO,EAAEqE,KAAK,2BAA2B,oDAAoDjK,GAAGjB,IAAG,GCAqE,MAAMiH,EAAE,OAAEyD,UAAU,2DAA2DS,EAAE,EAAEC,EAAE,EAAE,MAAM,EAAE,YAAYrL,GAAGoB,KAAKkK,gBAAgB,iBAAIlK,KAAKmK,gBAAgB,IAAI/J,IAAIJ,KAAKoK,aAAaxL,EAAE,WAAW,OAAOoB,KAAKqK,MAAM,MAAMzL,GAAG,OAAOoB,KAAKsK,aAAa1L,GAAG,QAAQ,MAAMA,EAAEoB,KAAKuK,qBAAqB,OAAOvK,KAAKwK,SAAS,CAACC,KAAK7L,EAAE8L,KAAK,IAAI,aAAa1K,KAAKmK,gBAAgBhJ,QAAQ,CAAEvC,EAAEC,KAAKmB,KAAKmK,gBAAgB/H,IAAIvD,EAAE,KAAM,YAAYD,GAAG,IAAI,MAAMC,KAAKD,EAAEoB,KAAKmK,gBAAgB/H,IAAIvD,EAAEmL,GAAG,QAAQpL,GAAG,MAAMC,EAAE,GAAGmE,EAAE,GAAGpD,EAAE,IAAI+K,IAAI/L,GAAG,OAAOoB,KAAKmK,gBAAgBhJ,QAAQ,CAAEvC,EAAEkB,KAAK,MAAM4F,KAAK1F,KAAKmK,gBAAgBjH,IAAIpD,GAAGkK,GAAGrL,EAAEiB,EAAEgC,IAAI9B,IAAI4F,GAAG/G,EAAEE,EAAEsE,KAAKrD,GAAG4F,IAAI/G,GAAGqE,EAAEG,KAAKrD,GAAGE,KAAKmK,gBAAgB/H,IAAItC,EAAEnB,EAAEqL,EAAEC,EAAE,KAAM,CAACQ,KAAK5L,EAAE6L,KAAK1H,GAAG,cAAc,MAAMiD,SAASrH,EAAEsI,WAAWrI,EAAEgI,MAAM7D,EAAE4H,WAAWhL,EAAEiL,UAAU/K,GAAGE,KAAK,OAAO,OAAEoH,SAAS,CAACnB,SAASrH,EAAEsI,WAAWrI,EAAEgI,MAAM7D,EAAE4H,WAAWhL,EAAEiL,UAAU/K,IAAI,aAAalB,EAAEC,GAAGmB,KAAKqK,MAAM3C,KAAKE,UAAUhJ,GAAG,MAAMoE,QAAQ,eAAEpE,EAAE,KAAKC,SAASqK,QAAQ4B,IAAI,CAAC9K,KAAK+K,mBAAmB/H,GAAGhD,KAAKgL,aAAahI,GAAGhD,KAAKiL,oBAAoBjI,GAAGhD,KAAKkL,eAAelI,KAAK,0BAA0BpE,GAAG,IAAIA,IAAIA,EAAEiI,MAAM,OAAO7G,KAAKmL,QAAQ,UAAUnL,KAAK6G,MAAM,MAAM7G,KAAKmL,cAAc,EAAEvM,EAAEiI,MAAM7G,KAAKoK,aAAagB,aAAapL,KAAK6G,MAAMjI,EAAEiI,MAAM,aAAajI,GAAGoB,KAAKqL,WAAWzM,GAAGA,EAAEiM,WAAW,IAAIF,IAAI/L,EAAEiM,WAAW7K,KAAKsL,WAAW1M,GAAGA,EAAE2M,WAAW,IAAIZ,IAAI/L,EAAE2M,WAAWvL,KAAK6K,UAAUjM,GAAGA,EAAEiM,UAAU,yBAAyBjM,GAAG,IAAIA,IAAIA,EAAEqH,SAAS,OAAOjG,KAAKwL,sBAAsB,KAAKxL,KAAKiG,SAAS,UAAUjG,KAAKkH,WAAW,MAAM,MAAMrI,EAAED,EAAEqH,SAASjD,EAAEpE,EAAEsI,YAAY,2BAA2BtH,QAAQ,eAAEoD,EAAEnE,EAAEmB,KAAKoK,aAAaqB,aAAazL,KAAKoK,aAAazE,KAAK3F,KAAKoK,aAAaxE,MAAM,eAAE5F,KAAKkK,gBAAgBrL,GAAGmB,KAAKwL,sBAAsB5L,EAAEI,KAAKiG,SAASpH,EAAEmB,KAAKkH,WAAWlE,EAAE,eAAenE,GAAG,GAAGmB,KAAK4K,WAAW5K,KAAK0L,cAAc,KAAK7M,GAAGA,EAAE+L,WAAW,GAAG5K,KAAKoK,aAAauB,SAAS3L,KAAK4K,WAAW/L,EAAE+L,WAAW5K,KAAK0L,cAAc,eAAE1L,KAAKoK,aAAauB,SAAS9M,EAAE+L,WAAW,YAAO,CAAC,MAAM5H,EAAE,IAAI,OAAE,+CAA+C,oEAAoEnE,EAAE+L,YAAY9E,EAAE8D,MAAM5G,IAAI,aAAapE,GAAG,OAAOoB,KAAK4L,kBAAkBhN,IAAIoB,KAAK6L,YAAYjN,IAAIoB,KAAK8L,cAAclN,IAAIoB,KAAK+L,oBAAoBnN,GAAG,oBAAoBA,GAAG,OAAOoB,KAAK6G,OAAO7G,KAAKmL,QAAQvM,GAAG,YAAYA,GAAG,QAAQoB,KAAKsL,aAAatL,KAAKsL,WAAWU,OAAOhM,KAAKsL,WAAW1J,IAAIhD,EAAEK,mBAAmBe,KAAKqL,aAAarL,KAAKqL,WAAWW,MAAMhM,KAAKqL,WAAWzJ,IAAIhD,EAAEK,gBAAgB,kBAAkBL,GAAG,IAAIoB,KAAKiG,SAAS,OAAM,EAAG,MAAMpH,EAAED,EAAEY,uBAAuB,QAAQX,GAAGmB,KAAKwL,sBAAsB3M,GAAG,cAAcD,GAAG,OAAO,eAAEoB,KAAK0L,gBAAgB1L,KAAK0L,cAAc9M,GAAG,qBAAqB,MAAMA,EAAE,GAAG,OAAOoB,KAAKmK,gBAAgBhJ,QAAQ,CAAEtC,EAAEmE,KAAKnE,EAAEmL,IAAIhK,KAAKmK,gBAAgB/H,IAAIY,EAAEgH,GAAGpL,EAAEuE,KAAKH,MAAOpE,K,oICAr5G,SAAS,EAAEkB,EAAED,EAAEjB,GAAGkB,EAAEmM,qBAAqB,MAAMpJ,EAAEhD,EAAEgK,oBAAoB,IAAI,OAAO/J,EAAEoM,SAAS,IAAItN,EAAEuN,SAAStJ,IAAI,MAAM6C,GAAG,OAAO,OAAE6D,UAAU,wCAAwCQ,KAAK,oCAAoCrE,GAAG,MCA8C,MAAM,EAAE,4CAAyD,MAAM,EAAE,YAAY7G,EAAEe,GAAGI,KAAKoM,0BAAyB,EAAGpM,KAAKqM,YAAYxN,EAAEmB,KAAKsM,SAAS,CAACC,SAAS3M,EAAE4M,UAAU5M,EAAE6M,iBAAiB,aAAazM,KAAKsM,SAASC,SAASlI,QAAQ,mBAAmBxE,EAAEC,GAAG,MAAMhB,EAAE,eAAEkB,KAAK0M,QAAQ5M,GAAG,GAAGE,KAAK0M,QAAQ5M,GAAGA,GAAG,eAAEhB,KAAK,eAAEA,EAAE,cAAc,OAAO,eAAE,yBAAyB6N,QAAQC,MAAM,2BAA2B9N,GAAGkB,KAAKsM,SAASC,SAASlI,QAAQxE,EAAEgN,QAAQ/M,EAAEgN,OAAM,EAAG,MAAMpH,EAAE5F,EAAEiN,WAAWlK,EAAE,GAAGkF,EAAE,GAAG,IAAI,MAAMlJ,KAAK6G,EAAE,CAAC,MAAM9F,EAAE8F,EAAE7G,GAAG,OAAOe,EAAEoN,MAAM,IAAI,QAAQ,MAAM,IAAI,aAAanK,EAAEM,KAAKnD,KAAKiN,2BAA2BrN,IAAI,MAAM,IAAI,mBAAmBiD,EAAEM,KAAKnD,KAAKkN,gCAAgCtN,IAAI,MAAM,IAAI,YAAYmI,EAAE5E,KAAKvD,IAAII,KAAKmN,sBAAsBjE,QAAQ4B,IAAIjI,GAAG7C,KAAKoM,0BAA0BpM,KAAKmN,gBAAgBC,KAAMvO,GAAG,eAAeA,EAAEmO,MAAMnO,EAAEwO,WAAWC,mBAAoBtN,KAAKuN,iBAAiBxF,EAAE,sBAAsBlJ,EAAEe,EAAEhB,EAAEoE,GAAG,MAAMnD,EAAEG,KAAKsM,SAASC,SAAS,IAAIvM,KAAKoM,2BAA2BvM,EAAE+B,IAAIhD,GAAG,CAACiB,EAAEuC,IAAIxD,GAAG,IAAI,MAAMiB,KAAKG,KAAKmN,gBAAgB,CAAC,MAAMrN,EAAEE,KAAKwN,eAAe5N,EAAEC,EAAEmD,GAAG,OAAOnD,EAAE4N,YAAY,IAAI,UAAU5O,EAAE6O,0BAA0B9O,EAAEiB,EAAE8N,WAAW7N,GAAG,MAAM,IAAI,SAASjB,EAAE+O,yBAAyBhP,EAAEiB,EAAE8N,WAAW7N,MAAM,iCAAiCjB,GAAG,MAAMe,EAAEI,KAAKqM,YAAY1F,iBAAiB/H,EAAEoB,KAAKqM,YAAYjB,YAAY,MAAM,IAAIvM,EAAEwO,iBAAiB,eAAExO,EAAEgP,gBAAgBjO,EAAEhB,IAAI,sCAAsCC,GAAG,MAAMe,EAAEI,KAAKqM,YAAY1F,iBAAiB/H,EAAEoB,KAAKqM,YAAYjB,aAAa0C,oBAAoB9K,SAAS,EAAEnD,QAAQmD,EAAEnE,EAAEkP,MAAMnP,EAAEgB,GAAG,MAAM,IAAIf,EAAEmP,QAAQnO,GAAG,eAAehB,EAAEe,EAAEhB,GAAG,OAAOgB,EAAEoN,MAAM,IAAI,mBAAmB,CAAC,MAAMpO,EAAEC,EAAEgL,oBAAoB,OAAOjK,EAAEoO,QAAQ9B,SAAStN,IAAI,GAAG,IAAI,aAAa,CAAC,MAAMyO,WAAWrK,GAAGpD,EAAE,OAAO,EAAEoD,EAAEnE,EAAE,CAACoP,MAAM,CAAC9L,MAAMvD,U,oCCJ7jE,kDAIoC,MAAMgB,EAAE,YAAYhB,GAAGoB,KAAKgM,KAAK,EAAEhM,KAAKkO,OAAO,EAAElO,KAAKmO,QAAQvP,EAAEoB,KAAKoO,QAAQ,IAAIC,MAAMzP,GAAG,cAAc,OAAOoB,KAAKoO,QAAQ,QAAQxP,GAAG,GAAGoB,KAAKgM,OAAOhM,KAAKmO,QAAQ,CAAC,MAAMvO,EAAEI,KAAKoO,QAAQpO,KAAKkO,QAAQ,OAAOlO,KAAKoO,QAAQpO,KAAKkO,QAAQtP,EAAEoB,KAAKkO,QAAQlO,KAAKkO,OAAO,GAAGlO,KAAKmO,QAAQvO,EAAE,OAAOI,KAAKoO,SAASpO,KAAKkO,OAAOlO,KAAKgM,QAAQhM,KAAKmO,SAASvP,EAAE,KAAK,UAAU,GAAG,IAAIoB,KAAKgM,KAAK,OAAO,KAAK,MAAMpN,EAAEoB,KAAKoO,QAAQpO,KAAKkO,QAAQ,OAAOlO,KAAKoO,QAAQpO,KAAKkO,QAAQ,KAAKlO,KAAKgM,OAAOhM,KAAKkO,QAAQlO,KAAKkO,OAAO,GAAGlO,KAAKmO,QAAQvP,EAAE,OAAO,OAAO,IAAIoB,KAAKgM,KAAK,KAAKhM,KAAKoO,QAAQpO,KAAKkO,QAAQ,KAAKtO,GAAG,GAAG,IAAII,KAAKgM,KAAK,OAAO,KAAK,IAAI,MAAMnN,KAAKmB,KAAKoO,QAAQ,GAAG,eAAEvP,IAAIe,EAAEf,GAAG,OAAOA,EAAE,OAAO,KAAK,MAAMe,GAAG,IAAIf,EAAEmB,KAAKsO,UAAU,KAAK,eAAEzP,IAAIe,GAAGA,EAAEf,GAAGA,EAAEmB,KAAKsO,a,kCCAxvB,SAAS1P,EAAEA,EAAEiE,GAAG,IAAIjE,EAAE,OAAO,KAAK,MAAMC,EAAEgE,EAAE5C,gBAAgBsO,eAAevP,EAAEwP,aAAa7O,GAAGf,EAAE,IAAIkB,EAAE2O,OAAOC,kBAAkB1L,EAAEyL,OAAOE,kBAAkB,GAAG3P,GAAGW,EAAEkD,EAAE1B,QAASvC,IAAI,MAAMiE,EAAEhE,EAAEO,aAAaR,EAAEI,GAAG0G,EAAE7G,EAAEO,aAAaR,EAAEe,GAAG,MAAMkD,GAAG+L,MAAM/L,KAAK/C,EAAE+O,KAAKC,IAAIhP,EAAE+C,IAAI,MAAM6C,GAAGkJ,MAAMlJ,KAAK1C,EAAE6L,KAAKE,IAAI/L,EAAE0C,UAAW,CAAC,MAAM9G,EAAEI,GAAGW,EAAEkD,EAAE1B,QAAS0B,IAAI,MAAM7D,EAAEH,EAAEO,aAAayD,EAAEjE,GAAG,MAAMI,GAAG4P,MAAM5P,KAAKc,EAAE+O,KAAKC,IAAIhP,EAAEd,GAAGgE,EAAE6L,KAAKE,IAAI/L,EAAEhE,MAAO,MAAM,CAACgQ,MAAMlP,EAAEmP,IAAIjM,GAAG,SAASH,EAAEjE,EAAEiE,EAAE/C,GAAG,IAAI+C,IAAIjE,EAAE,OAAO,KAAK,MAAM2P,eAAevL,EAAEwL,aAAa9I,GAAG9G,EAAE,IAAIoE,IAAI0C,EAAE,OAAO,KAAK,MAAMsJ,MAAMpP,EAAEqP,IAAIpP,GAAGgD,EAAE,OAAO,OAAOjD,GAAG,OAAOC,EAAE,UAAK,IAASD,QAAG,IAASC,EAAEF,IAAIqD,GAAG0C,EAAE7G,EAAEiB,EAAEkD,EAAE0C,EAAE9F,EAAEC,GAAGb,EAAEc,EAAEkD,GAAG0C,EAAE9F,EAAEC,GAAG,SAAShB,EAAED,EAAEiE,EAAEhE,EAAEG,EAAEW,GAAG,OAAO,MAAMX,GAAG,MAAMW,EAAEG,IAAI,MAAMkD,EAAEpE,EAAEQ,aAAaU,EAAE+C,GAAG6C,EAAE9G,EAAEQ,aAAaU,EAAEjB,GAAG,OAAO,MAAMmE,GAAGA,GAAGrD,KAAK,MAAM+F,GAAGA,GAAG1G,IAAI,MAAMA,EAAE6D,IAAI,MAAMlD,EAAEf,EAAEQ,aAAayD,EAAEhE,GAAG,OAAO,MAAMc,GAAGA,GAAGX,GAAG,MAAMW,EAAEd,IAAI,MAAMG,EAAEJ,EAAEQ,aAAaP,EAAEgE,GAAG,OAAO,MAAM7D,GAAGA,GAAGW,QAAG,EAAO,SAASX,EAAEJ,EAAEiE,EAAEhE,EAAEG,GAAG,OAAO,MAAMH,GAAG,MAAMG,GAAGH,IAAIG,EAAEA,GAAGJ,EAAEQ,aAAaJ,EAAE6D,KAAKhE,EAAE,MAAMA,GAAG,MAAMG,EAAEW,IAAI,MAAMG,EAAElB,EAAEQ,aAAaO,EAAEkD,GAAG,OAAO/C,GAAGjB,GAAGiB,GAAGd,GAAG,MAAMH,EAAEG,GAAGJ,EAAEQ,aAAaJ,EAAE6D,IAAIhE,EAAE,MAAMG,EAAEH,GAAGD,EAAEQ,aAAaP,EAAEgE,IAAI7D,OAAE,EAAO,SAASW,IAAI,MAAM,KAAI,EAJrpC,qE,kCCAA,kDAIyD,MAAMG,UAAU,OAAE,YAAYA,EAAElB,GAAGmB,MAAM,OAAEmP,kBAAkBlP,KAAKmP,eAAe,EAAEnP,KAAKoP,QAAQtP,EAAEE,KAAKqP,SAASzQ,EAAE,YAAYC,EAAED,GAAG,OAAO,IAAIkB,EAAEjB,EAAEyQ,OAAO1Q,GAAG,cAAc,OAAOoB,KAAKmP,cAAc,EAAEnP,KAAKqP,SAAS7N,OAAO,UAAU,OAAOxB,KAAKqP,SAAS7N,OAAO,YAAY,OAAOxB,KAAKsP,OAAO,OAAO,MAAMzQ,EAAE,IAAIiB,EAAEE,KAAKoP,QAAQE,OAAOtP,KAAKqP,UAAU,OAAOxQ,EAAEsQ,cAAcnP,KAAKmP,cAActQ,EAAE,OAAO,KAAKmB,KAAKuP,eAAevP,KAAKoP,QAAQI,eAAe,OAAOxP,KAAKmP,cAAcnP,KAAKqP,SAAS7N,OAAO,aAAa,QAAQxB,KAAKmP,cAAcnP,KAAKqP,SAAS7N,SAASxB,KAAKoP,QAAQpL,SAAShE,KAAKqP,SAASrP,KAAKmP,iBAAgB,GAAI,0BAA0BtQ,GAAGmB,KAAKoP,QAAQK,0BAA0B5Q,GAAG,cAAcA,GAAGmB,KAAKoP,QAAQtN,cAAcjD,GAAG,mBAAmB,OAAOmB,KAAKoP,QAAQ3D,aAAa,kBAAkB,OAAOzL,KAAKoP,QAAQM,YAAY,4BAA4B,OAAO1P,KAAKoP,QAAQO,sBAAsB,WAAW,OAAO3P,KAAKoP,QAAQzJ,KAAK,WAAW,OAAO3F,KAAKoP,QAAQxJ,KAAK,aAAa,OAAO5F,KAAKoP,QAAQQ,aAAa,mBAAmB/Q,GAAG,OAAOmB,KAAKoP,QAAQS,0BAA0B,GAAG,mBAAmBhR,EAAEiB,GAAG,OAAOE,KAAKoP,QAAQ1B,0BAA0B5N,EAAE,GAAG,kBAAkBjB,GAAG,OAAOmB,KAAKoP,QAAQU,yBAAyB,GAAG,kBAAkBjR,EAAEiB,GAAG,OAAOE,KAAKoP,QAAQxB,yBAAyB,EAAE9N,GAAG,0BAA0BjB,GAAG,OAAOmB,KAAKoP,QAAQS,0BAA0BhR,GAAG,0BAA0BA,EAAEiB,GAAGE,KAAKoP,QAAQ1B,0BAA0B7O,EAAEiB,GAAG,yBAAyBjB,GAAG,OAAOmB,KAAKoP,QAAQU,yBAAyBjR,GAAG,yBAAyBA,EAAEiB,GAAG,OAAOE,KAAKoP,QAAQxB,yBAAyB/O,EAAEiB,GAAG,UAAUjB,EAAEiB,EAAElB,EAAEmJ,GAAG,MAAMlI,EAAEG,KAAKsP,OAAO,OAAOzP,EAAEuP,QAAQpP,KAAKoP,QAAQW,UAAUlR,EAAEiB,EAAElB,EAAEmJ,GAAGlI,EAAE,cAAchB,EAAEiB,GAAE,GAAI,OAAOE,KAAKoP,QAAQ/P,cAAcR,EAAEiB,GAAG,iBAAiB,OAAOE,KAAKoP,QAAQjQ,iBAAiB,eAAeN,GAAG,OAAOmB,KAAKoP,QAAQY,eAAenR,GAAG,oBAAoB,OAAOmB,KAAKoP,QAAQvF,oBAAoB,WAAW,OAAO7J,KAAKoP,QAAQnJ,WAAW,MAAMpH,GAAG,OAAOmB,KAAKX,cAAcR,GAAE,GAAI,SAASA,GAAG,OAAOmB,KAAKoP,QAAQa,SAASpR,GAAG,SAASA,EAAEiB,GAAG,OAAOE,KAAKoP,QAAQc,SAASrR,EAAEiB,GAAG,OAAO,OAAOE,KAAKoP,QAAQe,OAAO,aAAa,OAAOnQ,KAAKoP,QAAQgB,aAAa,2BAA2B,OAAOpQ,KAAKoP,QAAQiB,2BAA2B,mBAAmB,OAAOrQ,KAAKoP,QAAQkB,mBAAmB,cAAc,OAAOtQ,KAAKoP,QAAQnQ,cAAc,eAAe,OAAOe,KAAKoP,QAAQnN,eAAe,aAAapD,GAAG,OAAOmB,KAAKoP,QAAQ5L,aAAa3E,GAAG,aAAa,OAAOmB,KAAKoP,QAAQmB,aAAa,WAAW1R,GAAG,OAAOmB,KAAKoP,QAAQoB,WAAW3R,GAAG,eAAe,OAAOmB,KAAKoP,QAAQqB,eAAe,eAAe,OAAOzQ,KAAKoP,QAAQsB,eAAe,OAAO,OAAO1Q,KAAKoP,QAAQuB,OAAO,OAAO,OAAO3Q,KAAKoP,QAAQwB,OAAO,SAAS/R,GAAG,OAAOmB,KAAKoP,QAAQpL,SAASnF,GAAG,WAAW,OAAOmB,KAAKoP,QAAQ9L,WAAW,oBAAoB,OAAOtD,KAAKoP,QAAQyB,oBAAoB,uBAAuB,OAAO7Q,KAAKoP,QAAQ0B,uBAAuB,0BAA0B,OAAO9Q,KAAKoP,QAAQ2B,0BAA0B,qBAAqB,OAAO/Q,KAAKoP,QAAQ4B,qBAAqB,qBAAqB,OAAOhR,KAAKoP,QAAQ6B,qBAAqB,mBAAmB,OAAOjR,KAAKoP,QAAQ8B,mBAAmB,0BAA0B,OAAOlR,KAAKoP,QAAQ+B,0BAA0B,uBAAuB,OAAOnR,KAAKoP,QAAQ5P,uBAAuB,eAAe,OAAOQ,KAAKoP,QAAQhO,eAAe,eAAe,OAAOpB,KAAKoP,QAAQ1P,eAAe,eAAeb,EAAEiB,GAAG,MAAM,IAAIsR,MAAM,0EAA0E,kBAAkB,MAAM,IAAIA,MAAM","file":"js/chunk-08a2b3cf.27ec15ab.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/CircularArray.js\";import e from\"../../../../core/Evented.js\";import\"../../../../core/has.js\";import{isNone as s,isSome as a,unwrap as r}from\"../../../../core/maybe.js\";import{r as n}from\"../../../../chunks/rbush.js\";import{fromRect as i}from\"../../../../geometry/support/aaBoundingBox.js\";import{Store2D as o}from\"./Store2D.js\";import{FeatureSetReaderIndirect as d}from\"./support/FeatureSetReaderPBFIndirect.js\";function h(t,e){return t<<16|e}function c(t){return(4294901760&t)>>>16}function I(t){return 65535&t}const u={getObjectId:t=>t.getObjectId(),getAttributes:t=>t.readAttributes(),getAttribute:(t,e)=>t.readAttribute(e),cloneWithGeometry:(t,e)=>t,getGeometry:t=>t.readHydratedGeometry(),getCentroid:(t,e)=>t.readCentroid()};class l extends o{constructor(s,a,r){super(s,a),this.featureAdapter=u,this.events=new e,this._featureSetsByInstance=new Map,this._objectIdToDisplayId=new Map,this._spatialIndexInvalid=!0,this._indexSearchCache=new t(50),this._index=n(9,(t=>({minX:this._storage.getXMin(t),minY:this._storage.getYMin(t),maxX:this._storage.getXMax(t),maxY:this._storage.getYMax(t)}))),this._storage=a,this.mode=r}get storage(){return this._storage}get storeStatistics(){let t=0,e=0,s=0;return this.forEach((a=>{const r=a.readGeometry();r&&(e+=r.isPoint?1:r.lengths.reduce(((t,e)=>t+e),0),s+=r.isPoint?1:r.lengths.length,t+=1)})),{featureCount:t,vertexCount:e,ringCount:s}}hasInstance(t){return this._featureSetsByInstance.has(t)}onTileData(t,e){if(s(e.addOrUpdate))return e;if(e.addOrUpdate.attachStorage(this._storage),\"snapshot\"===this.mode){const s=e.addOrUpdate.getCursor();for(;s.next();){const e=s.getDisplayId();this.setComputedAttributes(this._storage,s,e,t.scale)}return e}this._featureSetsByInstance.set(e.addOrUpdate.instance,e.addOrUpdate);const a=e.addOrUpdate.getCursor();for(;a.next();)this._insertFeature(a,t.scale);return this._spatialIndexInvalid=!0,this.events.emit(\"changed\"),e}search(t){this._rebuildIndex();const e=t.id,s=this._indexSearchCache.find((t=>t.tileId===e));if(a(s))return s.readers;const r=new Map,n=this._searchIndex(t.bounds),i=[];for(const a of n){const t=this._storage.getInstanceId(a),e=c(t),s=I(t);r.has(e)||r.set(e,[]);r.get(e).push(s)}return r.forEach(((t,e)=>{const s=this._featureSetsByInstance.get(e);i.push(d.from(s,t))})),this._indexSearchCache.enqueue({tileId:e,readers:i}),i}insert(t){const e=t.getCursor(),s=this._storage;for(;e.next();){var a;const t=h(e.instance,e.getIndex()),r=e.getObjectId(),n=null!=(a=this._objectIdToDisplayId.get(r))?a:this._storage.createDisplayId();e.setDisplayId(n),s.setInstanceId(n,t),this._objectIdToDisplayId.set(r,n)}this._featureSetsByInstance.set(t.instance,t),this._spatialIndexInvalid=!0}remove(t){const e=this._objectIdToDisplayId.get(t);if(!e)return;const s=this._storage.getInstanceId(e),a=I(s),r=c(s),n=this._featureSetsByInstance.get(r);this._objectIdToDisplayId.delete(t),this._storage.releaseDisplayId(e),n.removeAtIndex(a),n.isEmpty&&this._featureSetsByInstance.delete(r),this._spatialIndexInvalid=!0}forEach(t){this._objectIdToDisplayId.forEach((e=>{const s=this._storage.getInstanceId(e),a=this._lookupFeature(s);t(a)}))}forEachUnsafe(t){this._objectIdToDisplayId.forEach((e=>{const s=this._storage.getInstanceId(e),a=c(s),r=I(s),n=this._getFeatureSet(a);n.setIndex(r),t(n)}))}forEachInBounds(t,e){const s=this._searchIndex(t);for(const a of s){const t=this.lookupFeatureByDisplayId(a,this._storage);e(r(t))}}forEachBounds(t,e,s){this._rebuildIndex();const a=[0,0,0,0];for(const r of t){if(!r.readGeometry())continue;const t=r.getDisplayId();a[0]=this._storage.getXMin(t),a[1]=this._storage.getYMin(t),a[2]=this._storage.getXMax(t),a[3]=this._storage.getYMax(t),e(i(s,a))}}sweepFeatures(t,e,s){this._spatialIndexInvalid=!0,this._objectIdToDisplayId.forEach(((a,r)=>{t.has(a)||(e.releaseDisplayId(a),s&&s.unsetAttributeData(a),this._objectIdToDisplayId.delete(r))})),this.events.emit(\"changed\")}sweepFeatureSets(t){this._spatialIndexInvalid=!0,this._featureSetsByInstance.forEach(((e,s)=>{t.has(s)||this._featureSetsByInstance.delete(s)}))}lookupObjectId(t,e){const a=this.lookupFeatureByDisplayId(t,e);return s(a)?null:a.getObjectId()}lookupDisplayId(t){return this._objectIdToDisplayId.get(t)}lookupFeatureByDisplayId(t,e){const s=e.getInstanceId(t);return this._lookupFeature(s)}lookupByDisplayIdUnsafe(t){const e=this._storage.getInstanceId(t),s=c(e),a=I(e),r=this._getFeatureSet(s);return r?(r.setIndex(a),r):null}_insertFeature(t,e){const s=this._storage,a=t.getObjectId(),r=h(t.instance,t.getIndex());s.getInstanceId(t.getDisplayId());let n=this._objectIdToDisplayId.get(a);n||(n=s.createDisplayId(),this._objectIdToDisplayId.set(a,n),this._spatialIndexInvalid=!0),t.setDisplayId(n),s.setInstanceId(n,r),this.setComputedAttributes(s,t,n,e)}_searchIndex(t){this._rebuildIndex();const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this._index.search(e)}_rebuildIndex(){if(!this._spatialIndexInvalid)return;const t=[];\"snapshot\"===this.mode?this._featureSetsByInstance.forEach((e=>{const s=e.getCursor();for(;s.next();){const e=s.getDisplayId();this._storage.setBounds(e,s)&&t.push(e)}})):this._objectIdToDisplayId.forEach((e=>{const s=this._storage.getInstanceId(e);this._storage.setBounds(e,this._lookupFeature(s))&&t.push(e)})),this._index.clear(),this._index.load(t),this._indexSearchCache.clear(),this._spatialIndexInvalid=!1}_lookupFeature(t){const e=c(t),s=I(t),a=this._getFeatureSet(e);if(!a)return null;const r=a.getCursor();return r.setIndex(s),r}_getFeatureSet(t){return this._featureSetsByInstance.get(t)}}export{l as FeatureStore2D,u as featureAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{JSONMap as e}from\"../../../core/jsonMap.js\";import{isNone as t,isSome as r}from\"../../../core/maybe.js\";import{getUnitString as i}from\"../../../core/unitUtils.js\";import{getGeometryExtent as o}from\"../../../geometry/support/extentUtils.js\";import{fromJSON as n}from\"../../../geometry/support/jsonUtils.js\";import{normalizeCentralMeridian as s}from\"../../../geometry/support/normalizeUtils.js\";import{isGeographic as l,isWebMercator as a,WGS84 as m}from\"../../../geometry/support/spatialReferenceUtils.js\";import{getCentroidOptimizedGeometry as c}from\"../centroid.js\";import{quantizeOptimizedGeometry as u,convertToPoint as f,generalizeOptimizedGeometry as p,removeZMValues as y,convertToPolyline as g,convertToPolygon as S,convertToMultipoint as R}from\"../featureConversionUtils.js\";import d from\"../OptimizedGeometry.js\";import{checkProjectionSupport as h,project as w}from\"./projectionSupport.js\";const j=new e({esriSRUnit_Meter:\"meters\",esriSRUnit_Kilometer:\"kilometers\",esriSRUnit_Foot:\"feet\",esriSRUnit_StatuteMile:\"miles\",esriSRUnit_NauticalMile:\"nautical-miles\",esriSRUnit_USNauticalMile:\"us-nautical-miles\"}),U=Object.freeze({}),M=new d,F=new d,G=new d,N={esriGeometryPoint:f,esriGeometryPolyline:g,esriGeometryPolygon:S,esriGeometryMultipoint:R};function O(e,r,i,o=e.hasZ,n=e.hasM){if(t(r))return null;const s=e.hasZ&&o,l=e.hasM&&n;if(i){const t=u(G,r,e.hasZ,e.hasM,\"esriGeometryPoint\",i,o,n);return f(t,s,l)}return f(r,s,l)}function _(e,t,r){return\"esriGeometryPolygon\"===e.geometryType&&t&&(t.centroid||t.geometry)?(t.centroid||(t.centroid=c(new d,t.geometry,e.hasZ,e.hasM)),O(e,t.centroid,r)):null}function J(e,i,o,n,s,l,a=i,m=o){const c=i&&a,f=o&&m,g=r(n)?\"coords\"in n?n:n.geometry:null;if(t(g))return null;if(s){let t=p(F,g,i,o,e,s,a,m);return l&&(t=u(G,t,c,f,e,l)),N[e](t,c,f)}if(l){const t=u(G,g,i,o,e,l,a,m);return N[e](t,c,f)}return y(M,g,i,o,a,m),N[e](M,c,f)}async function P(e,t,r){const{outFields:i,orderByFields:o,groupByFieldsForStatistics:n,outStatistics:s}=e;if(i)for(let l=0;l<i.length;l++)i[l]=i[l].trim();if(o)for(let l=0;l<o.length;l++)o[l]=o[l].trim();if(n)for(let l=0;l<n.length;l++)n[l]=n[l].trim();if(s)for(let l=0;l<s.length;l++)s[l].onStatisticField&&(s[l].onStatisticField=s[l].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),Z(e,t,r)}async function v(e,t,r){return Z(e,t,r)}async function Z(e,r,i){if(!e)return null;let{where:l}=e;if(e.where=l=l&&l.trim(),(!l||/^1 *= *1$/.test(l)||r&&r===l)&&(e.where=null),!e.geometry)return e;let a=await b(e);if(e.distance=0,e.units=null,\"esriSpatialRelEnvelopeIntersects\"===e.spatialRel){const{spatialReference:t}=e.geometry;a=o(a),a.spatialReference=t}e.geometry=a,await h(a.spatialReference,i);const m=(await s(n(a)))[0];if(t(m))throw U;const c=m.toJSON(),u=await w(c,c.spatialReference,i);if(!u)throw U;return u.spatialReference=i,e.geometry=u,e}async function b(e){const{geometry:t,distance:r,units:o}=e;if(null==r||\"vertexAttributes\"in t)return t;const n=t.spatialReference,s=o?j.fromJSON(o):i(n),c=n&&(l(n)||a(n))?t:await h(n,m).then((()=>w(t,m)));return(await x())(c.spatialReference,c,r,s)}async function x(){return(await import(\"../../../geometry/geometryEngineJSON.js\")).geodesicBuffer}function z(e){return e&&B in e?JSON.parse(JSON.stringify(e,E)):e}const B=\"_geVersion\",E=(e,t)=>e!==B?t:void 0;export{U as QUERY_ENGINE_EMPTY_RESULT,z as cleanFromGeometryEngine,_ as getCentroid,J as getGeometry,v as normalizeFilter,P as normalizeQuery,Z as normalizeQueryLike,O as transformCentroid};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{extentIntersectsExtent as e,getFeatureExtentIntersector as t}from\"./intersectsBase.js\";export{extentIntersectsExtent,extentIntersectsMultipoint,extentIntersectsPoint,extentIntersectsPolygon,extentIntersectsPolyline,getFeatureExtentIntersector,isSelfIntersecting,segmentIntersects}from\"./intersectsBase.js\";function n(n){return\"mesh\"===n?e:t(n)}export{n as getExtentIntersector};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction n(n,t){return n?t?4:3:t?3:2}function t(n,t,r,e){return o(n,t,r,e.coords[0],e.coords[1])}function r(t,r,e,c,u,f){const s=n(u,f),{coords:i,lengths:l}=c;if(!l)return!1;for(let n=0,d=0;n<l.length;n++,d+=s)if(!o(t,r,e,i[d],i[d+1]))return!1;return!0}function o(t,r,o,c,u){if(!t)return!1;const f=n(r,o),{coords:s,lengths:i}=t;let l=!1,d=0;for(const n of i)l=e(l,s,f,d,n,c,u),d+=n*f;return l}function e(n,t,r,o,e,c,u){let f=n,s=o;for(let i=o,l=o+e*r;i<l;i+=r){s=i+r,s===l&&(s=o);const n=t[i],e=t[i+1],d=t[s],g=t[s+1];(e<u&&g>=u||g<u&&e>=u)&&n+(u-e)/(g-e)*(d-n)<c&&(f=!f)}return f}export{o as polygonContainsCoords,r as polygonContainsMultipoint,t as polygonContainsPoint};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import{extentContainsPoint as r,extentContainsMultipoint as t}from\"../../../geometry/support/contains.js\";import{getExtentIntersector as i}from\"../../../geometry/support/intersects.js\";import{isPolygon as s,isExtent as o,getJsonType as n}from\"../../../geometry/support/jsonUtils.js\";import{isValid as l}from\"../../../geometry/support/spatialReferenceUtils.js\";import{polygonContainsPoint as a,polygonContainsMultipoint as p}from\"../contains.js\";import{convertFromPolygon as m}from\"../featureConversionUtils.js\";import u from\"../OptimizedGeometry.js\";import{checkProjectionSupport as y}from\"./projectionSupport.js\";import{getGeometry as f}from\"./utils.js\";const c=\"feature-store:unsupported-query\",R={esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"intersects\",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:null},S={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};function G(e){return!0===S.spatialRelationship[e]}function g(e){return!0===S.queryGeometry[n(e)]}function j(e){return!0===S.layerGeometry[e]}function h(){return import(\"../../../geometry/geometryEngineJSON.js\")}function v(e,n,l,y,c){if(s(n)&&\"esriGeometryPoint\"===l&&(\"esriSpatialRelIntersects\"===e||\"esriSpatialRelContains\"===e)){const e=m(new u,n,!1,!1);return Promise.resolve((r=>a(e,!1,!1,r)))}if(s(n)&&\"esriGeometryMultipoint\"===l){const r=m(new u,n,!1,!1);if(\"esriSpatialRelContains\"===e)return Promise.resolve((e=>p(r,!1,!1,e,y,c)))}if(o(n)&&\"esriGeometryPoint\"===l&&(\"esriSpatialRelIntersects\"===e||\"esriSpatialRelContains\"===e))return Promise.resolve((e=>r(n,f(l,y,c,e))));if(o(n)&&\"esriGeometryMultipoint\"===l&&\"esriSpatialRelContains\"===e)return Promise.resolve((e=>t(n,f(l,y,c,e))));if(o(n)&&\"esriSpatialRelIntersects\"===e){const e=i(l);return Promise.resolve((r=>e(n,f(l,y,c,r))))}return h().then((r=>{const t=r[R[e]].bind(null,n.spatialReference,n);return e=>t(f(l,y,c,e))}))}async function P(r,t,i){const{spatialRel:s,geometry:o}=r;if(o){if(!G(s))throw new e(c,\"Unsupported query spatial relationship\",{query:r});if(l(o.spatialReference)&&l(i)){if(!g(o))throw new e(c,\"Unsupported query geometry type\",{query:r});if(!j(t))throw new e(c,\"Unsupported layer geometry type\",{query:r});if(r.outSR)return y(r.geometry&&r.geometry.spatialReference,r.outSR)}}}function I(e){if(o(e))return!0;if(s(e)){for(const r of e.rings){if(5!==r.length)return!1;if(r[0][0]!==r[1][0]||r[0][0]!==r[4][0]||r[2][0]!==r[3][0]||r[0][1]!==r[3][1]||r[0][1]!==r[4][1]||r[1][1]!==r[2][1])return!1}return!0}return!1}export{I as canQueryWithRBush,P as checkSpatialQuerySupport,v as getSpatialQueryOperator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Error.js\";import r from\"../../../../../core/Logger.js\";const t=r.getLogger(\"esri.views.2d.layers.features.support.whereUtils\"),a={getAttribute:(e,r)=>e.field(r)};async function s(r,s){const n=await import(\"../../../../../core/sql/WhereClause.js\");try{const o=n.WhereClause.create(r,s);if(!o.isStandardized){const r=new e(\"mapview - bad input\",\"Unable to apply filter's definition expression, as expression is not standardized.\",o);t.error(r)}return e=>{const r=e.readArcadeFeature();return o.testFeature(r,a)}}catch(o){return t.warn(\"mapview-bad-where-clause\",\"Encountered an error when evaluating where clause\",r),e=>!0}}export{s as createWhereClause};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../core/Error.js\";import e from\"../../../../../core/Logger.js\";import{isSome as i}from\"../../../../../core/maybe.js\";import{create as s}from\"../../../../../geometry/support/aaBoundingRect.js\";import{getBoundsXY as r}from\"../../../../../geometry/support/boundsUtils.js\";import{getSpatialQueryOperator as o}from\"../../../../../layers/graphics/data/spatialQuerySupport.js\";import{getTimeOperator as h}from\"../../../../../layers/graphics/data/timeSupport.js\";import{normalizeQueryLike as a}from\"../../../../../layers/graphics/data/utils.js\";import l from\"../../../../../rest/support/Query.js\";import{featureAdapter as n}from\"../FeatureStore2D.js\";import{createWhereClause as d}from\"./whereUtils.js\";const m=e.getLogger(\"esri.views.2d.layers.features.controllers.FeatureFilter\"),_=1,p=2;class y{constructor(t){this._geometryBounds=s(),this._idToVisibility=new Map,this._serviceInfo=t}get hash(){return this._hash}check(t){return this._applyFilter(t)}clear(){const t=this._resetAllHiddenIds();return this.update(),{show:t,hide:[]}}invalidate(){this._idToVisibility.forEach(((t,e)=>{this._idToVisibility.set(e,0)}))}setKnownIds(t){for(const e of t)this._idToVisibility.set(e,_)}setTrue(t){const e=[],i=[],s=new Set(t);return this._idToVisibility.forEach(((t,r)=>{const o=!!(this._idToVisibility.get(r)&_),h=s.has(r);!o&&h?e.push(r):o&&!h&&i.push(r),this._idToVisibility.set(r,h?_|p:0)})),{show:e,hide:i}}createQuery(){const{geometry:t,spatialRel:e,where:i,timeExtent:s,objectIds:r}=this;return l.fromJSON({geometry:t,spatialRel:e,where:i,timeExtent:s,objectIds:r})}async update(t,e){this._hash=JSON.stringify(t);const i=await a(t,null,e);await Promise.all([this._setGeometryFilter(i),this._setIdFilter(i),this._setAttributeFilter(i),this._setTimeFilter(i)])}async _setAttributeFilter(t){if(!t||!t.where)return this._clause=null,void(this.where=null);this._clause=await d(t.where,this._serviceInfo.fieldsIndex),this.where=t.where}_setIdFilter(t){this._idsToShow=t&&t.objectIds&&new Set(t.objectIds),this._idsToHide=t&&t.hiddenIds&&new Set(t.hiddenIds),this.objectIds=t&&t.objectIds}async _setGeometryFilter(t){if(!t||!t.geometry)return this._spatialQueryOperator=null,this.geometry=null,void(this.spatialRel=null);const e=t.geometry,i=t.spatialRel||\"esriSpatialRelIntersects\",s=await o(i,e,this._serviceInfo.geometryType,this._serviceInfo.hasZ,this._serviceInfo.hasM);r(this._geometryBounds,e),this._spatialQueryOperator=s,this.geometry=e,this.spatialRel=i}_setTimeFilter(e){if(this.timeExtent=this._timeOperator=null,e&&e.timeExtent)if(this._serviceInfo.timeInfo)this.timeExtent=e.timeExtent,this._timeOperator=h(this._serviceInfo.timeInfo,e.timeExtent,n);else{const i=new t(\"feature-layer-view:time-filter-not-available\",\"Unable to apply time filter, as layer doesn't have time metadata.\",e.timeExtent);m.error(i)}}_applyFilter(t){return this._filterByGeometry(t)&&this._filterById(t)&&this._filterByTime(t)&&this._filterByExpression(t)}_filterByExpression(t){return!this.where||this._clause(t)}_filterById(t){return(!this._idsToHide||!this._idsToHide.size||!this._idsToHide.has(t.getObjectId()))&&(!this._idsToShow||!this._idsToShow.size||this._idsToShow.has(t.getObjectId()))}_filterByGeometry(t){if(!this.geometry)return!0;const e=t.readHydratedGeometry();return!!e&&this._spatialQueryOperator(e)}_filterByTime(t){return!i(this._timeOperator)||this._timeOperator(t)}_resetAllHiddenIds(){const t=[];return this._idToVisibility.forEach(((e,i)=>{e&_||(this._idToVisibility.set(i,_),t.push(i))})),t}}export{y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Logger.js\";function r(r,a,t){r.referencesGeometry();const n=a.readArcadeFeature();try{return r.evaluate({...t,$feature:n})}catch(o){return e.getLogger(\"esri.views.2d.support.arcadeOnDemand\").warn(\"Feature arcade evaluation failed:\",o),null}}export{r as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/has.js\";import{isNone as s}from\"../../../../core/maybe.js\";import{diff as t,hasDiff as i}from\"../../../../core/accessorSupport/diffUtils.js\";import{createRendererExpression as a}from\"../../../../support/arcadeOnDemand.js\";import r from\"../../arcade/callExpressionWithCursor.js\";const c=import(\"../../../../layers/support/labelFormatUtils.js\");class o{constructor(e,s){this._canCacheExpressionValue=!1,this._sourceInfo=e,this._bitsets={computed:s.getBitset(s.createBitset())}}invalidate(){this._bitsets.computed.clear()}async updateSchema(a,r){const c=t(this._schema,r);if(this._schema=r,!r||s(c)||!i(c,\"attributes\"))return;e(\"esri-2d-update-debug\")&&console.debug(\"Applying Update - Store:\",c),this._bitsets.computed.clear(),a.targets[r.name]=!0;const o=r.attributes,n=[],d=[];for(const e in o){const s=o[e];switch(s.type){case\"field\":break;case\"expression\":n.push(this._createArcadeComputedField(s));break;case\"label-expression\":n.push(this._createLabelArcadeComputedField(s));break;case\"statistic\":d.push(s)}}this._computedFields=await Promise.all(n),this._canCacheExpressionValue=!this._computedFields.some((e=>\"expression\"===e.type&&e.expression.referencesScale())),this._statisticFields=d}setComputedAttributes(e,s,t,i){const a=this._bitsets.computed;if(!this._canCacheExpressionValue||!a.has(t)){a.set(t);for(const a of this._computedFields){const r=this._evaluateField(s,a,i);switch(a.resultType){case\"numeric\":e.setComputedNumericAtIndex(t,a.fieldIndex,r);break;case\"string\":e.setComputedStringAtIndex(t,a.fieldIndex,r)}}}}async _createArcadeComputedField(e){const s=this._sourceInfo.spatialReference,t=this._sourceInfo.fieldsIndex;return{...e,expression:await a(e.valueExpression,s,t)}}async _createLabelArcadeComputedField(e){const s=this._sourceInfo.spatialReference,t=this._sourceInfo.fieldsIndex,{createLabelFunction:i}=await c,a=await i(e.label,t,s);return{...e,builder:a}}_evaluateField(e,s,t){switch(s.type){case\"label-expression\":{const t=e.readArcadeFeature();return s.builder.evaluate(t)||\"\"}case\"expression\":{const{expression:i}=s;return r(i,e,{$view:{scale:t}})}}}}export{o as Store2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"./maybe.js\";class s{constructor(t){this.size=0,this._start=0,this.maxSize=t,this._buffer=new Array(t)}get entries(){return this._buffer}enqueue(t){if(this.size===this.maxSize){const s=this._buffer[this._start];return this._buffer[this._start]=t,this._start=(this._start+1)%this.maxSize,s}return this._buffer[(this._start+this.size++)%this.maxSize]=t,null}dequeue(){if(0===this.size)return null;const t=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,t}peek(){return 0===this.size?null:this._buffer[this._start]}find(s){if(0===this.size)return null;for(const e of this._buffer)if(t(e)&&s(e))return e;return null}clear(s){let e=this.dequeue();for(;t(e);)s&&s(e),e=this.dequeue()}}export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction t(t,n){if(!t)return null;const e=n.featureAdapter,{startTimeField:u,endTimeField:l}=t;let r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;if(u&&l)n.forEach((t=>{const n=e.getAttribute(t,u),o=e.getAttribute(t,l);null==n||isNaN(n)||(r=Math.min(r,n)),null==o||isNaN(o)||(i=Math.max(i,o))}));else{const t=u||l;n.forEach((n=>{const u=e.getAttribute(n,t);null==u||isNaN(u)||(r=Math.min(r,u),i=Math.max(i,u))}))}return{start:r,end:i}}function n(t,n,r){if(!n||!t)return null;const{startTimeField:i,endTimeField:o}=t;if(!i&&!o)return null;const{start:s,end:a}=n;return null===s&&null===a?null:void 0===s&&void 0===a?l():i&&o?e(r,i,o,s,a):u(r,i||o,s,a)}function e(t,n,e,u,l){return null!=u&&null!=l?r=>{const i=t.getAttribute(r,n),o=t.getAttribute(r,e);return(null==i||i<=l)&&(null==o||o>=u)}:null!=u?n=>{const l=t.getAttribute(n,e);return null==l||l>=u}:null!=l?e=>{const u=t.getAttribute(e,n);return null==u||u<=l}:void 0}function u(t,n,e,u){return null!=e&&null!=u&&e===u?u=>t.getAttribute(u,n)===e:null!=e&&null!=u?l=>{const r=t.getAttribute(l,n);return r>=e&&r<=u}:null!=e?u=>t.getAttribute(u,n)>=e:null!=u?e=>t.getAttribute(e,n)<=u:void 0}function l(){return()=>!1}export{t as getTimeExtent,n as getTimeOperator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{FeatureSetReader as e}from\"./FeatureSetReader.js\";class r extends e{constructor(r,t){super(e.createInstance()),this._currentIndex=-1,this._reader=r,this._indices=t}static from(e,t){return new r(e.copy(),t)}get hasNext(){return this._currentIndex+1<this._indices.length}getSize(){return this._indices.length}getCursor(){return this.copy()}copy(){const e=new r(this._reader.copy(),this._indices);return e._currentIndex=this._currentIndex,e}next(){for(;this._nextIndex()&&!this._reader._getExists(););return this._currentIndex<this._indices.length}_nextIndex(){return++this._currentIndex<this._indices.length&&(this._reader.setIndex(this._indices[this._currentIndex]),!0)}setArcadeSpatialReference(e){this._reader.setArcadeSpatialReference(e)}attachStorage(e){this._reader.attachStorage(e)}get geometryType(){return this._reader.geometryType}get hasFeatures(){return this._reader.hasFeatures}get exceededTransferLimit(){return this._reader.exceededTransferLimit}get hasZ(){return this._reader.hasZ}get hasM(){return this._reader.hasM}getStorage(){return this._reader.getStorage()}getComputedNumeric(e){return this._reader.getComputedNumericAtIndex(0)}setComputedNumeric(e,r){return this._reader.setComputedNumericAtIndex(r,0)}getComputedString(e){return this._reader.getComputedStringAtIndex(0)}setComputedString(e,r){return this._reader.setComputedStringAtIndex(0,r)}getComputedNumericAtIndex(e){return this._reader.getComputedNumericAtIndex(e)}setComputedNumericAtIndex(e,r){this._reader.setComputedNumericAtIndex(e,r)}getComputedStringAtIndex(e){return this._reader.getComputedStringAtIndex(e)}setComputedStringAtIndex(e,r){return this._reader.setComputedStringAtIndex(e,r)}transform(e,r,t,d){const a=this.copy();return a._reader=this._reader.transform(e,r,t,d),a}readAttribute(e,r=!1){return this._reader.readAttribute(e,r)}readAttributes(){return this._reader.readAttributes()}joinAttributes(e){return this._reader.joinAttributes(e)}readArcadeFeature(){return this._reader.readArcadeFeature()}geometry(){return this._reader.geometry()}field(e){return this.readAttribute(e,!0)}hasField(e){return this._reader.hasField(e)}setField(e,r){return this._reader.setField(e,r)}keys(){return this._reader.keys()}castToText(){return this._reader.castToText()}getQuantizationTransform(){return this._reader.getQuantizationTransform()}getAttributeHash(){return this._reader.getAttributeHash()}getObjectId(){return this._reader.getObjectId()}getDisplayId(){return this._reader.getDisplayId()}setDisplayId(e){return this._reader.setDisplayId(e)}getGroupId(){return this._reader.getGroupId()}setGroupId(e){return this._reader.setGroupId(e)}getXHydrated(){return this._reader.getXHydrated()}getYHydrated(){return this._reader.getYHydrated()}getX(){return this._reader.getX()}getY(){return this._reader.getY()}setIndex(e){return this._reader.setIndex(e)}getIndex(){return this._reader.getIndex()}readLegacyFeature(){return this._reader.readLegacyFeature()}readOptimizedFeature(){return this._reader.readOptimizedFeature()}readLegacyPointGeometry(){return this._reader.readLegacyPointGeometry()}readLegacyGeometry(){return this._reader.readLegacyGeometry()}readLegacyCentroid(){return this._reader.readLegacyCentroid()}readGeometryArea(){return this._reader.readGeometryArea()}readUnquantizedGeometry(){return this._reader.readUnquantizedGeometry()}readHydratedGeometry(){return this._reader.readHydratedGeometry()}readGeometry(){return this._reader.readGeometry()}readCentroid(){return this._reader.readCentroid()}_readAttribute(e,r){throw new Error(\"Error: Should not be called. Underlying _reader should be used instead\")}_readAttributes(){throw new Error(\"Error: Should not be called. Underlying _reader should be used instead\")}}export{r as FeatureSetReaderIndirect};\n"],"sourceRoot":""}