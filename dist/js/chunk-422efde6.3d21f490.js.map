{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/chunks/CheckerBoard.glsl.js","webpack:///./node_modules/@arcgis/core/views/3d/analysis/support/measurementUtils.js","webpack:///./node_modules/@arcgis/core/views/3d/analysis/AreaMeasurement/support/MeasurementData.js","webpack:///./node_modules/@arcgis/core/views/3d/analysis/AreaMeasurement/support/AreaMeasurementController.js","webpack:///./node_modules/@arcgis/core/views/3d/analysis/AreaMeasurement/support/AreaMeasurementPathHelper.js","webpack:///./node_modules/@arcgis/core/views/3d/analysis/AreaMeasurement/support/AreaMeasurementView3DData.js","webpack:///./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/CheckerBoardTechnique.js","webpack:///./node_modules/@arcgis/core/views/3d/webgl-engine/materials/CheckerBoardMaterial.js","webpack:///./node_modules/@arcgis/core/views/3d/interactive/visualElements/MeasurementAreaVisualElement.js","webpack:///./node_modules/@arcgis/core/views/3d/analysis/AreaMeasurement/support/AreaMeasurementVisualization.js","webpack:///./node_modules/@arcgis/core/views/3d/analysis/AreaMeasurement/AreaMeasurementView3D.js"],"names":["o","t","extensions","add","attributes","vertex","uniforms","varyings","multipassTerrainEnabled","code","fragment","include","OITEnabled","Object","freeze","__proto__","build","s","i","center","length","f","Math","max","radius","sqrt","e","Error","b","n","distance","r","k","abs","q","G","U","setPoint","x","a","c","rings","spatialReference","WGS84","this","positionsWorldCoords","positionsRenderCoords","positionsProjectedWorldCoords","positionsFittedRenderCoords","positionsGeographic","positionsSpherical","positionsStereographic","pathSegmentLengths","geodesicPathSegmentLengths","perimeterSegmentLengths","intersectingSegments","Set","geodesicIntersectingSegments","areaCentroidWorldCoords","areaCentroidRenderCoords","geodesicAreaCentroidRenderCoords","_length","_centroidRenderCoords","_planeWorldCoords","_worldUp","_worldTangent","_frame","_pathVersion","_validMeasurement","_hasCursorPoint","_mode","_tempU","_tempV","_tempVec3","_tempSphere","_sceneView","unitNormalizer","h","d","g","l","renderSpatialReference","p","version","m","numVertices","_resize","u","_","C","w","M","forEachVertexPosition","B","elevationProvider","A","_updatePathLengths","pathLength","normalizeDistance","_updateGeodesicPathLengths","geodesicPathLength","_updateCursorSegmentLength","_updateMode","_updateArea","_updateGeodesicArea","area","geodesicArea","perimeterLength","triangleIndices","geodesicTriangleIndices","clear","fittingMode","cursorSegmentLength","geodesicCursorSegmentLength","actualMeasurementMode","push","renderCoordsHelper","S","L","worldUpAtPosition","worldBasisAtPosition","_selectFittingMode","P","forEach","getAltitude","R","j","W","v","z","_updatePerimeterLengths","_updateIntersectingSegments","size","normalizeArea","_computeArea","toRenderCoords","_updateGeodesicIntersectingSegments","_computeGeodesicArea","Uint32Array","map","reduce","maxRelativeErrorCoplanar","maxRelativeErrorAlmostCoplanar","cos","verticalAngleThreshold","lastPoint","isValidPolygon","value","H","Float64Array","hasZ","super","_handles","view","_measurementDataManager","analysisViewData","path","on","_update","watch","update","cursorPoint","validMeasurement","mode","getData","_set","measurementData","constructOnly","prototype","readOnly","EventedAccessor","_version","_internalGeometryChange","_extent","_initialize","areaMeasurement","initialized","editGeometry","components","isClosed","vertices","forEachVertex","pos","coordinateHelper","removeAll","_updateEditGeometryFromModelGeometry","_makeDirty","notifyChange","remove","geometry","_editGeometryOperations","fromGeometry","state","viewingMode","emit","addedVertices","removedVertices","data","getLastVertex","vectorToPoint","index","rightEdge","rightVertex","getVertex","iterateVertices","appendVertex","pointToVector","closeComponent","setVertexPosition","getVertexPositionAsPointFromIndex","equals","arguments","lastDraggedVertex","shader","get","configuration","transparencyPassType","cullAboveGround","rctx","program","camera","projectionMatrix","setUniform2fv","setUniform4fv","color1","color2","nearFar","inverseViewport","blending","transparent","depthTest","func","depthWrite","writeDepth","colorWrite","polygonOffset","T","factor","units","setPipelineState","count","techniqueConfig","parameters","output","ensureTechnique","updateParameters","bindPass","_material","getPassParameters","_checkerBoardMaterial","_renderOccluded","_geometry","_size","_color1","_color2","applyProps","updateMaterial","geometryChanged","setParameters","renderOccluded","transform","position","uv","exclusive","addGeometry","recreateGeometry","I","_params","_path","_intersectedPath","_perimeter","_intersectedPerimeter","_projectionLines","_measurementArea","_areaLabel","_pathLengthLabel","_cursorSegmentLengthLabel","_perimeterLengthLabel","_pathSegments","_perimeterSegments","_cursorSegment","_origin","_originTransform","_cursorPositionRenderSpace","messages","viewData","areaLabel","perimeterLengthLabel","loadingMessages","analysisView","visible","labels","attached","width","pathLineWidth","color","pathLineColor","intersectingLineColor","perimeterLineWidth","perimeterLineColor","projectionLineWidth","projectionLineColor","stipplePattern","projectionLineStippleSize","areaColor1","areaColor2","fontSize","unit","_updateLabels","_updateMessageBundle","set","destroyed","ready","_updateViewData","_updateOrigin","_updatePathSegments","_updatePerimeterSegments","_updateProjectionLines","_toPreferredAreaUnit","pathVersion","positionsProjected","areaCentroid","pathLengthLabelSegmentIndex","perimeterLengthLabelSegmentIndex","checkerSize","has","all","nonIntersecting","intersecting","_createSegments","setGeometryFromSegments","_updateAreaEuclidean","_updateAreaGeodesic","_formatAreaLabel","type","point","text","_formatLengthLabel","labelDistance","left","right","segment","sampleLocation","anchor","overlaps","toUnit","_preferredAreaUnit","_deriveLengthUnitFromAreaUnit","_preferredLengthUnit","then","finally","laserLineGlowColor","laserLineGlowWidth","laserLineGlowFalloff","laserLineInnerColor","laserLineInnerWidth","laserLineGlobalAlpha","laserLineEnabled","handleColor","handleOpacity","handleRadius","handleRadiusHovered","handleRadiusMouse","handleRadiusTouch","fillColor","lineSubdivisions","analysis","analysisVisualization","analysisController","_defaultUnit","visualization","controller"],"mappings":"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","file":"js/chunk-422efde6.3d21f490.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{ReadLinearDepth as e}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{multipassTerrainTest as a}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{ColorConversion as r}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{glsl as i}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as d}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function o(o){const t=new d;return t.extensions.add(\"GL_OES_standard_derivatives\"),t.attributes.add(\"position\",\"vec3\"),t.attributes.add(\"uv0\",\"vec2\"),t.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\"),t.varyings.add(\"vUV\",\"vec2\"),o.multipassTerrainEnabled&&t.varyings.add(\"depth\",\"float\"),t.vertex.code.add(i`\n    void main(void) {\n      vUV = uv0;\n      ${o.multipassTerrainEnabled?\"depth = (view * vec4(position, 1.0)).z;\":\"\"}\n      gl_Position = proj * view * vec4(position, 1.0);\n    }\n  `),o.multipassTerrainEnabled&&(t.fragment.include(e),t.include(a,o)),t.fragment.uniforms.add(\"size\",\"vec2\").add(\"color1\",\"vec4\").add(\"color2\",\"vec4\"),t.fragment.include(r),t.fragment.code.add(i`\n    void main() {\n      ${o.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n      vec2 uvScaled = vUV / (2.0 * size);\n\n      vec2 uv = fract(uvScaled - 0.25);\n      vec2 ab = clamp((abs(uv - 0.5) - 0.25) / fwidth(uvScaled), -0.5, 0.5);\n      float fade = smoothstep(0.25, 0.5, max(fwidth(uvScaled.x), fwidth(uvScaled.y)));\n      float t = mix(abs(ab.x + ab.y), 0.5, fade);\n\n      gl_FragColor = mix(color2, color1, t);\n      ${o.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}\n    }\n  `),t}const t=Object.freeze({__proto__:null,build:o});export{t as C,o as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{s as t,b as e,a as n,h as r,d as o,i as s,c as i,n as f,g as u}from\"../../../../chunks/vec3.js\";import{c as a}from\"../../../../chunks/vec3f64.js\";import{geodesicArea as c}from\"../../../../geometry/geometryEngine.js\";import l from\"../../../../geometry/Polygon.js\";import{projectPointToVector as m,projectPointToWGS84ComparableLonLat as h,projectVectorToWGS84ComparableLonLat as g}from\"../../../../geometry/projection.js\";import p from\"../../../../geometry/SpatialReference.js\";import{inverseGeodeticSolver as j}from\"../../../../geometry/support/geodesicUtils.js\";import{planeFromPoints as d}from\"../../support/mathUtils.js\";function y(o,s){const i=s.center;t(i,0,0,0);for(let t=0;t<o.length;++t)e(i,i,o[t]);n(i,i,1/o.length);let f=0;for(let t=0;t<o.length;++t)f=Math.max(f,r(i,o[t]));s.radius=Math.sqrt(f)}function M(t,e){if(t.length<3)throw new Error(\"need at least 3 points to fit a plane\");d(t[0],t[1],t[2],e)}function b(t,e){return o(t,e)+t[3]}function P(t,e,n){return m(t,R,n)&&m(e,S,n)?s(R,S):0}function w(t,e){if(!h(t,R)||!h(e,S))return 0;const n={distance:null};return j(n,[R[0],R[1]],[S[0],S[1]]),n.distance}function z(t,e,n){const r={distance:null};return j(r,[t[0],t[1]],[e[0],e[1]],n),r.distance}function k(t,e,n){const r=e[0]-t[0],o=e[1]-t[1],s=n[0]-t[0],i=n[1]-t[1];return.5*Math.abs(r*i-o*s)}function q(t,e,n,r){const o=G;return g(t,r,R)&&g(e,r,S)&&g(n,r,U)?(o.setPoint(0,0,R),o.setPoint(0,1,S),o.setPoint(0,2,U),Math.abs(c(o,\"square-meters\"))):0}function v(e,n,r){Math.abs(e[0])>Math.abs(e[1])?t(n,0,1,0):t(n,1,0,0),i(r,e,n),f(n,n),i(n,r,e),f(r,r)}function x(n,r=null,s=!0){const a=1e-6,c=(t,e)=>{if(0===e[0]&&0===e[1]&&0===e[2])return!1;for(let n=0;n<t.length;++n)if(o(e,t[n])<-a)return!1;return!0};if(0===n.length)return!1;if(1===n.length)return r&&u(r,n[0]),!0;t(W,0,0,0);for(let t=0;t<n.length;++t)e(W,W,n[t]);if(f(W,W),c(n,W))return r&&u(r,W),!0;if(!s)return!1;for(let t=0;t<n.length;++t)for(let e=0;e<n.length;++e)if(t!==e&&(i(W,n[t],n[e]),f(W,W),c(n,W)))return r&&u(r,W),!0;return!1}function E(t,e){if(t===e)return!0;if(t.size!==e.size)return!1;for(let n=0;n<t.size;++n)if(!e.has(t[n]))return!1;return!0}const R=a(),S=a(),U=a(),G=new l({rings:[[R,S,U]],spatialReference:p.WGS84}),W=a();export{M as bestFitPlane,y as boundingSphere,E as compareSets,x as fitHemisphere,b as planePointDistance,P as segmentLengthEuclidean,w as segmentLengthGeodesic,z as segmentLengthGeodesicVector,v as tangentFrame,k as triangleAreaEuclidean,q as triangleAreaGeodesic};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{deg2rad as e}from\"../../../../../core/mathUtils.js\";import{isSome as t,unwrapOr as s}from\"../../../../../core/maybe.js\";import i from\"../../../../../core/Quantity.js\";import{e as o}from\"../../../../../chunks/earcut.js\";import{s as r,b as n}from\"../../../../../chunks/vec2.js\";import{a as h}from\"../../../../../chunks/vec2f64.js\";import{n as a,i as d,g,c as l,o as c,f as p,d as m,a as u,b as _}from\"../../../../../chunks/vec3.js\";import{c as C}from\"../../../../../chunks/vec3f64.js\";import{c as f}from\"../../../../../chunks/vec4f64.js\";import{canProjectWithoutEngine as S,canProjectToWGS84ComparableLonLat as L,projectPointToVector as P,projectPointToWGS84ComparableLonLat as R,projectDirection as w,projectVectorToVector as M}from\"../../../../../geometry/projection.js\";import{getSphericalPCPF as j,getReferenceEllipsoid as A}from\"../../../../../geometry/projectionEllipsoid.js\";import W from\"../../../../../geometry/SpatialReference.js\";import{segmentIntersects as v}from\"../../../../../geometry/support/intersectsBase.js\";import{segmentLengthGeodesicVector as z,bestFitPlane as I,fitHemisphere as U,triangleAreaEuclidean as G,triangleAreaGeodesic as V,planePointDistance as y,boundingSphere as T,segmentLengthGeodesic as F,segmentLengthEuclidean as N}from\"../../support/measurementUtils.js\";import{midpoint as b}from\"../../support/viewUtils.js\";import{getElevationAtPoint as k}from\"../../../support/ElevationProvider.js\";import{makeOrthonormal as E,tangentFrame as x}from\"../../../support/mathUtils.js\";class D{constructor(e,t){this.positionsWorldCoords=[],this.positionsRenderCoords=[],this.positionsProjectedWorldCoords=[],this.positionsFittedRenderCoords=[],this.positionsGeographic=[],this.positionsSpherical=[],this.positionsStereographic=[],this.pathSegmentLengths=[],this.geodesicPathSegmentLengths=[],this.perimeterSegmentLengths=[],this.intersectingSegments=new Set,this.geodesicIntersectingSegments=new Set,this.areaCentroidWorldCoords=C(),this.areaCentroidRenderCoords=C(),this.geodesicAreaCentroidRenderCoords=C(),this._length=0,this._centroidRenderCoords=C(),this._planeWorldCoords=f(),this._worldUp=C(),this._worldTangent=C(),this._frame=[C(),C(),C()],this._pathVersion=-1,this._validMeasurement=!1,this._hasCursorPoint=!1,this._mode=null,this._tempU=C(),this._tempV=C(),this._tempVec3=C(),this._tempSphere={center:C(),radius:0},this._sceneView=e,this.unitNormalizer=t}update(e,s,o,r,n,h,d){const g=this.unitNormalizer,l=this._sceneView.renderSpatialReference,c=this.unitNormalizer.spatialReference,p=t(s);if(this._pathVersion===e.version&&this._validMeasurement===r&&!d&&this._hasCursorPoint===p&&this._mode===h)return!1;this._pathVersion=e.version,this._validMeasurement=r,this._hasCursorPoint=p;const m=e.numVertices;this._resize(m);const u=j(o.spatialReference),_=S(o.spatialReference,u)&&L(o.spatialReference),C=this.positionsGeographic,f=this.positionsWorldCoords,w=this.positionsRenderCoords,M=this.positionsSpherical;e.forEachVertexPosition(((e,t)=>{B(o.elevationProvider,e),P(e,f[t],c),P(e,w[t],l),_&&(R(e,C[t]),P(e,M[t],u),a(M[t],M[t]))}));const A=this._updatePathLengths(r);if(this.pathLength=this._length>1?new i(g.normalizeDistance(A),\"meters\"):null,_){const e=this._updateGeodesicPathLengths(r,c);this.geodesicPathLength=this._length>1?new i(e,\"meters\"):null}else this.geodesicPathLength=null;return this._updateCursorSegmentLength(e,s),this._updateMode(e,h),r?(this._updateArea(o,g,l,c,n),_&&this._updateGeodesicArea(o),!0):(this.area=null,this.geodesicArea=null,this.perimeterLength=null,this.triangleIndices=null,this.geodesicTriangleIndices=null,this.intersectingSegments.clear(),this.geodesicIntersectingSegments.clear(),!0)}getData(){return{positionsWorldCoords:this.positionsWorldCoords,positionsRenderCoords:this.positionsRenderCoords,positionsProjectedWorldCoords:this.positionsProjectedWorldCoords,positionsFittedRenderCoords:this.positionsFittedRenderCoords,positionsGeographic:this.positionsGeographic,positionsSpherical:this.positionsSpherical,positionsStereographic:this.positionsStereographic,pathSegmentLengths:this.pathSegmentLengths,geodesicPathSegmentLengths:this.geodesicPathSegmentLengths,perimeterSegmentLengths:this.perimeterSegmentLengths,intersectingSegments:this.intersectingSegments,geodesicIntersectingSegments:this.geodesicIntersectingSegments,triangleIndices:this.triangleIndices,geodesicTriangleIndices:this.geodesicTriangleIndices,areaCentroidWorldCoords:this.areaCentroidWorldCoords,areaCentroidRenderCoords:this.areaCentroidRenderCoords,geodesicAreaCentroidRenderCoords:this.geodesicAreaCentroidRenderCoords,fittingMode:this.fittingMode,area:this.area,geodesicArea:this.geodesicArea,pathLength:this.pathLength,geodesicPathLength:this.geodesicPathLength,perimeterLength:this.perimeterLength,cursorSegmentLength:this.cursorSegmentLength,geodesicCursorSegmentLength:this.geodesicCursorSegmentLength,unitNormalizer:this.unitNormalizer,actualMeasurementMode:this.actualMeasurementMode}}_resize(e){for(e<this._length&&(this.positionsWorldCoords.length=e,this.positionsRenderCoords.length=e,this.positionsProjectedWorldCoords.length=e,this.positionsFittedRenderCoords.length=e,this.positionsGeographic.length=e,this.positionsSpherical.length=e,this.positionsStereographic.length=e,this.pathSegmentLengths.length=e,this.geodesicPathSegmentLengths.length=e,this.perimeterSegmentLengths.length=e,this._length=e);this._length<e;)this.positionsWorldCoords.push(C()),this.positionsRenderCoords.push(C()),this.positionsProjectedWorldCoords.push(h()),this.positionsFittedRenderCoords.push(C()),this.positionsGeographic.push(C()),this.positionsSpherical.push(C()),this.positionsStereographic.push(h()),this.pathSegmentLengths.push(0),this.geodesicPathSegmentLengths.push(0),this.perimeterSegmentLengths.push(0),++this._length}_updatePathLengths(e){const t=this.positionsWorldCoords,s=this.pathSegmentLengths;let i=0;for(let o=0;o<this._length;++o){const r=s[o]=d(t[o],t[(o+1)%this._length]);(o<this._length-1||e)&&(i+=r)}return i}_updateGeodesicPathLengths(e,t){const s=this.positionsGeographic,i=this.geodesicPathSegmentLengths;let o=0;for(let r=0;r<this._length;++r){const n=i[r]=z(s[r],s[(r+1)%this._length],t);(r<this._length-1||e)&&(o+=n)}return o}_updateArea(e,t,s,o,n){const h=e.renderCoordsHelper,a=this.positionsWorldCoords,d=this.positionsRenderCoords,C=this.positionsProjectedWorldCoords,f=this.positionsFittedRenderCoords,S=this._planeWorldCoords,L=this._centroidRenderCoords;b(d,L),h.worldUpAtPosition(L,this._worldUp),h.worldBasisAtPosition(L,0,this._worldTangent),w(L,this._worldUp,s,this._worldUp,o),w(L,this._worldTangent,s,this._worldTangent,o),a.length>2&&I(a,S),this.fittingMode=this._selectFittingMode(S,a,this._worldUp,n);let P=0;if(\"horizontal\"===this.fittingMode){let e=-1/0;d.forEach(((t,s)=>{const i=h.getAltitude(d[s]);i>e&&(e=i,P=s)}))}const R=a[P];let j=S,A=this._worldTangent;\"horizontal\"===this.fittingMode?j=this._worldUp:\"vertical\"===this.fittingMode&&(j=this._tempVec3,A=this._worldUp,E(S,this._worldUp,j)),g(this._frame[2],j),E(A,j,this._frame[0]),l(this._frame[1],this._frame[0],this._frame[2]),c(this._frame[1],this._frame[1]);const W=this._tempVec3,v=this._tempU,z=this._tempV;for(let i=0;i<this._length;++i){const e=C[i],t=f[i];p(W,a[i],R),r(e,m(this._frame[0],W),m(this._frame[1],W)),u(v,this._frame[0],e[0]),u(z,this._frame[1],e[1]),_(W,v,z),_(W,W,R),M(W,o,t,s)}this.perimeterLength=this._length>0?new i(t.normalizeDistance(this._updatePerimeterLengths()),\"meters\"):null,b(f,this.areaCentroidRenderCoords),M(this.areaCentroidRenderCoords,s,this.areaCentroidWorldCoords,o),this._updateIntersectingSegments(),this.area=0===this.intersectingSegments.size?new i(t.normalizeArea(this._computeArea()),\"square-meters\"):null}_updateGeodesicArea(e){const t=e.renderCoordsHelper,s=this.positionsSpherical,o=this.positionsStereographic,n=this._tempVec3,h=U(s,n);if(!h)return void(this.geodesicArea=null);const a=this._tempU,d=this._tempV;x(n,a,d);for(let i=0;i<this._length;++i){const e=m(s[i],a),t=m(s[i],d),h=m(s[i],n);r(o[i],e/h,t/h)}u(n,n,A(e.spatialReference).radius),t.toRenderCoords(n,j(e.spatialReference),this.geodesicAreaCentroidRenderCoords),this._updateGeodesicIntersectingSegments(),this.geodesicArea=h&&0===this.geodesicIntersectingSegments.size?new i(this._computeGeodesicArea(),\"square-meters\"):null}_updatePerimeterLengths(){const e=this.positionsProjectedWorldCoords,t=this.perimeterSegmentLengths;let s=0;for(let i=0;i<this._length;++i){s+=t[i]=n(e[i],e[(i+1)%this._length])}return s}_updateIntersectingSegments(){const e=this.positionsProjectedWorldCoords,t=this.intersectingSegments;t.clear();for(let s=0;s<this._length;++s)for(let i=s+2;i<this._length;++i){if((i+1)%this._length===s)continue;const o=e[s],r=e[(s+1)%this._length],n=e[i],h=e[(i+1)%this._length];v(o,r,n,h)&&(t.add(s),t.add(i))}}_computeArea(){const e=this.positionsProjectedWorldCoords,t=q(e,2),s=this.triangleIndices=new Uint32Array(o(t,[],2));let i=0;for(let o=0;o<s.length;o+=3)i+=G(e[s[o]],e[s[o+1]],e[s[o+2]]);return i}_updateGeodesicIntersectingSegments(){const e=this.positionsStereographic,t=this.geodesicIntersectingSegments;t.clear();for(let s=0;s<this._length;++s)for(let i=s+2;i<this._length;++i){if((i+1)%this._length===s)continue;const o=e[s],r=e[(s+1)%this._length],n=e[i],h=e[(i+1)%this._length];v(o,r,n,h)&&(t.add(s),t.add(i))}}_computeGeodesicArea(){const e=this.positionsGeographic,t=q(this.positionsStereographic,2),s=this.geodesicTriangleIndices=new Uint32Array(o(t,[],2));let i=0;for(let o=0;o<s.length;o+=3)i+=V(e[s[o]],e[s[o+1]],e[s[o+2]],W.WGS84);return i}_selectFittingMode(t,s,i,o){const r=s.map((e=>Math.abs(y(t,e)))).reduce(((e,t)=>Math.max(e,t)),0);T(s,this._tempSphere);const n=r/(2*this._tempSphere.radius),h=n<o.maxRelativeErrorCoplanar,a=n<o.maxRelativeErrorAlmostCoplanar;let d=\"horizontal\";if(h)d=\"oblique\";else if(a){d=Math.abs(m(i,t))>Math.cos(e(o.verticalAngleThreshold))?\"horizontal\":\"vertical\"}return d}_updateCursorSegmentLength(e,s){const o=e.lastPoint;!e.isValidPolygon&&t(o)&&t(s)?(this.geodesicCursorSegmentLength=new i(F(o,s),\"meters\"),this.cursorSegmentLength=new i(this.unitNormalizer.normalizeDistance(N(o,s,this.unitNormalizer.spatialReference)),\"meters\")):(this.geodesicCursorSegmentLength=null,this.cursorSegmentLength=null)}_updateMode(e,s){if(0===s){this.actualMeasurementMode=\"euclidean\";let s=0;null!=this.geodesicPathLength&&(s+=this.geodesicPathLength.value),!e.isValidPolygon&&t(this.geodesicCursorSegmentLength)&&(s+=this.geodesicCursorSegmentLength.value),s>H&&(this.actualMeasurementMode=\"geodesic\")}else this.actualMeasurementMode=1===s?\"euclidean\":\"geodesic\";null==this.geodesicPathLength&&(this.actualMeasurementMode=\"euclidean\"),this._mode=s}}function q(e,t){const s=new Float64Array(e.length*t);for(let i=0;i<e.length;++i){const o=e[i];for(let e=0;e<t;++e)s[i*t+e]=o[e]}return s}function B(e,t){t.hasZ||(t.z=s(k(e,t,\"ground\"),0))}const H=1e5;export{D as MeasurementDataManager};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/Accessor.js\";import s from\"../../../../../core/Handles.js\";import{destroyMaybe as a}from\"../../../../../core/maybe.js\";import{property as r}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{canProjectWithoutEngine as i}from\"../../../../../geometry/projection.js\";import{getSphericalPCPF as n,WGS84ECEFSpatialReference as p,SphericalECEFSpatialReference as m}from\"../../../../../geometry/projectionEllipsoid.js\";import{MeasurementDataManager as c}from\"./MeasurementData.js\";import{UnitNormalizer as l}from\"../../support/UnitNormalizer.js\";let h=class extends t{constructor(e){super(e),this._handles=new s}initialize(){const e=this.view.spatialReference,t=n(e),s=t===m?p:t,a=!e||i(e,s)?s:e,r=new l(a);this._measurementDataManager=new c(this.view,r),this._handles.add([this.analysisViewData.path.on(\"change\",(()=>this._update())),this.analysisViewData.watch(\"cursorPoint\",(()=>this._update()),!0),this.analysisViewData.watch(\"mode\",(()=>this._update()),!0)]),this._update()}destroy(){this._handles=a(this._handles)}_update(e=!1){const t=this.analysisViewData,s={maxRelativeErrorCoplanar:.005,maxRelativeErrorAlmostCoplanar:.01,verticalAngleThreshold:80};if(this._measurementDataManager.update(t.path,t.cursorPoint,this.view,t.validMeasurement,s,t.mode,e)){const e=this._measurementDataManager.getData();this._set(\"measurementData\",e),t.measurementData=e}}};e([r({constructOnly:!0})],h.prototype,\"view\",void 0),e([r({constructOnly:!0})],h.prototype,\"analysis\",void 0),e([r({readOnly:!0})],h.prototype,\"measurementData\",void 0),e([r({constructOnly:!0})],h.prototype,\"analysisViewData\",void 0),h=e([o(\"esri.views.3d.analysis.AreaMeasurement.support.AreaMeasurementController\")],h);export{h as AreaMeasurementController};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/Evented.js\";import i from\"../../../../../core/Handles.js\";import{destroyMaybe as r,isSome as o,unwrap as s}from\"../../../../../core/maybe.js\";import{init as n}from\"../../../../../core/watchUtils.js\";import{property as a}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{subclass as h}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import m from\"../../../../../geometry/Point.js\";import{empty as l,expandPointInPlace as c}from\"../../../../../geometry/support/aaBoundingRect.js\";import{createCoordinateHelper as d}from\"../../../../interactive/coordinateHelper.js\";import{EditGeometry as p,Component as u}from\"../../../../interactive/editGeometry/EditGeometry.js\";import{EditGeometryOperations as y}from\"../../../../interactive/editGeometry/EditGeometryOperations.js\";let g=class extends t.EventedAccessor{constructor(e={}){super(e),this._handles=new i,this._version=0,this._internalGeometryChange=!1,this._extent=l()}destroy(){this._handles=r(this._handles)}set areaMeasurement(e){this._set(\"areaMeasurement\",e),o(e)&&o(this.view)&&this._initialize(e,this.view)}set view(e){this._set(\"view\",e),o(e)&&o(this.areaMeasurement)&&this._initialize(this.areaMeasurement,e)}get initialized(){return o(this.areaMeasurement)&&o(this.view)}get version(){return this._version}get isValidPolygon(){return this.initialized&&this.editGeometry.components.length>0&&this.editGeometry.components[0].isClosed()}get extent(){if(this.initialized&&this.editGeometry.components.length>0&&this.editGeometry.components[0].vertices.length>0){const e=l(this._extent);return this.forEachVertex((t=>{c(e,t.pos)})),e}return null}get spatialReference(){return this.initialized?this.editGeometry.coordinateHelper.spatialReference:null}_initialize(e,t){this._handles.removeAll(),this._handles.add(n(e,\"geometry\",(()=>this._updateEditGeometryFromModelGeometry(e,t)),!0)),this._makeDirty(!0)}_makeDirty(e=!1){this.notifyChange(\"isValidPolygon\"),this.notifyChange(\"initialized\"),this.notifyChange(\"extent\"),e&&this.notifyChange(\"numVertices\")}_updateEditGeometryFromModelGeometry(e,t){this._version++,this._internalGeometryChange||(this._handles.remove(\"EditGeometry\"),o(e.geometry)?this._editGeometryOperations=y.fromGeometry(e.geometry,t.state.viewingMode):this._editGeometryOperations=new y(new p(\"polygon\",d(!0,!1,t.spatialReference),t.state.viewingMode)),this._makeDirty(!0),this.emit(\"change\"),this._handles.add(this.editGeometry.on(\"change\",(t=>{this._makeDirty(null!=t.addedVertices||null!=t.removedVertices),this._internalGeometryChange=!0,e.geometry=this.numVertices>0?this.editGeometry.geometry:null,this._internalGeometryChange=!1})),\"EditGeometry\"))}get editGeometry(){return this._editGeometryOperations.data}get vertices(){const e=[];return this.forEachVertex((t=>{e.push(t)})),e}get numVertices(){return this.initialized&&this.editGeometry.components.length>0?this.editGeometry.components[0].vertices.length:0}get lastPoint(){if(this.initialized&&this.editGeometry.components.length>0){const e=this.editGeometry.components[0].getLastVertex();if(o(e))return this.editGeometry.coordinateHelper.vectorToPoint(e.pos)}return null}getVertex(e){if(!this.initialized||0===this.editGeometry.components.length||0===this.editGeometry.components[0].vertices.length)return null;const t=this.editGeometry.components[0].vertices[0];let i=t;do{if(i.index===e)return i;i=i.rightEdge.rightVertex}while(i!==t&&null!=i);return null}getVertexPositionAsPoint(e){return this.editGeometry.coordinateHelper.vectorToPoint(e.pos)}getVertexPositionAsPointFromIndex(e){return this.editGeometry.coordinateHelper.vectorToPoint(this.getVertex(e).pos)}forEachVertex(e){this.initialized&&this.editGeometry.components.length>0&&this.editGeometry.components[0].iterateVertices(e)}forEachVertexPosition(e){const t=this.editGeometry.coordinateHelper;this.forEachVertex(((i,r)=>{t.vectorToPoint(i.pos,G),e(G,r)}))}clear(){o(this.areaMeasurement)&&(this.areaMeasurement.geometry=null)}add(e){if(!this.initialized)return null;if(0===this.editGeometry.components.length){const e=s(this.view);this.editGeometry.components.push(new u(e.spatialReference,e.state.viewingMode))}const t=this._editGeometryOperations.appendVertex(this.editGeometry.coordinateHelper.pointToVector(e));return this.emit(\"change\"),t}close(){if(!this.initialized||0===this.editGeometry.components.length)return null;const e=this._editGeometryOperations.closeComponent(this.editGeometry.components[0]);return this.emit(\"change\"),e}ensureContains(e,t=\"\"){let i=!1;if(this.editGeometry.components.forEach((t=>{t.iterateVertices((t=>{t===e&&(i=!0)}))})),!i)throw new Error(`vertex doesnt exist ${t}`);return i}setVertexPosition(e,t){if(!this.initialized)return null;const i=this._editGeometryOperations.setVertexPosition(e,this.editGeometry.coordinateHelper.pointToVector(t));return this.emit(\"change\"),i}equals(e){if(this.numVertices!==e.numVertices)return!1;let t=!0;return this.forEachVertexPosition(((i,r)=>{const o=e.getVertexPositionAsPointFromIndex(r);i.equals(o)||(t=!1)})),!!t}};e([a({value:null})],g.prototype,\"areaMeasurement\",null),e([a({value:null})],g.prototype,\"view\",null),e([a()],g.prototype,\"isValidPolygon\",null),e([a()],g.prototype,\"extent\",null),e([a()],g.prototype,\"spatialReference\",null),e([a()],g.prototype,\"numVertices\",null),g=e([h(\"esri.views.3d.analysis.AreaMeasurement.support.AreaMeasurement3DPathHelper\")],g);const G=new m;export{g as AreaMeasurement3DPathHelper};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../../chunks/tslib.es6.js\";import e from\"../../../../../core/Accessor.js\";import{destroyMaybe as t}from\"../../../../../core/maybe.js\";import{property as o}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{AreaMeasurement3DPathHelper as a}from\"./AreaMeasurementPathHelper.js\";import{UnitNormalizer as p}from\"../../support/UnitNormalizer.js\";let i=class extends e{constructor(){super(...arguments),this.measurementData=null,this.unitNormalizer=new p,this.path=new a,this.lastDraggedVertex=null,this.mode=0}destroy(){this.measurementData=null,this.path=t(this.path)}get validMeasurement(){return this.path.isValidPolygon}};r([o()],i.prototype,\"measurementData\",void 0),r([o()],i.prototype,\"validMeasurement\",null),r([o()],i.prototype,\"unitNormalizer\",void 0),r([o()],i.prototype,\"path\",void 0),r([o()],i.prototype,\"lastDraggedVertex\",void 0),r([o()],i.prototype,\"cursorPoint\",void 0),r([o()],i.prototype,\"mode\",void 0),i=r([s(\"esri.views.3d.analysis.AreaMeasurement.support.AreaMeasurementView3DData\")],i);export{i as AreaMeasurementView3DData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import{bindMultipassTerrainTexture as e}from\"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{bindProjectionMatrix as t,bindView as o}from\"../core/shaderLibrary/util/View.glsl.js\";import{ReloadableShaderModule as i}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as s}from\"../core/shaderTechnique/ShaderTechnique.js\";import{parameter as a,ShaderTechniqueConfiguration as n}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as p}from\"../lib/DefaultVertexAttributeLocations.js\";import{OITBlending as l,OITDepthTest as c,OITDepthWrite as m}from\"../lib/OrderIndependentTransparency.js\";import{Program as d}from\"../lib/Program.js\";import{C as h}from\"../../../../chunks/CheckerBoard.glsl.js\";import{separateBlendingParams as u,makePipelineState as f,defaultDepthWriteParams as g,defaultColorWriteParams as b}from\"../../../webgl/renderState.js\";class y extends s{initializeProgram(r){const e=y.shader.get(),t=this.configuration,o=e.build({OITEnabled:0===t.transparencyPassType,multipassTerrainEnabled:t.multipassTerrainEnabled,cullAboveGround:t.cullAboveGround});return new d(r.rctx,o,p)}bindPass(r,o){t(this.program,o.camera.projectionMatrix),this.program.setUniform2fv(\"size\",r.size),this.program.setUniform4fv(\"color1\",r.color1),this.program.setUniform4fv(\"color2\",r.color2),o.multipassTerrainEnabled&&(this.program.setUniform2fv(\"cameraNearFar\",o.camera.nearFar),this.program.setUniform2fv(\"inverseViewport\",o.inverseViewport),e(this.program,o))}bindDraw(r){o(this.program,r)}setPipelineState(r){const e=this.configuration,t=3===r,o=2===r;return f({blending:e.transparent?t?v:l(r):null,depthTest:{func:c(r)},depthWrite:t?e.writeDepth&&g:m(r),colorWrite:b,polygonOffset:t||o?e.polygonOffset&&T:{factor:-1,units:-25}})}initializePipeline(){return this.setPipelineState(this.configuration.transparencyPassType)}}y.shader=new i(h,(()=>import(\"./CheckerBoard.glsl.js\")));const T={factor:0,units:-25},v=u(770,1,771,771);class j extends n{constructor(){super(...arguments),this.transparent=!1,this.writeDepth=!0,this.polygonOffset=!1,this.transparencyPassType=3,this.multipassTerrainEnabled=!1,this.cullAboveGround=!1}}r([a()],j.prototype,\"transparent\",void 0),r([a()],j.prototype,\"writeDepth\",void 0),r([a()],j.prototype,\"polygonOffset\",void 0),r([a({count:4})],j.prototype,\"transparencyPassType\",void 0),r([a()],j.prototype,\"multipassTerrainEnabled\",void 0),r([a()],j.prototype,\"cullAboveGround\",void 0);export{y as CheckerBoardTechnique,j as CheckerBoardTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../lib/GLMaterial.js\";import{Material as t,materialParametersDefaults as r}from\"../lib/Material.js\";import{DefaultBufferWriter as s,PositionUVLayout as i}from\"./internal/DefaultBufferWriter.js\";import{intersectTriangleGeometry as n}from\"./internal/MaterialUtil.js\";import{CheckerBoardTechniqueConfiguration as a,CheckerBoardTechnique as o}from\"../shaders/CheckerBoardTechnique.js\";class u extends t{constructor(e){super(e,h),this.techniqueConfig=new a}dispose(){}getPassParameters(){return this.parameters}getTechniqueConfig(e,t){return this.techniqueConfig.transparent=this.parameters.transparent,this.techniqueConfig.writeDepth=this.parameters.writeDepth,this.techniqueConfig.polygonOffset=this.parameters.polygonOffset,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig.multipassTerrainEnabled=!!t&&t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!!t&&t.cullAboveGround,this.techniqueConfig}intersect(e,t,r,s,i,a,o){return n(e,t,s,i,a,void 0,o)}requiresSlot(e){let t=2;return this.parameters.transparent&&(t=this.parameters.writeDepth?4:7),e===t||20===e}createGLMaterial(e){return 0===e.output||7===e.output?new p(e):null}createBufferWriter(){return new s(i)}}class p extends e{updateParameters(e){return this.ensureTechnique(o,e)}beginSlot(e){return this.updateParameters(e)}bind(e,t){t.bindPass(this._material.getPassParameters(),e)}}const h={size:[1,1],color1:[.75,.75,.75,1],color2:[.5,.5,.5,1],transparent:!1,writeDepth:!0,polygonOffset:!1,...r};export{u as CheckerBoardMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as r}from\"../../../../core/maybe.js\";import{z as t}from\"../../../../chunks/mat4.js\";import{f as s}from\"../../../../chunks/vec3.js\";import{c as o}from\"../../../../chunks/vec3f64.js\";import{g as i,c}from\"../../../../chunks/vec4.js\";import{f as a}from\"../../../../chunks/vec4f64.js\";import{Object3DVisualElement as h}from\"./Object3DVisualElement.js\";import{Geometry as l}from\"../../webgl-engine/lib/Geometry.js\";import{CheckerBoardMaterial as n}from\"../../webgl-engine/materials/CheckerBoardMaterial.js\";class d extends h{constructor(e){super(e),this._checkerBoardMaterial=null,this._renderOccluded=4,this._geometry=null,this._size=[1,1],this._color1=a(1,.5,0,.5),this._color2=a(1,1,1,.5),this.applyProps(e)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this.updateMaterial())}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.geometryChanged()}get size(){return this._size}set size(e){this._size=e,this.updateMaterial()}get color1(){return this._color1}set color1(e){i(e,this._color1)||(c(this._color1,e),this.updateMaterial())}get color2(){return this._color2}set color2(e){i(e,this._color2)||(c(this._color2,e),this.updateMaterial())}updateMaterial(){e(this._checkerBoardMaterial)&&this._checkerBoardMaterial.setParameters({size:this._size,color1:this._color1,color2:this._color2,renderOccluded:this._renderOccluded})}createExternalResources(){this._checkerBoardMaterial=new n({size:this._size,color1:this._color1,color2:this._color2,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:4})}destroyExternalResources(){this._checkerBoardMaterial=null}forEachExternalMaterial(r){e(this._checkerBoardMaterial)&&r(this._checkerBoardMaterial)}createGeometries(e){if(r(this._geometry)||r(this._checkerBoardMaterial))return;const i=u;t(i,this.transform);const c=this._geometry,a=[],h=o();c.position.forEach((e=>{s(h,e,i),a.push(h[0],h[1],h[2])}));const n=[];c.uv.forEach((e=>{n.push(e[0],e[1])}));const d=new l([[\"position\",{size:3,data:a,exclusive:!0}],[\"uv0\",{size:2,data:n,exclusive:!0}]],[[\"position\",c.triangleIndices],[\"uv0\",c.triangleIndices]]);e.addGeometry(d,this._checkerBoardMaterial)}geometryChanged(){this.recreateGeometry()}}const u=o();export{d as MeasurementAreaVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../intl.js\";import t from\"../../../../../core/Accessor.js\";import\"../../../../../core/has.js\";import i from\"../../../../../core/Handles.js\";import{nextHighestPowerOfTen as s}from\"../../../../../core/mathUtils.js\";import{destroyMaybe as r,isNone as n,isSome as a,unwrap as o}from\"../../../../../core/maybe.js\";import{formatDecimal as h}from\"../../../../../core/quantityFormatUtils.js\";import{react as l,syncAndInitial as m}from\"../../../../../core/reactiveUtils.js\";import{convertUnit as c,preferredImperialAreaUnit as d,preferredMetricAreaUnit as p,preferredImperialLengthUnit as u,preferredMetricLengthUnit as g}from\"../../../../../core/unitUtils.js\";import{property as _}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{subclass as L}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{i as b,a as v}from\"../../../../../chunks/mat4.js\";import{c as f}from\"../../../../../chunks/mat4f64.js\";import{f as S}from\"../../../../../chunks/vec3.js\";import{c as w}from\"../../../../../chunks/vec3f64.js\";import{midpoint as y}from\"../../../interactive/measurementTools/support/viewUtils.js\";import{LabelVisualElement as j}from\"../../../interactive/visualElements/LabelVisualElement.js\";import{LineVisualElement as C}from\"../../../interactive/visualElements/LineVisualElement.js\";import{MeasurementAreaVisualElement as P}from\"../../../interactive/visualElements/MeasurementAreaVisualElement.js\";import{GeodesicSegment as V,EuclideanSegment as A}from\"../../../interactive/visualElements/support/Segment.js\";import{createStipplePatternSimple as M}from\"../../../webgl-engine/materials/lineStippleUtils.js\";import{onLocaleChange as D}from\"../../../../../intl/locale.js\";import{fetchMessageBundle as R}from\"../../../../../intl/messages.js\";let I=class extends t{constructor(e){super(e),this._handles=new i,this._params={...U},this._path=null,this._intersectedPath=null,this._perimeter=null,this._intersectedPerimeter=null,this._projectionLines=null,this._measurementArea=null,this._areaLabel=null,this._pathLengthLabel=null,this._cursorSegmentLengthLabel=null,this._perimeterLengthLabel=null,this._pathSegments=[],this._perimeterSegments=[],this._cursorSegment=null,this._origin=w(),this._originTransform=f(),this._cursorPositionRenderSpace=w(),this.messages=null,this.viewData=z,this.areaLabel=null,this.perimeterLengthLabel=null,this.loadingMessages=!0}get visible(){return this.analysisView.visible}get testData(){return{labels:{area:this._areaLabel,pathLength:this._pathLengthLabel,cursorSegmentLength:this._cursorSegmentLengthLabel,perimeterLength:this._perimeterLengthLabel}}}initialize(){const e=this.view,t=this._params;this._path=new C({view:e,attached:!0,width:t.pathLineWidth,color:t.pathLineColor,polygonOffset:!0,renderOccluded:4}),this._intersectedPath=new C({view:e,attached:!0,width:t.pathLineWidth,color:t.intersectingLineColor,polygonOffset:!0,renderOccluded:4}),this._perimeter=new C({view:e,attached:!0,width:t.perimeterLineWidth,color:t.perimeterLineColor,polygonOffset:!0,renderOccluded:4}),this._intersectedPerimeter=new C({view:e,attached:!0,width:t.perimeterLineWidth,color:t.intersectingLineColor,polygonOffset:!0,renderOccluded:4}),this._projectionLines=new C({view:e,attached:!0,width:t.projectionLineWidth,color:t.projectionLineColor,stipplePattern:M(t.projectionLineStippleSize),polygonOffset:!0,renderOccluded:4}),this._measurementArea=new P({view:e,attached:!0,color1:t.areaColor1,color2:t.areaColor2}),this._areaLabel=new j({view:this.view,attached:!0,fontSize:16}),this._pathLengthLabel=new j({view:e,attached:!0,fontSize:12}),this._cursorSegmentLengthLabel=new j({view:e,attached:!0,fontSize:12}),this._perimeterLengthLabel=new j({view:e,attached:!0,fontSize:12});const i=this.analysisView.analysisViewData;this._handles.add([l((()=>[i.mode,this.visible,this.analysisView.unit,i.measurementData,i.cursorPoint]),(()=>this._update()),m),l((()=>{var t;return null==(t=e.state)?void 0:t.camera}),(()=>this._updateLabels()),m),D((async()=>this._updateMessageBundle()))]),this._updateMessageBundle()}destroy(){this._measurementArea=r(this._measurementArea),this._path=r(this._path),this._intersectedPath=r(this._intersectedPath),this._perimeter=r(this._perimeter),this._intersectedPerimeter=r(this._intersectedPerimeter),this._areaLabel=r(this._areaLabel),this._pathLengthLabel=r(this._pathLengthLabel),this._cursorSegmentLengthLabel=r(this._cursorSegmentLengthLabel),this._perimeterLengthLabel=r(this._perimeterLengthLabel),this._handles=r(this._handles),this.set(\"view\",null)}_update(){if(this.destroyed||!this.view.ready||!this.view.renderCoordsHelper)return;const e=this.analysisView.analysisViewData,t=e.measurementData;n(t)||(this._updateViewData(t,e.path,e.cursorPoint),this._updateOrigin(),this._updatePathSegments(),this._updatePerimeterSegments(),this._updateArea(),this._updateProjectionLines(),this._updateLabels())}_updateViewData(e,t,i){const r=t.isValidPolygon,n=\"geodesic\"===e.actualMeasurementMode,a=n?e.geodesicArea:e.area;let o=1;if(a){const t=this._toPreferredAreaUnit(a,this.analysisView.unit);o=s(Math.sqrt(t.value)/Math.sqrt(300)),o*=Math.sqrt(c(1,t.unit,\"square-meters\")),o/=e.unitNormalizer.normalizeDistance(1)}const h={validMeasurement:r,path:t,pathVersion:t.version,cursorPoint:i,measurementData:e,mode:e.actualMeasurementMode,positionsGeographic:e.positionsGeographic,positionsRenderCoords:e.positionsRenderCoords,positionsProjected:e.positionsProjectedWorldCoords,positionsFittedRenderCoords:e.positionsFittedRenderCoords,intersectingSegments:n?e.geodesicIntersectingSegments:e.intersectingSegments,triangleIndices:n?e.geodesicTriangleIndices:e.triangleIndices,fittingMode:e.fittingMode,areaCentroid:n?e.geodesicAreaCentroidRenderCoords:e.areaCentroidRenderCoords,pathLengthLabelSegmentIndex:r?0:t.numVertices-2,perimeterLengthLabelSegmentIndex:0,checkerSize:o};this._set(\"viewData\",h)}_updateOrigin(){const e=this.viewData;y(e.positionsRenderCoords,this._origin),b(this._originTransform),v(this._originTransform,this._originTransform,this._origin),this._measurementArea.transform=this._originTransform,this._projectionLines.transform=this._originTransform}_createSegments(e){const t=this.viewData,i=t.path,s=this.view.renderCoordsHelper.spatialReference,r=t.mode,n=[],a=[],o=[],h=t.validMeasurement?i.numVertices:i.numVertices-1;for(let l=0;l<h;++l){const h=t[e][l],m=t[e][(l+1)%i.numVertices];let c=null;switch(r){case\"euclidean\":c=new A(h,m);break;case\"geodesic\":c=new V(h,m,s)}t.intersectingSegments.has(l)?o.push(c):a.push(c),n.push(c)}return{all:n,nonIntersecting:a,intersecting:o}}_updatePathSegments(){const e=this.visible,t=this.viewData,i=this._createSegments(\"positionsRenderCoords\"),s=t.path,r=!s.isValidPolygon,n=t.cursorPoint,o=this.view.renderCoordsHelper,h=o.spatialReference,l=t.mode;if(this._cursorSegment=null,s.numVertices>0&&r&&a(n)){if(o.toRenderCoords(n,this._cursorPositionRenderSpace)){const e=t.positionsRenderCoords[s.numVertices-1],r=this._cursorPositionRenderSpace;let n=null;switch(l){case\"euclidean\":n=new A(e,r);break;case\"geodesic\":n=new V(e,r,h)}i.nonIntersecting.push(n),this._cursorSegment=n}}this._path.setGeometryFromSegments(i.nonIntersecting,this._origin),this._path.visible=e,this._intersectedPath.setGeometryFromSegments(i.intersecting,this._origin),this._intersectedPath.visible=e,this._pathSegments=i.all}_updatePerimeterSegments(){const e=this.visible&&\"euclidean\"===this.viewData.mode,t=this._createSegments(\"positionsFittedRenderCoords\");this._perimeter.setGeometryFromSegments(t.nonIntersecting,this._origin),this._perimeter.visible=e,this._intersectedPerimeter.setGeometryFromSegments(t.intersecting,this._origin),this._intersectedPerimeter.visible=e,this._perimeterSegments=t.all}_updateArea(){const e=this.viewData;switch(e.mode){case\"euclidean\":this._updateAreaEuclidean(e);break;case\"geodesic\":this._updateAreaGeodesic()}}_updateAreaEuclidean(e){const t=this.visible;e.validMeasurement&&0===e.intersectingSegments.size&&e.triangleIndices?(this._measurementArea.geometry={uv:e.positionsProjected,position:e.positionsFittedRenderCoords,triangleIndices:e.triangleIndices},this._measurementArea.size=[e.checkerSize,e.checkerSize],this._measurementArea.visible=t):this._measurementArea.visible=!1}_updateAreaGeodesic(){this._measurementArea.visible=!1}_updateProjectionLines(){const e=this.viewData,t=this.visible,i=e.path,s=e.mode;if(i.numVertices>0&&e.validMeasurement&&\"euclidean\"===s){const s=[];for(let t=0;t<i.numVertices;++t){const i=w();S(i,e.positionsRenderCoords[t],this._origin);const r=w();S(r,e.positionsFittedRenderCoords[t],this._origin),s.push([i,r])}this._projectionLines.geometry=s,this._projectionLines.visible=t}else this._projectionLines.geometry=null,this._projectionLines.visible=!1}_updateLabels(){if(this.destroyed)return;const e=this.viewData,t=e.path;if(!t)return;const i=e.measurementData,s=e.mode,r=!t.isValidPolygon,n=this.visible,h=this._formatAreaLabel(this.messages,\"geodesic\"===s?i.geodesicArea:i.area,this.analysisView.unit);a(h)?(this._areaLabel.geometry={type:\"point\",point:e.areaCentroid},this._areaLabel.text=h,this._areaLabel.visible=e.validMeasurement&&0===e.intersectingSegments.size&&n):this._areaLabel.visible=!1,this._set(\"areaLabel\",o(h));const l=this._formatLengthLabel(this.messages,\"geodesic\"===s?i.geodesicPathLength:i.pathLength,this.analysisView.unit);if(a(l)&&e.pathLengthLabelSegmentIndex>=0&&e.pathLengthLabelSegmentIndex<this._pathSegments.length){const i=this._pathSegments[e.pathLengthLabelSegmentIndex],s=a(this._cursorSegment)?this._cursorSegment:k;this._pathLengthLabel.distance=this._params.labelDistance,this._pathLengthLabel.geometry={type:\"corner\",left:i,right:s},this._pathLengthLabel.text=l,this._pathLengthLabel.visible=r&&t.numVertices>0&&n}else this._pathLengthLabel.visible=!1;const m=\"geodesic\"===s?e.measurementData.geodesicCursorSegmentLength:e.measurementData.cursorSegmentLength;if(a(m)){const e=this._formatLengthLabel(this.messages,m,this.analysisView.unit);this._cursorSegmentLengthLabel.distance=this._params.labelDistance,this._cursorSegmentLengthLabel.geometry=a(this._cursorSegment)?{type:\"segment\",segment:this._cursorSegment,sampleLocation:\"end\"}:null,this._cursorSegmentLengthLabel.anchor=\"bottom\",this._cursorSegmentLengthLabel.text=o(e),this._cursorSegmentLengthLabel.visible=r&&0!==m.value&&n}else this._cursorSegmentLengthLabel.visible=!1;this._cursorSegmentLengthLabel.overlaps(this._pathLengthLabel)&&(this._cursorSegmentLengthLabel.visible=!1),this._pathLengthLabel.overlaps(this._areaLabel)&&(this._pathLengthLabel.visible=!1);const c=\"geodesic\"===e.mode,d=c?i.geodesicPathLength:i.perimeterLength,p=o(null!=d?this._formatLengthLabel(this.messages,d,this.analysisView.unit):null);if(this._set(\"perimeterLengthLabel\",o(p)),e.validMeasurement&&0===e.intersectingSegments.size){this._perimeterLengthLabel.distance=this._params.labelDistance,this._perimeterLengthLabel.anchor=\"top\",this._perimeterLengthLabel.text=p,this._perimeterLengthLabel.visible=!0;let t=!0;for(let i=0;i<e.path.numVertices;++i){const s=(e.perimeterLengthLabelSegmentIndex+i)%e.path.numVertices,r=c?this._pathSegments[s]:this._perimeterSegments[s];if(t=!0,this._perimeterLengthLabel.geometry={type:\"segment\",segment:r,sampleLocation:\"center\"},!this._perimeterLengthLabel.overlaps(this._areaLabel))break;t=!1}this._perimeterLengthLabel.visible=t&&n}else this._perimeterLengthLabel.visible=!1}_toPreferredAreaUnit(e,t){return e.toUnit(this._preferredAreaUnit(e,t))}_preferredAreaUnit(e,t){switch(t){case\"metric\":return p(e.value,e.unit);case\"imperial\":return d(e.value,e.unit);default:return t}}_preferredLengthUnit(e,t){const i=this._deriveLengthUnitFromAreaUnit(t);switch(i){case\"metric\":return g(e.value,e.unit);case\"imperial\":return u(e.value,e.unit);default:return i}}_deriveLengthUnitFromAreaUnit(e){switch(e){case\"metric\":case\"ares\":case\"hectares\":return\"metric\";case\"imperial\":case\"acres\":return\"imperial\";case\"square-inches\":return\"inches\";case\"square-feet\":return\"feet\";case\"square-yards\":return\"yards\";case\"square-miles\":return\"miles\";case\"square-us-feet\":return\"us-feet\";case\"square-millimeters\":return\"millimeters\";case\"square-centimeters\":return\"centimeters\";case\"square-decimeters\":return\"decimeters\";case\"square-meters\":return\"meters\";case\"square-kilometers\":return\"kilometers\"}throw new Error(\"unhandled area unit\")}_formatAreaLabel(e,t,i){return e&&t&&h(e,t,this._preferredAreaUnit(t,i))}_formatLengthLabel(e,t,i){return e&&t&&h(e,t,this._preferredLengthUnit(t,i))}_updateMessageBundle(){this.loadingMessages=!0,R(\"esri/core/t9n/Units\").then((e=>{this.messages=e,this.view&&this._update()})).finally((()=>{this.loadingMessages=!1}))}};e([_()],I.prototype,\"view\",void 0),e([_()],I.prototype,\"messages\",void 0),e([_()],I.prototype,\"analysis\",void 0),e([_()],I.prototype,\"viewData\",void 0),e([_()],I.prototype,\"analysisView\",void 0),e([_({readOnly:!0})],I.prototype,\"areaLabel\",void 0),e([_({readOnly:!0})],I.prototype,\"perimeterLengthLabel\",void 0),e([_()],I.prototype,\"loadingMessages\",void 0),e([_()],I.prototype,\"visible\",null),I=e([L(\"esri.views.3d.analysis.AreaMeasurement.support.AreaMeasurementVisualization\")],I);const U={laserLineGlowColor:[1,.5,0],laserLineGlowWidth:8,laserLineGlowFalloff:8,laserLineInnerColor:[1,1,1],laserLineInnerWidth:1,laserLineGlobalAlpha:.75,laserLineEnabled:!0,handleColor:[1,.5,0],handleOpacity:.5,handleRadius:5,handleRadiusHovered:10,handleRadiusMouse:10,handleRadiusTouch:25,pathLineColor:[1,.5,0,1],pathLineWidth:3,intersectingLineColor:[1,.2,0,1],perimeterLineColor:[1,.5,0,1],perimeterLineWidth:2,projectionLineColor:[1,.5,0,1],projectionLineWidth:2,projectionLineStippleSize:5,areaColor1:[1,.5,0,.5],areaColor2:[1,1,1,.5],fillColor:[1,.5,0,.5],lineSubdivisions:64,labelDistance:25},z={validMeasurement:!1,path:null,pathVersion:-1,cursorPoint:null,measurementData:null,mode:null,positionsGeographic:null,positionsRenderCoords:null,positionsProjected:null,positionsFittedRenderCoords:null,intersectingSegments:null,triangleIndices:null,fittingMode:null,areaCentroid:null,pathLengthLabelSegmentIndex:null,perimeterLengthLabelSegmentIndex:null,checkerSize:null},k=new A(w(),w());export{I as AreaMeasurementVisualization};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as a}from\"../../../../chunks/tslib.es6.js\";import s from\"../../../../core/Accessor.js\";import{destroyMaybe as t,isSome as e,unwrapOr as i}from\"../../../../core/maybe.js\";import{property as r}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{defaultUnitPropertyMetadata as n}from\"../../../../properties/defaultUnit.js\";import{AnalysisView3D as l}from\"../AnalysisView3D.js\";import{AreaMeasurementController as p}from\"./support/AreaMeasurementController.js\";import{AreaMeasurementView3DData as u}from\"./support/AreaMeasurementView3DData.js\";import{AreaMeasurementVisualization as y}from\"./support/AreaMeasurementVisualization.js\";let h=class extends(l(s)){constructor(a){super(a),this.type=\"area-measurement-view-3d\",this.analysisViewData=new u}initialize(){this.analysisViewData.path.view=this.view,this.analysisViewData.path.areaMeasurement=this.analysis,this.analysisVisualization=new y({view:this.view,analysis:this.analysis,analysisView:this}),this.analysisController=new p({view:this.view,analysis:this.analysis,analysisViewData:this.analysisViewData})}destroy(){this.analysisController=t(this.analysisController),this.analysisVisualization=t(this.analysisVisualization),this.analysisViewData=t(this.analysisViewData)}get updating(){var a;return!(null==(a=this.analysisVisualization)||!a.loadingMessages)}get result(){const a=this.analysisViewData.measurementData;return e(a)?\"euclidean\"===a.actualMeasurementMode?{area:a.area,pathLength:a.perimeterLength,mode:\"euclidian\"}:{area:a.geodesicArea,pathLength:a.pathLength,mode:\"geodesic\"}:{area:null,mode:null,pathLength:null}}get unit(){return i(this.analysis.unit,this._defaultUnit)}get testData(){return{visualization:this.analysisVisualization,controller:this.analysisController}}};a([r()],h.prototype,\"type\",void 0),a([r()],h.prototype,\"analysis\",void 0),a([r()],h.prototype,\"updating\",null),a([r()],h.prototype,\"analysisVisualization\",void 0),a([r()],h.prototype,\"analysisController\",void 0),a([r()],h.prototype,\"result\",null),a([r()],h.prototype,\"analysisViewData\",void 0),a([r()],h.prototype,\"unit\",null),a([r(n)],h.prototype,\"_defaultUnit\",void 0),h=a([o(\"esri.views.3d.analysis.AreaMeasurement.AreaMeasurementView3D\")],h);const m=h;export{m as default};\n"],"sourceRoot":""}