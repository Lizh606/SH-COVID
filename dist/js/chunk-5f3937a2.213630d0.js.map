{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/views/3d/analysis/AnalysisView3D.js","webpack:///./node_modules/@arcgis/core/views/3d/interactive/visualElements/Object3DVisualElement.js","webpack:///./node_modules/@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightAnalysis.js","webpack:///./node_modules/@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightIntersectionResult.js","webpack:///./node_modules/@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightRayIntersector.js","webpack:///./node_modules/@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightResult.js","webpack:///./node_modules/@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightController.js","webpack:///./node_modules/@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightConfiguration.js","webpack:///./node_modules/@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightViewData.js","webpack:///./node_modules/@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightVisualization.js","webpack:///./node_modules/@arcgis/core/views/3d/analysis/LineOfSight/LineOfSightView3D.js","webpack:///./node_modules/@arcgis/core/views/3d/interactive/visualElements/LineVisualElement.js","webpack:///./node_modules/@arcgis/core/views/3d/interactive/visualElements/VisualElement.js"],"names":["p","i","super","arguments","this","parent","r","visible","suspended","analysis","readOnly","prototype","constructOnly","c","e","view","_resources","_transform","object","s","transformation","attached","createResources","_stage","removeMany","geometries","removeAllGeometries","createGeometries","setVisible","addMany","destroyResources","isPickable","updatePolicy","add","castShadow","createExternalResources","forEachExternalMaterial","layer","remove","dispose","destroyExternalResources","t","elevationAlignedTargetLocation","inputPoints","isValid","observer","observerSurfaceNormal","target","targetSurfaceNormal","observerAdjusted","targetAdjusted","computationResult","start","end","intersection","isTargetVisible","result","notifyChange","type","id","point","normal","ray","S","intersector","state","viewingMode","options","hud","store","get","camera","F","_getRayIntersection","sceneIntersectionHelper","intersectToolIntersectorRay","results","min","getIntersectionPoint","C","o","renderCoordsHelper","fromRenderCoords","spatialReference","n","direction","layerUid","nodeIndex","componentIndex","lij","slice","sourceLayer","objectIdField","uid","x","toRenderCoords","worldUpAtPosition","basemapTerrain","elevationBounds","getAltitude","Math","abs","max","l","_canUpdateFromIntersectionResult","intersectedGraphic","intersectedLocation","M","EventedMixin","_updatingHandles","_frameTask","_handles","_analysisHandles","resourceController","scheduler","registerTask","LINE_OF_SIGHT_TOOL","_connectObserver","_connectAnalyses","_connectTargets","_intersector","destroy","_analyses","removeAll","updating","priority","analysisViewData","analyses","observerEngineLocation","computeScreenPixelSizeAt","_observerEngineLocation","a","_canComputeAnalysis","_computeAnalysisIntersection","_interpolateAnalysisIntersection","updateComputationResults","emit","_screenPixelSize","h","Z","d","u","interpolationInfo","g","J","y","_","m","v","originalIntersection","originalObserver","originalTarget","f","elevationAlignedObserver","frustum","intersectsPoint","targets","_applyElevationAlignment","LINE_OF_SIGHT_TOOL_INTERACTIVE","hasZ","clone","z","elevationProvider","updateFromIntersectionResult","_adjustStartEndPositions","updateInputPoints","location","B","targetLocation","targetIntersection","_onTargetLocationChange","_onObserverChangeForAnalysis","observerIntersection","_onObserverEngineForAnalysis","isDirty","_isCameraDirty","on","q","extent","_onObserverChange","onElevationChange","getLineOfSightComputationDependencies","async","schedule","computeAnalysis","has","_connectAnalysisToTarget","_connectAnalysisToObserver","_connectAnalysisToObserverEngine","_connectAnalysisToCamera","_connectAnalysisToElevation","_connectAnalysisForCompute","added","forEach","_connectAnalysis","removed","_disconnectAnalysis","_addTarget","addOnCollectionPropertyChange","_onTargetCollectionChange","_removeTarget","some","find","_onAnalysesCollectionChange","_onTargetsChange","cursorTarget","_onCursorTargetChange","W","K","equals","innerWidth","outerWidth","visibleInnerColor","visibleOuterColor","occludedInnerColor","occludedOuterColor","undefinedInnerColor","undefinedOuterColor","Number","configuration","_handle","analysisView","fullOpacity","_configuration","_opacity","width","toUnitRGBA","visibleLineVisualElement","color","innerColor","occludedLineVisualElement","undefinedLineVisualElement","L","V","b","O","A","E","geometry","transform","createLineOfSightVisualization","getLineOfSightVisualizationDependencies","updateLineOfSightVisualization","updateVisualizationOpacity","destroyLineOfSightVisualization","items","moved","_analysisController","_analysisVisualization","handles","map","visualization","controller","_renderOccluded","_width","_color","_innerWidth","_innerColor","_stipplePattern","_stippleOffColor","_stipplePreferContinuous","_writeDepthEnabled","_falloff","_polygonOffset","applyProps","push","lines","origin","endpoint","basis1","basis2","endRenderSpace","points","createRenderGeometry","_updateMaterial","_geometry","recreateGeometry","recreate","_material","materialParameters","_createLineGeometries","length","addGeometry","stippleOffColor","stipplePattern","stipplePreferContinuous","isClosed","falloff","polygonOffset","renderOccluded","writeDepth","setParameters","Float64Array","overlayInfo","attributeData","position","removeDuplicateStartEnd","_attached","_resourcesCreated","_visible","watch","_createResources","_destroyResources","console","error","updateVisibility"],"mappings":"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","file":"js/chunk-5f3937a2.213630d0.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{isSome as t}from\"../../../core/maybe.js\";import{EsriPromiseMixin as s}from\"../../../core/Promise.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";const p=p=>{let i=class extends(s(p)){constructor(){super(...arguments),this.parent=null}get updating(){return!1}get visible(){const r=!t(this.parent)||this.parent.visible&&!this.parent.suspended;return this.analysis.visible&&r}};return r([o({readOnly:!0})],i.prototype,\"type\",void 0),r([o({constructOnly:!0})],i.prototype,\"analysis\",void 0),r([o({constructOnly:!0})],i.prototype,\"parent\",void 0),r([o({constructOnly:!0})],i.prototype,\"view\",void 0),r([o({readOnly:!0})],i.prototype,\"updating\",null),r([o({readOnly:!0})],i.prototype,\"visible\",null),i=r([e(\"esri.views.3d.analysis.AnalysisView3D\")],i),i};export{p as AnalysisView3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as s}from\"../../../../core/maybe.js\";import{c as r}from\"../../../../chunks/mat4.js\";import{c as t}from\"../../../../chunks/mat4f64.js\";import{VisualElement as o}from\"./VisualElement.js\";import{Object3D as i}from\"../../webgl-engine/lib/Object3D.js\";import{WebGLLayer as a}from\"../../webgl-engine/lib/WebGLLayer.js\";class c extends o{constructor(e){super(e.view),this._resources=null,this._transform=t()}get object(){return e(this._resources)?this._resources.object:null}get transform(){return this._transform}set transform(s){r(this._transform,s),e(this._resources)&&(this._resources.object.transformation=this._transform)}recreate(){this.attached&&this.createResources()}recreateGeometry(){if(s(this._resources))return;const e=this._resources.object,r=this.view._stage;r.removeMany(e.geometries),e.removeAllGeometries(),this.createGeometries(e),this.visible||e.setVisible(this.visible),r.addMany(e.geometries)}createResources(){this.destroyResources();const e=this.view._stage;if(!e)return;const s=new a({isPickable:!1,updatePolicy:1});e.add(s);const r=new i({castShadow:!1});r.transformation=this._transform,this.createExternalResources(),this.createGeometries(r),e.addMany(r.geometries),this.forEachExternalMaterial((s=>e.add(s))),e.add(r),s.add(r),this.visible||r.setVisible(!1),this._resources={layer:s,object:r}}destroyResources(){const e=this.view._stage;!s(this._resources)&&e&&(e.remove(this._resources.object),e.remove(this._resources.layer),this.forEachExternalMaterial((s=>{e.remove(s),s.dispose()})),e.removeMany(this._resources.object.geometries),this._resources.object.dispose(),this.destroyExternalResources(),this._resources=null)}updateVisibility(e){s(this._resources)||this._resources.object.setVisible(e)}}export{c as Object3DVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import o from\"../../../../core/Accessor.js\";import{property as e}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{c as r}from\"../../../../chunks/vec3f64.js\";let i=class extends o{constructor(t){super(t),this.elevationAlignedTargetLocation=null,this.inputPoints={isValid:!1,observer:r(),observerSurfaceNormal:null,target:r(),targetSurfaceNormal:null,observerAdjusted:r(),targetAdjusted:r()},this.computationResult={start:r(),end:r(),intersection:r(),isValid:!1,isTargetVisible:!1},this.result=null}updateComputationResults(){this.notifyChange(\"computationResult\")}updateInputPoints(){this.notifyChange(\"inputPoints\")}onElevationChange(){this.notifyChange(\"elevationAlignedTargetLocation\")}};t([e()],i.prototype,\"target\",void 0),t([e()],i.prototype,\"elevationAlignedTargetLocation\",void 0),t([e()],i.prototype,\"inputPoints\",void 0),t([e()],i.prototype,\"computationResult\",void 0),t([e()],i.prototype,\"result\",void 0),i=t([s(\"esri.views.3d.analysis.LineOfSight.LineOfSightAnalysis\")],i);export{i as LineOfSightAnalysis};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import o from\"../../../../core/Accessor.js\";import{equals as t}from\"../../../../core/arrayUtils.js\";import{clone as s}from\"../../../../core/lang.js\";import{equalsMaybe as e}from\"../../../../core/maybe.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{equals as c}from\"../../../../geometry/support/ray.js\";var n;let a=n=class extends o{constructor(r){super(r)}clone(){return new n({type:this.type,id:s(this.id),point:s(this.point),normal:s(this.normal),ray:s(this.ray)})}equals(r){return this.type===r.type&&this.id===r.id&&e(this.point,r.point)&&t(this.normal,r.normal)&&c(this.ray,r.ray)}};r([i()],a.prototype,\"type\",void 0),r([i({constructOnly:!0})],a.prototype,\"id\",void 0),r([i({constructOnly:!0})],a.prototype,\"point\",void 0),r([i({constructOnly:!0})],a.prototype,\"normal\",void 0),r([i({constructOnly:!0})],a.prototype,\"ray\",void 0),a=n=r([p(\"esri.views.3d.analysis.LineOfSight.LineOfSightIntersectionResult\")],a);export{a as LineOfSightIntersectionResult};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import{isNone as r,isSome as s}from\"../../../../core/maybe.js\";import{screenPointObjectToArray as o}from\"../../../../core/screenUtils.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{d as c,a,n as p,b as m}from\"../../../../chunks/vec3.js\";import{d as l,c as d}from\"../../../../chunks/vec3f64.js\";import{create as u,copy as y,fromPoints as f}from\"../../../../geometry/support/ray.js\";import{sv2d as h}from\"../../../../geometry/support/vectorStacks.js\";import{getObjectId as g}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{LineOfSightIntersectionResult as j}from\"./LineOfSightIntersectionResult.js\";import{isI3sIntersectorResult as v}from\"../../layers/i3s/Intersector.js\";import{fromScreen as w}from\"../../support/geometryUtils/ray.js\";import{isTerrainIntersectorResult as I}from\"../../terrain/Intersector.js\";import{tilesAreRelated as R}from\"../../terrain/tileUtils.js\";import{newIntersector as b}from\"../../webgl-engine/lib/Intersector.js\";import{toGraphic as U}from\"../../webgl-engine/lib/intersectorUtilsConversions.js\";let S=class extends t{constructor(e){super(e)}initialize(){this.intersector=b(this.view.state.viewingMode),this.intersector.options.hud=!1,this.intersector.options.store=0}getScreenPointIntersection(e){const t=o(e,h.get()),r=w(this.view.state.camera,t,F);return this._getRayIntersection(r)}_getRayIntersection(e){if(r(e))return null;this.view.sceneIntersectionHelper.intersectToolIntersectorRay(e,this.intersector);const t=this.intersector.results.min;if(!t.getIntersectionPoint(C))return null;const o=this.view.renderCoordsHelper.fromRenderCoords(C,this.view.spatialReference),i=l(t.normal),n=c(i,e.direction)>0?-1:1;if(a(i,i,n),v(t))return new j({type:0,id:`${t.target.layerUid}/${t.target.nodeIndex}/${t.target.componentIndex}`,point:o,normal:i,ray:y(e)});if(I(t))return new j({type:2,id:t.target.lij.slice(),point:o,normal:i,ray:y(e)});const p=U(t,this.view);if(s(p)){const t=p.layer,r=p.sourceLayer;let s;if(r)if(\"scene\"===r.type)s=g(p,r.objectIdField);else s=p.uid;else s=p.uid;return new j({type:0,id:`${t.uid}/${s}`,point:o,normal:i,ray:y(e)})}return null}_canUpdateFromIntersectionResult(e,t){if(r(e)||!t||e.type!==t.type)return!1;switch(e.type){case 2:{const r=e.id,s=t.id;return r[0]===s[0]&&r[1]===s[1]&&r[2]===s[2]||R(r,s)}case 0:case 4:return e.id===t.id}}updateFromIntersectionResult(e){let t;if(2===e.type&&s(e.point)){const r=C,s=_,o=x;this.view.renderCoordsHelper.toRenderCoords(e.point,s),this.view.renderCoordsHelper.worldUpAtPosition(s,o);const i=this.view.basemapTerrain.elevationBounds,n=this.view.renderCoordsHelper.getAltitude(s),c=i?Math.abs(i.max-i.min)/Math.abs(n):100,l=n>0?1:-1;p(o,o),a(o,o,l*c),m(r,s,o),f(r,s,F),t=this._getRayIntersection(F)}else t=this._getRayIntersection(e.ray);return this._canUpdateFromIntersectionResult(t,e)?t.point:null}};e([i()],S.prototype,\"view\",void 0),e([i()],S.prototype,\"intersector\",void 0),S=e([n(\"esri.views.3d.analysis.LineOfSight.LineOfSightRayIntersector\")],S);const C=d(),_=d(),x=d(),F=u();export{S as LineOfSightRayIntersector};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import{property as e}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";let s=class extends t{constructor(o){super(o),this.target=null,this.intersectedGraphic=null,this.intersectedLocation=null,this.elevationAlignedTargetLocation=null}};o([e()],s.prototype,\"target\",void 0),o([e()],s.prototype,\"intersectedGraphic\",void 0),o([e()],s.prototype,\"intersectedLocation\",void 0),o([e()],s.prototype,\"elevationAlignedTargetLocation\",void 0),o([e()],s.prototype,\"visible\",void 0),s=o([r(\"esri.views.3d.analysis.LineOfSight.LineOfSightResult\")],s);export{s as LineOfSightResult};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import t from\"../../../../core/Accessor.js\";import s from\"../../../../core/Evented.js\";import n from\"../../../../core/Handles.js\";import{handlesGroup as i,makeHandle as r}from\"../../../../core/handleUtils.js\";import{isSome as o,isNone as a,unwrapOr as l,abortMaybe as c,removeMaybe as h,none as p}from\"../../../../core/maybe.js\";import{createTask as d,ignoreAbortErrors as u}from\"../../../../core/promiseUtils.js\";import{react as g,initial as y,syncAndInitial as _,sync as m}from\"../../../../core/reactiveUtils.js\";import{property as v}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as f}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{g as A,f as T,n as b,a as C,b as O,j as E,v as j}from\"../../../../chunks/vec3.js\";import{a as w,c as I}from\"../../../../chunks/vec3f64.js\";import{projectBoundingRect as S}from\"../../../../geometry/projection.js\";import{containsPointObject as P,empty as L}from\"../../../../geometry/support/aaBoundingRect.js\";import{fromPoints as R,create as V}from\"../../../../geometry/support/ray.js\";import{LineOfSightAnalysis as H}from\"./LineOfSightAnalysis.js\";import{LineOfSightRayIntersector as D}from\"./LineOfSightRayIntersector.js\";import{LineOfSightResult as x}from\"./LineOfSightResult.js\";import{getElevationAtPoint as N}from\"../../support/ElevationProvider.js\";import{toGraphic as k}from\"../../webgl-engine/lib/intersectorUtilsConversions.js\";import{ImmediateTask as F,TaskPriority as z}from\"../../../support/Scheduler.js\";import{WatchUpdatingTracking as G}from\"../../../support/WatchUpdatingTracking.js\";import U from\"../../../../geometry/Point.js\";let M=class extends(s.EventedMixin(t)){constructor(e){super(e),this._updatingHandles=new G,this._frameTask=F,this._handles=new n,this._analysisHandles=new n}initialize(){var e;const t=null==(e=this.view.resourceController)?void 0:e.scheduler;t&&(this._frameTask=t.registerTask(z.LINE_OF_SIGHT_TOOL)),this._handles.add([this._connectObserver(),this._connectAnalyses(),this._connectTargets()]),this._intersector=new D({view:this.view})}destroy(){this._handles.destroy(),this._analysisHandles.destroy(),this._analyses.removeAll(),this._updatingHandles.destroy()}get updating(){return this._frameTask.updating||this._updatingHandles.updating}get priority(){return this._frameTask.priority}set priority(e){this._frameTask.priority=e}get _analyses(){return this.analysisViewData.analyses}get _observerEngineLocation(){return this.analysisViewData.observerEngineLocation}set _observerEngineLocation(e){this.analysisViewData.observerEngineLocation=e}get _screenPixelSize(){return this.view.state.camera.computeScreenPixelSizeAt(this._observerEngineLocation)}getLineOfSightComputationDependencies(e){const{inputPoints:t}=e;return{inputPoints:t}}computeAnalysis(e){const t=e.analysis,{inputPoints:s,computationResult:n}=t,{observerAdjusted:i,targetAdjusted:r}=s,{start:o,end:a}=n;A(o,i),A(a,r);this._canComputeAnalysis(t)?this._computeAnalysisIntersection(e):this._interpolateAnalysisIntersection(e),t.updateComputationResults(),this.emit(\"result-changed\",{target:e.analysis.target,result:t.result})}_adjustStartEndPositions(e){const t=this._screenPixelSize,s=this.view,{inputPoints:n}=e,{observer:i,observerSurfaceNormal:r,target:a,targetSurfaceNormal:l,observerAdjusted:c,targetAdjusted:h}=n,p=Z;o(r)?A(p,r):T(p,a,i);const d=t;b(p,p),C(p,p,Math.min(d,1)),O(c,i,p),o(l)?A(p,l):T(p,i,a);const u=s.state.camera.computeScreenPixelSizeAt(a);b(p,p),C(p,p,Math.min(u,1)),O(h,a,p)}_computeAnalysisIntersection({analysis:e,interpolationInfo:t}){const{view:s}=this,{sceneIntersectionHelper:n,renderCoordsHelper:i}=s;if(a(n))return;const r=this._intersector.intersector,{computationResult:l,inputPoints:c}=e,{observer:h,target:p}=c,{start:d,end:u}=l,g=R(d,u,J);n.intersectToolIntersectorRay(g,r);const y=l.intersection,_=Z,m=r.results.min.getIntersectionPoint(y);let v=!0;if(m){A(t.originalIntersection,y),A(t.originalObserver,d),A(t.originalTarget,u),i.fromRenderCoords(y,_,s.spatialReference);const e=1-E(u,p)/E(d,p);v=E(h,y)>=e*E(h,p)}const f=new U(_,s.spatialReference);{const{result:t,target:n}=e;o(t)?(t.target=n,t.intersectedGraphic=v?null:k(r.results.min,s),t.intersectedLocation=v?null:f,t.visible=!!m&&v):e.result=new x({target:n,elevationAlignedTargetLocation:e.elevationAlignedTargetLocation,intersectedGraphic:v?null:k(r.results.min,s),intersectedLocation:v?null:f,visible:!!m&&v})}l.isValid=c.isValid=!0,l.isTargetVisible=v}_interpolateAnalysisIntersection({analysis:e,interpolationInfo:t}){const{computationResult:s,inputPoints:n}=e,{start:i,end:r,intersection:o}=s,{originalIntersection:a,originalObserver:l,originalTarget:c}=t;if(A(o,a),n.isValid){const e=Z,t=E(l,a)/E(l,c);j(e,i,l),C(e,e,1-t),O(o,o,e),j(e,r,c),C(e,e,t),O(o,o,e),s.isValid=!0}else e.result=null,s.isValid=!1,s.isTargetVisible=!1}_canComputeAnalysis(e){const t=this.analysisViewData.elevationAlignedObserver,s=this.view.frustum;if(a(t)||a(e.target)||a(s))return!1;const{observerAdjusted:n,targetAdjusted:i}=e.inputPoints,r=s.intersectsPoint(n),o=s.intersectsPoint(i);return r&&o}_onObserverChange(e,t){if(a(e))return this.analysis.targets.removeAll(),void(this.analysisViewData.elevationAlignedObserver=null);this.analysisViewData.elevationAlignedObserver=this._applyElevationAlignment(e,t);const s=I();this.view.renderCoordsHelper.toRenderCoords(this.analysisViewData.elevationAlignedObserver,s),this._observerEngineLocation=s,this.priority=z.LINE_OF_SIGHT_TOOL_INTERACTIVE}_applyElevationAlignment(e,t){if(e.hasZ&&(a(t)||0===t.type))return e;const s=e.clone();return s.z=l(N(this.view.elevationProvider,s),0),s}_onObserverChangeForAnalysis(e){e.inputPoints.isValid=!1}_onObserverEngineForAnalysis(e,t,s){const{inputPoints:n}=e;if(A(n.observer,t),o(s)){const e=this._intersector.updateFromIntersectionResult(s);o(e)&&this.view.renderCoordsHelper.toRenderCoords(e,n.observer),n.observerSurfaceNormal=w(s.normal)}else n.observerSurfaceNormal=null;this._adjustStartEndPositions(e),e.updateInputPoints(),this.priority=z.LINE_OF_SIGHT_TOOL_INTERACTIVE}_onTargetLocationChange(e,t,s){const n=e.inputPoints;if(n.isValid=!1,o(t)){if(e.elevationAlignedTargetLocation=this._applyElevationAlignment(t,s),this.view.renderCoordsHelper.toRenderCoords(e.elevationAlignedTargetLocation,n.target),o(s)){const e=this._intersector.updateFromIntersectionResult(s);o(e)&&this.view.renderCoordsHelper.toRenderCoords(e,n.target),n.targetSurfaceNormal=w(s.normal)}else n.targetSurfaceNormal=null;this._adjustStartEndPositions(e),e.updateInputPoints()}this.priority=z.LINE_OF_SIGHT_TOOL_INTERACTIVE}_connectAnalysisToTarget(e){return i([g((()=>e.target.location),(t=>{B(t,e.target.intersection)||(e.target.intersection=null)}),y),g((()=>({analysis:e,targetLocation:e.target.location,targetIntersection:e.target.intersection})),(({analysis:e,targetLocation:t,targetIntersection:s})=>{o(t)&&this._onTargetLocationChange(e,t,s)}),_)])}_connectAnalysisToObserver(e){return g((()=>({analysis:e,observer:this.analysisViewData.elevationAlignedObserver})),(({analysis:e})=>{this._onObserverChangeForAnalysis(e)}),_)}_connectAnalysisToObserverEngine(e){return g((()=>({analysis:e,observer:this._observerEngineLocation,observerIntersection:this.analysis.intersection})),(({analysis:e,observer:t,observerIntersection:s})=>{this._onObserverEngineForAnalysis(e,t,s)}),_)}_connectAnalysisToCamera(e){return g((()=>({camera:this.view.state.camera,isDirty:this._isCameraDirty})),(({isDirty:t})=>{e.inputPoints.isValid&&!t||e.updateInputPoints()}),m)}_connectAnalysisToElevation(e){return this.view.elevationProvider.on(\"elevation-change\",(t=>{if(!this._canComputeAnalysis(e))return;const s=this.analysis.observer;q(t.extent,t.spatialReference,s)&&this._onObserverChange(s,this.analysis.intersection);const n=e.target;o(n)&&q(t.extent,t.spatialReference,n.location)&&e.onElevationChange()}))}_connectAnalysisForCompute(e){let t=p;const s={analysis:e,interpolationInfo:{originalIntersection:I(),originalObserver:I(),originalTarget:I()}};return i([g((()=>this.getLineOfSightComputationDependencies(e)),(()=>{t=c(t),t=d((async e=>{await u(this._frameTask.schedule((()=>this.computeAnalysis(s)),e))}))}),_),r((()=>t=c(t)))])}_connectAnalysis(e){const t=this._analysisHandles;t.has(e)||t.add([this._connectAnalysisToTarget(e),this._connectAnalysisToObserver(e),this._connectAnalysisToObserverEngine(e),this._connectAnalysisToCamera(e),this._connectAnalysisToElevation(e),this._connectAnalysisForCompute(e)],e)}_disconnectAnalysis(e){this._analysisHandles.remove(e)}_onAnalysesCollectionChange(e){e.added.forEach((e=>this._connectAnalysis(e))),e.removed.forEach((e=>this._disconnectAnalysis(e)))}_onTargetsChange(){return this._analyses.removeAll(),this.analysis.targets.forEach((e=>this._addTarget(e))),this._updatingHandles.addOnCollectionPropertyChange(this.analysis,\"targets\",(e=>this._onTargetCollectionChange(e)))}_onTargetCollectionChange(e){e.added.forEach((e=>this._addTarget(e))),e.removed.forEach((e=>this._removeTarget(e)))}_onCursorTargetChange(e,t){o(t)&&this._removeTarget(t),o(e)&&this._addTarget(e)}_addTarget(e){this._analyses.some((t=>t.target===e))||this._analyses.add(new H({target:e}))}_removeTarget(e){const t=this._analyses.find((t=>t.target===e));this._analyses.remove(t)}_connectObserver(){return i([g((()=>this.analysis.observer),(e=>{B(e,this.analysis.intersection)||(this.analysis.intersection=null)}),y),g((()=>({observer:this.analysis.observer,intersection:this.analysis.intersection})),(({observer:e,intersection:t})=>this._onObserverChange(e,t)),_)])}_connectAnalyses(){let e=null;return i([g((()=>this._analyses),(()=>{h(e),e=this._updatingHandles.addOnCollectionPropertyChange(this,\"_analyses\",(e=>this._onAnalysesCollectionChange(e))),this._analyses.forEach((e=>this._connectAnalysis(e)))}),_),r((()=>e=h(e)))])}_connectTargets(){let e=null;return i([g((()=>this.analysis.targets),(()=>{e=h(e),e=this._onTargetsChange()}),_),g((()=>this.analysisViewData.cursorTarget),((e,t)=>{this._onCursorTargetChange(e,t)})),r((()=>{e=h(e)}))])}get _isCameraDirty(){const e=this.analysisViewData.elevationAlignedObserver,{view:t}=this,{renderCoordsHelper:s}=t;if(a(e)||a(s))return!1;const n=Z;s.toRenderCoords(e,n);const i=t.state.camera.computeScreenPixelSizeAt(n);return Math.abs((i-this._screenPixelSize)/this._screenPixelSize)>W}};function q(e,t,s){return!a(s)&&(S(e,t,K,s.spatialReference),P(K,s))}function B(e,t){return a(t)||o(e)&&e.equals(t.point)}e([v({constructOnly:!0})],M.prototype,\"analysis\",void 0),e([v({constructOnly:!0})],M.prototype,\"analysisViewData\",void 0),e([v({constructOnly:!0})],M.prototype,\"view\",void 0),e([v()],M.prototype,\"updating\",null),e([v()],M.prototype,\"priority\",null),e([v()],M.prototype,\"_analyses\",null),e([v()],M.prototype,\"_observerEngineLocation\",null),e([v()],M.prototype,\"_screenPixelSize\",null),e([v({readOnly:!0})],M.prototype,\"_updatingHandles\",void 0),e([v()],M.prototype,\"_frameTask\",void 0),e([v()],M.prototype,\"_isCameraDirty\",null),M=e([f(\"esri.views.3d.analysis.LineOfSight.LineOfSightController\")],M);const W=.1,Z=I(),J=V(),K=L();export{M as LineOfSightController};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../Color.js\";import r from\"../../../../core/Accessor.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as i}from\"../../../../core/accessorSupport/decorators/subclass.js\";let s=class extends r{constructor(o){super(o),this.innerWidth=2,this.outerWidth=8,this.visibleInnerColor=new e([3,252,111,1]),this.visibleOuterColor=new e([3,252,111,.15]),this.occludedInnerColor=new e([252,3,69,1]),this.occludedOuterColor=new e([252,3,69,.1]),this.undefinedInnerColor=new e([255,255,255,1]),this.undefinedOuterColor=new e([127,127,127,.2])}};o([t({type:Number})],s.prototype,\"innerWidth\",void 0),o([t({type:Number})],s.prototype,\"outerWidth\",void 0),o([t({type:e})],s.prototype,\"visibleInnerColor\",void 0),o([t({type:e})],s.prototype,\"visibleOuterColor\",void 0),o([t({type:e})],s.prototype,\"occludedInnerColor\",void 0),o([t({type:e})],s.prototype,\"occludedOuterColor\",void 0),o([t({type:e})],s.prototype,\"undefinedInnerColor\",void 0),o([t({type:e})],s.prototype,\"undefinedOuterColor\",void 0),s=o([i(\"esri.views.3d.analysis.LineOfSight.LineOfSightConfiguration\")],s);export{s as LineOfSightConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import e from\"../../../../core/Collection.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{c as i}from\"../../../../chunks/vec3f64.js\";import{LineOfSightConfiguration as c}from\"./LineOfSightConfiguration.js\";let n=class extends r{constructor(){super(...arguments),this.analyses=new e,this.elevationAlignedObserver=null,this.configuration=new c,this.observerEngineLocation=i(),this.cursorTarget=null}};o([s()],n.prototype,\"analyses\",void 0),o([s()],n.prototype,\"elevationAlignedObserver\",void 0),o([s({type:c})],n.prototype,\"configuration\",void 0),o([s()],n.prototype,\"observerEngineLocation\",void 0),o([s()],n.prototype,\"cursorTarget\",void 0),n=o([t(\"esri.views.3d.analysis.LineOfSight.LineOfSightViewData\")],n);export{n as LineOfSightViewData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../Color.js\";import t from\"../../../../core/Accessor.js\";import n from\"../../../../core/Handles.js\";import{makeHandle as o,handlesGroup as s}from\"../../../../core/handleUtils.js\";import{applyOpacity as l}from\"../../../../core/mathUtils.js\";import{removeMaybe as r,destroyMaybe as a}from\"../../../../core/maybe.js\";import{react as c,syncAndInitial as u,sync as d}from\"../../../../core/reactiveUtils.js\";import{property as m}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as h}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{c as p}from\"../../../../chunks/mat4f64.js\";import{f as y}from\"../../../../chunks/vec3.js\";import{d as f,c as v}from\"../../../../chunks/vec3f64.js\";import{LineVisualElement as V}from\"../../interactive/visualElements/LineVisualElement.js\";let g=class extends t{constructor(i){super(i),this._handle=null,this._analysisHandles=new n}initialize(){this._handle=this._connectAnalyses()}destroy(){this._handle=r(this._handle),this._analysisHandles=a(this._analysisHandles)}get visible(){return this.analysisView.visible&&!this.analysisView.suspended}get _analyses(){return this.analysisView.analysisViewData.analyses}get _configuration(){return this.analysisView.analysisViewData.configuration}get _opacity(){return this.analysisView.fullOpacity}createLineOfSightVisualization(){const i=this._configuration,t=this._opacity,n={view:this.view,attached:!0,width:i.outerWidth,innerWidth:i.innerWidth},o=e.toUnitRGBA(i.visibleOuterColor);l(o,o,t);const s=e.toUnitRGBA(i.visibleInnerColor);l(s,s,t);const r=e.toUnitRGBA(i.occludedOuterColor);l(r,r,t);const a=e.toUnitRGBA(i.occludedInnerColor);l(a,a,t);const c=e.toUnitRGBA(i.undefinedOuterColor);l(c,c,t);const u=e.toUnitRGBA(i.undefinedInnerColor);l(u,u,t);return{visibleLineVisualElement:new V({...n,color:o,innerColor:s}),occludedLineVisualElement:new V({...n,color:r,innerColor:a}),undefinedLineVisualElement:new V({...n,color:c,innerColor:u})}}destroyLineOfSightVisualization(i){i.visibleLineVisualElement=a(i.visibleLineVisualElement),i.occludedLineVisualElement=a(i.occludedLineVisualElement),i.undefinedLineVisualElement=a(i.undefinedLineVisualElement)}updateLineOfSightVisualization(i,t){const n=this.visible,o=this._configuration,{computationResult:s,inputPoints:r}=i,{start:a,end:c,intersection:u,isValid:d,isTargetVisible:m}=s,{observer:h}=r,p=L;p[12]=h[0],p[13]=h[1],p[14]=h[2];const v=y(_,a,h),V=y(b,c,h),g=y(C,u,h),{visibleLineVisualElement:O,occludedLineVisualElement:A,undefinedLineVisualElement:E}=t;if(!n)return O.visible=!1,A.visible=!1,void(E.visible=!1);if(O.visible=!0,A.visible=!0,E.visible=!0,O.geometry=null,A.geometry=null,E.geometry=null,d)if(m){O.geometry=[[f(v),f(V)]],O.transform=p;const i=e.toUnitRGBA(o.visibleOuterColor);O.color=l(i,i,this._opacity)}else{O.geometry=[[f(v),f(g)]],O.transform=p;const i=e.toUnitRGBA(o.occludedOuterColor);O.color=l(i,i,this._opacity),A.geometry=[[f(g),f(V)]],A.transform=p}else E.geometry=[[f(v),f(V)]],E.transform=p}updateVisualizationOpacity(i,t){const n=this._configuration,o=this._opacity,s=e.toUnitRGBA(n.visibleOuterColor);l(s,s,o);const r=e.toUnitRGBA(n.visibleInnerColor);l(r,r,o);const a=e.toUnitRGBA(n.occludedOuterColor);l(a,a,o);const c=e.toUnitRGBA(n.occludedInnerColor);l(c,c,o);const u=e.toUnitRGBA(n.undefinedOuterColor);l(u,u,o);const d=e.toUnitRGBA(n.undefinedInnerColor);l(d,d,o),t.visibleLineVisualElement.color=i.computationResult.isTargetVisible?s:a,t.visibleLineVisualElement.innerColor=r,t.occludedLineVisualElement.color=a,t.occludedLineVisualElement.innerColor=c,t.undefinedLineVisualElement.color=u,t.undefinedLineVisualElement.innerColor=d}getLineOfSightVisualizationDependencies(i){const{computationResult:e}=i,{occludedOuterColor:t,visibleOuterColor:n}=this._configuration;return{computationResult:e,occludedOuterColor:t,visibleOuterColor:n,visible:this.visible}}_connectAnalysis(i){const e=this._analysisHandles;if(e.has(i))return;const t=this.createLineOfSightVisualization();e.add([c((()=>this.getLineOfSightVisualizationDependencies(i)),(()=>this.updateLineOfSightVisualization(i,t)),u),c((()=>this._opacity),(()=>this.updateVisualizationOpacity(i,t)),d),o((()=>this.destroyLineOfSightVisualization(t)))],i)}_disconnectAnalysis(i){this._analysisHandles.remove(i)}_connectAnalyses(){let i=null;return s([c((()=>this._analyses),(e=>{i=r(i),i=e.on(\"change\",(i=>this._onAnalysesCollectionChange(i))),this._onAnalysesCollectionChange({target:e,added:e.items,removed:[],moved:[]})}),u),o((()=>i=r(i)))])}_onAnalysesCollectionChange(i){i.added.forEach((i=>this._connectAnalysis(i))),i.removed.forEach((i=>this._disconnectAnalysis(i)))}};i([m({constructOnly:!0})],g.prototype,\"analysis\",void 0),i([m({constructOnly:!0})],g.prototype,\"analysisView\",void 0),i([m({constructOnly:!0})],g.prototype,\"view\",void 0),i([m({readOnly:!0})],g.prototype,\"visible\",null),i([m()],g.prototype,\"_analyses\",null),i([m()],g.prototype,\"_configuration\",null),i([m()],g.prototype,\"_opacity\",null),g=i([h(\"esri.views.3d.analysis.LineOfSight.LineOfSightVisualization\")],g);const _=v(),b=v(),C=v(),L=p();export{g as LineOfSightVisualization};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import i from\"../../../../core/Evented.js\";import{HandleOwnerMixin as r}from\"../../../../core/HandleOwner.js\";import{destroyMaybe as a,isSome as o,applySome as e,unwrapOr as l}from\"../../../../core/maybe.js\";import{property as n}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{AnalysisView3D as y}from\"../AnalysisView3D.js\";import{LineOfSightController as u}from\"./LineOfSightController.js\";import{LineOfSightViewData as h}from\"./LineOfSightViewData.js\";import{LineOfSightVisualization as c}from\"./LineOfSightVisualization.js\";let d=class extends(y(r(i.EventedMixin(t)))){constructor(s){super(s),this.type=\"line-of-sight-view\",this.suspended=!1,this.fullOpacity=1,this.analysisViewData=new h}initialize(){const s=this.view,t=this.analysis;this._analysisController=new u({analysis:t,analysisViewData:this.analysisViewData,view:s}),this._analysisVisualization=new c({analysis:t,analysisView:this,view:s}),this.handles.add([this._analysisController.on(\"result-changed\",(s=>{s.target!==this.analysisViewData.cursorTarget&&this.emit(\"result-changed\",s)}))])}destroy(){this._analysisController=a(this._analysisController),this._analysisVisualization=a(this._analysisVisualization)}get results(){return this.analysisViewData.analyses.map((s=>s.result))}get priority(){return this._analysisController.priority}set priority(s){this._analysisController.priority=s}get updating(){return o(this._analysisController)&&this._analysisController.updating}getResultForTarget(s){const t=this.analysisViewData.analyses.find((t=>t.target===s)),i=e(t,(s=>s.result));return l(i,null)}get test(){return{visualization:this._analysisVisualization,controller:this._analysisController}}};s([n()],d.prototype,\"type\",void 0),s([n()],d.prototype,\"analysis\",void 0),s([n({readOnly:!0})],d.prototype,\"results\",null),s([n()],d.prototype,\"priority\",null),s([n()],d.prototype,\"suspended\",void 0),s([n()],d.prototype,\"fullOpacity\",void 0),s([n()],d.prototype,\"analysisViewData\",void 0),s([n()],d.prototype,\"updating\",null),s([n()],d.prototype,\"_analysisController\",void 0),s([n()],d.prototype,\"_analysisVisualization\",void 0),d=s([p(\"esri.views.3d.analysis.LineOfSight.LineOfSightView3D\")],d);const m=d;export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../../core/maybe.js\";import{i as r,a as s}from\"../../../../chunks/mat4.js\";import{c as i}from\"../../../../chunks/mat4f64.js\";import{s as o}from\"../../../../chunks/vec3.js\";import{Z as n,c as l}from\"../../../../chunks/vec3f64.js\";import{g as h,c as a}from\"../../../../chunks/vec4.js\";import{f as p,c as d,a as u}from\"../../../../chunks/vec4f32.js\";import{Object3DVisualElement as f}from\"./Object3DVisualElement.js\";import{createGeometry as _}from\"../../layers/graphics/lineUtils.js\";import{RibbonLineMaterial as c}from\"../../webgl-engine/materials/RibbonLineMaterial.js\";class m extends f{constructor(e){super(e),this._renderOccluded=4,this._width=1,this._color=p(1,0,1,1),this._innerWidth=1,this._innerColor=null,this._stipplePattern=null,this._stippleOffColor=null,this._stipplePreferContinuous=!0,this._writeDepthEnabled=!0,this._falloff=0,this._polygonOffset=!1,this.applyProps(e)}setGeometryFromRenderSpacePoint(e){const t=1e3,r=[];r.push([[e[0]-t,e[1]+0,e[2]+0],[e[0]+t,e[1]+0,e[2]+0]]),r.push([[e[0]-0,e[1]-t,e[2]+0],[e[0]+0,e[1]+t,e[2]+0]]),r.push([[e[0]-0,e[1]+0,e[2]-t],[e[0]+0,e[1]+0,e[2]+t]]),this.geometry=r}setGeometryFromExtent(e){const t=this.view.spatialReference,r=l(),s=l(),i=100,n=[];o(r,e[0],e[1],i),this.view.renderCoordsHelper.toRenderCoords(r,t,s),n.push([s[0],s[1],s[2]]),o(r,e[2],e[1],i),this.view.renderCoordsHelper.toRenderCoords(r,t,s),n.push([s[0],s[1],s[2]]),o(r,e[2],e[3],i),this.view.renderCoordsHelper.toRenderCoords(r,t,s),n.push([s[0],s[1],s[2]]),o(r,e[0],e[3],i),this.view.renderCoordsHelper.toRenderCoords(r,t,s),n.push([s[0],s[1],s[2]]),o(r,e[0],e[1],i),this.view.renderCoordsHelper.toRenderCoords(r,t,s),n.push([s[0],s[1],s[2]]),o(r,e[0],e[1],i),this.view.renderCoordsHelper.toRenderCoords(r,t,s),n.push([s[0],s[1],s[2]]),this.geometry=[n]}setGeometryFromFrustum(e){const t=[];e.lines.forEach((e=>{t.push([e.origin[0],e.origin[1],e.origin[2]]),t.push([e.endpoint[0],e.endpoint[1],e.endpoint[2]])})),this.geometry=[t]}setGeometryFromBoundedPlane(e){const t=[],r=e.origin,s=e.basis1,i=e.basis2,o=.5,n=l(),h=l(),a=l(),p=l();n[0]=r[0]-s[0]*o-i[0]*o,n[1]=r[1]-s[1]*o-i[1]*o,n[2]=r[2]-s[2]*o-i[2]*o,h[0]=r[0]-s[0]*o+i[0]*o,h[1]=r[1]-s[1]*o+i[1]*o,h[2]=r[2]-s[2]*o+i[2]*o,a[0]=r[0]+s[0]*o+i[0]*o,a[1]=r[1]+s[1]*o+i[1]*o,a[2]=r[2]+s[2]*o+i[2]*o,p[0]=r[0]+s[0]*o-i[0]*o,p[1]=r[1]+s[1]*o-i[1]*o,p[2]=r[2]+s[2]*o-i[2]*o,t.push([n[0],n[1],n[2]]),t.push([h[0],h[1],h[2]]),t.push([a[0],a[1],a[2]]),t.push([p[0],p[1],p[2]]),t.push([n[0],n[1],n[2]]),this.geometry=[t]}setGeometryFromSegment(e){const t=e.endRenderSpace;r(g),s(g,g,t),this.transform=g;const{points:i}=e.createRenderGeometry(t,this.view.renderCoordsHelper);this.geometry=[i]}setGeometryFromSegments(e,t=n){r(g),s(g,g,t),this.transform=g,this.geometry=e.map((e=>e.createRenderGeometry(t,this.view.renderCoordsHelper).points))}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.recreateGeometry()}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get color(){return this._color}set color(e){h(e,this._color)||(a(this._color,e),this._updateMaterial())}get innerWidth(){return this._innerWidth}set innerWidth(e){e!==this._innerWidth&&(this._innerWidth=e,this._updateMaterial())}get innerColor(){return this._innerColor}set innerColor(r){e(r)?!t(this._innerColor)&&h(r,this._innerColor)||(this._innerColor=a(d(),r),this._updateMaterial()):e(this._innerColor)&&(this._innerColor=null,this._updateMaterial())}get stipplePattern(){return this._stipplePattern}set stipplePattern(t){const r=e(t)!==e(this._stipplePattern);this._stipplePattern=t,r?this.recreate():this._updateMaterial()}get stippleOffColor(){return this._stippleOffColor}set stippleOffColor(r){(t(r)||t(this._stippleOffColor)||!h(r,this._stippleOffColor))&&(this._stippleOffColor=e(r)?u(r):null,this._updateMaterial())}get stipplePreferContinuous(){return this._stipplePreferContinuous}set stipplePreferContinuous(e){this._stipplePreferContinuous!==e&&(this._stipplePreferContinuous=e,this._updateMaterial())}get writeDepthEnabled(){return this._writeDepthEnabled}set writeDepthEnabled(e){this._writeDepthEnabled!==e&&(this._writeDepthEnabled=e,this._updateMaterial())}get falloff(){return this._falloff}set falloff(e){e!==this._falloff&&(this._falloff=e,this._updateMaterial())}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){e!==this._polygonOffset&&(this._polygonOffset=e,this._updateMaterial())}createExternalResources(){this._material=new c(this.materialParameters)}destroyExternalResources(){this._material=null}createGeometries(e){const t=this._createLineGeometries();if(0!==t.length)for(let r=0;r<t.length;++r){const s=_(t[r]);e.addGeometry(s,this._material)}}forEachExternalMaterial(e){e(this._material)}get materialParameters(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,stipplePreferContinuous:this._stipplePreferContinuous,isClosed:!1,falloff:this._falloff,innerColor:this._innerColor,innerWidth:this._innerWidth,polygonOffset:this._polygonOffset,renderOccluded:this._renderOccluded,writeDepth:this._writeDepthEnabled}}_updateMaterial(){this.attached&&this._material.setParameters(this.materialParameters)}_createLineGeometries(){const e=this.geometry;if(t(e)||0===e.length)return[];const r=[];return e.forEach((e=>{const t=e.length,s=new Float64Array(3*t);e.forEach(((e,t)=>{s[3*t+0]=e[0],s[3*t+1]=e[1],s[3*t+2]=e[2]}));const i={overlayInfo:null,attributeData:{position:s},removeDuplicateStartEnd:0};r.push(i)})),r}}const g=i();export{m as LineVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nclass t{constructor(t){this._attached=!1,this._resourcesCreated=!1,this._visible=!0,this.view=t,this.view.watch(\"ready\",(t=>{this._resourcesCreated&&(t?this._createResources():this._destroyResources())}))}applyProps(t){let e=!1;for(const s in t)s in this?\"attached\"===s?e=t[s]:this[s]=t[s]:console.error(\"Cannot set unknown property\",s);this.attached=e}destroy(){this.attached=!1}get attached(){return this._attached}set attached(t){t!==this._attached&&this.view._stage&&(this._attached=t,this._attached&&!this._resourcesCreated?this._createResources():!this._attached&&this._resourcesCreated&&this._destroyResources())}get visible(){return this._visible}set visible(t){t!==this._visible&&(this._visible=t,this.attached&&this.updateVisibility(t))}_createResources(){this.createResources(),this._resourcesCreated=!0,this.visible||this.updateVisibility(!1)}_destroyResources(){this.destroyResources(),this._resourcesCreated=!1}}export{t as VisualElement};\n"],"sourceRoot":""}