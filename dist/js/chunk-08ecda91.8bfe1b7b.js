(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08ecda91"],{"00c0":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var r=i("8c71"),n=i("0326"),s=i("7c4b");class a extends s["a"]{constructor(){super(...arguments),this._childrenSet=new Set,this._needsSort=!1,this.children=[],this._effectView=null}get blendMode(){return this._blendMode}set blendMode(e){this._blendMode=e,this.requestRender()}get clips(){return this._clips}set clips(e){this._clips=e,this.children.forEach(t=>t.clips=e)}get computedEffects(){var e,t;return null!=(e=null==(t=this._effectView)?void 0:t.effects)?e:null}get effect(){var e,t;return null!=(e=null==(t=this._effectView)?void 0:t.effect)?e:""}set effect(e){(this._effectView||e)&&(this._effectView||(this._effectView=new n["a"]),this._effectView.effect=e,this.requestRender())}updateTransitionProperties(e,t){super.updateTransitionProperties(e,t),this._effectView&&(this._effectView.transitionStep(e,t),this._effectView.transitioning&&this.requestRender())}doRender(e){const t=this.createRenderParams(e);this.renderChildren(t)}addChild(e){return this.addChildAt(e,this.children.length)}addChildAt(e,t=this.children.length){if(!e)return e;if(this.contains(e))return e;this._needsSort=!0;const i=e.parent;return i&&i!==this&&i.removeChild(e),t>=this.children.length?this.children.push(e):this.children.splice(t,0,e),this._childrenSet.add(e),e.parent=this,e.stage=this.stage,this!==this.stage&&(e.clips=this.clips),this.requestRender(),e}contains(e){return this._childrenSet.has(e)}removeAllChildren(){this._childrenSet.clear(),this._needsSort=!0;for(const e of this.children)this!==this.stage&&(e.clips=null),e.stage=null,e.parent=null;this.children.length=0}removeChild(e){return this.contains(e)?this.removeChildAt(this.children.indexOf(e)):e}removeChildAt(e){if(e<0||e>=this.children.length)return null;this._needsSort=!0;const t=this.children.splice(e,1)[0];return this._childrenSet.delete(t),this!==this.stage&&(t.clips=null),t.stage=null,t.parent=null,t}sortChildren(e){this._needsSort&&(this.children.sort(e),this._needsSort=!1)}_createTransforms(){return{dvs:Object(r["b"])()}}onAttach(){super.onAttach();const e=this.stage;for(const t of this.children)t.stage=e}onDetach(){super.onDetach();for(const e of this.children)e.stage=null}renderChildren(e){for(const t of this.children)t.beforeRender(e);for(const t of this.children)t.processRender(e);for(const t of this.children)t.afterRender(e)}createRenderParams(e){return{...e,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:e.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition}}}},"164ae":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var r=i("a4ee"),n=(i("e92d"),i("cea0"),i("b50f"),i("c120"),i("2dd4"),i("d386")),s=i("e80c");const a=e=>{let t=class extends e{attach(){this.view.timeline.record(this.layer.title+" (BitmapTileLayer) Attach"),this._bitmapView=new s["a"](this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){var e;this.container.removeChild(this._bitmapView),null==(e=this._bitmapView)||e.removeAllChildren()}};return t=Object(r["a"])([Object(n["a"])("esri.views.2d.layers.BitmapTileLayerView2D")],t),t}},"18c6":function(e,t,i){"use strict";i.d(t,"a",(function(){return M})),i.d(t,"b",(function(){return U})),i.d(t,"c",(function(){return C})),i.d(t,"d",(function(){return j})),i.d(t,"e",(function(){return x})),i.d(t,"f",(function(){return B})),i.d(t,"g",(function(){return E})),i.d(t,"h",(function(){return I}));var r=i("ce50"),n=i("c84e"),s=i("9b77");function a(e,t){const i=n["e"].SIZE_FIELD_STOPS|n["e"].SIZE_MINMAX_VALUE|n["e"].SIZE_SCALE_STOPS|n["e"].SIZE_UNIT_VALUE,r=(e&(n["f"].FIELD_TARGETS_OUTLINE|n["f"].MINMAX_TARGETS_OUTLINE|n["f"].SCALE_TARGETS_OUTLINE|n["f"].UNIT_TARGETS_OUTLINE))>>>4;return t.isOutline||t.isOutlinedFill?i&r:i&~r}const o=0,c=8,u=7,h=8,d=11,l=11,f=12,p=13,v=14,g=15,b=15,m=16,y=17,S=18,_=19,O=20,w=21,T=22;function E(e,t){switch(e){case n["d"].FILL:return M.from(t);case n["d"].LINE:return C.from(t);case n["d"].MARKER:return j.from(t);case n["d"].TEXT:return B.from(t);case n["d"].LABEL:return U.from(t);default:throw new Error("Unable to createMaterialKey for unknown geometryType "+e)}}function I(e){switch(x.load(e).geometryType){case n["d"].MARKER:return new j(e);case n["d"].FILL:return new M(e);case n["d"].LINE:return new C(e);case n["d"].TEXT:return new B(e);case n["d"].LABEL:return new U(e)}}class x{constructor(e){this._data=0,this._data=e}static load(e){const t=this.shared;return t.data=e,t}set data(e){this._data=e}get data(){return this._data}get geometryType(){return this.bits(h,d)}set geometryType(e){this.setBits(e,h,d)}get mapAligned(){return!!this.bit(O)}set mapAligned(e){this.setBit(O,e)}get sdf(){return!!this.bit(l)}set sdf(e){this.setBit(l,e)}get pattern(){return!!this.bit(f)}set pattern(e){this.setBit(f,e)}get textureBinding(){return this.bits(o,c)}set textureBinding(e){this.setBits(e,o,c)}get geometryTypeString(){switch(this.geometryType){case n["d"].FILL:return"fill";case n["d"].MARKER:return"marker";case n["d"].LINE:return"line";case n["d"].TEXT:return"text";case n["d"].LABEL:return"label";default:throw new r["a"]("Unable to handle unknown geometryType: "+this.geometryType)}}setBit(e,t){const i=1<<e;t?this._data|=i:this._data&=~i}bit(e){return(this._data&1<<e)>>e}setBits(e,t,i){for(let r=t,n=0;r<i;r++,n++)this.setBit(r,0!=(e&1<<n))}bits(e,t){let i=0;for(let r=e,n=0;r<t;r++,n++)i|=this.bit(r)<<n;return i}hasVV(){return!1}setVV(e,t){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}}getVariationHash(){return this._data&~(u&this.textureBinding)}}x.shared=new x(0);const A=e=>class extends e{get vvSizeMinMaxValue(){return 0!==this.bit(m)}set vvSizeMinMaxValue(e){this.setBit(m,e)}get vvSizeScaleStops(){return 0!==this.bit(y)}set vvSizeScaleStops(e){this.setBit(y,e)}get vvSizeFieldStops(){return 0!==this.bit(S)}set vvSizeFieldStops(e){this.setBit(S,e)}get vvSizeUnitValue(){return 0!==this.bit(_)}set vvSizeUnitValue(e){this.setBit(_,e)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(e,t){super.setVV(e,t);const i=a(e,t)&e;this.vvSizeMinMaxValue=!!(i&n["e"].SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(i&n["e"].SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(i&n["e"].SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(i&n["e"].SIZE_SCALE_STOPS)}},R=e=>class extends e{get vvRotation(){return 0!==this.bit(g)}set vvRotation(e){this.setBit(g,e)}hasVV(){return super.hasVV()||this.vvRotation}setVV(e,t){super.setVV(e,t),this.vvRotation=!t.isOutline&&!!(e&n["e"].ROTATION)}},L=e=>class extends e{get vvColor(){return 0!==this.bit(p)}set vvColor(e){this.setBit(p,e)}hasVV(){return super.hasVV()||this.vvColor}setVV(e,t){super.setVV(e,t),this.vvColor=!t.isOutline&&!!(e&n["e"].COLOR)}},V=e=>class extends e{get vvOpacity(){return 0!==this.bit(v)}set vvOpacity(e){this.setBit(v,e)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(e,t){super.setVV(e,t),this.vvOpacity=!t.isOutline&&!!(e&n["e"].OPACITY)}};class M extends(L(V(A(x)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=n["d"].FILL,t.dotDensity="dot-density"===e.stride.fill,t.simple="simple"===e.stride.fill,t.outlinedFill=e.isOutlinedFill,t.dotDensity||t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),dotDensity:this.dotDensity,outlinedFill:this.outlinedFill,simple:this.simple,vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}get dotDensity(){return!!this.bit(b)}set dotDensity(e){this.setBit(b,e)}get simple(){return!!this.bit(T)}set simple(e){this.setBit(T,e)}get outlinedFill(){return!!this.bit(w)}set outlinedFill(e){this.setBit(w,e)}}M.shared=new M(0);class j extends(L(V(R(A(x))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=n["d"].MARKER,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}j.shared=new j(0);class C extends(L(V(A(x)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=n["d"].LINE,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}C.shared=new C(0);class B extends(L(V(R(A(x))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=n["d"].TEXT,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}B.shared=new B(0);class U extends(A(x)){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=n["d"].LABEL,t.setVV(e.vvFlags,e),t.mapAligned=Object(s["a"])(e.placement),t.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}U.shared=new U(0)},"566d":function(e,t,i){"use strict";i.d(t,"a",(function(){return w}));var r,n=i("a4ee"),s=i("2c4f"),a=i("7d7d"),o=i("3795"),c=i("59b2"),u=(i("b50f"),i("c120"),i("cea0"),i("d386")),h=i("00c0"),d=i("66e4"),l=i("2f51"),f=(i("e06a"),i("3760")),p=i("a9ab"),v=i("3af1"),g=i("1219");const b={base:f["a"],key:"type",typeMap:{extent:v["a"],polygon:g["a"]}};let m=r=class extends d["a"]{constructor(){super(...arguments),this.type="geometry",this.geometry=null}get version(){return(this._get("version")||0)+1}clone(){return new r({geometry:this.geometry.clone()})}};Object(n["a"])([Object(c["b"])({types:b,json:{read:p["a"],write:!0}})],m.prototype,"geometry",void 0),Object(n["a"])([Object(c["b"])({readOnly:!0})],m.prototype,"version",null),m=r=Object(n["a"])([Object(u["a"])("esri.views.layers.support.Geometry")],m);const y=m;let S=class extends d["a"]{constructor(){super(...arguments),this.type="path",this.path=[]}get version(){return(this._get("version")||0)+1}};Object(n["a"])([Object(c["b"])({type:[[[Number]]],json:{write:!0}})],S.prototype,"path",void 0),Object(n["a"])([Object(c["b"])({readOnly:!0})],S.prototype,"version",null),S=Object(n["a"])([Object(u["a"])("esri.views.layers.support.Path")],S);const _=S,O=s["a"].ofType({key:"type",base:d["a"],typeMap:{rect:l["a"],path:_,geometry:y}}),w=e=>{let t=class extends e{constructor(){super(...arguments),this.clips=new O,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var e;this.container||(this.container=new h["a"]),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([Object(o["a"])(this,"suspended",e=>{this.container&&(this.container.visible=!e),this.view&&!e&&this.updateRequested&&this.view.requestUpdate()},!0),Object(o["a"])(this,["layer.opacity","container"],()=>{var e,t;this.container&&(this.container.opacity=null!=(e=null==(t=this.layer)?void 0:t.opacity)?e:1)},!0),Object(o["a"])(this,["layer.blendMode"],e=>{this.container&&(this.container.blendMode=e)},!0),Object(o["a"])(this,["layer.effect"],e=>{this.container&&(this.container.effect=e)},!0),this.clips.on("change",()=>{this.container.clips=this.clips,this.notifyChange("clips")})]),null!=(e=this.view)&&e.whenLayerView?this.view.whenLayerView(this.layer).then(e=>{e!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{}):this.when().then(()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{})}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove("initialize"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!(!this.updatingHandles||!this.updatingHandles.updating)}isVisibleAtScale(e){let t=!0;const i=this.layer,r=i.minScale,n=i.maxScale;if(null!=r&&null!=n){let i=!r,s=!n;!i&&e<=r&&(i=!0),!s&&e>=n&&(s=!0),t=i&&s}return t}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1}hitTest(e,t){return Promise.resolve(null)}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return Object(n["a"])([Object(c["b"])({type:O,set(e){const t=Object(a["b"])(e,this._get("clips"),O);this._set("clips",t)}})],t.prototype,"clips",void 0),Object(n["a"])([Object(c["b"])()],t.prototype,"moving",void 0),Object(n["a"])([Object(c["b"])()],t.prototype,"attached",void 0),Object(n["a"])([Object(c["b"])()],t.prototype,"container",void 0),Object(n["a"])([Object(c["b"])()],t.prototype,"suspended",void 0),Object(n["a"])([Object(c["b"])({readOnly:!0})],t.prototype,"updateParameters",void 0),Object(n["a"])([Object(c["b"])()],t.prototype,"updateRequested",void 0),Object(n["a"])([Object(c["b"])()],t.prototype,"updating",null),Object(n["a"])([Object(c["b"])()],t.prototype,"view",void 0),t=Object(n["a"])([Object(u["a"])("esri.views.2d.layers.LayerView2D")],t),t}},6722:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var r=i("c120"),n=i("c84e"),s=i("9a02"),a=i("6f75"),o=i("ec5e");const c=(e,t)=>e.key.level-t.key.level!=0?e.key.level-t.key.level:e.key.row-t.key.row!=0?e.key.row-t.key.row:e.key.col-t.key.col;class u extends s["a"]{constructor(e){super(),this._tileInfoView=e}get requiresDedicatedFBO(){return!1}renderChildren(e){this.sortChildren(c),this.setStencilReference(),super.renderChildren(e)}createRenderParams(e){const{state:t}=e,i=super.createRenderParams(e);return i.requiredLevel=this._tileInfoView.getClosestInfoForScale(t.scale).level,i.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(t.scale),i}prepareRenderPasses(e){const t=super.prepareRenderPasses(e);return t.push(e.registerRenderPass({name:"stencil",brushes:[o["a"]],drawPhase:n["c"].DEBUG|n["c"].MAP|n["c"].HIGHLIGHT,target:()=>this.getStencilTarget()})),Object(r["a"])("esri-tiles-debug")&&t.push(e.registerRenderPass({name:"tileInfo",brushes:[a["a"]],drawPhase:n["c"].DEBUG,target:()=>this.children})),t}getStencilTarget(){return this.children}updateTransforms(e){for(const t of this.children){const i=this._tileInfoView.getTileResolution(t.key);t.setTransform(e,i)}}setStencilReference(){let e=1;for(const t of this.children)t.stencilRef=e++}}},"6c7a":function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var r=i("a4ee"),n=i("e92d"),s=i("f4cc"),a=i("3795"),o=i("59b2"),c=(i("b50f"),i("c120"),i("cea0"),i("d386"));const u=e=>{let t=class extends e{initialize(){this.handles.add(Object(a["b"])(this,"layer","refresh",e=>{this.doRefresh(e.dataChanged).catch(e=>{Object(s["m"])(e)||n["a"].getLogger(this.declaredClass).error(e)})}),"RefreshableLayerView")}};return Object(r["a"])([Object(o["b"])()],t.prototype,"layer",void 0),t=Object(r["a"])([Object(c["a"])("esri.layers.mixins.RefreshableLayerView")],t),t}},"894c":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var r=i("b2b2");class n{constructor(e,t,i){this.pixelBlock=e,this.extent=t,this.originalPixelBlock=i}get width(){return Object(r["l"])(this.pixelBlock)?this.pixelBlock.width:0}get height(){return Object(r["l"])(this.pixelBlock)?this.pixelBlock.height:0}render(e){const t=this.pixelBlock;if(Object(r["k"])(t))return;const i=this.filter({pixelBlock:t});if(Object(r["k"])(i.pixelBlock))return;const n=i.pixelBlock.getAsRGBA(),s=e.createImageData(i.pixelBlock.width,i.pixelBlock.height);s.data.set(n),e.putImageData(s,0,0)}getRenderedRasterPixels(){const e=this.filter({pixelBlock:this.pixelBlock});return Object(r["k"])(e.pixelBlock)?null:{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)}}}},"8c81":function(e,t,i){"use strict";i.d(t,"a",(function(){return O})),i.d(t,"b",(function(){return w})),i.d(t,"c",(function(){return h})),i.d(t,"d",(function(){return z})),i.d(t,"e",(function(){return k})),i.d(t,"f",(function(){return F})),i.d(t,"g",(function(){return P})),i.d(t,"h",(function(){return D})),i.d(t,"i",(function(){return N})),i.d(t,"j",(function(){return H})),i.d(t,"k",(function(){return C})),i.d(t,"l",(function(){return a})),i.d(t,"m",(function(){return x})),i.d(t,"n",(function(){return I})),i.d(t,"o",(function(){return c})),i.d(t,"p",(function(){return E})),i.d(t,"q",(function(){return R})),i.d(t,"r",(function(){return o})),i.d(t,"s",(function(){return T})),i.d(t,"t",(function(){return U})),i.d(t,"u",(function(){return r})),i.d(t,"v",(function(){return B})),i.d(t,"w",(function(){return n})),i.d(t,"x",(function(){return j})),i.d(t,"y",(function(){return p})),i.d(t,"z",(function(){return v})),i.d(t,"A",(function(){return g})),i.d(t,"B",(function(){return b})),i.d(t,"C",(function(){return f})),i.d(t,"D",(function(){return l})),i.d(t,"E",(function(){return m})),i.d(t,"F",(function(){return y})),i.d(t,"G",(function(){return S})),i.d(t,"H",(function(){return _})),i.d(t,"I",(function(){return d})),i.d(t,"J",(function(){return u})),i.d(t,"K",(function(){return A})),i.d(t,"L",(function(){return s})),i.d(t,"M",(function(){return M})),i.d(t,"N",(function(){return V})),i.d(t,"O",(function(){return L}));const r=1e-30,n=4294967295,s=512,a=8,o=29,c=24,u=8,h={metrics:{width:15,height:17,left:0,top:-7,advance:14}},d=0,l=0,f=0,p=1,v=2,g=3,b=4,m=5,y=6,S=5,_=6,O=1,w=2,T=2,E=1,I=2,x=4,A=1.05,R=6,L=5,V=6,M=1.15,j=2,C=8,B=500,U=10,z=2,P=0,F=1,D=4,N=8,k=4,H=1},"9a02":function(e,t,i){"use strict";i.d(t,"a",(function(){return x}));i("c120");var r=i("b2b2"),n=i("8c71"),s=i("3b1a"),a=i("00c0"),o=i("ce50"),c=i("e92d"),u=i("7c4b"),h=i("9812"),d=i("3349"),l=i("02f1"),f=i("6655"),p=i("8152"),v=i("d114"),g=i("7ce4");const b=c["a"].getLogger("esri.views.2d.engine.webgl.Mesh2D"),m=e=>{switch(e.BYTES_PER_ELEMENT){case 1:return 5121;case 2:return 5123;case 4:return 5125;default:throw new o["a"]("Cannot get DataType of array")}},y=(e,t,i,r)=>{let n=0;for(let s=1;s<i;s++){const i=e[2*(t+s-1)],r=e[2*(t+s-1)+1];n+=(e[2*(t+s)]-i)*(e[2*(t+s)+1]+r)}return r?n>0:n<0},S=({coords:e,lengths:t},i)=>{const r=[];for(let n=0,s=0;n<t.length;s+=t[n],n+=1){const a=s,o=[];for(;n<t.length-1&&y(e,s+t[n],t[n+1],i);n+=1,s+=t[n])o.push(s+t[n]-a);const c=e.slice(2*a,2*(s+t[n])),u=Object(h["a"])(c,o,2);for(const e of u)r.push(e+a)}return r};class _{constructor(e,t,i,r=!1){this._cache={},this.vertices=e,this.indices=t,this.primitiveType=i,this.isMapSpace=r}static fromRect({x:e,y:t,width:i,height:r}){const n=e,s=t,a=n+i,o=s+r;return _.fromScreenExtent({xmin:n,ymin:s,xmax:a,ymax:o})}static fromPath(e){const t=Object(f["f"])(new p["a"],e.path,!1,!1),i=t.coords,r=new Uint32Array(S(t,!0)),n=new Uint32Array(i.length/2);for(let s=0;s<n.length;s++)n[s]=Object(v["a"])(Math.floor(i[2*s]),Math.floor(i[2*s+1]));return new _({geometry:n},r,4)}static fromGeometry(e,t){const i=t.geometry.type;switch(i){case"polygon":return _.fromPolygon(e,t.geometry);case"extent":return _.fromMapExtent(e,t.geometry);default:return b.error(new o["a"]("mapview-bad-type","Unable to create a mesh from type "+i,t)),_.fromRect({x:0,y:0,width:1,height:1})}}static fromPolygon(e,t){const i=Object(f["g"])(new p["a"],t,!1,!1),r=i.coords,n=new Uint32Array(S(i,!1)),s=new Uint32Array(r.length/2),a=Object(l["b"])(),o=Object(l["b"])();for(let c=0;c<s.length;c++)Object(d["s"])(a,r[2*c],r[2*c+1]),e.toScreen(o,a),s[c]=Object(v["a"])(Math.floor(o[0]),Math.floor(o[1]));return new _({geometry:s},n,4,!0)}static fromScreenExtent({xmin:e,xmax:t,ymin:i,ymax:r}){const n={geometry:new Uint32Array([Object(v["a"])(e,i),Object(v["a"])(t,i),Object(v["a"])(e,r),Object(v["a"])(e,r),Object(v["a"])(t,i),Object(v["a"])(t,r)])},s=new Uint32Array([0,1,2,3,4,5]);return new _(n,s,4)}static fromMapExtent(e,t){const[i,r]=e.toScreen([0,0],[t.xmin,t.ymin]),[n,s]=e.toScreen([0,0],[t.xmax,t.ymax]),a={geometry:new Uint32Array([Object(v["a"])(i,r),Object(v["a"])(n,r),Object(v["a"])(i,s),Object(v["a"])(i,s),Object(v["a"])(n,r),Object(v["a"])(n,s)])},o=new Uint32Array([0,1,2,3,4,5]);return new _(a,o,4)}destroy(){Object(r["l"])(this._cache.indexBuffer)&&this._cache.indexBuffer.dispose();for(const e in this._cache.vertexBuffers)Object(r["l"])(this._cache.vertexBuffers[e])&&this._cache.vertexBuffers[e].dispose()}get elementType(){return m(this.indices)}getIndexBuffer(e,t=35044){return this._cache.indexBuffer||(this._cache.indexBuffer=g["a"].createIndex(e,t,this.indices)),this._cache.indexBuffer}getVertexBuffers(e,t=35044){return this._cache.vertexBuffers||(this._cache.vertexBuffers=Object.keys(this.vertices).reduce((i,r)=>({...i,[r]:g["a"].createVertex(e,t,this.vertices[r])}),{})),this._cache.vertexBuffers}}var O=i("0fa6");const w=c["a"].getLogger("esri.views.2d.engine.webgl.ClippingInfo"),T=e=>parseFloat(e)/100;class E extends u["a"]{constructor(e,t){super(),this._clip=t,this._cache={},this.stage=e,this._handle=t.watch("version",()=>this._invalidate()),this.ready()}static fromClipArea(e,t){return new E(e,t)}_destroyGL(){Object(r["l"])(this._cache.mesh)&&(this._cache.mesh.destroy(),this._cache.mesh=null),Object(r["l"])(this._cache.vao)&&(this._cache.vao.dispose(),this._cache.vao=null)}destroy(){this._destroyGL(),this._handle.remove()}getVAO(e,t,i,n){const[s,a]=t.size;if("geometry"!==this._clip.type&&this._lastWidth===s&&this._lastHeight===a||(this._lastWidth=s,this._lastHeight=a,this._destroyGL()),Object(r["k"])(this._cache.vao)){const r=this._createMesh(t,this._clip),s=r.getIndexBuffer(e),a=r.getVertexBuffers(e);this._cache.mesh=r,this._cache.vao=new O["a"](e,i,n,a,s)}return this._cache.vao}_createTransforms(){return{dvs:Object(n["b"])()}}_invalidate(){this._destroyGL(),this.requestRender()}_createScreenRect(e,t){const[i,r]=e.size,n="string"==typeof t.left?T(t.left)*i:t.left,s="string"==typeof t.right?T(t.right)*i:t.right,a="string"==typeof t.top?T(t.top)*r:t.top,o="string"==typeof t.bottom?T(t.bottom)*r:t.bottom,c=n,u=a;return{x:c,y:u,width:Math.max(i-s-c,0),height:Math.max(r-o-u,0)}}_createMesh(e,t){switch(t.type){case"rect":return _.fromRect(this._createScreenRect(e,t));case"path":return _.fromPath(t);case"geometry":return _.fromGeometry(e,t);default:return w.error(new o["a"]("mapview-bad-type","Unable to create ClippingInfo mesh from clip of type: ${clip.type}")),_.fromRect({x:0,y:0,width:1,height:1})}}}var I=i("c84e");class x extends a["a"]{constructor(){super(...arguments),this.name=this.constructor.name}set clips(e){this._clips=e,this.children.forEach(t=>t.clips=e),this._updateClippingInfo()}_createTransforms(){return{dvs:Object(n["b"])()}}doRender(e){const t=this.createRenderParams(e),{painter:i,globalOpacity:r,profiler:n,drawPhase:s}=t,a=s===I["c"].LABEL||s===I["c"].HIGHLIGHT?1:r*this.computedOpacity;n.recordContainerStart(this.name),i.beforeRenderLayer(t,this._clippingInfos?255:0,a),this.updateTransforms(e.state),this.renderChildren(t),i.compositeLayer(t,a),n.recordContainerEnd()}renderChildren(e){Object(r["k"])(this._renderPasses)&&(this._renderPasses=this.prepareRenderPasses(e.painter));for(const i of this.children)i.beforeRender(e);for(const i of this._renderPasses)try{i.render(e)}catch(t){}for(const i of this.children)i.afterRender(e)}createRenderParams(e){return e.requireFBO=this.requiresDedicatedFBO,e}prepareRenderPasses(e){return[e.registerRenderPass({name:"clip",brushes:[s["a"].clip],target:()=>this._clippingInfos,drawPhase:I["c"].MAP|I["c"].LABEL|I["c"].LABEL_ALPHA|I["c"].DEBUG|I["c"].HIGHLIGHT})]}updateTransforms(e){for(const t of this.children)t.setTransform(e)}onAttach(){super.onAttach(),this._updateClippingInfo()}onDetach(){super.onDetach(),this._updateClippingInfo()}_updateClippingInfo(){if(Object(r["l"])(this._clippingInfos)&&(this._clippingInfos.forEach(e=>e.destroy()),this._clippingInfos=null),!this.stage)return;const e=this._clips;Object(r["l"])(e)&&e.length&&(this._clippingInfos=e.items.map(e=>E.fromClipArea(this.stage,e))),this.requestRender()}}},"9b77":function(e,t,i){"use strict";function r(e){switch(e){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}i.d(t,"a",(function(){return r}))},a9a2:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return o})),i.d(t,"d",(function(){return c}));var r=i("d114");function n(e,t){return Array.isArray(t)?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]):(e[0]=t.r,e[1]=t.g,e[2]=t.b,e[3]=t.a),e}function s(e,t=0,i=!1){const r=e[t+3];return e[t+0]*=r,e[t+1]*=r,e[t+2]*=r,i||(e[t+3]*=255),e}function a(e){return s(n([],e))}function o(e){if(!e)return 0;const{r:t,g:i,b:n,a:s}=e;return Object(r["b"])(t*s,i*s,n*s,255*s)}function c(e){if(!e)return 0;const[t,i,n,s]=e;return Object(r["b"])(t*(s/255),i*(s/255),n*(s/255),s)}},c73a:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var r=i("b2b2"),n=i("1c92"),s=i("8c71"),a=i("738e"),o=i("7c4b"),c=i("894c"),u=i("a1ff");function h(e){return e&&"render"in e}function d(e){return e&&!("render"in e)}function l(e){const t=document.createElement("canvas");return t.width=e.width,t.height=e.height,e.render(t.getContext("2d")),t}function f(e,t,i){const r={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071};return t&&i&&(r.width=t,r.height=i),new u["a"](e,r)}class p extends o["a"]{constructor(e=null,t,i=!0){super(),this.requestRenderOnSourceChangedEnabled=i,this._textureInvalidated=!0,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.blendFunction=t,this.source=e,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null)}get isSourceScaled(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}get height(){return void 0!==this._height?this._height:this.sourceHeight}set height(e){this._height=e}get source(){return this._source}set source(e){this._source=e,this.invalidateTexture()}get sourceHeight(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}get sourceWidth(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}get width(){return void 0!==this._width?this._width:this.sourceWidth}set width(e){this._width=e}beforeRender(e){super.beforeRender(e),this.updateTexture(e.context)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}_createTransforms(){return{dvs:Object(s["b"])()}}setTransform(e){const t=Object(n["b"])(this.transforms.dvs),[i,r]=e.toScreenNoRotation([0,0],[this.x,this.y]),s=this.resolution/this.pixelRatio/e.resolution,o=s*this.width,c=s*this.height,u=Math.PI*this.rotation/180;Object(n["c"])(t,t,Object(a["b"])(i,r)),Object(n["c"])(t,t,Object(a["b"])(o/2,c/2)),Object(n["m"])(t,t,-u),Object(n["c"])(t,t,Object(a["b"])(-o/2,-c/2)),Object(n["j"])(t,t,Object(a["b"])(o,c)),Object(n["k"])(this.transforms.dvs,e.displayViewMat3,t)}setSamplingProfile(e){this._texture&&(e.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(e.samplingMode))}bind(e,t){this._texture&&e.bindTexture(this._texture,t)}updateTexture(e){var t;if(!this.stage)return null==(t=this._texture)||t.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this.source?this._texture=f(e,this.sourceWidth,this.sourceHeight):this._texture=f(e));const i=this.source;if(i){if(this._texture.resize(this.sourceWidth,this.sourceHeight),h(i))if(i instanceof c["a"]){const e=i.getRenderedRasterPixels();this._texture.setData(Object(r["l"])(e)?e.renderedRasterPixels:null)}else this._texture.setData(l(i));else d(i)&&this._texture.setData(i);this.ready()}else this._texture.setData(null)}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}}},c84e:function(e,t,i){"use strict";var r,n,s,a,o,c,u;i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return s})),i.d(t,"d",(function(){return r})),i.d(t,"e",(function(){return o})),i.d(t,"f",(function(){return c})),function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT",e[e.LABEL=4]="LABEL"}(r||(r={})),function(e){e[e.SUCCEEDED=0]="SUCCEEDED",e[e.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"}(n||(n={})),function(e){e[e.NONE=0]="NONE",e[e.MAP=1]="MAP",e[e.LABEL=2]="LABEL",e[e.LABEL_ALPHA=4]="LABEL_ALPHA",e[e.HITTEST=8]="HITTEST",e[e.HIGHLIGHT=16]="HIGHLIGHT",e[e.CLIP=32]="CLIP",e[e.DEBUG=64]="DEBUG",e[e.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(s||(s={})),function(e){e[e.SIZE=0]="SIZE",e[e.COLOR=1]="COLOR",e[e.OPACITY=2]="OPACITY",e[e.ROTATION=3]="ROTATION"}(a||(a={})),function(e){e[e.NONE=0]="NONE",e[e.OPACITY=1]="OPACITY",e[e.COLOR=2]="COLOR",e[e.ROTATION=4]="ROTATION",e[e.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE",e[e.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS",e[e.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS",e[e.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"}(o||(o={})),function(e){e[e.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",e[e.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",e[e.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",e[e.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(c||(c={})),function(e){e[e.SPRITE=0]="SPRITE",e[e.GLYPH=1]="GLYPH"}(u||(u={}))},c8dd:function(e,t,i){"use strict";i.d(t,"a",(function(){return N})),i.d(t,"b",(function(){return j})),i.d(t,"c",(function(){return C})),i.d(t,"d",(function(){return ce})),i.d(t,"e",(function(){return D})),i.d(t,"f",(function(){return k})),i.d(t,"g",(function(){return W})),i.d(t,"h",(function(){return $})),i.d(t,"i",(function(){return z})),i.d(t,"j",(function(){return P})),i.d(t,"k",(function(){return oe})),i.d(t,"l",(function(){return q})),i.d(t,"m",(function(){return G})),i.d(t,"n",(function(){return E})),i.d(t,"o",(function(){return ee})),i.d(t,"p",(function(){return F})),i.d(t,"q",(function(){return re})),i.d(t,"r",(function(){return B})),i.d(t,"s",(function(){return te})),i.d(t,"t",(function(){return Q})),i.d(t,"u",(function(){return U})),i.d(t,"v",(function(){return ie})),i.d(t,"w",(function(){return se})),i.d(t,"x",(function(){return J})),i.d(t,"y",(function(){return ne})),i.d(t,"z",(function(){return ae})),i.d(t,"A",(function(){return M}));var r=i("ce50"),n=i("e92d"),s=(i("38a4"),i("a915"),i("a9a2"),i("c84e")),a=i("ecd7");class o{constructor(){this.color=[0,0,0,0],this.haloColor=[0,0,0,0],this.haloSize=0,this.size=12,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}acquire(e,t,i,r,n,s,a,o,c){this.color=e,this.haloColor=t,this.haloSize=i,this.size=r,this.angle=n,this.offsetX=s,this.offsetY=a,this.hAnchor=o,this.vAnchor=c}release(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0,this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0,this.haloSize=0,this.size=0,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}}o.pool=new a["a"](o);i("a1ff");const c=n["a"].getLogger("esri.views.2d.engine.webgl.Utils"),u="geometry",h=[{name:u,strideInBytes:36,divisor:0}],d=[{name:u,strideInBytes:32,divisor:0}],l=[{name:u,strideInBytes:20,divisor:0}],f=[{name:u,strideInBytes:12,divisor:0}],p=[{name:u,strideInBytes:40,divisor:0}],v=[{name:u,strideInBytes:36,divisor:0}],g=[{name:u,strideInBytes:36,divisor:0}];function b(e){const t={};for(const i of e)t[i.name]=i.strideInBytes;return t}const m=b(h),y=b(d),S=b(l),_=b(f),O=b(p),w=b(v),T=b(g);function E(e,{fill:t}){switch(e){case s["d"].MARKER:return m;case s["d"].FILL:return"dot-density"===t?_:"simple"===t?S:y;case s["d"].LINE:return O;case s["d"].TEXT:return w;case s["d"].LABEL:return T}}const I=[u],x=[u],A=[u],R=[u],L=[u];function V(e){switch(e){case s["d"].MARKER:return I;case s["d"].FILL:return x;case s["d"].LINE:return A;case s["d"].TEXT:return R;case s["d"].LABEL:return L}}function M(e){switch(e%4){case 0:case 2:return 4;case 1:case 3:return 1}}function j(e,t){switch(t%4){case 0:case 2:return new Uint32Array(Math.floor(e*t/4));case 1:case 3:return new Uint8Array(e*t)}}function C(e,t){switch(t%4){case 0:case 2:return new Uint32Array(e);case 1:case 3:return new Uint8Array(e)}}function B(e){return null!=e}function U(e){return"number"==typeof e}function z(e){switch(e){case"butt":return 0;case"round":return 1;case"square":return 2;default:return c.error(new r["a"]("mapview-invalid-type",`Cap type ${e} is not a valid option. Defaulting to round`)),1}}function P(e){switch(e){case"miter":return 2;case"bevel":return 0;case"round":return 1;default:return c.error(new r["a"]("mapview-invalid-type",`Join type ${e} is not a valid option. Defaulting to round`)),1}}function F(e){switch(e){case"opacity":return s["b"].OPACITY;case"color":return s["b"].COLOR;case"rotation":return s["b"].ROTATION;case"size":return s["b"].SIZE;default:return c.error("Cannot interpret unknown vv: "+e),null}}function D(e,t,i,r,n,s,a){for(const c in s){const t=s[c].stride,r=M(t),a=s[c].data,o=i[c].data,u=t*n.vertexCount/r,h=t*e/r,d=t*n.vertexFrom/r;for(let e=0;e<u;++e)o[e+h]=a[e+d]}const o=n.indexCount;for(let c=0;c<o;++c)r[c+t]=a[c+n.indexFrom]-n.vertexFrom+e}const N={[u]:35044};function k(e,t){const i=[];for(let r=0;r<5;++r){const n=V(r),s={};for(const e of n)s[e]={data:t(r,e)};i.push({data:e(r),buffers:s})}return i}function H(e){switch(e){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5126:case 5124:case 5125:return 4}}function G(e){switch(e){case 5121:return 1;case 32819:return 2;case 5126:return 4;default:return void c.error(new r["a"]("webgl-utils","Unable to handle type "+e))}}function q(e){switch(e){case 5121:return Uint8Array;case 32819:return Uint16Array;case 5126:return Float32Array;default:return void c.error(new r["a"]("webgl-utils","Unable to handle type "+e))}}function X(e){const t={};for(const i in e){const r=e[i];let n=0;t[i]=r.map(e=>{const t={...e,normalized:e.normalized||!1,divisor:e.divisor||0,offset:n,stride:0};return n+=e.count*H(e.type),t}),t[i].forEach(e=>e.stride=n)}return t}const Z=e=>{const t=new Map;for(const i in e)for(const r of e[i])t.set(r.name,r.location);return t},Y=e=>{const t={};for(const i in e){const r=e[i];t[i]=r.length?r[0].stride:0}return t},K=new Map,W=(e,t)=>{if(!K.has(e)){const i=X(t),r={strides:Y(i),bufferLayouts:i,attributes:Z(t)};K.set(e,r)}return K.get(e)};function $(e){e(s["d"].FILL),e(s["d"].LINE),e(s["d"].MARKER),e(s["d"].TEXT),e(s["d"].LABEL)}const J=e=>"path"in e&&ue(e.path),Q=e=>"url"in e&&e.url||"imageData"in e&&e.imageData,ee=e=>"imageData"in e&&e.imageData&&"contentType"in e&&e.contentType?`data:${e.contentType};base64,${e.imageData}`:"url"in e?e.url:null,te=e=>"url"in e&&e.url&&e.url.includes(".gif")||"contentType"in e&&"image/gif"===e.contentType||"imageData"in e&&e.imageData.includes("data:image/gif"),ie=e=>"url"in e&&e.url&&e.url.includes(".png")||"contentType"in e&&"image/png"===e.contentType||"imageData"in e&&e.imageData.includes("data:image/png"),re=e=>e.type&&-1!==e.type.toLowerCase().indexOf("3d");function ne(e){switch(e.type){case"line":{const t=e;return"CIMSolidStroke"===t.cim.type&&!t.dashTemplate}case"fill":return"CIMSolidFill"===e.cim.type;case"esriSFS":return"esriSFSSolid"===e.style||"esriSFSNull"===e.style;case"esriSLS":return"esriSLSSolid"===e.style||"esriSLSNull"===e.style;default:return!1}}const se=e=>e.includes("data:image/svg+xml");function ae(e){switch("cim"in e?e.cim.type:e.type){case"esriSMS":case"esriPMS":case"CIMPointSymbol":case"CIMVectorMarker":case"CIMPictureMarker":case"CIMCharacterMarker":return!1;default:return!0}}function oe(e){const t="maxVVSize"in e&&e.maxVVSize,i="width"in e&&e.width||"size"in e&&e.size||0;return t||i}function ce(e){const t=[];for(let i=0;i<e.length;i++)t.push(e.charCodeAt(i));return t}const ue=e=>!!e&&(e=e.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(e)&&/[\dz]$/i.test(e)&&e.length>4))},d114:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return n}));const r=new Float32Array(1);new Uint32Array(r.buffer);function n(e){return[255&e,(65280&e)>>>8,(16711680&e)>>>16,(4278190080&e)>>>24]}function s(e,t){return 65535&e|t<<16}function a(e,t,i,r){return 255&e|(255&t)<<8|(255&i)<<16|r<<24}},d81b:function(e,t,i){"use strict";function r(e){return e instanceof HTMLImageElement?e.naturalWidth:e.width}function n(e){return e instanceof HTMLImageElement?e.naturalHeight:e.height}function s(e,t,i,s){if(i.level===s.level)return t;const o=e.tileInfo.size,c=e.getTileResolution(i.level),u=e.getTileResolution(s.level);let h=e.getLODInfoAt(s.level);const d=h.getXForColumn(s.col),l=h.getYForRow(s.row);h=e.getLODInfoAt(i.level);const f=h.getXForColumn(i.col),p=h.getYForRow(i.row),v=r(t)/o[0],g=n(t)/o[1],b=Math.round(v*((d-f)/c)),m=Math.round(g*(-(l-p)/c)),y=Math.round(v*o[0]*(u/c)),S=Math.round(g*o[1]*(u/c)),_=a(o);return _.getContext("2d").drawImage(t,b,m,y,S,0,0,o[0],o[1]),_}function a(e){const t=document.createElement("canvas");return[t.width,t.height]=e,t}i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return s}))},e80c:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var r=i("9180"),n=i("8c71"),s=i("c73a"),a=i("e4b1");class o extends a["a"]{constructor(e,t,i,r,n,a=null){super(e,t,i,r,n),this.bitmap=new s["a"](a,"standard",!1),this.bitmap.coordScale=[r,n],this.bitmap.once("isReady",()=>this.ready())}destroy(){super.destroy(),this.bitmap.destroy()}beforeRender(e){super.beforeRender(e),this.bitmap.beforeRender(e)}afterRender(e){super.afterRender(e),this.bitmap.afterRender(e)}set stencilRef(e){this.bitmap.stencilRef=e}get stencilRef(){return this.bitmap.stencilRef}_createTransforms(){return{dvs:Object(n["b"])(),tileMat3:Object(n["b"])()}}setTransform(e,t){super.setTransform(e,t),this.bitmap.transforms.dvs=this.transforms.dvs}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap&&(this.bitmap.stage=null)}}var c=i("3b1a"),u=i("c84e"),h=i("6722");class d extends h["a"]{get requiresDedicatedFBO(){return this.children.some(e=>"additive"===e.bitmap.blendFunction)}createTile(e){const t=this._tileInfoView.getTileBounds(Object(r["l"])(),e),[i,n]=this._tileInfoView.tileInfo.size;return new o(e,t[0],t[3],i,n)}destroyTile(){}prepareRenderPasses(e){const t=e.registerRenderPass({name:"bitmap (tile)",brushes:[c["a"].bitmap],target:()=>this.children.map(e=>e.bitmap),drawPhase:u["c"].MAP});return[...super.prepareRenderPasses(e),t]}doRender(e){this.visible&&e.drawPhase===u["c"].MAP&&super.doRender(e)}}}}]);
//# sourceMappingURL=chunk-08ecda91.8bfe1b7b.js.map