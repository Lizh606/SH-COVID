{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3DStateSet.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectStateSet.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectStates.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DGraphicLikeLayerView.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/ExtentSet.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DElevationAlignment.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/GraphicsLayerView3D.js","webpack:///./node_modules/@arcgis/core/layers/graphics/centroid.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFrustumVisibility.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/support/projectExtentUtils.js"],"names":["this","items","e","t","push","type","objectStateId","object","s","renderGeometry","owner","remove","length","_removeObjectStateItem","splice","forEach","channel","removeHighlight","removeOcclude","removeRenderGeometryObjectState","i","stateType","objectIdField","objectStateSet","ids","Set","paused","graphic","attributes","has","uid","_graphicsCore","_stateSets","Array","removeAll","a","h","releaseSet","set","handle","indexOf","addObjectStateSet","removeObjectState","add","graphics3DGraphics","get","_addObjectStateSet","setUid","initializeSet","hasGraphic","_removeObjectStateSet","states","v","super","graphicsCore","elevationAlignment","watchUpdatingTracking","handles","suspendResumeExtent","scaleVisibilityEnabled","layer","preferredUpdatePolicy","graphicSymbolSupported","scaleVisibility","layerMinMaxScaleChangeHandler","addPromise","elevationInfoChange","spatialIndex","queryGraphicUIDsInExtent","setup","view","elevationProvider","basemapTerrain","_set","objectStates","destroyed","watch","updateClippingExtent","setupSuspendResumeExtent","startCreateGraphics","destroy","suspended","updating","loadedGraphics","find","whenGraphicBounds","Promise","reject","computeAttachmentOrigin","getSymbolLayerSize","acquireSet","x","highlight","toArray","isArray","map","setUids","setObjectIds","clippingArea","setClippingExtent","spatialReference","recreateAllGraphics","computedExtent","extentPadding","setExtent","updateSuspendResumeExtent","constructOnly","prototype","readOnly","aliasOf","E","_extents","allocator","_tmpExtent","_dirty","clear","contains","removeContained","pushNew","mergeTight","pop","hasProgressed","o","sort","done","getItemAt","r","delete","c","g","m","d","madeProgress","some","filterInPlace","containsPoint","p","arguments","dirtyExtents","globalDirty","averageExtentUpdateSize","dirtyGraphicsSet","updateElevation","layerView","events","resourceController","scheduler","on","_elevationChanged","suspendedChange","registerTask","ELEVATION_ALIGNMENT","notifyChange","running","size","empty","markAllGraphicsElevationDirty","run","merge","_updateDirtyGraphics","_updateDirtyExtents","deconflictor","setDirty","renderCoordsHelper","effectiveUpdatePolicy","keys","getGraphics3DGraphicById","alignWithElevation","emit","extent","needsElevationUpdates","context","elevationInfo","mode","xmin","xmax","ymin","ymax","l","frustumVisibility","slicePlaneEnabled","drapeSourceType","fullExtentInLocalViewSpatialReference","graphics3d","updatingHandles","opacityChange","graphicUpdateHandler","addResolvingPromise","then","internal","canResume","outsideScaleRange","outsideOfView","clientGraphics","notifyGraphicGeometryChanged","notifyGraphicVisibilityChanged","graphics3DGraphicsByObjectID","symbolUpdateType","getGraphicFromGraphicUid","resolve","maskOccludee","ready","displayedNumberOfFeatures","maximumNumberOfFeatures","totalNumberOfFeatures","nodes","core","elevationUpdating","visibilityFrustum","Boolean","y","n","u","N","lengths","originPosition","coords","f","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","T","I","b","Math","sqrt","extentIntersectionDirty","_isVisibleBelowSurface","extentIntersection","viewChange","state","FRUSTUM_VISIBILITY","elevationBoundsChange","viewingMode","isVisibleBelowSurface","updateIsVisibleBelowSurface","_setDirty","ground","navigationConstraint","opaque","radius","min","max","elevationBounds","update","updateExtentIntersection","frustum","isVisibleInFrustum","fullExtent","equals","clone","isLocal","portalItem","catch"],"mappings":"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","file":"js/chunk-5f1b3b92.631784b1.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nclass e{constructor(){this.items=[]}addObject(e,t){this.items.push({type:0,objectStateId:t,object:e})}addRenderGeometry(e,t,s){this.items.push({type:1,objectStateId:t,renderGeometry:e,owner:s})}addExternal(e,t){this.items.push({type:2,objectStateId:t,remove:e})}remove(e){for(let t=this.items.length-1;t>=0;--t){const s=this.items[t];s.objectStateId===e&&(this._removeObjectStateItem(s),this.items.splice(t,1))}}removeObject(e){for(let t=this.items.length-1;t>=0;--t){const s=this.items[t];0===s.type&&s.object===e&&(this._removeObjectStateItem(s),this.items.splice(t,1))}}removeRenderGeometry(e){for(let t=this.items.length-1;t>=0;--t){const s=this.items[t];1===s.type&&s.renderGeometry===e&&(this._removeObjectStateItem(s),this.items.splice(t,1))}}removeAll(){this.items.forEach((e=>{this._removeObjectStateItem(e)})),this.items=[]}_removeObjectStateItem(e){switch(e.type){case 0:0===e.objectStateId.channel?e.object.removeHighlight(e.objectStateId):1===e.objectStateId.channel&&e.object.removeOcclude(e.objectStateId);break;case 1:e.owner.removeRenderGeometryObjectState(e.renderGeometry,e.objectStateId);break;case 2:e.remove(e.objectStateId)}}}export{e as Object3DStateSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{Object3DStateSet as t}from\"../../webgl-engine/lib/Object3DStateSet.js\";class e{constructor(e,i){this.stateType=e,this.objectIdField=i,this.objectStateSet=new t,this.ids=new Set,this.paused=!1}hasGraphic(t){if(this.objectIdField){const e=t.graphic.attributes[this.objectIdField];return this.ids.has(e)}return this.ids.has(t.graphic.uid)}}export{e as Graphics3DObjectStateSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{makeHandle as t}from\"../../../../core/handleUtils.js\";import{Graphics3DObjectStateSet as e}from\"./Graphics3DObjectStateSet.js\";class s{constructor(t){this._graphicsCore=t,this._stateSets=new Array}destroy(){this._stateSets&&this._stateSets.forEach((t=>t.objectStateSet.removeAll())),this._stateSets=null}acquireSet(s,a){const i=new e(s,a);this._stateSets.push(i);const h=t((()=>this.releaseSet(i)));return{set:i,handle:h}}releaseSet(t){t.objectStateSet.removeAll();const e=this._stateSets?this._stateSets.indexOf(t):-1;-1!==e&&this._stateSets.splice(e,1)}_addObjectStateSet(t,e){t.addObjectStateSet(e.stateType,e.objectStateSet)}_removeObjectStateSet(t,e){t.removeObjectState(e.objectStateSet)}setUid(t,e){t.ids.add(e);const s=this._graphicsCore.graphics3DGraphics.get(e);s&&this._addObjectStateSet(s,t)}setUids(t,e){e.forEach((e=>this.setUid(t,e)))}setObjectIds(t,e){e.forEach((e=>t.ids.add(e))),this.initializeSet(t)}addGraphic(t){this._stateSets.forEach((e=>{!e.paused&&e.hasGraphic(t)&&this._addObjectStateSet(t,e)}))}removeGraphic(t){this._stateSets.forEach((e=>{e.hasGraphic(t)&&this._removeObjectStateSet(t,e)}))}allGraphicsDeleted(){this._stateSets&&this._stateSets.forEach((t=>t.objectStateSet.removeAll()))}initializeSet(t){const e=this._graphicsCore.graphics3DGraphics;t.objectIdField?e.forEach((e=>{e&&t.hasGraphic(e)&&this._addObjectStateSet(e,t)})):t.ids.forEach((s=>{const a=e.get(s);a&&this._addObjectStateSet(a,t)}))}get test(){return{states:this._stateSets}}}export{s as Graphics3DObjectStates};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../Graphic.js\";import i from\"../../../../core/Accessor.js\";import s from\"../../../../core/Collection.js\";import r from\"../../../../core/Handles.js\";import{isSome as a,destroyMaybe as o,isNone as n}from\"../../../../core/maybe.js\";import{isAbortError as c}from\"../../../../core/promiseUtils.js\";import{init as h}from\"../../../../core/watchUtils.js\";import{property as p}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{diff as d}from\"../../../../core/accessorSupport/diffUtils.js\";import u from\"../../../../layers/Layer.js\";import{hydrateGraphic as m}from\"../../../../layers/graphics/hydratedFeatures.js\";import g from\"../../../../rest/support/Query.js\";import{SUSPEND_RESUME_EXTENT_OPTIMISM as y}from\"./constants.js\";import{Graphics3DCore as f}from\"./Graphics3DCore.js\";import b from\"./Graphics3DElevationAlignment.js\";import{Graphics3DObjectStates as j}from\"./Graphics3DObjectStates.js\";import w from\"./Graphics3DScaleVisibility.js\";import{enlargeExtent as C}from\"./graphicUtils.js\";import{WatchUpdatingTracking as S}from\"../../../support/WatchUpdatingTracking.js\";let v=class extends i{constructor(t){super(t),this.graphicsCore=null,this.elevationAlignment=new b,this.watchUpdatingTracking=new S,this.handles=new r,this.suspendResumeExtent=null}normalizeCtorArgs(t){let e=null;t.scaleVisibilityEnabled&&(delete(t={...t}).scaleVisibilityEnabled,e=new w);const i=new f({owner:t.owner,layer:t.layer,preferredUpdatePolicy:1,graphicSymbolSupported:!0});return{...t,graphicsCore:i,scaleVisibility:e}}initialize(){const t=this.scaleVisibility;a(t)&&\"minScale\"in this.layer&&this.watchUpdatingTracking.add(this.layer,\"scaleRangeId\",(()=>t.layerMinMaxScaleChangeHandler())),\"elevationInfo\"in this.layer&&this.watchUpdatingTracking.add(this.layer,\"elevationInfo\",((t,e)=>{d(t,e)&&this.watchUpdatingTracking.addPromise(this.graphicsCore.elevationInfoChange())}))}async setup(){const t=(t,e,i)=>this.graphicsCore.spatialIndex.queryGraphicUIDsInExtent(t,e,i);if(this.elevationAlignment.setup(this.owner,t,this.graphicsCore,this.view.elevationProvider),a(this.scaleVisibility)&&\"minScale\"in this.layer){const e=this.owner.view.basemapTerrain;this.scaleVisibility.setup(this.owner,this.layer,t,this.graphicsCore,e)}this._set(\"objectStates\",new j(this.graphicsCore));try{await this.graphicsCore.setup({elevationAlignment:this.elevationAlignment,scaleVisibility:this.scaleVisibility,objectStates:this.objectStates})}catch(e){if(c(e))return;throw e}this.destroyed||(this.handles.add(this.view.watch(\"clippingArea\",(()=>this.updateClippingExtent()),!0)),this.updateClippingExtent(),this.setupSuspendResumeExtent(),this.graphicsCore.startCreateGraphics())}destroy(){this.handles=o(this.handles),this.watchUpdatingTracking.destroy(),this._set(\"elevationAlignment\",o(this.elevationAlignment)),this._set(\"scaleVisibility\",o(this.scaleVisibility)),this._set(\"objectStates\",o(this.objectStates)),this._set(\"graphicsCore\",o(this.graphicsCore))}get suspended(){return!(!a(this.scaleVisibility)||!this.scaleVisibility.suspended)}get updating(){var t,e;return!!(null!=(t=this.graphicsCore)&&t.updating||a(this.scaleVisibility)&&this.scaleVisibility.updating||null!=(e=this.watchUpdatingTracking)&&e.updating)}getGraphicFromGraphicUid(t){if(this.owner.loadedGraphics){const e=this.owner.loadedGraphics.find((e=>e.uid===t));if(e){const t=this.layer instanceof u?this.layer:null;return m(e,t)}}}whenGraphicBounds(t,e){return this.graphicsCore?this.graphicsCore.whenGraphicBounds(t,e):Promise.reject()}computeAttachmentOrigin(t,e){return this.graphicsCore?this.graphicsCore.computeAttachmentOrigin(t,e):null}getSymbolLayerSize(t,e){return this.graphicsCore?this.graphicsCore.getSymbolLayerSize(t,e):null}maskOccludee(t){const{set:e,handle:i}=this.objectStates.acquireSet(1,null);return this.objectStates.setUid(e,t.uid),i}highlight(t){if(t instanceof g)return x;if(\"number\"==typeof t)return this.highlight([t]);if(t instanceof e)return this.highlight([t]);if(t instanceof s&&(t=t.toArray()),Array.isArray(t)&&t.length>0){if(t[0]instanceof e){const e=t.map((t=>t.uid)),{set:i,handle:s}=this.objectStates.acquireSet(0,null);return this.objectStates.setUids(i,e),s}if(\"number\"==typeof t[0]){const e=t,{set:i,handle:s}=this.objectStates.acquireSet(0,null);return this.objectStates.setObjectIds(i,e),s}}return x}updateClippingExtent(){const t=this.view.clippingArea;this.graphicsCore.setClippingExtent(t,this.view.spatialReference)&&this.graphicsCore.recreateAllGraphics()}updateSuspendResumeExtent(){n(this.scaleVisibility)||(this.suspendResumeExtent=C(this.graphicsCore.computedExtent,this.suspendResumeExtent,y,this.graphicsCore.extentPadding),this.scaleVisibility.setExtent(this.suspendResumeExtent))}setupSuspendResumeExtent(){n(this.scaleVisibility)||(h(this.graphicsCore,\"computedExtent\",(t=>this.updateSuspendResumeExtent()),!0),this.graphicsCore.watch(\"extentPadding\",(t=>this.updateSuspendResumeExtent())))}};t([p({constructOnly:!0})],v.prototype,\"owner\",void 0),t([p({constructOnly:!0})],v.prototype,\"layer\",void 0),t([p({readOnly:!0,aliasOf:\"owner.view\"})],v.prototype,\"view\",void 0),t([p({constructOnly:!0})],v.prototype,\"graphicsCore\",void 0),t([p({constructOnly:!0})],v.prototype,\"scaleVisibility\",void 0),t([p({readOnly:!0})],v.prototype,\"elevationAlignment\",void 0),t([p({readOnly:!0})],v.prototype,\"objectStates\",void 0),t([p({readOnly:!0})],v.prototype,\"watchUpdatingTracking\",void 0),t([p({readOnly:!0})],v.prototype,\"suspended\",null),t([p({readOnly:!0})],v.prototype,\"updating\",null),v=t([l(\"esri.views.3d.layers.graphics.Graphics3DGraphicLikeLayerView\")],v);const x={remove(){},pause(){},resume(){}},E=v;export{E as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/PooledArray.js\";import{create as e,copy as r,area as s,expand as n,contains as o,containsPoint as i}from\"../../../../geometry/support/aaBoundingRect.js\";import{noBudget as h}from\"../../../support/Scheduler.js\";const a=.05;class c{constructor(){this._extents=new t({allocator:t=>t||e()}),this._tmpExtent=e(),this._dirty=!1}get empty(){return 0===this._extents.length}get size(){return this._extents.length}clear(){this._extents.clear()}add(t){this.contains(t)||(this.removeContained(t),r(this._extents.pushNew(),t),this._dirty=!0)}pop(){return this._dirty&&this.mergeTight(),this._extents.pop()}merge(t){return this.mergeTight(t),t.hasProgressed}mergeTight(t=h){const e=this._extents,o=new Set;let i=0;for(;i!==e.length;){e.sort(((t,e)=>t[0]-e[0])),i=e.length,o.clear();for(let i=0;i<e.length;++i){if(t.done)return;const h=e.getItemAt(i);for(let t=i+1;t<e.length;++t){const r=e.getItemAt(t);if(r[0]>=h[2])break;o.add(r)}o.forEach((i=>{if(h===i)return;if(i[2]<=h[0])return void o.delete(i);const c=s(h),g=s(i),m=this._tmpExtent;n(h,i,m);const d=c+g;(s(m)-d)/d<a&&(r(h,m),o.delete(i),e.remove(i),t.madeProgress())})),o.add(h)}}this._dirty=!1}contains(t){return this._extents.some((e=>o(e,t)))}removeContained(t){this._extents.filterInPlace((e=>!o(t,e)))}get test(){const t=this;return{containsPoint:e=>t._extents.some((t=>i(t,e)))}}}export{c as ExtentSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/Accessor.js\";import i from\"../../../../core/Evented.js\";import s from\"../../../../core/Handles.js\";import{isSome as r}from\"../../../../core/maybe.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{ExtentSet as h}from\"./ExtentSet.js\";import{TaskPriority as o}from\"../../../support/Scheduler.js\";let p=class extends e{constructor(){super(...arguments),this.dirtyExtents=new h,this.globalDirty=!1,this.averageExtentUpdateSize=0,this.dirtyGraphicsSet=new Set,this.handles=new s,this.updateElevation=!1,this.layerView=null,this.graphicsCore=null,this.events=new i}setup(t,e,i,s){this.layerView=t,this.queryGraphicUIDsInExtent=e,this.graphicsCore=i,this.elevationProvider=s;const r=this.layerView.view.resourceController.scheduler;this.handles.add([s.on(\"elevation-change\",(t=>this._elevationChanged(t))),this.layerView.watch(\"suspended\",(()=>this.suspendedChange())),r.registerTask(o.ELEVATION_ALIGNMENT,this)])}destroy(){this.dirtyGraphicsSet.clear(),this.handles.destroy(),this.handles=null,this.layerView=null,this.graphicsCore=null,this.queryGraphicUIDsInExtent=null}clear(){this.dirtyGraphicsSet.clear(),this.notifyChange(\"updating\")}suspendedChange(){!0===this.layerView.suspended?this.updateElevation=!1:!1===this.layerView.suspended&&this.updateElevation&&(this.globalDirty=!0,this.notifyChange(\"updating\"))}elevationInfoChange(){this.globalDirty=!0,this.notifyChange(\"updating\")}get updating(){return this.running}get running(){return this.dirtyGraphicsSet.size>0||this.dirtyExtents&&!this.dirtyExtents.empty||this.globalDirty}get updatingRemaining(){return this.dirtyGraphicsSet.size+this.dirtyExtents.size*this.averageExtentUpdateSize}runTask(t){for(this.globalDirty&&(this.markAllGraphicsElevationDirty(),this.globalDirty=!1,t.madeProgress()),t.run((()=>this.dirtyExtents.merge(t)));this.running&&!t.done;)this._updateDirtyGraphics(t),this._updateDirtyExtents(t);this.layerView.view.deconflictor.setDirty(),this.notifyChange(\"updating\")}_updateDirtyGraphics(t){const e=this.layerView.view.renderCoordsHelper,i=0===this.graphicsCore.effectiveUpdatePolicy;for(const s of this.dirtyGraphicsSet.keys()){const a=this.graphicsCore.getGraphics3DGraphicById(s);if(this.dirtyGraphicsSet.delete(s),r(a)&&(a.alignWithElevation(this.elevationProvider,e,i),t.madeProgress()),t.done)return}}_updateDirtyExtents(t){for(;!this.dirtyExtents.empty&&!t.done;){const e=this.dirtyExtents.pop(),i=this.elevationProvider.spatialReference;this.events.emit(\"invalidate-elevation\",{extent:e,spatialReference:i});const s=this.dirtyGraphicsSet.size;this.queryGraphicUIDsInExtent(e,i,(t=>{const e=this.graphicsCore.getGraphics3DGraphicById(t);r(e)&&e.needsElevationUpdates()&&this.dirtyGraphicsSet.add(t)})),this.averageExtentUpdateSize=.1*(this.dirtyGraphicsSet.size-s)+.9*this.averageExtentUpdateSize,t.madeProgress()}}markAllGraphicsElevationDirty(){this.dirtyExtents.clear(),this.dirtyGraphicsSet.clear(),this.graphicsCore.graphics3DGraphics.forEach(((t,e)=>this.dirtyGraphicsSet.add(e)))}_elevationChanged(t){if(\"scene\"===t.context&&(!this.graphicsCore.layer.elevationInfo||\"relative-to-scene\"!==this.graphicsCore.layer.elevationInfo.mode))return;const{extent:e,spatialReference:i}=t;if(this.layerView.suspended){if(!this.updateElevation){const t=this.graphicsCore.computedExtent;t&&e[2]>t.xmin&&e[0]<t.xmax&&e[3]>t.ymin&&e[1]<t.ymax&&(this.updateElevation=!0)}this.events.emit(\"invalidate-elevation\",{extent:e,spatialReference:i})}else e[0]===-1/0?this.globalDirty=!0:this.dirtyExtents.add(e),this.notifyChange(\"updating\")}};t([a({readOnly:!0})],p.prototype,\"updating\",null),t([a({readOnly:!0})],p.prototype,\"updatingRemaining\",null),p=t([n(\"esri.views.3d.layers.graphics.Graphics3DElevationAlignment\")],p);const d=p;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../chunks/tslib.es6.js\";import{isSome as s}from\"../../../core/maybe.js\";import{whenTrueOnce as e,init as t,watch as r}from\"../../../core/watchUtils.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerView3D as h}from\"./LayerView3D.js\";import n from\"./graphics/Graphics3DFrustumVisibility.js\";import o from\"./graphics/Graphics3DGraphicLikeLayerView.js\";import{enlargeExtent as c}from\"./graphics/graphicUtils.js\";import{toViewIfLocal as d}from\"./support/projectExtentUtils.js\";import u from\"../../layers/LayerView.js\";const l=1.2;let g=class extends(h(u)){constructor(){super(...arguments),this.type=\"graphics-3d\",this.frustumVisibility=new n,this.slicePlaneEnabled=!1,this.drapeSourceType=1,this.suspendResumeExtent=null,this.fullExtentInLocalViewSpatialReference=null}initialize(){this._set(\"graphics3d\",new o({owner:this,layer:this.layer,scaleVisibilityEnabled:!0})),this.graphics3d.setup(),this.frustumVisibility.setup(this),this.setupSuspendResumeExtent(),this.updatingHandles.add(this,\"fullOpacity\",(()=>this.graphics3d.graphicsCore.opacityChange())),this.handles.add(this.layer.on(\"graphic-update\",(i=>this.graphics3d.graphicsCore.graphicUpdateHandler(i)))),this.addResolvingPromise(d(this).then((i=>this.fullExtentInLocalViewSpatialReference=i))),this.layer.internal?this.notifyChange(\"updating\"):this.handles.add(e(this.view,\"basemapTerrain.ready\",(()=>this.notifyChange(\"updating\"))))}destroy(){this.frustumVisibility&&(this.frustumVisibility.destroy(),this._set(\"frustumVisibility\",null)),this.graphics3d&&(this.graphics3d.destroy(),this._set(\"graphics3d\",null))}get legendEnabled(){return this.canResume()&&!this.frustumVisibility.suspended}get suspendInfo(){var i;const e={};return s(this.graphics3d.scaleVisibility)&&this.graphics3d.scaleVisibility.suspended&&(e.outsideScaleRange=!0),e.outsideOfView=!(null==(i=this.frustumVisibility)||!i.suspended),e}async fetchPopupFeatures(i,e){return s(e)?e.clientGraphics:null}notifyGraphicGeometryChanged(i){this.graphics3d.graphicsCore.notifyGraphicGeometryChanged(i)}notifyGraphicVisibilityChanged(i){this.graphics3d.graphicsCore.notifyGraphicVisibilityChanged(i)}get graphics3DGraphics(){return this.graphics3d.graphicsCore.graphics3DGraphics}get graphics3DGraphicsByObjectID(){return this.graphics3d?this.graphics3d.graphicsCore.graphics3DGraphicsByObjectID:null}get symbolUpdateType(){return this.graphics3d.graphicsCore.symbolUpdateType}getGraphicFromGraphicUid(i){return this.graphics3d.getGraphicFromGraphicUid(i)}whenGraphicBounds(i,s){return this.graphics3d.whenGraphicBounds(i,s)}computeAttachmentOrigin(i,s){return this.graphics3d?this.graphics3d.graphicsCore.computeAttachmentOrigin(i,s):null}getSymbolLayerSize(i,s){return this.graphics3d.getSymbolLayerSize(i,s)}queryGraphics(){return Promise.resolve(this.loadedGraphics)}maskOccludee(i){return this.graphics3d.maskOccludee(i)}highlight(i){return this.graphics3d.highlight(i)}get updatePolicy(){var i;return(null==(i=this.graphics3d)?void 0:i.graphicsCore.effectiveUpdatePolicy)||1}canResume(){var i;return super.canResume()&&!(null!=(i=this.graphics3d)&&i.suspended)}isUpdating(){var i,s;return!(!(this.graphics3d&&this.graphics3d.updating||this.frustumVisibility&&this.frustumVisibility.updating)&&(this.layer.internal||null!=(i=this.view)&&null!=(s=i.basemapTerrain)&&s.ready))}setupSuspendResumeExtent(){const i=()=>{this.suspendResumeExtent=c(this.graphics3d.graphicsCore.computedExtent,this.suspendResumeExtent,l,this.graphics3d.graphicsCore.extentPadding),this.frustumVisibility.setExtent(this.suspendResumeExtent)};t(this.graphics3d.graphicsCore,\"computedExtent\",(()=>i()),!0),r(this.graphics3d.graphicsCore,\"extentPadding\",(()=>i()),!0)}get performanceInfo(){return{displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:-1,totalNumberOfFeatures:-1,nodes:0,core:null,updating:this.updating,elevationUpdating:this.graphics3d.elevationAlignment.updating,visibilityFrustum:!this.frustumVisibility.suspended}}};i([a({aliasOf:\"layer.graphics\"})],g.prototype,\"loadedGraphics\",void 0),i([a({readOnly:!0})],g.prototype,\"suspended\",void 0),i([a({readOnly:!0})],g.prototype,\"legendEnabled\",null),i([a({readOnly:!0})],g.prototype,\"updating\",void 0),i([a()],g.prototype,\"layer\",void 0),i([a({readOnly:!0})],g.prototype,\"frustumVisibility\",void 0),i([a({readOnly:!0})],g.prototype,\"graphics3d\",void 0),i([a({type:Boolean})],g.prototype,\"slicePlaneEnabled\",void 0),i([a({readOnly:!0})],g.prototype,\"suspendInfo\",null),g=i([p(\"esri.views.3d.layers.GraphicsLayerView3D\")],g);const y=g;export{y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isNone as t}from\"../../core/maybe.js\";function n(t,n){return t?n?4:3:n?3:2}function e(e,o,u,l,N){if(t(o)||!o.lengths.length)return null;const s=\"upperLeft\"===(null==N?void 0:N.originPosition)?-1:1;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);const c=e.coords,f=[],i=u?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:T,coords:h}=o,g=n(u,l);let E=0;for(const t of T){const n=r(i,h,E,t,u,l,s);n&&f.push(n),E+=t*g}if(f.sort(((t,n)=>{let e=s*t[2]-s*n[2];return 0===e&&u&&(e=t[4]-n[4]),e})),f.length){let t=6*f[0][2];c[0]=f[0][0]/t,c[1]=f[0][1]/t,u&&(t=6*f[0][4],c[2]=0!==t?f[0][3]/t:0),(c[0]<i[0]||c[0]>i[1]||c[1]<i[2]||c[1]>i[3]||u&&(c[2]<i[4]||c[2]>i[5]))&&(c.length=0)}if(!c.length){const t=o.lengths[0]?I(h,0,T[0],u,l):null;if(!t)return null;c[0]=t[0],c[1]=t[1],u&&t.length>2&&(c[2]=t[2])}return e}function r(t,e,r,I,o,u,l=1){const N=n(o,u);let s=r,c=r+N,f=0,i=0,T=0,h=0,g=0;for(let n=0,m=I-1;n<m;n++,s+=N,c+=N){const n=e[s],r=e[s+1],I=e[s+2],u=e[c],l=e[c+1],N=e[c+2];let E=n*l-u*r;h+=E,f+=(n+u)*E,i+=(r+l)*E,o&&(E=n*N-u*I,T+=(I+N)*E,g+=E),n<t[0]&&(t[0]=n),n>t[1]&&(t[1]=n),r<t[2]&&(t[2]=r),r>t[3]&&(t[3]=r),o&&(I<t[4]&&(t[4]=I),I>t[5]&&(t[5]=I))}if(h*l>0&&(h*=-1),g*l>0&&(g*=-1),!h)return null;const E=[f,i,.5*h];return o&&(E[3]=T,E[4]=.5*g),E}function I(t,e,r,I,s){const c=n(I,s);let f=e,i=e+c,T=0,h=0,g=0,E=0;for(let n=0,m=r-1;n<m;n++,f+=c,i+=c){const n=t[f],e=t[f+1],r=t[f+2],s=t[i],c=t[i+1],m=t[i+2],b=I?u(n,e,r,s,c,m):o(n,e,s,c);if(b)if(T+=b,I){const t=N(n,e,r,s,c,m);h+=b*t[0],g+=b*t[1],E+=b*t[2]}else{const t=l(n,e,s,c);h+=b*t[0],g+=b*t[1]}}return T>0?I?[h/T,g/T,E/T]:[h/T,g/T]:r>0?I?[t[e],t[e+1],t[e+2]]:[t[e],t[e+1]]:null}function o(t,n,e,r){const I=e-t,o=r-n;return Math.sqrt(I*I+o*o)}function u(t,n,e,r,I,o){const u=r-t,l=I-n,N=o-e;return Math.sqrt(u*u+l*l+N*N)}function l(t,n,e,r){return[t+.5*(e-t),n+.5*(r-n)]}function N(t,n,e,r,I,o){return[t+.5*(r-t),n+.5*(I-n),e+.5*(o-e)]}export{e as getCentroidOptimizedGeometry,I as lineCentroid};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import s from\"../../../../core/Handles.js\";import{init as i}from\"../../../../core/watchUtils.js\";import{property as r}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{getReferenceEllipsoid as o}from\"../../../../geometry/projectionEllipsoid.js\";import{FrustumExtentIntersection as a}from\"../../support/FrustumExtentIntersection.js\";import{TaskPriority as l}from\"../../../support/Scheduler.js\";const h=1.2;let u=class extends t{constructor(){super(...arguments),this.suspended=!1,this.extent=null,this.extentIntersectionDirty=!0,this._isVisibleBelowSurface=!1,this.handles=new s,this.layerView=null,this.updating=!0}setup(e){this.layerView=e,this.extentIntersection=new a({renderCoordsHelper:e.view.renderCoordsHelper});const t=e.view,s=t.basemapTerrain,r=t.resourceController.scheduler;this.handles.add([t.on(\"resize\",(()=>this.viewChange())),t.state.watch(\"camera\",(()=>this.viewChange()),!0),r.registerTask(l.FRUSTUM_VISIBILITY,this),s.on(\"elevation-bounds-change\",(()=>this.elevationBoundsChange()))]),\"local\"===t.viewingMode?this.isVisibleBelowSurface=!0:this.handles.add([i(s,[\"opacity\",\"wireframe\"],(()=>this.updateIsVisibleBelowSurface())),i(t,\"map.ground.navigationConstraint.type\",(()=>this.updateIsVisibleBelowSurface()))])}destroy(){this.layerView=null,this.extent=null,this.extentIntersection=null,this.handles&&(this.handles.destroy(),this.handles=null)}_setDirty(){this.updating||this._set(\"updating\",!0)}setExtent(e){this.extent=e,this.extentIntersectionDirty=!0,this._setDirty()}viewChange(){this._setDirty()}elevationBoundsChange(){this._setDirty(),this.extentIntersectionDirty=!0}set isVisibleBelowSurface(e){this._isVisibleBelowSurface=e,this._setDirty(),this.extentIntersectionDirty=!0}updateIsVisibleBelowSurface(){const e=this.layerView.view,t=e.basemapTerrain,s=\"local\"===e.viewingMode,i=e.map.ground&&e.map.ground.navigationConstraint&&\"none\"===e.map.ground.navigationConstraint.type;this.isVisibleBelowSurface=s||!t.opaque||i}updateExtentIntersection(){if(!this.extentIntersectionDirty)return;this.extentIntersectionDirty=!1;const e=this.layerView.view;let t;if(this._isVisibleBelowSurface)t=-.3*o(e.spatialReference).radius;else{const{min:s,max:i}=e.basemapTerrain.elevationBounds;t=s-Math.max(1,(i-s)*(h-1))}this.extentIntersection.update(this.extent,e.spatialReference,t)}get running(){return this.updating}runTask(){if(this._set(\"updating\",!1),!this.extent)return void this._set(\"suspended\",!1);this.updateExtentIntersection();const e=this.layerView.view.frustum,t=o(this.layerView.view.spatialReference).radius;this._set(\"suspended\",!this.extentIntersection.isVisibleInFrustum(e,t))}};e([r({readOnly:!0})],u.prototype,\"suspended\",void 0),e([r({readOnly:!0})],u.prototype,\"updating\",void 0),u=e([n(\"esri.views.3d.layers.graphics.Graphics3DFrustumVisibility\")],u);const c=u;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as r}from\"../../../../core/maybe.js\";import{project as o}from\"../../../../geometry/support/webMercatorUtils.js\";import{projectGeometry as t}from\"../../../../portal/support/geometryServiceUtils.js\";function l(l){const s=l.view.spatialReference,i=l.layer.fullExtent,n=e(i)&&i.spatialReference;if(r(i)||!n)return Promise.resolve(null);if(n.equals(s))return Promise.resolve(i.clone());const a=o(i,s);return e(a)?Promise.resolve(a):l.view.state.isLocal?t(i,s,l.layer.portalItem).then((e=>!l.destroyed&&e?e:void 0)).catch((()=>null)):Promise.resolve(null)}export{l as toViewIfLocal};\n"],"sourceRoot":""}