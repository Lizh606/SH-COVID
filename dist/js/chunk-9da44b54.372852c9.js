(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9da44b54","chunk-2d0cc20b"],{"00c0":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var r=i("8c71"),n=i("0326"),s=i("7c4b");class a extends s["a"]{constructor(){super(...arguments),this._childrenSet=new Set,this._needsSort=!1,this.children=[],this._effectView=null}get blendMode(){return this._blendMode}set blendMode(e){this._blendMode=e,this.requestRender()}get clips(){return this._clips}set clips(e){this._clips=e,this.children.forEach(t=>t.clips=e)}get computedEffects(){var e,t;return null!=(e=null==(t=this._effectView)?void 0:t.effects)?e:null}get effect(){var e,t;return null!=(e=null==(t=this._effectView)?void 0:t.effect)?e:""}set effect(e){(this._effectView||e)&&(this._effectView||(this._effectView=new n["a"]),this._effectView.effect=e,this.requestRender())}updateTransitionProperties(e,t){super.updateTransitionProperties(e,t),this._effectView&&(this._effectView.transitionStep(e,t),this._effectView.transitioning&&this.requestRender())}doRender(e){const t=this.createRenderParams(e);this.renderChildren(t)}addChild(e){return this.addChildAt(e,this.children.length)}addChildAt(e,t=this.children.length){if(!e)return e;if(this.contains(e))return e;this._needsSort=!0;const i=e.parent;return i&&i!==this&&i.removeChild(e),t>=this.children.length?this.children.push(e):this.children.splice(t,0,e),this._childrenSet.add(e),e.parent=this,e.stage=this.stage,this!==this.stage&&(e.clips=this.clips),this.requestRender(),e}contains(e){return this._childrenSet.has(e)}removeAllChildren(){this._childrenSet.clear(),this._needsSort=!0;for(const e of this.children)this!==this.stage&&(e.clips=null),e.stage=null,e.parent=null;this.children.length=0}removeChild(e){return this.contains(e)?this.removeChildAt(this.children.indexOf(e)):e}removeChildAt(e){if(e<0||e>=this.children.length)return null;this._needsSort=!0;const t=this.children.splice(e,1)[0];return this._childrenSet.delete(t),this!==this.stage&&(t.clips=null),t.stage=null,t.parent=null,t}sortChildren(e){this._needsSort&&(this.children.sort(e),this._needsSort=!1)}_createTransforms(){return{dvs:Object(r["b"])()}}onAttach(){super.onAttach();const e=this.stage;for(const t of this.children)t.stage=e}onDetach(){super.onDetach();for(const e of this.children)e.stage=null}renderChildren(e){for(const t of this.children)t.beforeRender(e);for(const t of this.children)t.processRender(e);for(const t of this.children)t.afterRender(e)}createRenderParams(e){return{...e,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:e.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition}}}},"18c6":function(e,t,i){"use strict";i.d(t,"a",(function(){return C})),i.d(t,"b",(function(){return z})),i.d(t,"c",(function(){return j})),i.d(t,"d",(function(){return x})),i.d(t,"e",(function(){return L})),i.d(t,"f",(function(){return U})),i.d(t,"g",(function(){return E})),i.d(t,"h",(function(){return T}));var r=i("ce50"),n=i("c84e"),s=i("9b77");function a(e,t){const i=n["e"].SIZE_FIELD_STOPS|n["e"].SIZE_MINMAX_VALUE|n["e"].SIZE_SCALE_STOPS|n["e"].SIZE_UNIT_VALUE,r=(e&(n["f"].FIELD_TARGETS_OUTLINE|n["f"].MINMAX_TARGETS_OUTLINE|n["f"].SCALE_TARGETS_OUTLINE|n["f"].UNIT_TARGETS_OUTLINE))>>>4;return t.isOutline||t.isOutlinedFill?i&r:i&~r}const o=0,c=8,h=7,d=8,u=11,l=11,f=12,p=13,v=14,y=15,g=15,b=16,_=17,S=18,m=19,w=20,O=21,V=22;function E(e,t){switch(e){case n["d"].FILL:return C.from(t);case n["d"].LINE:return j.from(t);case n["d"].MARKER:return x.from(t);case n["d"].TEXT:return U.from(t);case n["d"].LABEL:return z.from(t);default:throw new Error("Unable to createMaterialKey for unknown geometryType "+e)}}function T(e){switch(L.load(e).geometryType){case n["d"].MARKER:return new x(e);case n["d"].FILL:return new C(e);case n["d"].LINE:return new j(e);case n["d"].TEXT:return new U(e);case n["d"].LABEL:return new z(e)}}class L{constructor(e){this._data=0,this._data=e}static load(e){const t=this.shared;return t.data=e,t}set data(e){this._data=e}get data(){return this._data}get geometryType(){return this.bits(d,u)}set geometryType(e){this.setBits(e,d,u)}get mapAligned(){return!!this.bit(w)}set mapAligned(e){this.setBit(w,e)}get sdf(){return!!this.bit(l)}set sdf(e){this.setBit(l,e)}get pattern(){return!!this.bit(f)}set pattern(e){this.setBit(f,e)}get textureBinding(){return this.bits(o,c)}set textureBinding(e){this.setBits(e,o,c)}get geometryTypeString(){switch(this.geometryType){case n["d"].FILL:return"fill";case n["d"].MARKER:return"marker";case n["d"].LINE:return"line";case n["d"].TEXT:return"text";case n["d"].LABEL:return"label";default:throw new r["a"]("Unable to handle unknown geometryType: "+this.geometryType)}}setBit(e,t){const i=1<<e;t?this._data|=i:this._data&=~i}bit(e){return(this._data&1<<e)>>e}setBits(e,t,i){for(let r=t,n=0;r<i;r++,n++)this.setBit(r,0!=(e&1<<n))}bits(e,t){let i=0;for(let r=e,n=0;r<t;r++,n++)i|=this.bit(r)<<n;return i}hasVV(){return!1}setVV(e,t){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}}getVariationHash(){return this._data&~(h&this.textureBinding)}}L.shared=new L(0);const A=e=>class extends e{get vvSizeMinMaxValue(){return 0!==this.bit(b)}set vvSizeMinMaxValue(e){this.setBit(b,e)}get vvSizeScaleStops(){return 0!==this.bit(_)}set vvSizeScaleStops(e){this.setBit(_,e)}get vvSizeFieldStops(){return 0!==this.bit(S)}set vvSizeFieldStops(e){this.setBit(S,e)}get vvSizeUnitValue(){return 0!==this.bit(m)}set vvSizeUnitValue(e){this.setBit(m,e)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(e,t){super.setVV(e,t);const i=a(e,t)&e;this.vvSizeMinMaxValue=!!(i&n["e"].SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(i&n["e"].SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(i&n["e"].SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(i&n["e"].SIZE_SCALE_STOPS)}},I=e=>class extends e{get vvRotation(){return 0!==this.bit(y)}set vvRotation(e){this.setBit(y,e)}hasVV(){return super.hasVV()||this.vvRotation}setVV(e,t){super.setVV(e,t),this.vvRotation=!t.isOutline&&!!(e&n["e"].ROTATION)}},R=e=>class extends e{get vvColor(){return 0!==this.bit(p)}set vvColor(e){this.setBit(p,e)}hasVV(){return super.hasVV()||this.vvColor}setVV(e,t){super.setVV(e,t),this.vvColor=!t.isOutline&&!!(e&n["e"].COLOR)}},M=e=>class extends e{get vvOpacity(){return 0!==this.bit(v)}set vvOpacity(e){this.setBit(v,e)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(e,t){super.setVV(e,t),this.vvOpacity=!t.isOutline&&!!(e&n["e"].OPACITY)}};class C extends(R(M(A(L)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=n["d"].FILL,t.dotDensity="dot-density"===e.stride.fill,t.simple="simple"===e.stride.fill,t.outlinedFill=e.isOutlinedFill,t.dotDensity||t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),dotDensity:this.dotDensity,outlinedFill:this.outlinedFill,simple:this.simple,vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}get dotDensity(){return!!this.bit(g)}set dotDensity(e){this.setBit(g,e)}get simple(){return!!this.bit(V)}set simple(e){this.setBit(V,e)}get outlinedFill(){return!!this.bit(O)}set outlinedFill(e){this.setBit(O,e)}}C.shared=new C(0);class x extends(R(M(I(A(L))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=n["d"].MARKER,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}x.shared=new x(0);class j extends(R(M(A(L)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=n["d"].LINE,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}j.shared=new j(0);class U extends(R(M(I(A(L))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=n["d"].TEXT,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}U.shared=new U(0);class z extends(A(L)){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=n["d"].LABEL,t.setVV(e.vvFlags,e),t.mapAligned=Object(s["a"])(e.placement),t.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}z.shared=new z(0)},"4d38":function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return d}));var r=i("a4ee"),n=i("2c4f"),s=i("7d7d"),a=i("59b2"),o=(i("b50f"),i("c120"),i("cea0"),i("d386")),c=i("365a");let h=class extends c["a"]{constructor(e){super(e),this.type="group",this.layerViews=new n["a"]}initialize(){this.handles.add([this.layerViews.on("change",e=>this._layerViewsChangeHandler(e)),this.layerViews.on("after-changes",()=>this._layerViewsAfterChangesHandler()),this.layer.watch("visibilityMode",()=>this._visibilityModeHandler(),!0),this.watch("visible",()=>this._visibleHandler(),!0)],"grouplayerview"),this._layerViewsChangeHandler({target:null,added:this.layerViews.toArray(),removed:[],moved:[]}),this._layerViewsAfterChangesHandler()}set layerViews(e){this._set("layerViews",Object(s["b"])(e,this._get("layerViews")))}isUpdating(){return this.layerViews.some(e=>e.updating)}get updatingProgress(){return 0===this.layerViews.length?1:this.layerViews.reduce((e,t)=>e+t.updatingProgress,0)/this.layerViews.length}_hasLayerViewVisibleOverrides(){return this.layerViews.some(e=>e._isOverridden("visible"))}_findLayerViewForLayer(e){return e&&this.layerViews.find(t=>t.layer===e)}_firstVisibleOnLayerOrder(){const e=this.layer.layers.find(e=>{const t=this._findLayerViewForLayer(e);return t&&t.visible});return e&&this._findLayerViewForLayer(e)}_enforceExclusiveVisibility(e){this._hasLayerViewVisibleOverrides()&&(e||!(e=this._firstVisibleOnLayerOrder())&&this.layerViews.length>0&&(e=this._findLayerViewForLayer(this.layer.layers.getItemAt(0))),this.layerViews.forEach(t=>{t.visible=t===e}))}_layerViewsChangeHandler(e){this.handles.remove("grouplayerview:visible"),this.handles.add(this.layerViews.map(e=>e.watch("visible",t=>this._layerViewVisibleHandler(t,e),!0)).toArray(),"grouplayerview:visible");const t=e.added[e.added.length-1];let i=null;t&&t.visible&&(i=t),this._enforceVisibility(i)}_layerViewsAfterChangesHandler(){this.handles.remove("grouplayerview:updating"),this.handles.add(this.layerViews.map(e=>e.watch("updating",()=>this._updateUpdating(),!0)).toArray(),"grouplayerview:updating"),this._updateUpdating()}_enforceVisibility(e){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case"inherited":{const e=this.visible;this.layerViews.forEach(t=>{t.visible=e});break}case"exclusive":this._enforceExclusiveVisibility(e)}}_visibilityModeHandler(){this._enforceVisibility()}_layerViewVisibleHandler(e,t){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case"inherited":e!==this.visible&&(t.visible=this.visible);break;case"exclusive":this._enforceExclusiveVisibility(e&&t)}}_visibleHandler(){var e;this._hasLayerViewVisibleOverrides()&&"inherited"===(null==(e=this.layer)?void 0:e.visibilityMode)&&this._enforceVisibility()}_updateUpdating(){this.notifyChange("updating")}};Object(r["a"])([Object(a["b"])({cast:s["a"]})],h.prototype,"layerViews",null),Object(r["a"])([Object(a["b"])()],h.prototype,"view",void 0),Object(r["a"])([Object(a["b"])({readOnly:!0})],h.prototype,"updatingProgress",null),h=Object(r["a"])([Object(o["a"])("esri.views.layers.GroupLayerView")],h);const d=h},"566d":function(e,t,i){"use strict";i.d(t,"a",(function(){return O}));var r,n=i("a4ee"),s=i("2c4f"),a=i("7d7d"),o=i("3795"),c=i("59b2"),h=(i("b50f"),i("c120"),i("cea0"),i("d386")),d=i("00c0"),u=i("66e4"),l=i("2f51"),f=(i("e06a"),i("3760")),p=i("a9ab"),v=i("3af1"),y=i("1219");const g={base:f["a"],key:"type",typeMap:{extent:v["a"],polygon:y["a"]}};let b=r=class extends u["a"]{constructor(){super(...arguments),this.type="geometry",this.geometry=null}get version(){return(this._get("version")||0)+1}clone(){return new r({geometry:this.geometry.clone()})}};Object(n["a"])([Object(c["b"])({types:g,json:{read:p["a"],write:!0}})],b.prototype,"geometry",void 0),Object(n["a"])([Object(c["b"])({readOnly:!0})],b.prototype,"version",null),b=r=Object(n["a"])([Object(h["a"])("esri.views.layers.support.Geometry")],b);const _=b;let S=class extends u["a"]{constructor(){super(...arguments),this.type="path",this.path=[]}get version(){return(this._get("version")||0)+1}};Object(n["a"])([Object(c["b"])({type:[[[Number]]],json:{write:!0}})],S.prototype,"path",void 0),Object(n["a"])([Object(c["b"])({readOnly:!0})],S.prototype,"version",null),S=Object(n["a"])([Object(h["a"])("esri.views.layers.support.Path")],S);const m=S,w=s["a"].ofType({key:"type",base:u["a"],typeMap:{rect:l["a"],path:m,geometry:_}}),O=e=>{let t=class extends e{constructor(){super(...arguments),this.clips=new w,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var e;this.container||(this.container=new d["a"]),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([Object(o["a"])(this,"suspended",e=>{this.container&&(this.container.visible=!e),this.view&&!e&&this.updateRequested&&this.view.requestUpdate()},!0),Object(o["a"])(this,["layer.opacity","container"],()=>{var e,t;this.container&&(this.container.opacity=null!=(e=null==(t=this.layer)?void 0:t.opacity)?e:1)},!0),Object(o["a"])(this,["layer.blendMode"],e=>{this.container&&(this.container.blendMode=e)},!0),Object(o["a"])(this,["layer.effect"],e=>{this.container&&(this.container.effect=e)},!0),this.clips.on("change",()=>{this.container.clips=this.clips,this.notifyChange("clips")})]),null!=(e=this.view)&&e.whenLayerView?this.view.whenLayerView(this.layer).then(e=>{e!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{}):this.when().then(()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{})}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove("initialize"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!(!this.updatingHandles||!this.updatingHandles.updating)}isVisibleAtScale(e){let t=!0;const i=this.layer,r=i.minScale,n=i.maxScale;if(null!=r&&null!=n){let i=!r,s=!n;!i&&e<=r&&(i=!0),!s&&e>=n&&(s=!0),t=i&&s}return t}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1}hitTest(e,t){return Promise.resolve(null)}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return Object(n["a"])([Object(c["b"])({type:w,set(e){const t=Object(a["b"])(e,this._get("clips"),w);this._set("clips",t)}})],t.prototype,"clips",void 0),Object(n["a"])([Object(c["b"])()],t.prototype,"moving",void 0),Object(n["a"])([Object(c["b"])()],t.prototype,"attached",void 0),Object(n["a"])([Object(c["b"])()],t.prototype,"container",void 0),Object(n["a"])([Object(c["b"])()],t.prototype,"suspended",void 0),Object(n["a"])([Object(c["b"])({readOnly:!0})],t.prototype,"updateParameters",void 0),Object(n["a"])([Object(c["b"])()],t.prototype,"updateRequested",void 0),Object(n["a"])([Object(c["b"])()],t.prototype,"updating",null),Object(n["a"])([Object(c["b"])()],t.prototype,"view",void 0),t=Object(n["a"])([Object(h["a"])("esri.views.2d.layers.LayerView2D")],t),t}},"8c81":function(e,t,i){"use strict";i.d(t,"a",(function(){return w})),i.d(t,"b",(function(){return O})),i.d(t,"c",(function(){return d})),i.d(t,"d",(function(){return F})),i.d(t,"e",(function(){return H})),i.d(t,"f",(function(){return P})),i.d(t,"g",(function(){return B})),i.d(t,"h",(function(){return N})),i.d(t,"i",(function(){return D})),i.d(t,"j",(function(){return G})),i.d(t,"k",(function(){return j})),i.d(t,"l",(function(){return a})),i.d(t,"m",(function(){return L})),i.d(t,"n",(function(){return T})),i.d(t,"o",(function(){return c})),i.d(t,"p",(function(){return E})),i.d(t,"q",(function(){return I})),i.d(t,"r",(function(){return o})),i.d(t,"s",(function(){return V})),i.d(t,"t",(function(){return z})),i.d(t,"u",(function(){return r})),i.d(t,"v",(function(){return U})),i.d(t,"w",(function(){return n})),i.d(t,"x",(function(){return x})),i.d(t,"y",(function(){return p})),i.d(t,"z",(function(){return v})),i.d(t,"A",(function(){return y})),i.d(t,"B",(function(){return g})),i.d(t,"C",(function(){return f})),i.d(t,"D",(function(){return l})),i.d(t,"E",(function(){return b})),i.d(t,"F",(function(){return _})),i.d(t,"G",(function(){return S})),i.d(t,"H",(function(){return m})),i.d(t,"I",(function(){return u})),i.d(t,"J",(function(){return h})),i.d(t,"K",(function(){return A})),i.d(t,"L",(function(){return s})),i.d(t,"M",(function(){return C})),i.d(t,"N",(function(){return M})),i.d(t,"O",(function(){return R}));const r=1e-30,n=4294967295,s=512,a=8,o=29,c=24,h=8,d={metrics:{width:15,height:17,left:0,top:-7,advance:14}},u=0,l=0,f=0,p=1,v=2,y=3,g=4,b=5,_=6,S=5,m=6,w=1,O=2,V=2,E=1,T=2,L=4,A=1.05,I=6,R=5,M=6,C=1.15,x=2,j=8,U=500,z=10,F=2,B=0,P=1,N=4,D=8,H=4,G=1},"9a02":function(e,t,i){"use strict";i.d(t,"a",(function(){return L}));i("c120");var r=i("b2b2"),n=i("8c71"),s=i("3b1a"),a=i("00c0"),o=i("ce50"),c=i("e92d"),h=i("7c4b"),d=i("9812"),u=i("3349"),l=i("02f1"),f=i("6655"),p=i("8152"),v=i("d114"),y=i("7ce4");const g=c["a"].getLogger("esri.views.2d.engine.webgl.Mesh2D"),b=e=>{switch(e.BYTES_PER_ELEMENT){case 1:return 5121;case 2:return 5123;case 4:return 5125;default:throw new o["a"]("Cannot get DataType of array")}},_=(e,t,i,r)=>{let n=0;for(let s=1;s<i;s++){const i=e[2*(t+s-1)],r=e[2*(t+s-1)+1];n+=(e[2*(t+s)]-i)*(e[2*(t+s)+1]+r)}return r?n>0:n<0},S=({coords:e,lengths:t},i)=>{const r=[];for(let n=0,s=0;n<t.length;s+=t[n],n+=1){const a=s,o=[];for(;n<t.length-1&&_(e,s+t[n],t[n+1],i);n+=1,s+=t[n])o.push(s+t[n]-a);const c=e.slice(2*a,2*(s+t[n])),h=Object(d["a"])(c,o,2);for(const e of h)r.push(e+a)}return r};class m{constructor(e,t,i,r=!1){this._cache={},this.vertices=e,this.indices=t,this.primitiveType=i,this.isMapSpace=r}static fromRect({x:e,y:t,width:i,height:r}){const n=e,s=t,a=n+i,o=s+r;return m.fromScreenExtent({xmin:n,ymin:s,xmax:a,ymax:o})}static fromPath(e){const t=Object(f["f"])(new p["a"],e.path,!1,!1),i=t.coords,r=new Uint32Array(S(t,!0)),n=new Uint32Array(i.length/2);for(let s=0;s<n.length;s++)n[s]=Object(v["a"])(Math.floor(i[2*s]),Math.floor(i[2*s+1]));return new m({geometry:n},r,4)}static fromGeometry(e,t){const i=t.geometry.type;switch(i){case"polygon":return m.fromPolygon(e,t.geometry);case"extent":return m.fromMapExtent(e,t.geometry);default:return g.error(new o["a"]("mapview-bad-type","Unable to create a mesh from type "+i,t)),m.fromRect({x:0,y:0,width:1,height:1})}}static fromPolygon(e,t){const i=Object(f["g"])(new p["a"],t,!1,!1),r=i.coords,n=new Uint32Array(S(i,!1)),s=new Uint32Array(r.length/2),a=Object(l["b"])(),o=Object(l["b"])();for(let c=0;c<s.length;c++)Object(u["s"])(a,r[2*c],r[2*c+1]),e.toScreen(o,a),s[c]=Object(v["a"])(Math.floor(o[0]),Math.floor(o[1]));return new m({geometry:s},n,4,!0)}static fromScreenExtent({xmin:e,xmax:t,ymin:i,ymax:r}){const n={geometry:new Uint32Array([Object(v["a"])(e,i),Object(v["a"])(t,i),Object(v["a"])(e,r),Object(v["a"])(e,r),Object(v["a"])(t,i),Object(v["a"])(t,r)])},s=new Uint32Array([0,1,2,3,4,5]);return new m(n,s,4)}static fromMapExtent(e,t){const[i,r]=e.toScreen([0,0],[t.xmin,t.ymin]),[n,s]=e.toScreen([0,0],[t.xmax,t.ymax]),a={geometry:new Uint32Array([Object(v["a"])(i,r),Object(v["a"])(n,r),Object(v["a"])(i,s),Object(v["a"])(i,s),Object(v["a"])(n,r),Object(v["a"])(n,s)])},o=new Uint32Array([0,1,2,3,4,5]);return new m(a,o,4)}destroy(){Object(r["l"])(this._cache.indexBuffer)&&this._cache.indexBuffer.dispose();for(const e in this._cache.vertexBuffers)Object(r["l"])(this._cache.vertexBuffers[e])&&this._cache.vertexBuffers[e].dispose()}get elementType(){return b(this.indices)}getIndexBuffer(e,t=35044){return this._cache.indexBuffer||(this._cache.indexBuffer=y["a"].createIndex(e,t,this.indices)),this._cache.indexBuffer}getVertexBuffers(e,t=35044){return this._cache.vertexBuffers||(this._cache.vertexBuffers=Object.keys(this.vertices).reduce((i,r)=>({...i,[r]:y["a"].createVertex(e,t,this.vertices[r])}),{})),this._cache.vertexBuffers}}var w=i("0fa6");const O=c["a"].getLogger("esri.views.2d.engine.webgl.ClippingInfo"),V=e=>parseFloat(e)/100;class E extends h["a"]{constructor(e,t){super(),this._clip=t,this._cache={},this.stage=e,this._handle=t.watch("version",()=>this._invalidate()),this.ready()}static fromClipArea(e,t){return new E(e,t)}_destroyGL(){Object(r["l"])(this._cache.mesh)&&(this._cache.mesh.destroy(),this._cache.mesh=null),Object(r["l"])(this._cache.vao)&&(this._cache.vao.dispose(),this._cache.vao=null)}destroy(){this._destroyGL(),this._handle.remove()}getVAO(e,t,i,n){const[s,a]=t.size;if("geometry"!==this._clip.type&&this._lastWidth===s&&this._lastHeight===a||(this._lastWidth=s,this._lastHeight=a,this._destroyGL()),Object(r["k"])(this._cache.vao)){const r=this._createMesh(t,this._clip),s=r.getIndexBuffer(e),a=r.getVertexBuffers(e);this._cache.mesh=r,this._cache.vao=new w["a"](e,i,n,a,s)}return this._cache.vao}_createTransforms(){return{dvs:Object(n["b"])()}}_invalidate(){this._destroyGL(),this.requestRender()}_createScreenRect(e,t){const[i,r]=e.size,n="string"==typeof t.left?V(t.left)*i:t.left,s="string"==typeof t.right?V(t.right)*i:t.right,a="string"==typeof t.top?V(t.top)*r:t.top,o="string"==typeof t.bottom?V(t.bottom)*r:t.bottom,c=n,h=a;return{x:c,y:h,width:Math.max(i-s-c,0),height:Math.max(r-o-h,0)}}_createMesh(e,t){switch(t.type){case"rect":return m.fromRect(this._createScreenRect(e,t));case"path":return m.fromPath(t);case"geometry":return m.fromGeometry(e,t);default:return O.error(new o["a"]("mapview-bad-type","Unable to create ClippingInfo mesh from clip of type: ${clip.type}")),m.fromRect({x:0,y:0,width:1,height:1})}}}var T=i("c84e");class L extends a["a"]{constructor(){super(...arguments),this.name=this.constructor.name}set clips(e){this._clips=e,this.children.forEach(t=>t.clips=e),this._updateClippingInfo()}_createTransforms(){return{dvs:Object(n["b"])()}}doRender(e){const t=this.createRenderParams(e),{painter:i,globalOpacity:r,profiler:n,drawPhase:s}=t,a=s===T["c"].LABEL||s===T["c"].HIGHLIGHT?1:r*this.computedOpacity;n.recordContainerStart(this.name),i.beforeRenderLayer(t,this._clippingInfos?255:0,a),this.updateTransforms(e.state),this.renderChildren(t),i.compositeLayer(t,a),n.recordContainerEnd()}renderChildren(e){Object(r["k"])(this._renderPasses)&&(this._renderPasses=this.prepareRenderPasses(e.painter));for(const i of this.children)i.beforeRender(e);for(const i of this._renderPasses)try{i.render(e)}catch(t){}for(const i of this.children)i.afterRender(e)}createRenderParams(e){return e.requireFBO=this.requiresDedicatedFBO,e}prepareRenderPasses(e){return[e.registerRenderPass({name:"clip",brushes:[s["a"].clip],target:()=>this._clippingInfos,drawPhase:T["c"].MAP|T["c"].LABEL|T["c"].LABEL_ALPHA|T["c"].DEBUG|T["c"].HIGHLIGHT})]}updateTransforms(e){for(const t of this.children)t.setTransform(e)}onAttach(){super.onAttach(),this._updateClippingInfo()}onDetach(){super.onDetach(),this._updateClippingInfo()}_updateClippingInfo(){if(Object(r["l"])(this._clippingInfos)&&(this._clippingInfos.forEach(e=>e.destroy()),this._clippingInfos=null),!this.stage)return;const e=this._clips;Object(r["l"])(e)&&e.length&&(this._clippingInfos=e.items.map(e=>E.fromClipArea(this.stage,e))),this.requestRender()}}},"9b77":function(e,t,i){"use strict";function r(e){switch(e){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}i.d(t,"a",(function(){return r}))},a9a2:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return o})),i.d(t,"d",(function(){return c}));var r=i("d114");function n(e,t){return Array.isArray(t)?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]):(e[0]=t.r,e[1]=t.g,e[2]=t.b,e[3]=t.a),e}function s(e,t=0,i=!1){const r=e[t+3];return e[t+0]*=r,e[t+1]*=r,e[t+2]*=r,i||(e[t+3]*=255),e}function a(e){return s(n([],e))}function o(e){if(!e)return 0;const{r:t,g:i,b:n,a:s}=e;return Object(r["b"])(t*s,i*s,n*s,255*s)}function c(e){if(!e)return 0;const[t,i,n,s]=e;return Object(r["b"])(t*(s/255),i*(s/255),n*(s/255),s)}},c84e:function(e,t,i){"use strict";var r,n,s,a,o,c,h;i.d(t,"a",(function(){return h})),i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return s})),i.d(t,"d",(function(){return r})),i.d(t,"e",(function(){return o})),i.d(t,"f",(function(){return c})),function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT",e[e.LABEL=4]="LABEL"}(r||(r={})),function(e){e[e.SUCCEEDED=0]="SUCCEEDED",e[e.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"}(n||(n={})),function(e){e[e.NONE=0]="NONE",e[e.MAP=1]="MAP",e[e.LABEL=2]="LABEL",e[e.LABEL_ALPHA=4]="LABEL_ALPHA",e[e.HITTEST=8]="HITTEST",e[e.HIGHLIGHT=16]="HIGHLIGHT",e[e.CLIP=32]="CLIP",e[e.DEBUG=64]="DEBUG",e[e.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(s||(s={})),function(e){e[e.SIZE=0]="SIZE",e[e.COLOR=1]="COLOR",e[e.OPACITY=2]="OPACITY",e[e.ROTATION=3]="ROTATION"}(a||(a={})),function(e){e[e.NONE=0]="NONE",e[e.OPACITY=1]="OPACITY",e[e.COLOR=2]="COLOR",e[e.ROTATION=4]="ROTATION",e[e.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE",e[e.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS",e[e.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS",e[e.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"}(o||(o={})),function(e){e[e.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",e[e.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",e[e.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",e[e.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(c||(c={})),function(e){e[e.SPRITE=0]="SPRITE",e[e.GLYPH=1]="GLYPH"}(h||(h={}))},c8dd:function(e,t,i){"use strict";i.d(t,"a",(function(){return D})),i.d(t,"b",(function(){return x})),i.d(t,"c",(function(){return j})),i.d(t,"d",(function(){return ce})),i.d(t,"e",(function(){return N})),i.d(t,"f",(function(){return H})),i.d(t,"g",(function(){return W})),i.d(t,"h",(function(){return $})),i.d(t,"i",(function(){return F})),i.d(t,"j",(function(){return B})),i.d(t,"k",(function(){return oe})),i.d(t,"l",(function(){return k})),i.d(t,"m",(function(){return q})),i.d(t,"n",(function(){return E})),i.d(t,"o",(function(){return ee})),i.d(t,"p",(function(){return P})),i.d(t,"q",(function(){return re})),i.d(t,"r",(function(){return U})),i.d(t,"s",(function(){return te})),i.d(t,"t",(function(){return Q})),i.d(t,"u",(function(){return z})),i.d(t,"v",(function(){return ie})),i.d(t,"w",(function(){return se})),i.d(t,"x",(function(){return J})),i.d(t,"y",(function(){return ne})),i.d(t,"z",(function(){return ae})),i.d(t,"A",(function(){return C}));var r=i("ce50"),n=i("e92d"),s=(i("38a4"),i("a915"),i("a9a2"),i("c84e")),a=i("ecd7");class o{constructor(){this.color=[0,0,0,0],this.haloColor=[0,0,0,0],this.haloSize=0,this.size=12,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}acquire(e,t,i,r,n,s,a,o,c){this.color=e,this.haloColor=t,this.haloSize=i,this.size=r,this.angle=n,this.offsetX=s,this.offsetY=a,this.hAnchor=o,this.vAnchor=c}release(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0,this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0,this.haloSize=0,this.size=0,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}}o.pool=new a["a"](o);i("a1ff");const c=n["a"].getLogger("esri.views.2d.engine.webgl.Utils"),h="geometry",d=[{name:h,strideInBytes:36,divisor:0}],u=[{name:h,strideInBytes:32,divisor:0}],l=[{name:h,strideInBytes:20,divisor:0}],f=[{name:h,strideInBytes:12,divisor:0}],p=[{name:h,strideInBytes:40,divisor:0}],v=[{name:h,strideInBytes:36,divisor:0}],y=[{name:h,strideInBytes:36,divisor:0}];function g(e){const t={};for(const i of e)t[i.name]=i.strideInBytes;return t}const b=g(d),_=g(u),S=g(l),m=g(f),w=g(p),O=g(v),V=g(y);function E(e,{fill:t}){switch(e){case s["d"].MARKER:return b;case s["d"].FILL:return"dot-density"===t?m:"simple"===t?S:_;case s["d"].LINE:return w;case s["d"].TEXT:return O;case s["d"].LABEL:return V}}const T=[h],L=[h],A=[h],I=[h],R=[h];function M(e){switch(e){case s["d"].MARKER:return T;case s["d"].FILL:return L;case s["d"].LINE:return A;case s["d"].TEXT:return I;case s["d"].LABEL:return R}}function C(e){switch(e%4){case 0:case 2:return 4;case 1:case 3:return 1}}function x(e,t){switch(t%4){case 0:case 2:return new Uint32Array(Math.floor(e*t/4));case 1:case 3:return new Uint8Array(e*t)}}function j(e,t){switch(t%4){case 0:case 2:return new Uint32Array(e);case 1:case 3:return new Uint8Array(e)}}function U(e){return null!=e}function z(e){return"number"==typeof e}function F(e){switch(e){case"butt":return 0;case"round":return 1;case"square":return 2;default:return c.error(new r["a"]("mapview-invalid-type",`Cap type ${e} is not a valid option. Defaulting to round`)),1}}function B(e){switch(e){case"miter":return 2;case"bevel":return 0;case"round":return 1;default:return c.error(new r["a"]("mapview-invalid-type",`Join type ${e} is not a valid option. Defaulting to round`)),1}}function P(e){switch(e){case"opacity":return s["b"].OPACITY;case"color":return s["b"].COLOR;case"rotation":return s["b"].ROTATION;case"size":return s["b"].SIZE;default:return c.error("Cannot interpret unknown vv: "+e),null}}function N(e,t,i,r,n,s,a){for(const c in s){const t=s[c].stride,r=C(t),a=s[c].data,o=i[c].data,h=t*n.vertexCount/r,d=t*e/r,u=t*n.vertexFrom/r;for(let e=0;e<h;++e)o[e+d]=a[e+u]}const o=n.indexCount;for(let c=0;c<o;++c)r[c+t]=a[c+n.indexFrom]-n.vertexFrom+e}const D={[h]:35044};function H(e,t){const i=[];for(let r=0;r<5;++r){const n=M(r),s={};for(const e of n)s[e]={data:t(r,e)};i.push({data:e(r),buffers:s})}return i}function G(e){switch(e){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5126:case 5124:case 5125:return 4}}function q(e){switch(e){case 5121:return 1;case 32819:return 2;case 5126:return 4;default:return void c.error(new r["a"]("webgl-utils","Unable to handle type "+e))}}function k(e){switch(e){case 5121:return Uint8Array;case 32819:return Uint16Array;case 5126:return Float32Array;default:return void c.error(new r["a"]("webgl-utils","Unable to handle type "+e))}}function X(e){const t={};for(const i in e){const r=e[i];let n=0;t[i]=r.map(e=>{const t={...e,normalized:e.normalized||!1,divisor:e.divisor||0,offset:n,stride:0};return n+=e.count*G(e.type),t}),t[i].forEach(e=>e.stride=n)}return t}const Z=e=>{const t=new Map;for(const i in e)for(const r of e[i])t.set(r.name,r.location);return t},Y=e=>{const t={};for(const i in e){const r=e[i];t[i]=r.length?r[0].stride:0}return t},K=new Map,W=(e,t)=>{if(!K.has(e)){const i=X(t),r={strides:Y(i),bufferLayouts:i,attributes:Z(t)};K.set(e,r)}return K.get(e)};function $(e){e(s["d"].FILL),e(s["d"].LINE),e(s["d"].MARKER),e(s["d"].TEXT),e(s["d"].LABEL)}const J=e=>"path"in e&&he(e.path),Q=e=>"url"in e&&e.url||"imageData"in e&&e.imageData,ee=e=>"imageData"in e&&e.imageData&&"contentType"in e&&e.contentType?`data:${e.contentType};base64,${e.imageData}`:"url"in e?e.url:null,te=e=>"url"in e&&e.url&&e.url.includes(".gif")||"contentType"in e&&"image/gif"===e.contentType||"imageData"in e&&e.imageData.includes("data:image/gif"),ie=e=>"url"in e&&e.url&&e.url.includes(".png")||"contentType"in e&&"image/png"===e.contentType||"imageData"in e&&e.imageData.includes("data:image/png"),re=e=>e.type&&-1!==e.type.toLowerCase().indexOf("3d");function ne(e){switch(e.type){case"line":{const t=e;return"CIMSolidStroke"===t.cim.type&&!t.dashTemplate}case"fill":return"CIMSolidFill"===e.cim.type;case"esriSFS":return"esriSFSSolid"===e.style||"esriSFSNull"===e.style;case"esriSLS":return"esriSLSSolid"===e.style||"esriSLSNull"===e.style;default:return!1}}const se=e=>e.includes("data:image/svg+xml");function ae(e){switch("cim"in e?e.cim.type:e.type){case"esriSMS":case"esriPMS":case"CIMPointSymbol":case"CIMVectorMarker":case"CIMPictureMarker":case"CIMCharacterMarker":return!1;default:return!0}}function oe(e){const t="maxVVSize"in e&&e.maxVVSize,i="width"in e&&e.width||"size"in e&&e.size||0;return t||i}function ce(e){const t=[];for(let i=0;i<e.length;i++)t.push(e.charCodeAt(i));return t}const he=e=>!!e&&(e=e.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(e)&&/[\dz]$/i.test(e)&&e.length>4))},d114:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return n}));const r=new Float32Array(1);new Uint32Array(r.buffer);function n(e){return[255&e,(65280&e)>>>8,(16711680&e)>>>16,(4278190080&e)>>>24]}function s(e,t){return 65535&e|t<<16}function a(e,t,i,r){return 255&e|(255&t)<<8|(255&i)<<16|r<<24}},d86a:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return u}));var r=i("a4ee"),n=(i("e92d"),i("cea0"),i("b50f"),i("c120"),i("2dd4"),i("d386")),s=(i("7ce4"),i("d267")),a=(i("1956"),i("d17d"),i("9f8b"),i("a1ff"),i("0fa6"),i("9a02"));class o extends a["a"]{constructor(){super(...arguments),this._lastWidth=0,this._lastHeight=0,this.requiresDedicatedFBO=!1}dispose(){this._renderTarget&&(this._renderTarget.dispose(),this._renderTarget=null)}doRender(e){const t=this.createRenderParams(e),{context:i,painter:r,profiler:n}=t;this._prevFBO=i.getBoundFramebufferObject(),n.recordContainerStart(this.name);const s=this._getFbo(t),a=r.getRenderTarget();i.bindFramebuffer(s),r.setRenderTarget(s),i.setDepthWriteEnabled(!0),i.setColorMask(!0,!0,!0,!0),i.setClearColor(0,0,0,0),i.setClearDepth(1),i.clear(i.gl.COLOR_BUFFER_BIT|i.gl.DEPTH_BUFFER_BIT),i.setDepthWriteEnabled(!1);for(const o of this.children)o.beforeRender(e);for(const o of this.children)o.processRender(t);for(const o of this.children)o.afterRender(e);r.setRenderTarget(a),i.bindFramebuffer(this._prevFBO),r.beforeRenderLayer(t,this._clippingInfos?255:0,this.computedOpacity),i.setStencilTestEnabled(!1),i.setStencilWriteMask(0),r.blitTexture(i,s.colorTexture,9728),r.compositeLayer(t,this.computedOpacity),n.recordContainerEnd()}createRenderParams(e){return{...super.createRenderParams(e),blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:1}}_getFbo(e){const{context:t,painter:i}=e,{width:r,height:n}=t.getViewport();if(r!==this._lastWidth||n!==this._lastHeight)if(this._lastWidth=r,this._lastHeight=n,this._renderTarget)this._renderTarget.resize(r,n);else{const e={target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:r,height:n},a={colorTarget:0,depthStencilTarget:3};this._renderTarget=new s["a"](t,a,e,i.getSharedStencilBuffer())}return this._renderTarget}}var c=i("566d"),h=i("4d38");let d=class extends(Object(c["a"])(h["default"])){constructor(){super(...arguments),this.container=new o}attach(){this._updateStageChildren(),this.handles.add(this.layerViews.on("after-changes",()=>this._updateStageChildren()),"grouplayerview2d")}detach(){this.handles.remove("grouplayerview2d"),this.container.removeAllChildren()}update(e){}moveStart(){}viewChange(){}moveEnd(){}_updateStageChildren(){this.container.removeAllChildren(),this.layerViews.forEach((e,t)=>this.container.addChildAt(e.container,t))}};d=Object(r["a"])([Object(n["a"])("esri.views.2d.layers.GroupLayerView2D")],d);const u=d}}]);
//# sourceMappingURL=chunk-9da44b54.372852c9.js.map