(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ced22"],{"60a3":function(e,t,a){"use strict";a.r(t),a.d(t,"previewSymbol2D",(function(){return L}));var l=a("9ef0"),n=a("ce50"),c=a("a915"),s=a("cdd0"),o=a("2003"),i=a("4bad");const u="picture-fill",r="picture-marker",m="simple-fill",h="simple-line",p="simple-marker",d="text",f="Aa",v=22,y=120,b=80,w=40,g=document.createElement("canvas");function M(e,t){const a=g.getContext("2d"),l=[];return t&&(t.weight&&l.push(t.weight),t.size&&l.push(t.size+"px"),t.family&&l.push(t.family)),a.font=l.join(" "),a.measureText(e).width}const k=7.2/2.54,j=72/2.54;function x(e){if(0===e.length)return 0;if(e.length>2){const t=Object(c["d"])(1),a=parseFloat(e);switch(e.slice(-2)){case"px":return a;case"pt":return a*t;case"in":return 72*a*t;case"pc":return 12*a*t;case"mm":return a*k*t;case"cm":return a*j*t}}return parseFloat(e)}function L(e,t){var a,g;const k=null!=(null==t?void 0:t.size)?Object(c["c"])(t.size):null,j=null!=(null==t?void 0:t.maxSize)?Object(c["c"])(t.maxSize):null,L=null!=(null==t?void 0:t.opacity)?t.opacity:null,O=null!=(null==t?void 0:t.rotation)?t.rotation:"angle"in e?e.angle:null,z=Object(s["c"])(e);let C=Object(s["e"])(e);if(z&&!C){const e="type"in z?null:new l["a"](z);"#ffffff"===(e?e.toHex():null)&&(C={color:"#bdc3c7",width:.75})}const F={shape:null,fill:null,stroke:C,offset:[0,0]};null!=(a=C)&&a.width&&(C.width=Math.min(C.width,b));const S=(null==(g=C)?void 0:g.width)||0;let P=null!=k&&(null==(null==t?void 0:t.scale)||(null==t?void 0:t.scale)),q=0,E=0,Z=!1;switch(e.type){case p:{const t=e.style,a=Math.min(null!=k?k:Object(c["c"])(e.size),j||y);switch(q=a,E=a,t){case"circle":F.shape={type:"circle",cx:0,cy:0,r:.5*a},P||(q+=S,E+=S);break;case"cross":F.shape={type:"path",path:[{command:"M",values:[0,.5*E]},{command:"L",values:[q,.5*E]},{command:"M",values:[.5*q,0]},{command:"L",values:[.5*q,E]}]};break;case"diamond":F.shape={type:"path",path:[{command:"M",values:[0,.5*E]},{command:"L",values:[.5*q,0]},{command:"L",values:[q,.5*E]},{command:"L",values:[.5*q,E]},{command:"Z",values:[]}]},P||(q+=S,E+=S);break;case"square":F.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[q,0]},{command:"L",values:[q,E]},{command:"L",values:[0,E]},{command:"Z",values:[]}]},P||(q+=S,E+=S),O&&(Z=!0);break;case"triangle":F.shape={type:"path",path:[{command:"M",values:[.5*q,0]},{command:"L",values:[q,E]},{command:"L",values:[0,E]},{command:"Z",values:[]}]},P||(q+=S,E+=S),O&&(Z=!0);break;case"x":F.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[q,E]},{command:"M",values:[q,0]},{command:"L",values:[0,E]}]},O&&(Z=!0);break;case"path":F.shape={type:"path",path:e.path||""},P||(q+=S,E+=S),O&&(Z=!0),P=!0}break}case h:{const e=Math.min(null!=k?k:S,j||b),t=e>v?2*e:w;C.width=e,q=t,E=e,F.shape={type:"path",path:[{command:"M",values:[0,E]},{command:"L",values:[q,E]}]};break}case u:case m:q=Math.min(null!=k?k:v,j||y)+S,E=q,P=!0,F.shape="object"==typeof(null==t?void 0:t.symbolConfig)&&null!=t&&t.symbolConfig.isSquareFill?o["l"].squareFill[0]:o["l"].fill[0];break;case r:{let t=Object(c["c"])(e.width),a=Object(c["c"])(e.height);const l=null!=k?k:Math.max(t,a),n=t/a;t=n<=1?Math.ceil(l*n):l,a=n<=1?l:Math.ceil(l/n),q=Math.min(t,j||y),E=Math.min(a,j||y),F.shape={type:"image",x:-Math.round(q/2),y:-Math.round(E/2),width:q,height:E,src:e.url||""},O&&(Z=!0);break}case d:{const t=e,a=t.text||f,l=t.font,n=Math.min(null!=k?k:Object(c["c"])(l.size),j||y),s=M(a,{weight:l.weight,size:n,family:l.family}),o=/[\uE600-\uE6FF]/.test(a);q=o?n:s,E=n;let i=.25*x((l?n:0).toString());o&&(i+=5),F.shape={type:"text",text:a,x:0,y:i,align:"middle",decoration:l&&l.decoration,rotated:t.rotated,kerning:t.kerning},F.font=l&&{size:n,style:l.style,decoration:l.decoration,weight:l.weight,family:l.family};break}}if(!F.shape)return Promise.reject(new n["a"]("symbolPreview: renderPreviewHTML2D","symbol not supported."));const D=z,H=e.color;let J=null;return D&&"pattern"===D.type&&H&&e.type!==u?J=Object(s["d"])(D.src,H.toCss(!0)).then(e=>(D.src=e,F.fill=D,F)):(F.fill=z,J=Promise.resolve(F)),J.then(e=>{const a=[[e]];if("object"==typeof(null==t?void 0:t.symbolConfig)&&null!=t&&t.symbolConfig.applyColorModulation){const t=.6*q;a.unshift([{...e,offset:[-t,0],fill:Object(o["a"])(z,-.3)}]),a.push([{...e,offset:[t,0],fill:Object(o["a"])(z,.3)}]),q+=2*t}return Object(i["a"])(a,[q,E],{node:t&&t.node,scale:P,opacity:L,rotation:O,useRotationSize:Z,effectView:null==t?void 0:t.effectView})})}}}]);