{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/views/3d/layers/ImageryTileLayerView3D.js","webpack:///./node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","webpack:///./node_modules/@arcgis/core/views/layers/RefreshableLayerView.js","webpack:///./node_modules/@arcgis/core/views/layers/ImageryTileLayerView.js","webpack:///./node_modules/@arcgis/core/views/layers/support/popupUtils.js","webpack:///./node_modules/@arcgis/core/layers/support/rasterFunctions/rasterProjectionHelper.js","webpack:///./node_modules/@arcgis/core/views/support/drapedUtils.js"],"names":["c","super","arguments","this","type","isAlignedMapTile","layer","increaseRasterJobHandlerUsage","e","updateFullExtent","addResolvingPromise","r","view","then","basemapTerrain","tilingScheme","tileInfo","t","indexOf","format","compatibleWith","i","toTileInfo","_set","updatingHandles","add","refresh","decreaseRasterJobHandlerUsage","document","createElement","getContext","size","width","height","clearRect","getImageData","lods","scale","length","levelRangeFromScaleRange","s","a","l","o","_canSymbolizeInWebGL","m","requestRawData","signal","requestAsImageElement","d","fetchTile","HTMLImageElement","h","pixelBlock","_blankTile","applyRenderer","p","symbolizerRenderer","symbolizer","rendererJSON","symbolizerParameters","generateWebGLParameters","_getSymbolizerOptions","transformGrid","isRendereredSource","interpolation","bandIds","lodAt","resolution","isGCS","spatialReference","isGeographic","x","y","JSON","stringify","lij","emit","suspended","supportsTextureFloat","canRenderInWebGL","readOnly","prototype","g","xoffset","Math","max","abs","yoffset","n","stops","filter","map","maxSize","minSize","f","floor","renderer","event","pointerType","visualVariables","symbol","uniqueValueInfos","forEach","classBreakInfos","handles","doRefresh","dataChanged","catch","getLogger","declaredClass","error","_rasterFieldPrefix","fullExtent","datumTransformation","dynamicRangeAdjustment","Promise","reject","popupEnabled","popupTemplate","value","u","magdirValue","identify","timeExtent","hasStandardTime","getStandardTimeValue","join","ObjectId","_formatAttributeValue","rasterInfo","attributeTable","features","attributes","Value","VALUE","String","hasOwnProperty","dataType","clone","sourceLayer","push","resolve","fieldInfos","_getFieldInfo","trim","_formatDelimitedString","_formatNumberFromString","toLowerCase","some","fieldName","replace","split","Number","isNaN","async","getRequiredFields","fieldsIndex","lastEditInfoEnabled","objectIdField","typeIdField","globalIdField","relationships","includes","has","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate","cols","rows","3395","3410","3857","3975","4087","4088","6933","32662","53001","53002","53003","53004","53016","53017","53034","53079","53080","54001","54002","54003","54004","54016","54017","54034","54079","54080","54100","54101","M","w","R","equals","center","xmin","xmax","ymin","ymax","b","v","C","N","z","P","min","j","G","normalize","S","isWebMercator","apply","wkid","W","T","storageInfo","origin","originX","halfWorldWidth","pyramidsInfo","nativePixelSize","extent","maximumPyramidLevel","blockWidth","pyramidScalingFactor","transform","ceil","round","resolutionX","datsetColumnCount","worldColumnCountFromOrigin","leftMargin","rightPadding","originColumnOffset","hasGCSSShiftTransform","L","isAdaptive","spacing","k","offsets","outofBoundPointCount","coefficients","I","projectedExtent","srcBufferExtent","pixelSize","rasterTransform","hasWrapAround","inverseTransform","NaN","Float32Array","q","A","pyramidResolutions","pyramidLevel","pyramidResolution","excessiveReading","log","LN2","F","projectedPixelSize","scales","srcResolutions","isCustomTilingScheme","overlayPixelSizeInMapUnits","basemapSpatialReference"],"mappings":"gHAAA,+OAI43B,IAAIA,EAAE,cAAc,cAAD,CAAG,eAAE,eAAE,eAAE,YAAO,cAAcC,SAASC,WAAWC,KAAKC,KAAK,kBAAkBD,KAAKE,kBAAiB,EAAG,aAAaF,KAAKG,MAAMC,gCAAgC,MAAMC,EAAEL,KAAKM,mBAAmBN,KAAKO,oBAAoBF,GAAG,MAAMG,EAAE,eAAER,KAAKS,KAAK,qCAAqCC,KAAK,KAAM,MAAML,EAAEL,KAAKS,KAAKE,eAAeC,cAAcC,SAASL,GAAGR,KAAKG,MAAMW,EAAE,CAAC,MAAM,QAAQ,QAAQ,MAAM,SAASC,QAAQP,EAAEQ,SAAS,GAAGX,EAAEY,eAAeT,GAAGR,KAAKE,iBAAiBY,EAAE,MAAMI,EAAEJ,EAAEN,EAAEH,EAAEc,aAAanB,KAAKoB,KAAK,WAAWF,GAAGlB,KAAKqB,gBAAgBC,IAAItB,KAAK,iBAAiB,IAAKA,KAAKuB,WAAYvB,KAAKqB,gBAAgBC,IAAItB,KAAK,sBAAsB,IAAKA,KAAKuB,WAAYvB,KAAKqB,gBAAgBC,IAAItB,KAAK,gBAAgB,IAAKA,KAAKuB,WAAYvB,KAAKqB,gBAAgBC,IAAItB,KAAK,mCAAmC,IAAKA,KAAKuB,aAAevB,KAAKO,oBAAoBC,GAAG,UAAUR,KAAKG,MAAMqB,gCAAgCxB,KAAKS,KAAK,KAAK,iBAAiB,MAAMJ,EAAEoB,SAASC,cAAc,UAAUlB,EAAEH,EAAEsB,WAAW,OAAOb,EAAEI,GAAGlB,KAAKa,SAASe,KAAK,OAAOvB,EAAEwB,MAAMf,EAAET,EAAEyB,OAAOZ,EAAEV,EAAEuB,UAAU,EAAE,EAAEjB,EAAEI,GAAGV,EAAEwB,aAAa,EAAE,EAAElB,EAAEI,GAAG,0BAA0B,MAAM,QAAQlB,KAAKG,MAAMU,SAASG,OAAO,2BAA2B,MAAM,UAAUhB,KAAKG,MAAMU,SAASG,OAAO,qBAAqB,MAAMX,EAAEL,KAAKa,SAASoB,KAAKzB,EAAER,KAAKG,MAAMU,SAASoB,KAAKnB,EAAET,EAAE,GAAG6B,MAAMhB,EAAEV,EAAEA,EAAE2B,OAAO,GAAGD,MAAM,OAAOlC,KAAKoC,yBAAyBtB,EAAEI,GAAG,gBAAgBb,EAAEa,EAAEmB,EAAEC,GAAG,MAAMC,EAAEvC,KAAKa,SAAS2B,EAAExC,KAAKyC,uBAAuBC,EAAE,CAAC7B,SAAS0B,EAAEI,eAAeH,EAAEI,OAAO,eAAEN,EAAEM,QAAQC,sBAAsB7C,KAAKE,kBAAkB4C,QAAQ9C,KAAKG,MAAM4C,UAAU1C,EAAEa,EAAEmB,EAAEK,GAAG,GAAGI,aAAaE,iBAAiB,OAAOF,EAAE,IAAIG,EAAEH,GAAGA,EAAEI,WAAW,GAAG,eAAED,GAAG,OAAOjD,KAAKmD,WAAW,IAAIX,IAAIS,QAAQjD,KAAKG,MAAMiD,cAAcN,GAAG,eAAEG,IAAI,OAAOjD,KAAKmD,WAAW,MAAME,EAAE,IAAI,OAAE,CAAChD,EAAEa,EAAEmB,GAAGY,EAAEV,EAAEX,KAAK,GAAGW,EAAEX,KAAK,IAAI,OAAOY,GAAGa,EAAEC,mBAAmBtD,KAAKG,MAAMoD,WAAWC,aAAaH,EAAEI,qBAAqBzD,KAAKG,MAAMoD,WAAWG,wBAAwB1D,KAAK2D,sBAAsBtD,IAAIgD,EAAEO,cAAcd,EAAEc,eAAeP,EAAEQ,oBAAmB,EAAGR,EAAES,cAAc9D,KAAKG,MAAM2D,cAAcT,EAAEU,QAAQ/D,KAAKG,MAAM4D,QAAQV,EAAE,sBAAsBhD,GAAG,MAAMG,EAAER,KAAKa,SAASmD,MAAM3D,GAAG4D,WAAW,MAAM,CAACf,WAAW,KAAKgB,MAAMlE,KAAKS,KAAK0D,iBAAiBC,aAAaH,WAAW,CAACI,EAAE7D,EAAE8D,EAAE9D,GAAGuD,QAAQ/D,KAAKG,MAAM4D,SAAS,2BAA2B1D,GAAGL,KAAKyC,wBAAwB8B,KAAKC,UAAUnE,EAAEiD,sBAAsBiB,KAAKC,UAAUxE,KAAKG,MAAMoD,WAAWC,gBAAgBnD,EAAEoD,qBAAqBzD,KAAKG,MAAMoD,WAAWG,wBAAwB1D,KAAK2D,sBAAsBtD,EAAEoE,IAAI,MAAM,sCAAsCpE,EAAEG,GAAG,OAAO,eAAEH,EAAEG,EAAER,KAAKS,MAAM,UAAUT,KAAK0E,KAAK,gBAAgB,kBAAkB1E,KAAK2E,WAAW3E,KAAK0E,KAAK,gBAAgB,uBAAuB,OAAO,iBAAIE,sBAAsB5E,KAAKG,MAAMoD,WAAWsB,mBAAmB,eAAE,CAAC,eAAE,CAACC,UAAS,KAAMjF,EAAEkF,UAAU,aAAa,MAAM,eAAE,CAAC,eAAE,CAACD,UAAS,KAAMjF,EAAEkF,UAAU,sBAAsB,MAAM,eAAE,CAAC,eAAE,CAACD,UAAS,KAAMjF,EAAEkF,UAAU,uBAAuB,MAAM,eAAE,CAAC,eAAE,CAACD,UAAS,KAAMjF,EAAEkF,UAAU,iBAAiB,MAAMlF,EAAE,eAAE,CAAC,eAAE,gDAAgDA,GAAG,MAAMmF,EAAEnF,G,oCCAv6H,SAASiB,EAAEA,EAAET,GAAG,OAAOA,EAAE,YAAYA,GAAGA,EAAE4E,QAAQC,KAAKC,IAAIrE,EAAEoE,KAAKE,IAAI/E,EAAE4E,UAAU,YAAY5E,GAAGA,EAAEgF,QAAQH,KAAKC,IAAIrE,EAAEoE,KAAKE,IAAI/E,EAAEgF,SAAS,IAAIvE,EAAEA,EAAE,SAAST,EAAES,GAAG,IAAIT,EAAE,EAAEiF,EAAE,EAAE,IAAI,IAAI9E,EAAE,EAAEA,EAAEM,EAAEqB,OAAO3B,IAAI,CAAC,MAAM6B,EAAEvB,EAAEN,GAAGoB,KAAK,iBAAiBS,IAAIhC,GAAGgC,EAAEiD,KAAK,OAAOjF,EAAEiF,EAAE,SAASA,EAAExE,EAAEwE,GAAG,MAAM,iBAAiBxE,EAAEA,EAAEA,GAAGA,EAAEyE,OAAOzE,EAAEyE,MAAMpD,OAAO9B,EAAES,EAAEyE,OAAOD,EAAE,SAAS9E,EAAEM,EAAET,GAAG,IAAIA,EAAE,OAAOS,EAAE,MAAMN,EAAEH,EAAEmF,OAAQ1E,GAAG,SAASA,EAAEb,MAAOwF,IAAKpF,IAAI,MAAMqF,QAAQlF,EAAEmF,QAAQtD,GAAGhC,EAAE,OAAOiF,EAAE9E,EAAEM,GAAGwE,EAAEjD,EAAEvB,IAAI,IAAK,IAAIuB,EAAE,EAAE,MAAMG,EAAEhC,EAAE2B,OAAO,GAAG,IAAIK,EAAE,OAAO1B,EAAE,IAAI,IAAIwE,EAAE,EAAEA,EAAE9C,EAAE8C,IAAIjD,GAAG7B,EAAE8E,GAAG,MAAMM,EAAEV,KAAKW,MAAMxD,EAAEG,GAAG,OAAO0C,KAAKC,IAAIS,EAAE9E,GAAG,SAASuB,EAAEhC,GAAG,MAAMiF,EAAEjF,GAAGA,EAAEyF,SAASzD,EAAE,WAAWhC,GAAGA,EAAE0F,OAAO1F,EAAE0F,MAAMC,aAAa,EAAE,EAAE,IAAIV,EAAE,OAAOjD,EAAE,MAAMG,EAAE,oBAAoB8C,EAAE9E,EAAE6B,EAAEiD,EAAEW,iBAAiB5D,EAAE,GAAG,WAAWiD,EAAErF,KAAK,OAAOa,EAAE0B,EAAE8C,EAAEY,QAAQ,GAAG,iBAAiBZ,EAAErF,KAAK,CAAC,IAAII,EAAEmC,EAAE,OAAO8C,EAAEa,iBAAiBC,QAASd,IAAIjF,EAAES,EAAET,EAAEiF,EAAEY,UAAW7F,EAAE,GAAG,iBAAiBiF,EAAErF,KAAK,CAAC,IAAII,EAAEmC,EAAE,OAAO8C,EAAEe,gBAAgBD,QAASd,IAAIjF,EAAES,EAAET,EAAEiF,EAAEY,UAAW7F,EAAE,OAAOiF,EAAErF,KAAKuC,EAJr+B,mC,oCCAA,8IAIgc,MAAMtB,EAAEA,IAAI,IAAIrB,EAAE,cAAcqB,EAAE,aAAalB,KAAKsG,QAAQhF,IAAI,eAAEtB,KAAK,QAAQ,UAAWQ,IAAIR,KAAKuG,UAAU/F,EAAEgG,aAAaC,MAAOjG,IAAI,eAAEA,IAAI,OAAEkG,UAAU1G,KAAK2G,eAAeC,MAAMpG,OAAS,0BAA0B,OAAO,eAAE,CAAC,kBAAKX,EAAEkF,UAAU,aAAQ,GAAQlF,EAAE,eAAE,CAAC,eAAE,4CAA4CA,GAAGA,I,oCCJvvB,kLAI2tB,MAAM6C,EAAEA,IAAI,IAAIkD,EAAE,cAAclD,EAAE,cAAc5C,SAASC,WAAWC,KAAK6G,mBAAmB,UAAU7G,KAAKG,MAAM,KAAKH,KAAKS,KAAK,KAAKT,KAAK8G,WAAW,KAAK9G,KAAKa,SAAS,KAAKb,KAAK+G,oBAAoB,KAAK,uBAAuB,OAAO/G,KAAKG,MAAM2F,UAAU,2BAA2B9F,KAAKG,MAAM2F,UAAU9F,KAAKG,MAAM2F,SAASkB,uBAAuB,yBAAyB3G,EAAEmC,GAAG,MAAMrC,MAAMkC,GAAGrC,KAAK,IAAIK,EAAE,OAAO4G,QAAQC,OAAO,IAAI,OAAE,0CAA0C,gCAAgC,CAAC/G,MAAMkC,KAAK,MAAM8E,aAAa7E,GAAGD,EAAEiD,EAAE,eAAEjD,EAAEG,GAAG,IAAIF,IAAI,eAAEgD,GAAG,MAAM,IAAI,OAAE,0CAA0C,iDAAiD,CAAC6B,aAAa7E,EAAE8E,cAAc9B,IAAI,MAAM/C,EAAE,IAAI8E,MAAMC,EAAEC,YAAY7E,SAASL,EAAEmF,SAASnH,EAAE,CAACoH,WAAWzH,KAAKyH,aAAa,IAAI7B,EAAE,GAAG,GAAG0B,GAAGA,EAAEnF,OAAO,CAAC,IAAItC,EAAEoD,EAAE2C,EAAE,iBAAiBvD,EAAEpC,MAAMoC,EAAEqF,mBAAmB,MAAMJ,EAAE,GAAGA,EAAE7B,IAAKpF,GAAGgC,EAAEsF,qBAAqBtH,IAAKuH,KAAK,MAAMN,EAAEM,KAAK,MAAM,MAAMvH,EAAE,CAACwH,SAAS,GAAGrH,EAAE,2BAA2BH,EAAEG,GAAGR,KAAK8H,sBAAsBlC,EAAEpF,GAAG,MAAMU,EAAE,OAAOrB,EAAEwC,EAAE0F,aAAa,OAAO9E,EAAEpD,EAAEmI,qBAAgB,EAAO/E,EAAEgF,SAAS,GAAG/G,GAAGA,EAAEiB,OAAO,EAAE,CAAC,MAAMrB,EAAEI,EAAEsE,OAAQnF,IAAI,MAAMS,EAAET,EAAE6H,WAAWb,OAAOhH,EAAE6H,WAAWC,OAAO9H,EAAE6H,WAAWE,MAAM,OAAOC,OAAOvH,KAAK8E,IAAK,GAAG9E,EAAEqB,OAAO,EAAE,CAAC,MAAM3B,EAAEM,EAAE,GAAG,GAAGN,EAAE,IAAI,MAAMM,KAAKN,EAAE0H,WAAW,GAAG1H,EAAE0H,WAAWI,eAAexH,GAAG,CAAC,MAAMI,EAAElB,KAAK6G,mBAAmB/F,EAAET,EAAEa,GAAGlB,KAAK8H,sBAAsBtH,EAAE0H,WAAWpH,GAAGI,KAAK,MAAMsB,EAAEH,EAAE0F,WAAWQ,SAAS,kBAAkB/F,GAAG,cAAcA,IAAInC,EAAE,oBAAoB,MAAMqC,OAAE,EAAOA,EAAE,GAAGrC,EAAE,oBAAoB,MAAMqC,OAAE,EAAOA,EAAE,IAAI,MAAMJ,EAAE,IAAI,OAAEtC,KAAK8G,WAAW0B,QAAQ,KAAKnI,GAAGiC,EAAEnC,MAAMkC,EAAEC,EAAEmG,YAAYnG,EAAEnC,MAAMoC,EAAEmG,KAAKpG,GAAG,OAAOC,EAAE,mBAAmB,MAAMlC,EAAEL,KAAKG,MAAMU,SAAS,IAAKR,IAAGA,EAAE8D,iBAAkB,OAAO8C,QAAQC,OAAO,IAAI,OAAE,uCAAuC,+CAA+C,CAAC/G,MAAMH,KAAKG,SAAS,GAAG,eAAEH,KAAKG,MAAM2G,YAAY,OAAOG,QAAQC,OAAO,IAAI,OAAE,2BAA2B,2CAA2C,CAAC/G,MAAMH,KAAKG,SAAS,MAAMW,EAAE,eAAEd,KAAKG,MAAM2G,WAAW9G,KAAKS,KAAK0D,kBAAiB,GAAIjD,EAAE,eAAElB,KAAKG,MAAM2G,WAAW9G,KAAKS,KAAK0D,iBAAiBrD,GAAG,OAAO,MAAMI,EAAE+F,QAAQC,OAAO,IAAI,OAAE,qCAAqC,uEAAuE,CAAC/G,MAAMH,KAAKG,UAAUH,KAAKoB,KAAK,aAAaF,GAAGlB,KAAK+G,sBAAsB/G,KAAK+G,oBAAoB,eAAE/G,KAAKG,MAAM2G,WAAW9G,KAAKS,KAAK0D,kBAAiB,IAAK8C,QAAQ0B,WAAW,sBAAsBtI,EAAES,GAAG,GAAG,iBAAiBT,EAAE,CAAC,MAAMG,EAAER,KAAKG,MAAMiH,eAAepH,KAAKG,MAAMiH,cAAcwB,WAAW1H,EAAElB,KAAK6I,cAAcrI,EAAEM,GAAG0B,EAAEtB,GAAGA,EAAEF,OAAO,GAAGwB,EAAE,CAAC,IAAI1B,EAAEN,EAAE,OAAOH,EAAEyI,OAAO/H,QAAQ,MAAM,GAAGD,EAAE,IAAIN,EAAEM,EAAE,IAAId,KAAK+I,uBAAuB1I,EAAES,EAAEN,EAAEgC,IAAInC,EAAEyI,OAAO/H,QAAQ,MAAM,GAAGD,EAAEN,EAAE,IAAIR,KAAK+I,uBAAuB1I,EAAES,EAAEN,EAAEgC,IAAIxC,KAAKgJ,wBAAwB3I,EAAEmC,IAAI,OAAOnC,EAAE,cAAcA,EAAES,GAAG,IAAIT,IAAIA,EAAE8B,SAASrB,EAAE,OAAO,MAAMN,EAAEM,EAAEmI,cAAc,IAAI/H,EAAE,OAAOb,EAAE6I,KAAM7I,MAAMA,EAAE8I,WAAW9I,EAAE8I,UAAUF,gBAAgBzI,GAAGH,EAAE8I,UAAUF,gBAAgBzI,EAAE4I,QAAQ,KAAK,QAAQlI,EAAEb,GAAE,IAAMa,EAAE,uBAAuBb,EAAES,EAAEN,EAAEU,GAAG,OAAOb,GAAGS,GAAGN,GAAGU,EAAEb,EAAEyI,OAAOO,MAAMvI,GAAG2E,IAAKpF,GAAGL,KAAKgJ,wBAAwB3I,EAAEa,IAAK0G,KAAKpH,GAAGH,EAAE,wBAAwBA,EAAES,GAAG,IAAIT,IAAIS,EAAE,OAAOT,EAAE,MAAMG,EAAE8I,OAAOjJ,GAAG,OAAOkJ,MAAM/I,GAAGH,EAAES,EAAEE,OAAOR,KAAK,OAAO,eAAE,CAAC,kBAAKoF,EAAEb,UAAU,aAAQ,GAAQ,eAAE,CAAC,eAAE,SAAIa,EAAEb,UAAU,kBAAa,GAAQ,eAAE,CAAC,kBAAKa,EAAEb,UAAU,YAAO,GAAQ,eAAE,CAAC,kBAAKa,EAAEb,UAAU,kBAAa,GAAQ,eAAE,CAAC,kBAAKa,EAAEb,UAAU,gBAAW,GAAQ,eAAE,CAAC,eAAE,CAACD,UAAS,KAAMc,EAAEb,UAAU,mBAAmB,MAAMa,EAAE,eAAE,CAAC,eAAE,2CAA2CA,GAAGA,I,kCCJ9sI,gGAI4I4D,eAAe1I,EAAEA,EAAEgC,EAAEhC,EAAEsG,eAAe,IAAI,eAAEtE,GAAG,MAAM,GAAG,MAAM5B,QAAQ4B,EAAE2G,kBAAkB3I,EAAE4I,cAAcC,oBAAoBrE,GAAGxC,GAAG8G,cAAcvH,EAAEwH,YAAYvH,EAAEwH,cAActH,EAAEuH,cAAczC,GAAGxG,EAAE,GAAGI,EAAE8I,SAAS,KAAK,MAAM,CAAC,KAAK,MAAMpE,EAAEN,QAAQ,eAAExE,GAAG,GAAGN,EAAE,eAAEM,EAAE4I,YAAY,IAAIxI,KAAK0E,IAAI,OAAOtD,GAAG9B,EAAEkI,KAAKpG,GAAG9B,GAAG6B,GAAGvB,EAAE4I,YAAYO,IAAI5H,KAAK,IAAI7B,EAAEO,QAAQsB,IAAI7B,EAAEkI,KAAKrG,GAAG7B,GAAGgC,GAAG1B,EAAE4I,YAAYO,IAAIzH,KAAK,IAAIhC,EAAEO,QAAQyB,IAAIhC,EAAEkI,KAAKlG,GAAG8E,GAAGA,EAAElB,QAAS/F,IAAI,MAAM6J,SAAS7G,GAAGhD,EAAEG,GAAG6C,GAAGvC,EAAE4I,YAAYO,IAAI5G,KAAK,IAAI7C,EAAEO,QAAQsC,IAAI7C,EAAEkI,KAAKrF,KAAM7C,EAAE,SAASsC,EAAEO,EAAEd,GAAG,OAAOc,EAAE+D,cAAc/D,EAAE+D,cAAc,eAAE7E,IAAIA,EAAE4H,6BAA6B,eAAE9G,EAAE+G,sBAAsB/G,EAAE+G,qBAAqB,O,kCCJ9xB,ghBAI6Z,MAAMxE,EAAE,KAAK,SAASvB,EAAEhE,EAAEiF,EAAExE,GAAG,OAAO,eAAET,EAAEiF,EAAExE,GAAG,SAAS4B,EAAE4C,EAAExE,EAAE0B,GAAG,MAAMtB,EAAEmD,EAAEiB,EAAExE,EAAE0B,GAAG,GAAGtB,IAAI,iBAAI,MAAM,IAAI,OAAE,iCAAiC,mCAAmC,OAAOA,EAAE,MAAMmC,EAAE,SAAShD,EAAEiF,EAAExE,GAAG,MAAM0B,GAAGnC,EAAE,GAAGA,EAAE,GAAGA,EAAE,EAAEiF,EAAE+E,MAAMhK,EAAE,EAAEiF,EAAE+E,KAAK,IAAI,EAAEnJ,GAAGb,EAAE,GAAGA,EAAE,GAAGA,EAAE,EAAEiF,EAAEgF,KAAK,GAAGjK,EAAE,EAAEiF,EAAEgF,KAAK,IAAI,EAAEhI,GAAGjC,EAAE,EAAEiF,EAAE+E,MAAMhK,EAAE,GAAGA,EAAE,EAAEiF,EAAE+E,KAAK,GAAGhK,EAAE,IAAIS,EAAE,GAAG,GAAGN,GAAGH,EAAE,EAAEiF,EAAE+E,KAAK,GAAGhK,EAAE,GAAGA,EAAE,EAAEiF,EAAE+E,KAAK,GAAGhK,EAAE,IAAIS,EAAE,GAAG,GAAG,MAAM,CAAC,IAAIwB,GAAGiH,MAAMjH,GAAG,EAAE4C,KAAKE,IAAI5C,EAAEnC,EAAE,EAAEiF,EAAEgF,KAAK,IAAIpF,KAAKE,IAAI9C,GAAG,IAAI9B,GAAG+I,MAAM/I,GAAG,EAAE0E,KAAKE,IAAIlE,EAAEb,EAAE,EAAEiF,EAAEgF,KAAK,IAAIpF,KAAKE,IAAI5E,KAAKyC,EAAE,CAACsH,KAAK,mBAAmBC,KAAK,mBAAmBC,KAAK,mBAAmBC,KAAK,mBAAmBC,KAAK,mBAAmBC,KAAK,mBAAmBC,KAAK,mBAAmBC,MAAM,mBAAmBC,MAAM,kBAAkBC,MAAM,kBAAkBC,MAAM,kBAAkBC,MAAM,kBAAkBC,MAAM,mBAAmBC,MAAM,mBAAmBC,MAAM,kBAAkBC,MAAM,mBAAmBC,MAAM,mBAAmBC,MAAM,mBAAmBC,MAAM,mBAAmBC,MAAM,mBAAmBC,MAAM,mBAAmBC,MAAM,mBAAmBC,MAAM,kBAAkBC,MAAM,mBAAmBC,MAAM,mBAAmBC,MAAM,mBAAmBC,MAAM,mBAAmBC,MAAM,oBAAoB5H,EAAE,GAAG6H,EAAE,EAAEnH,EAAEmH,EAAE3C,eAAe1G,IAAI,GAAG,iBAAI,OAAO,WAAW,iBAAI,SAASsJ,EAAE/L,EAAEiF,EAAExE,GAAG,OAAI4B,EAAErC,EAAE8D,iBAAiBmB,GAAsBxE,EAAE,eAAEwE,EAAEjF,EAAE8D,iBAAiB9D,GAAG,eAAEA,EAAE8D,iBAAiBmB,EAAEjF,GAA/D,KAAkE,SAASgM,EAAEhM,EAAES,EAAE0B,EAAEtB,EAAE,MAAM,GAAGb,EAAE8D,iBAAiBmI,OAAOxL,GAAG,OAAOT,EAAEqC,EAAErC,EAAE8D,iBAAiBrD,EAAEI,GAAG,MAAMoB,EAAEE,EAAE+J,OAAO/L,EAAE,IAAI,OAAE,CAACgM,KAAKlK,EAAE+B,EAAEhE,EAAEgE,EAAE,EAAEoI,KAAKnK,EAAE+B,EAAEhE,EAAEgE,EAAE,EAAEqI,KAAKpK,EAAEgC,EAAEjE,EAAEiE,EAAE,EAAEqI,KAAKrK,EAAEgC,EAAEjE,EAAEiE,EAAE,EAAEH,iBAAiB9D,EAAE8D,mBAAmB9B,EAAE,eAAE7B,EAAEM,EAAEI,GAAG,OAAG,eAAEmB,GAAU,KAAW,CAACgC,EAAEhC,EAAEoK,KAAKpK,EAAEmK,KAAKlI,EAAEjC,EAAEsK,KAAKtK,EAAEqK,MAAM,SAASE,EAAEvM,EAAEiF,EAAE,KAAK,OAAO,eAAEjF,GAAGiF,EAAE,eAAEjF,GAAG,EAAE,SAASwM,EAAExM,EAAEiF,EAAExE,EAAE,KAAK0B,GAAE,GAAI,MAAMtB,EAAEb,EAAE8D,iBAAiB,GAAGjD,EAAEoL,OAAOhH,GAAG,OAAOjF,EAAEqC,EAAExB,EAAEoE,EAAExE,GAAG,MAAMwB,EAAE,eAAEjC,EAAEiF,EAAExE,GAAG,GAAG0B,GAAG8C,EAAElB,aAAa,CAAC,MAAMkB,EAAExE,GAAGgM,EAAE5L,GAAE,GAAIsB,EAAEoK,EAAE1L,GAAGsB,GAAG,MAAM8C,GAAG,MAAMxE,IAAIoE,KAAKE,IAAI/E,EAAEgE,EAAEiB,GAAG9C,GAAG0C,KAAKE,IAAI,IAAI9C,EAAE+B,GAAGuB,EAAEtD,EAAE+B,GAAG,IAAIa,KAAKE,IAAI/E,EAAEgE,EAAEvD,GAAG0B,GAAG0C,KAAKE,IAAI,IAAI9C,EAAE+B,GAAGuB,IAAItD,EAAE+B,GAAG,MAAM,OAAO/B,EAAE,SAASyK,EAAE1M,EAAEiF,EAAExE,EAAE,MAAM,MAAM0B,EAAEnC,EAAE,GAAG8D,iBAAiB,OAAO3B,EAAE8J,OAAOhH,GAAGjF,GAAGqC,EAAEF,EAAE8C,EAAExE,GAAG,eAAET,EAAEiF,EAAExE,IAAI,SAASkM,EAAE3M,GAAG,MAAMiF,EAAE2H,EAAE5M,EAAE,GAAG8D,kBAAkB,GAAG9D,EAAE8B,OAAO,IAAI,eAAEmD,GAAG,OAAOjF,EAAE,GAAG,IAAImM,KAAKhK,EAAEiK,KAAKvL,EAAEwL,KAAKpK,EAAEqK,KAAKnM,GAAGH,EAAE,GAAG,IAAI,IAAIS,EAAE,EAAEA,EAAET,EAAE8B,OAAOrB,IAAI,CAAC,MAAM0B,EAAEnC,EAAES,GAAGI,EAAEsB,EAAEiK,KAAKnH,EAAExE,EAAEwB,EAAE4C,KAAKgI,IAAI5K,EAAEE,EAAEkK,MAAMlM,EAAE0E,KAAKC,IAAI3E,EAAEgC,EAAEmK,MAAM,OAAO,IAAI,OAAE,CAACH,KAAKhK,EAAEiK,KAAKvL,EAAEwL,KAAKpK,EAAEqK,KAAKnM,EAAE2D,iBAAiB9D,EAAE,GAAG8D,mBAAmB,SAASgJ,EAAE9M,EAAEiF,EAAE9C,EAAE,KAAKtB,GAAE,GAAI,GAAGb,EAAE8D,iBAAiBmI,OAAOhH,GAAG,OAAOjF,EAAE,MAAMiC,EAAE8K,EAAE/M,GAAGG,EAAEyM,EAAE5M,EAAE8D,kBAAiB,GAAI,OAAI,eAAE3D,IAAI,IAAI8B,EAA2B0K,EAAE3M,EAAEmI,QAAQ6E,YAAY5H,IAAKpF,GAAGiN,EAAEjN,EAAEiF,EAAE9C,EAAEtB,KAA1DoM,EAAEjN,EAAEiF,EAAE9C,EAAEtB,GAAwD,SAASoM,EAAEjN,EAAEiF,EAAExE,EAAE,KAAK0B,GAAE,GAAI,MAAMtB,EAAEb,EAAE8D,iBAAiB,GAAGjD,EAAEoL,OAAOhH,GAAG,OAAOjF,EAAEqC,EAAExB,EAAEoE,EAAExE,GAAG,MAAMwB,EAAE,eAAEjC,EAAEiF,EAAExE,GAAG,IAAIN,EAAE6B,GAAGyK,EAAE5L,GAAE,GAAI,GAAGoB,GAAGE,GAAGtB,EAAEqM,eAAejI,EAAElB,cAAc,MAAM5D,GAAG,MAAM6B,EAAE,CAAC,MAAMG,EAAE,KAAKD,EAAE,IAAI,GAAG2C,KAAKE,IAAI/E,EAAEmM,KAAKhM,GAAGgC,GAAG0C,KAAKE,IAAI/C,EAAEhC,EAAEoM,MAAMlK,GAAG2C,KAAKE,IAAI,IAAI9C,EAAEmK,MAAM7G,EAAE,CAACtD,EAAEkK,MAAM,IAAI,MAAMhK,EAAE,GAAGA,EAAEkG,KAAK,IAAI,OAAErI,EAAEoM,KAAKpM,EAAEqM,KAAKxL,IAAIsB,EAAEkG,KAAK,IAAI,OAAErI,EAAEoM,MAAMpM,EAAEqM,KAAKrM,EAAEsM,MAAM,EAAEzL,IAAIsB,EAAEkG,KAAK,IAAI,OAAErI,EAAEoM,KAAKpM,EAAEsM,KAAKzL,IAAI,MAAMV,EAAEgC,EAAEiD,IAAKpF,GAAGwM,EAAExM,EAAEiF,EAAExE,IAAK0E,OAAQnF,IAAIkJ,MAAM,MAAMlJ,OAAE,EAAOA,EAAEgE,IAAKoB,IAAKpF,GAAGA,EAAEgE,GAAI/B,EAAEmK,KAAKvH,KAAKC,IAAIqI,MAAM,KAAKhN,GAAG,GAAG0E,KAAKE,IAAI/E,EAAEoM,KAAKpK,GAAGG,GAAG0C,KAAKE,IAAI5E,EAAEH,EAAEmM,MAAMjK,GAAG2C,KAAKE,IAAI,IAAI9C,EAAEkK,MAAM5G,EAAE,CAACtD,EAAEmK,KAAK,IAAI,MAAMjK,EAAE,GAAGA,EAAEkG,KAAK,IAAI,OAAErI,EAAEmM,KAAKnM,EAAEqM,KAAKxL,IAAIsB,EAAEkG,KAAK,IAAI,OAAErI,EAAEmM,MAAMnM,EAAEqM,KAAKrM,EAAEsM,MAAM,EAAEzL,IAAIsB,EAAEkG,KAAK,IAAI,OAAErI,EAAEmM,KAAKnM,EAAEsM,KAAKzL,IAAI,MAAMV,EAAEgC,EAAEiD,IAAKpF,GAAGwM,EAAExM,EAAEiF,EAAExE,IAAK0E,OAAQnF,IAAIkJ,MAAM,MAAMlJ,OAAE,EAAOA,EAAEgE,IAAKoB,IAAKpF,GAAGA,EAAEgE,GAAI/B,EAAEkK,KAAKtH,KAAKgI,IAAIM,MAAM,KAAKhN,KAAKA,EAAE6B,GAAGyK,EAAExH,GAAE,GAAI,MAAMzF,EAAE+M,EAAEtH,GAAG,OAAOzF,GAAG,MAAMW,GAAG,MAAM6B,GAAGC,IAAI4C,KAAKE,IAAI9C,EAAEkK,KAAKhM,GAAGX,IAAIyC,EAAEkK,KAAKhM,GAAG0E,KAAKE,IAAI9C,EAAEmK,KAAKpK,GAAGxC,IAAIyC,EAAEmK,KAAKpK,IAAIC,EAAE,SAAS2K,EAAE5M,EAAEiF,GAAE,GAAI,MAAMxE,EAAEwE,EAAE,gBAAgB,mBAAmB,OAAOjF,EAAEkN,cAAc,EAAEzM,EAAET,EAAEoN,MAAMpN,EAAE+D,aAAa,IAAI,EAAEnB,EAAE5C,EAAEoN,OAAO,KAAK,SAASX,EAAEzM,EAAEiF,GAAE,GAAI,MAAM9C,EAAE,GAAGtB,EAAE+L,EAAE5M,EAAEiF,GAAG,OAAO,eAAEpE,KAAKsB,EAAEkG,MAAMxH,EAAE,GAAGsB,EAAEkG,KAAKxH,EAAE,IAAIsB,EAAE,SAASkL,EAAErN,EAAEiF,EAAExE,EAAE0B,GAAG,IAAItB,GAAGb,EAAEiF,GAAGxE,EAAE,OAAOI,EAAEgE,KAAKW,MAAM3E,IAAI,EAAEA,EAAEgE,KAAKW,MAAM3E,GAAGsB,IAAItB,GAAG,GAAGA,EAAE,SAASkM,EAAE/M,EAAEiF,GAAE,GAAI,MAAM9C,EAAEyK,EAAE5M,EAAE8D,kBAAkB,IAAI,eAAE3B,GAAG,OAAO,EAAE,MAAMtB,EAAEoE,EAAE,GAAI9C,EAAE,EAAG,OAAOkL,EAAErN,EAAEoM,KAAKvL,EAAEsB,GAAE,GAAIkL,EAAErN,EAAEmM,KAAKtL,EAAEsB,GAAE,GAAI,SAASmL,EAAEtN,GAAG,MAAMiF,EAAEjF,EAAEuN,YAAYC,OAAOxJ,EAAE7B,EAAEyK,EAAE5M,EAAE8D,kBAAiB,GAAI,IAAI,eAAE3B,GAAG,MAAM,CAACsL,QAAQxI,EAAEyI,eAAe,KAAKC,aAAa,MAAM,MAAM9M,EAAEsB,EAAE,GAAGyL,gBAAgB3L,EAAEsL,YAAYpN,EAAE0N,OAAO7L,GAAGhC,GAAG8N,oBAAoB5L,EAAE6L,WAAWvO,EAAEwO,qBAAqB/G,GAAG9G,EAAE,IAAIoF,EAAEtD,EAAE+B,EAAE,MAAMA,EAAE,GAAG3B,EAAE,eAAErC,EAAEiO,YAAY,cAAcjO,EAAEiO,UAAUrO,KAAKoD,EAAEiC,GAAG5C,EAAE,EAAExB,GAAG+B,EAAEP,EAAEF,EAAE8C,EAAEpE,EAAEoE,EAAE,IAAI,IAAIxE,EAAE,EAAEA,GAAGyB,EAAEzB,IAAI,CAAC,MAAMT,GAAGgC,EAAEoK,KAAKnH,GAAGM,EAAE/F,EAAEiB,EAAET,EAAE6E,KAAKW,MAAMxF,IAAI,EAAEA,EAAE6E,KAAKqJ,KAAKlO,GAAGmC,EAAES,EAAE2C,EAAE/F,EAAEqB,EAAEsB,EAAE0C,KAAKW,MAAMrD,IAAI,EAAEA,EAAE0C,KAAKqJ,KAAK/L,GAAGF,EAAE4C,KAAKW,MAAMxC,EAAEuC,EAAE/F,GAAGW,EAAE0E,KAAKsJ,MAAMnL,EAAEuC,GAAG/F,EAAE0C,GAAG1C,EAAEqF,KAAKsJ,MAAMvL,EAAE2C,GAAG/F,GAAGA,EAAEwE,EAAEqE,KAAK,CAAC+F,YAAY7I,EAAEwI,WAAWvO,EAAE6O,kBAAkB5N,EAAE6N,2BAA2BzN,EAAE0N,WAAWpO,EAAEqO,aAAatM,EAAEuM,mBAAmBxM,IAAIsD,GAAG0B,EAAE,MAAM,CAACwG,QAAQxI,EAAEyI,eAAe7M,EAAE8M,aAAa3J,EAAE0K,sBAAsBrM,GAAG,SAASsM,EAAE3O,GAAG,MAAMiF,EAAEjF,EAAE4O,YAAY,MAAM5O,EAAE6O,QAAQpO,EAAET,EAAE6O,SAAS,CAAC5K,EAAEA,GAAG,IAAI9B,EAAE2M,EAAE9O,GAAGa,EAAE,CAACmJ,KAAK7H,EAAEZ,KAAK,GAAG,EAAE0I,KAAK9H,EAAEZ,KAAK,GAAG,GAAGU,EAAEe,EAAEb,EAAE4M,QAAQlO,EAAEJ,GAAG,MAAMN,GAAG8B,EAAE,GAAGA,EAAE,IAAI,EAAED,EAAEG,EAAE6M,qBAAqB,GAAG7M,EAAE6M,qBAAqB7M,EAAE4M,QAAQjN,OAAO,EAAE,OAAOmD,IAAIjD,GAAG7B,EAAEwE,KAAKxC,EAAE2M,EAAE,IAAI9O,EAAE6O,QAAQ,CAAC/C,EAAEA,KAAKjL,EAAE,CAACmJ,KAAK7H,EAAEZ,KAAK,GAAG,EAAE0I,KAAK9H,EAAEZ,KAAK,GAAG,GAAGU,EAAEe,EAAEb,EAAE4M,QAAQlO,EAAEJ,IAAI0B,EAAEoE,MAAMtE,EAAEE,EAAE8M,aAAaC,EAAE/M,EAAE4M,QAAQlO,EAAEmB,GAAGG,EAAE,SAAS2M,EAAE9O,GAAG,MAAMmP,gBAAgBlK,EAAEmK,gBAAgBjN,EAAEkN,UAAUxO,EAAE6F,oBAAoBzE,EAAEqN,gBAAgBnP,GAAGH,EAAEgC,EAAEiD,EAAEnB,iBAAiB5B,EAAEC,EAAE2B,iBAAiBzB,EAAEL,EAAEE,GAAG,MAAMiK,KAAK3M,EAAE6M,KAAK9G,EAAE6G,KAAKpI,EAAEsI,KAAKtJ,GAAGiC,EAAErC,EAAEgK,EAAE1K,GAAG4J,EAAE9L,EAAEuP,eAAe,eAAe,MAAMpP,OAAE,EAAOA,EAAEP,MAAM+E,EAAE3E,EAAE6O,SAAS,CAAC5K,EAAEA,GAAGxB,EAAE,CAACuB,EAAEW,EAAE,GAAG9D,EAAEmD,EAAEC,EAAEU,EAAE,GAAG9D,EAAEoD,GAAG8H,EAAE,CAAC/B,KAAKnF,KAAKqJ,MAAMlK,EAAExE,GAAGiD,EAAEuB,EAAE,GAAGW,EAAE,IAAI,EAAEsF,KAAKpF,KAAKqJ,MAAMlL,EAAEuC,GAAG9C,EAAEwB,EAAE,GAAGU,EAAE,IAAI,GAAGqH,EAAEvJ,EAAEuB,EAAEuI,EAAE9J,EAAEwB,EAAEuI,EAAE,GAAG,IAAIG,EAAEG,EAAE,EAAE,MAAMG,EAAE,GAAG,IAAI,IAAIxM,EAAE,EAAEA,EAAEsL,EAAE/B,KAAKvJ,IAAI,IAAI,IAAIT,EAAE,EAAEA,EAAE+L,EAAE9B,KAAKjK,IAAIiN,EAAE5E,KAAK,IAAI,OAAE,CAACrE,EAAExE,EAAEwM,EAAEvL,EAAEwD,EAAEjB,EAAEuJ,EAAEvM,EAAE8D,iBAAiB9B,KAAK,MAAMyK,EAAEC,EAAEO,EAAE/K,EAAED,GAAG,IAAI,IAAIgF,EAAE,EAAEA,EAAE8E,EAAE/B,KAAK/C,IAAI,CAAC,MAAMjH,EAAE,GAAG,IAAI,IAAIiF,EAAE,EAAEA,EAAE8G,EAAE9B,KAAKhF,IAAI,CAAC,IAAIpE,EAAE4L,EAAExF,EAAE8E,EAAE9B,KAAKhF,GAAG9E,IAAIU,EAAEV,EAAEqP,iBAAiB3O,IAAIb,EAAEqI,KAAKxH,GAAGoG,EAAE,GAAG6E,GAAGjL,GAAG8L,EAAE1H,IAAI,eAAErC,IAAI/B,EAAEmD,EAAE2I,EAAE1H,GAAGjB,IAAInD,EAAEmD,GAAGpB,GAAG/B,GAAG2L,EAAEnE,MAAMxH,EAAEmD,EAAE7B,EAAEgK,OAAOhK,EAAEiK,KAAKjK,EAAEgK,OAAOK,EAAEnE,MAAMlG,EAAEmK,KAAKzL,EAAEoD,IAAI9B,EAAEmK,KAAKnK,EAAEkK,SAASG,EAAEnE,KAAKoH,KAAKjD,EAAEnE,KAAKoH,KAAK3C,KAAKH,EAAE3M,EAAE,MAAM,CAAC+O,QAAQvC,EAAEjG,MAAM,KAAK0I,aAAa,KAAKD,qBAAqBlC,EAAE+B,QAAQlK,EAAEpD,KAAK,CAACwK,EAAE/B,KAAK,EAAE+B,EAAE9B,KAAK,IAAI,SAASiF,EAAElP,EAAEiF,EAAExE,GAAG,MAAMuJ,KAAK7H,EAAE8H,KAAKpJ,GAAGoE,EAAEhD,EAAE,IAAIyN,cAAcvN,EAAE,IAAItB,EAAE,GAAG,EAAE,GAAGV,EAAE,IAAIuP,aAAa,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,IAAI1N,EAAE,IAAI0N,aAAa,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,IAAI,IAAI,IAAIxN,EAAE,EAAEA,EAAEC,EAAE,EAAED,IAAI,CAAC,IAAI,IAAI+C,EAAE,EAAEA,EAAEpE,EAAE,EAAEoE,IAAI,CAAC,IAAIxE,EAAEyB,EAAErB,EAAE,EAAE,EAAEoE,EAAE,MAAMzF,EAAEQ,EAAES,GAAGwG,EAAEjH,EAAES,EAAE,GAAG8E,EAAEvF,EAAES,EAAE,GAAGuD,EAAEhE,EAAES,EAAE,GAAGA,GAAG,EAAEI,EAAE,MAAMwB,EAAErC,EAAES,GAAGuC,EAAEhD,EAAES,EAAE,GAAGmC,EAAE5C,EAAES,EAAE,GAAGwD,EAAEjE,EAAES,EAAE,GAAG,IAAIqL,EAAE,EAAEnH,EAAE,IAAIM,GAAG9C,EAAE,GAAGD,GAAG,IAAI,IAAIlC,EAAE,EAAEA,EAAE,EAAEA,IAAIiC,EAAE0C,KAAKxE,EAAE2L,KAAKtM,EAAEW,EAAE2L,KAAKvG,EAAEpF,EAAE2L,KAAKlJ,EAAEkJ,EAAE,EAAE,IAAI,IAAI9L,EAAE,EAAEA,EAAE,EAAEA,IAAIiC,EAAE0C,KAAKxE,EAAE2L,KAAK7E,EAAE9G,EAAE2L,KAAK9H,EAAE7D,EAAE2L,KAAK7H,EAAE6H,EAAE,EAAE,IAAI,IAAI9L,EAAE,EAAEA,EAAE,EAAEA,IAAIiC,EAAE0C,KAAK3C,EAAE8J,KAAKtM,EAAEwC,EAAE8J,KAAKzJ,EAAEL,EAAE8J,KAAKlJ,EAAEkJ,EAAE,EAAE,IAAI,IAAI9L,EAAE,EAAEA,EAAE,EAAEA,IAAIiC,EAAE0C,KAAK3C,EAAE8J,KAAK7E,EAAEjF,EAAE8J,KAAK9I,EAAEhB,EAAE8J,KAAK7H,EAAE,GAAGxD,EAAE,IAAI,IAAIT,EAAE,EAAEA,EAAEiC,EAAEH,OAAO9B,IAAIkJ,MAAMjH,EAAEjC,MAAMiC,EAAEjC,IAAI,GAAG,OAAOiC,EAAE,SAAS0N,EAAE3P,GAAG,MAAMiF,EAAEjF,EAAEmI,QAAQ6E,YAAY,OAAO,IAAI/H,EAAEnD,OAAOmD,EAAE,GAAG0H,EAAE1H,GAAG,SAAS2K,EAAE5P,EAAEiF,EAAE9C,GAAG,MAAMoL,YAAY1M,EAAEwO,UAAUpN,GAAGgD,EAAE,IAAI9E,EAAE6B,GAAE,EAAG,MAAM6N,mBAAmB3N,GAAGrB,EAAE,GAAG,eAAEqB,IAAIA,EAAEJ,OAAO,CAAC,MAAMrB,GAAGT,EAAEgE,EAAEhE,EAAEiE,GAAG,EAAEpD,EAAEqB,EAAEA,EAAEJ,OAAO,GAAGtC,GAAGqB,EAAEmD,EAAEnD,EAAEoD,GAAG,EAAEsB,GAAGtD,EAAE+B,EAAE/B,EAAEgC,GAAG,EAAE,GAAGxD,GAAG8E,EAAEpF,EAAE,OAAO,GAAGM,GAAGjB,EAAEW,EAAE+B,EAAEJ,OAAOE,EAAEvB,EAAEjB,EAAE,MAAM,CAAC,IAAIQ,EAAEiF,EAAEM,EAAE,IAAI,IAAI1E,EAAE,EAAEA,GAAGqB,EAAEJ,OAAOjB,IAAI,CAAC,GAAGb,GAAGkC,EAAErB,EAAE,GAAGmD,EAAE9B,EAAErB,EAAE,GAAGoD,GAAG,EAAExD,GAAGT,EAAE,CAACS,IAAIT,EAAEG,EAAEU,EAAE,SAASsB,GAAGhC,EAAEU,EAAE,EAAEmB,EAAEvB,EAAEwE,EAAE,GAAG9E,EAAE,OAAOgC,GAAG1B,EAAEwE,EAAEjF,EAAES,GAAGA,EAAEwE,EAAE,EAAEpE,EAAEA,EAAE,EAAE,MAAMoE,EAAEjF,GAAG,MAAMgE,EAAE,IAAI7D,EAAE8B,EAAEC,EAAE/B,EAAE,GAAG,MAAM,CAAC2P,aAAa3P,EAAE4P,kBAAkB,IAAI,OAAE,CAAC/L,EAAEA,EAAEA,EAAEC,EAAED,EAAEC,EAAEH,iBAAiBmB,EAAEnB,mBAAmBkM,iBAAiBhO,GAAG,MAAMxC,EAAEqF,KAAKoL,IAAIjQ,EAAEgE,EAAE/B,EAAE+B,GAAGa,KAAKqL,IAAI3K,EAAEV,KAAKoL,IAAIjQ,EAAEiE,EAAEhC,EAAEgC,GAAGY,KAAKqL,IAAIlM,EAAEiB,EAAEsI,YAAYO,qBAAqB,EAAE3N,EAAE,SAASgC,EAAE0C,KAAKW,MAAMX,KAAKgI,IAAIrN,EAAE+F,IAAI,OAAOpD,EAAE0C,KAAKqJ,KAAKrJ,KAAKC,IAAItF,EAAE+F,IAAIV,KAAKsJ,OAAO3O,EAAE+F,GAAG,GAAGpF,EAAE,EAAEA,EAAE,EAAEA,EAAE6D,IAAIhC,EAAE7B,EAAE6D,EAAE,EAAE7D,EAAE6D,GAAG,MAAM3B,EAAE,GAAGlC,EAAE,MAAM,CAAC2P,aAAa3P,EAAE4P,kBAAkB,IAAI,OAAE,CAAC/L,EAAE3B,EAAE4C,EAAE2I,gBAAgB5J,EAAEC,EAAE5B,EAAE4C,EAAE2I,gBAAgB3J,EAAEH,iBAAiBmB,EAAEnB,mBAAmBkM,iBAAiBhO,GAAG,SAASmO,EAAEnQ,EAAEiF,EAAExE,EAAE,IAAII,GAAE,GAAI,MAAMgN,OAAO5L,EAAE6B,iBAAiB3D,EAAEkP,UAAUrN,GAAGhC,EAAEkC,EAAE8J,EAAE,IAAI,OAAE,CAAChI,EAAEhC,EAAEgC,EAAEC,EAAEjC,EAAEiC,EAAEH,iBAAiB3D,IAAI8E,EAAEhD,GAAG,GAAG,MAAMC,EAAE,MAAM,CAACkO,mBAAmB,KAAKC,OAAO,KAAKC,eAAe,KAAKC,sBAAqB,GAAI,MAAM/Q,GAAG0C,EAAE8B,EAAE9B,EAAE+B,GAAG,EAAEsB,EAAE,eAAEN,GAAGjB,EAAExE,EAAE+F,EAAE,GAAG,MAAMlD,EAAE4C,EAAElB,aAAa,IAAItD,EAAE,kBAAkB,IAAIA,EAAE,iBAAiB,IAAIuC,EAAE,kBAAkBhD,EAAEkI,UAAU,cAAclI,EAAEkI,SAAS,MAAMtF,EAAEkK,EAAE7K,EAAEgD,GAAGjC,GAAGnC,IAAIoE,EAAElB,cAAckB,EAAEiI,iBAAiBlK,EAAEJ,EAAEuJ,KAAKvJ,EAAEwJ,KAAK,GAAG,IAAInI,EAAE6H,EAAE9H,EAAE,MAAMW,EAAE,MAAM,GAAG3B,EAAE,CAAC8I,EAAEzJ,EAAE,MAAMrC,EAAEiF,EAAElB,aAAa,qBAAqB,mBAAmBtD,EAAET,GAAG,GAAGuF,EAAE,OAAOpD,EAAE8C,EAAElB,aAAa,KAAK,KAAKE,EAAE+H,EAAE,IAAI,OAAE,CAAChI,EAAEhE,EAAEiE,EAAEjE,EAAE8D,iBAAiB,CAACsJ,KAAKjL,KAAKhC,EAAEyC,GAAGqB,EAAED,GAAG8H,EAAErL,EAAEwD,EAAEA,GAAG6H,EAAErL,MAAM,CAACwD,EAAE,CAACD,EAAEhC,EAAEgC,EAAEC,EAAEjC,EAAEiC,GAAG,MAAMgB,EAAEJ,KAAKqJ,KAAKrJ,KAAKoL,IAAIpL,KAAKgI,IAAI7M,EAAEwB,MAAMxB,EAAEyB,QAAQ,IAAIoD,KAAKqL,KAAK,IAAIzP,EAAE,EAAE,KAAKqL,EAAEzJ,GAAGsC,EAAE,IAAIlE,EAAEwE,GAAGxE,IAAIqL,GAAG,EAAE7H,EAAED,GAAG,EAAEC,EAAEA,GAAG,EAAEY,KAAKC,IAAIgH,EAAEzJ,GAAGwC,KAAKgI,IAAIf,EAAEzJ,IAAIsC,IAAImH,EAAEzJ,GAAG,MAAMI,EAAE,CAACqJ,GAAGC,EAAE,CAAC,CAAC/H,EAAEC,EAAED,EAAEC,EAAEA,EAAEA,IAAIsI,EAAE,WAAWC,EAAE3H,KAAKgI,IAAIN,EAAEvI,GAAGW,EAAE,KAAKmH,GAAGU,GAAGV,GAAG,EAAE7H,EAAED,GAAG,EAAEC,EAAEA,GAAG,EAAExB,EAAE4F,KAAKyD,GAAGC,EAAE1D,KAAK,CAACrE,EAAEC,EAAED,EAAEC,EAAEA,EAAEA,IAAI,MAAM,CAACmM,mBAAmBlO,EAAEmO,OAAO5N,EAAE6N,eAAevE,EAAEwE,sBAAsBvN,K,kCCJr5R,gGAI+Q,SAASf,EAAExB,EAAEwE,EAAEhD,EAAEE,EAAE,IAAI,QAAG,IAAIH,EAAE,GAAG,OAAOC,EAAErC,KAAKoC,EAAEiD,EAAEhD,EAAE2B,gBAAgB,GAAG,OAAO3B,EAAErC,KAAK,CAAC,MAAMiB,EAAEoB,EAAEuO,2BAA2B/P,GAAG0B,EAAEF,EAAEwO,wBAAwBzO,EAAE,eAAEG,KAAKA,EAAE8J,OAAOhK,EAAE6B,kBAAkB,eAAE3B,GAAG,eAAEF,EAAE6B,kBAAkBmB,EAAEpE,EAAE,MAAMwB,EAAE5B,EAAEuD,EAAEhC,EAAEgB,EAAEvC,EAAEwD,EAAEjC,EAAExC,EAAEiB,EAAEuD,EAAEhC,EAAEE,EAAEzB,EAAEwD,EAAEjC,GAAG8B,iBAAiByB,GAAGtD,EAAE,OAAOE,EAAEgK,KAAKtH,KAAKgI,IAAIxK,EAAE7C,GAAG2C,EAAEkK,KAAKxH,KAAKgI,IAAI7J,EAAEd,GAAGC,EAAEiK,KAAKvH,KAAKC,IAAIzC,EAAE7C,GAAG2C,EAAEmK,KAAKzH,KAAKC,IAAI9B,EAAEd,GAAGC,EAAE2B,iBAAiByB,EAAEpD,EAAkG,IAAI","file":"js/chunk-dd19b3a0.a71caba5.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{unwrap as r,isNone as t}from\"../../../core/maybe.js\";import{whenTrueOnce as i}from\"../../../core/watchUtils.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerView3D as l}from\"./LayerView3D.js\";import{TiledLayerView3D as o}from\"./TiledLayerView3D.js\";import n from\"../terrain/RasterTile.js\";import{ImageryTileLayerView as m}from\"../../layers/ImageryTileLayerView.js\";import d from\"../../layers/LayerView.js\";import{RefreshableLayerView as h}from\"../../layers/RefreshableLayerView.js\";import{createQueryGeometry as p}from\"../../support/drapedUtils.js\";import y from\"../../webgl/capabilities.js\";let c=class extends(m(h(o(l(d))))){constructor(){super(...arguments),this.type=\"imagery-tile-3d\",this.isAlignedMapTile=!0}initialize(){this.layer.increaseRasterJobHandlerUsage();const e=this.updateFullExtent();this.addResolvingPromise(e);const r=i(this.view,\"basemapTerrain.tilingSchemeLocked\").then((()=>{const e=this.view.basemapTerrain.tilingScheme,{tileInfo:r}=this.layer,t=[\"png\",\"png24\",\"png32\",\"jpg\",\"mixed\"].indexOf(r.format)>-1&&e.compatibleWith(r);this.isAlignedMapTile=t;const i=t?r:e.toTileInfo();this._set(\"tileInfo\",i),this.updatingHandles.add(this,\"layer.renderer\",(()=>this.refresh())),this.updatingHandles.add(this,\"layer.interpolation\",(()=>this.refresh())),this.updatingHandles.add(this,\"layer.bandIds\",(()=>this.refresh())),this.updatingHandles.add(this,\"layer.multidimensionalDefinition\",(()=>this.refresh()))}));this.addResolvingPromise(r)}destroy(){this.layer.decreaseRasterJobHandlerUsage(),this.view=null}get _blankTile(){const e=document.createElement(\"canvas\"),r=e.getContext(\"2d\"),[t,i]=this.tileInfo.size;return e.width=t,e.height=i,r.clearRect(0,0,t,i),r.getImageData(0,0,t,i)}get imageFormatIsOpaque(){return\"jpg\"===this.layer.tileInfo.format}get hasMixedImageFormats(){return\"mixed\"===this.layer.tileInfo.format}get dataLevelRange(){const e=this.tileInfo.lods,r=this.layer.tileInfo.lods,t=e[0].scale,i=r[r.length-1].scale;return this.levelRangeFromScaleRange(t,i)}async fetchTile(e,i,s,a){const l=this.tileInfo,o=this._canSymbolizeInWebGL(),m={tileInfo:l,requestRawData:o,signal:r(a.signal),requestAsImageElement:this.isAlignedMapTile},d=await this.layer.fetchTile(e,i,s,m);if(d instanceof HTMLImageElement)return d;let h=d&&d.pixelBlock;if(t(h))return this._blankTile;if(!o&&(h=await this.layer.applyRenderer(d),t(h)))return this._blankTile;const p=new n([e,i,s],h,l.size[0],l.size[1]);return o?(p.symbolizerRenderer=this.layer.symbolizer.rendererJSON,p.symbolizerParameters=this.layer.symbolizer.generateWebGLParameters(this._getSymbolizerOptions(e)),p.transformGrid=d.transformGrid):p.isRendereredSource=!0,p.interpolation=this.layer.interpolation,p.bandIds=this.layer.bandIds,p}_getSymbolizerOptions(e){const r=this.tileInfo.lodAt(e).resolution;return{pixelBlock:null,isGCS:this.view.spatialReference.isGeographic,resolution:{x:r,y:r},bandIds:this.layer.bandIds}}ensureSymbolizerParameters(e){this._canSymbolizeInWebGL()&&JSON.stringify(e.symbolizerRenderer)!==JSON.stringify(this.layer.symbolizer.rendererJSON)&&(e.symbolizerParameters=this.layer.symbolizer.generateWebGLParameters(this._getSymbolizerOptions(e.lij[0])))}createFetchPopupFeaturesQueryGeometry(e,r){return p(e,r,this.view)}refresh(){this.emit(\"data-changed\")}async doRefresh(){this.suspended||this.emit(\"data-changed\")}_canSymbolizeInWebGL(){return y().supportsTextureFloat&&this.layer.symbolizer.canRenderInWebGL}};e([s({readOnly:!0})],c.prototype,\"_blankTile\",null),e([s({readOnly:!0})],c.prototype,\"imageFormatIsOpaque\",null),e([s({readOnly:!0})],c.prototype,\"hasMixedImageFormats\",null),e([s({readOnly:!0})],c.prototype,\"dataLevelRange\",null),c=e([a(\"esri.views.3d.layers.ImageryTileLayerView3D\")],c);const g=c;export{g as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Logger.js\";import{isAbortError as s}from\"../../core/promiseUtils.js\";import{on as o}from\"../../core/watchUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";const i=i=>{let c=class extends i{initialize(){this.handles.add(o(this,\"layer\",\"refresh\",(r=>{this.doRefresh(r.dataChanged).catch((r=>{s(r)||e.getLogger(this.declaredClass).error(r)}))})),\"RefreshableLayerView\")}};return r([t()],c.prototype,\"layer\",void 0),c=r([a(\"esri.layers.mixins.RefreshableLayerView\")],c),c};export{i as RefreshableLayerView,i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../Graphic.js\";import r from\"../../core/Error.js\";import{isSome as i,isNone as o}from\"../../core/maybe.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as n}from\"../../layers/support/commonProperties.js\";import{getDefaultDatumTransformationForDataset as l,projectExtent as u}from\"../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import{getFetchPopupTemplate as p}from\"./support/popupUtils.js\";const m=m=>{let f=class extends m{constructor(){super(...arguments),this._rasterFieldPrefix=\"Raster.\",this.layer=null,this.view=null,this.fullExtent=null,this.tileInfo=null,this.datumTransformation=null}get hasTilingEffects(){return this.layer.renderer&&\"dynamicRangeAdjustment\"in this.layer.renderer&&this.layer.renderer.dynamicRangeAdjustment}async fetchPopupFeatures(e,o){const{layer:s}=this;if(!e)return Promise.reject(new r(\"imageryTileLayerView:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:s}));const{popupEnabled:a}=s,n=p(s,o);if(!a||!i(n))throw new r(\"imageryTileLayerView:fetchPopupFeatures\",\"Missing required popupTemplate or popupEnabled\",{popupEnabled:a,popupTemplate:n});const l=[],{value:u,magdirValue:m}=await s.identify(e,{timeExtent:this.timeExtent});let f=\"\";if(u&&u.length){var c,h;f=\"imagery-tile\"===s.type&&s.hasStandardTime()&&null!=u[0]?u.map((e=>s.getStandardTimeValue(e))).join(\", \"):u.join(\", \");const e={ObjectId:0},r=\"Raster.ServicePixelValue\";e[r]=this._formatAttributeValue(f,r);const i=null==(c=s.rasterInfo)||null==(h=c.attributeTable)?void 0:h.features;if(i&&i.length>0){const t=i.filter((e=>{const t=e.attributes.value||e.attributes.Value||e.attributes.VALUE;return String(t)===f}));if(t.length>0){const r=t[0];if(r)for(const t in r.attributes)if(r.attributes.hasOwnProperty(t)){const i=this._rasterFieldPrefix+t;e[i]=this._formatAttributeValue(r.attributes[t],i)}}}const o=s.rasterInfo.dataType;\"vector-magdir\"!==o&&\"vector-uv\"!==o||(e[\"Raster.Magnitude\"]=null==m?void 0:m[0],e[\"Raster.Direction\"]=null==m?void 0:m[1]);const a=new t(this.fullExtent.clone(),null,e);a.layer=s,a.sourceLayer=a.layer,l.push(a)}return l}updateFullExtent(){const e=this.layer.tileInfo;if(!(e&&e.spatialReference))return Promise.reject(new r(\"layerview:tiling-information-missing\",\"The layer doesn't provide tiling information\",{layer:this.layer}));if(o(this.layer.fullExtent))return Promise.reject(new r(\"layerview:extent-missing\",\"The layer doesn't provide a full extent.\",{layer:this.layer}));const t=l(this.layer.fullExtent,this.view.spatialReference,!1),i=u(this.layer.fullExtent,this.view.spatialReference,t);return null==i?Promise.reject(new r(\"layerview:projection-not-supported\",\"The layer extent cannot be projected to the view's spatial reference\",{layer:this.layer})):(this._set(\"fullExtent\",i),this.datumTransformation||(this.datumTransformation=l(this.layer.fullExtent,this.view.spatialReference,!0)),Promise.resolve())}_formatAttributeValue(e,t){if(\"string\"==typeof e){const r=this.layer.popupTemplate&&this.layer.popupTemplate.fieldInfos,i=this._getFieldInfo(r,t),o=i&&i.format;if(o){let t,r;return e.trim().indexOf(\",\")>-1?(t=\",\",r=t+\" \",this._formatDelimitedString(e,t,r,o)):e.trim().indexOf(\" \")>-1?(t=r=\" \",this._formatDelimitedString(e,t,r,o)):this._formatNumberFromString(e,o)}}return e}_getFieldInfo(e,t){if(!e||!e.length||!t)return;const r=t.toLowerCase();let i;return e.some((e=>!(!e.fieldName||e.fieldName.toLowerCase()!==r&&e.fieldName.toLowerCase()!==r.replace(/ /g,\"_\"))&&(i=e,!0))),i}_formatDelimitedString(e,t,r,i){return e&&t&&r&&i?e.trim().split(t).map((e=>this._formatNumberFromString(e,i))).join(r):e}_formatNumberFromString(e,t){if(!e||!t)return e;const r=Number(e);return isNaN(r)?e:t.format(r)}};return e([s()],f.prototype,\"layer\",void 0),e([s(n)],f.prototype,\"timeExtent\",void 0),e([s()],f.prototype,\"view\",void 0),e([s()],f.prototype,\"fullExtent\",void 0),e([s()],f.prototype,\"tileInfo\",void 0),e([s({readOnly:!0})],f.prototype,\"hasTilingEffects\",null),f=e([a(\"esri.views.layers.ImageryTileLayerView\")],f),f};export{m as ImageryTileLayerView,m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l}from\"../../../layers/support/fieldUtils.js\";async function t(t,d=t.popupTemplate){if(!e(d))return[];const i=await d.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:n}=d,{objectIdField:s,typeIdField:a,globalIdField:o,relationships:u}=t;if(i.includes(\"*\"))return[\"*\"];const f=n?await p(t):[],r=l(t.fieldsIndex,[...i,...f]);return a&&r.push(a),r&&s&&t.fieldsIndex.has(s)&&-1===r.indexOf(s)&&r.push(s),r&&o&&t.fieldsIndex.has(o)&&-1===r.indexOf(o)&&r.push(o),u&&u.forEach((e=>{const{keyField:p}=e;r&&p&&t.fieldsIndex.has(p)&&-1===r.indexOf(p)&&r.push(p)})),r}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,t as getRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../geometry.js\";import e from\"../../../core/Error.js\";import{isNone as n,isSome as t}from\"../../../core/maybe.js\";import{getMetersPerUnitForSR as o}from\"../../../core/unitUtils.js\";import{canProjectWithoutEngine as i,isLoaded as a,load as r,getTransformation as s,project as l}from\"../../../geometry/projection.js\";import c from\"../../../geometry/Extent.js\";import u from\"../../../geometry/Point.js\";const f=5e-4;function x(e,n,t){return!i(e,n,t)}function m(n,t,o){const i=x(n,t,o);if(i&&!a())throw new e(\"rasterprojectionhelper-project\",\"projection engine is not loaded\");return i}const p=function(e,n,t){const o=(e[0]+e[4]+e[4*n.cols]+e[4*n.cols+4])/4,i=(e[1]+e[5]+e[4*n.rows+1]+e[4*n.rows+5])/4,a=(e[4*n.cols]-e[0]+e[4*n.cols+4]-e[4])/t[0]*.5,r=(e[4*n.cols+1]-e[1]+e[4*n.cols+5]-e[5])/t[1]*.5;return[0===a||isNaN(a)?0:Math.abs(o-e[2*n.rows+2])/Math.abs(a),0===r||isNaN(r)?0:Math.abs(i-e[2*n.rows+3])/Math.abs(r)]},h={3395:20037508.342789244,3410:17334193.943686873,3857:20037508.342788905,3975:17367530.445161372,4087:20037508.342789244,4088:20015108.787169147,6933:17367530.445161372,32662:20037508.342789244,53001:20015086.79602057,53002:10007543.39801029,53003:20015086.79602057,53004:20015086.79602057,53016:14152803.599503474,53017:17333573.624304302,53034:20015086.79602057,53079:20015114.352186374,53080:20015114.352186374,54001:20037508.342789244,54002:10018754.171394624,54003:20037508.342789244,54004:20037508.342789244,54016:14168658.027268292,54017:17367530.44516137,54034:20037508.342789244,54079:20037508.342789244,54080:20037508.342789244,54100:20037508.342789244,54101:20037508.342789244},y=32,M=4,g=M;async function d(){if(a())return null;await r()}function w(e,n,t){if(!m(e.spatialReference,n))return null;return t?s(n,e.spatialReference,e):s(e.spatialReference,n,e)}function R(e,t,o,i=null){if(e.spatialReference.equals(t))return e;m(e.spatialReference,t,i);const a=o.center,r=new c({xmin:a.x-e.x/2,xmax:a.x+e.x/2,ymin:a.y-e.y/2,ymax:a.y+e.y/2,spatialReference:e.spatialReference}),s=l(r,t,i);if(n(s))return null;return{x:s.xmax-s.xmin,y:s.ymax-s.ymin}}function b(e,n=.01){return o(e)?n/o(e):0}function v(e,n,t=null,o=!0){const i=e.spatialReference;if(i.equals(n))return e;m(i,n,t);const a=l(e,n,t);if(o&&n.isGeographic){const[n,t]=C(i,!0),o=b(i);o&&null!=n&&null!=t&&(Math.abs(e.x-n)<o&&Math.abs(180-a.x)<f?a.x-=360:Math.abs(e.x-t)<o&&Math.abs(180+a.x)<f&&(a.x+=360))}return a}function N(e,n,t=null){const o=e[0].spatialReference;return o.equals(n)?e:(m(o,n,t),l(e,n,t))}function z(e){const n=P(e[0].spatialReference);if(e.length<2||!t(n))return e[0];let{xmin:o,xmax:i,ymin:a,ymax:r}=e[0];for(let t=1;t<e.length;t++){const o=e[t];i=o.xmax+n*t,a=Math.min(a,o.ymin),r=Math.max(r,o.ymax)}return new c({xmin:o,xmax:i,ymin:a,ymax:r,spatialReference:e[0].spatialReference})}function j(e,n,o=null,i=!0){if(e.spatialReference.equals(n))return e;const a=G(e),r=P(e.spatialReference,!0);if(!t(r)||0===a)return S(e,n,o,i);return z(e.clone().normalize().map((e=>S(e,n,o,i))))}function S(e,n,t=null,o=!0){const i=e.spatialReference;if(i.equals(n))return e;m(i,n,t);const a=l(e,n,t);let[r,s]=C(i,!0);if(a&&o&&i.isWebMercator&&n.isGeographic&&null!=r&&null!=s){const o=.001,l=1e3;if(Math.abs(e.xmin-r)<o&&Math.abs(s-e.xmax)>l&&Math.abs(180-a.xmax)<f){a.xmin=-180;const o=[];o.push(new u(e.xmax,e.ymin,i)),o.push(new u(e.xmax,(e.ymin+e.ymax)/2,i)),o.push(new u(e.xmax,e.ymax,i));const r=o.map((e=>v(e,n,t))).filter((e=>!isNaN(null==e?void 0:e.x))).map((e=>e.x));a.xmax=Math.max.apply(null,r)}if(Math.abs(e.xmax-s)<o&&Math.abs(r-e.xmin)>l&&Math.abs(180+a.xmin)<f){a.xmax=180;const o=[];o.push(new u(e.xmin,e.ymin,i)),o.push(new u(e.xmin,(e.ymin+e.ymax)/2,i)),o.push(new u(e.xmin,e.ymax,i));const r=o.map((e=>v(e,n,t))).filter((e=>!isNaN(null==e?void 0:e.x))).map((e=>e.x));a.xmin=Math.min.apply(null,r)}}[r,s]=C(n,!0);const c=b(n);return c&&null!=r&&null!=s&&a&&(Math.abs(a.xmin-r)<c&&(a.xmin=r),Math.abs(a.xmax-s)<c&&(a.xmax=s)),a}function P(e,n=!1){const t=n?20037508.342787:20037508.342788905;return e.isWebMercator?2*t:e.wkid&&e.isGeographic?360:2*h[e.wkid]||null}function C(e,n=!1){const o=[],i=P(e,n);return t(i)&&(o.push(-i/2),o.push(i/2)),o}function W(e,n,t,o){let i=(e-n)/t;return i-Math.floor(i)!=0?i=Math.floor(i):o&&(i-=1),i}function G(e,n=!1){const o=P(e.spatialReference);if(!t(o))return 0;const i=n?0:-(o/2);return W(e.xmax,i,o,!0)-W(e.xmin,i,o,!1)}function T(e){const n=e.storageInfo.origin.x,o=P(e.spatialReference,!0);if(!t(o))return{originX:n,halfWorldWidth:null,pyramidsInfo:null};const i=o/2,{nativePixelSize:a,storageInfo:r,extent:s}=e,{maximumPyramidLevel:l,blockWidth:c,pyramidScalingFactor:u}=r;let f=a.x;const x=[],m=t(e.transform)&&\"gcs-shift\"===e.transform.type,p=n+(m?0:i),h=m?o-n:i-n;for(let t=0;t<=l;t++){const e=(s.xmax-n)/f/c,t=e-Math.floor(e)==0?e:Math.ceil(e),o=h/f/c,i=o-Math.floor(o)==0?o:Math.ceil(o),a=Math.floor(p/f/c),r=Math.round(p/f)%c,l=(c-Math.round(h/f)%c)%c;x.push({resolutionX:f,blockWidth:c,datsetColumnCount:t,worldColumnCountFromOrigin:i,leftMargin:r,rightPadding:l,originColumnOffset:a}),f*=u}return{originX:n,halfWorldWidth:i,pyramidsInfo:x,hasGCSSShiftTransform:m}}function L(e){const n=e.isAdaptive&&null==e.spacing,t=e.spacing||[y,y];let o=k(e),i={cols:o.size[0]+1,rows:o.size[1]+1},a=p(o.offsets,i,t);const r=(a[0]+a[1])/2,s=o.outofBoundPointCount>0&&o.outofBoundPointCount<o.offsets.length/2;return n&&(s||r>g)&&(o=k({...e,spacing:[M,M]}),i={cols:o.size[0]+1,rows:o.size[1]+1},a=p(o.offsets,i,t)),o.error=a,o.coefficients=I(o.offsets,i,s),o}function k(e){const{projectedExtent:n,srcBufferExtent:o,pixelSize:i,datumTransformation:a,rasterTransform:r}=e,s=n.spatialReference,l=o.spatialReference;m(s,l);const{xmin:c,ymin:f,xmax:x,ymax:p}=n,h=P(l),M=e.hasWrapAround||\"gcs-shift\"===(null==r?void 0:r.type),g=e.spacing||[y,y],d={x:g[0]*i.x,y:g[1]*i.y},w={cols:Math.ceil((x-c)/d.x-.1/g[0])+1,rows:Math.ceil((p-f)/d.y-.1/g[1])+1},R=d.x,b=d.y,v=[];let z,j=0;const S=[];for(let t=0;t<w.cols;t++)for(let e=0;e<w.rows;e++)S.push(new u({x:c+R*t,y:p-b*e,spatialReference:s}));const C=N(S,l,a);for(let u=0;u<w.cols;u++){const e=[];for(let n=0;n<w.rows;n++){let i=C[u*w.rows+n];r&&(i=r.inverseTransform(i)),e.push(i),u>0&&M&&i&&z[n]&&t(h)&&i.x<z[n].x&&(i.x+=h),i?(v.push((i.x-o.xmin)/(o.xmax-o.xmin)),v.push((o.ymax-i.y)/(o.ymax-o.ymin))):(v.push(NaN),v.push(NaN),j++)}z=e}return{offsets:v,error:null,coefficients:null,outofBoundPointCount:j,spacing:g,size:[w.cols-1,w.rows-1]}}function I(e,n,t){const{cols:o,rows:i}=n,a=new Float32Array((o-1)*(i-1)*2*6),r=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),s=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let l=0;l<o-1;l++){for(let n=0;n<i-1;n++){let t=l*i*2+2*n;const c=e[t],u=e[t+1],f=e[t+2],x=e[t+3];t+=2*i;const m=e[t],p=e[t+1],h=e[t+2],y=e[t+3];let M=0,g=12*(n*(o-1)+l);for(let e=0;e<3;e++)a[g++]=r[M++]*c+r[M++]*f+r[M++]*h;M=0;for(let e=0;e<3;e++)a[g++]=r[M++]*u+r[M++]*x+r[M++]*y;M=0;for(let e=0;e<3;e++)a[g++]=s[M++]*c+s[M++]*m+s[M++]*h;M=0;for(let e=0;e<3;e++)a[g++]=s[M++]*u+s[M++]*p+s[M++]*y}if(t)for(let e=0;e<a.length;e++)isNaN(a[e])&&(a[e]=-1)}return a}function q(e){const n=e.clone().normalize();return 1===n.length?n[0]:z(n)}function A(e,n,o){const{storageInfo:i,pixelSize:a}=n;let r,s=!1;const{pyramidResolutions:l}=i;if(t(l)&&l.length){const t=(e.x+e.y)/2,i=l[l.length-1],c=(i.x+i.y)/2,f=(a.x+a.y)/2;if(t<=f)r=0;else if(t>=c)r=l.length,s=t/c>8;else{let e,n=f;for(let i=1;i<=l.length;i++){if(e=(l[i-1].x+l[i-1].y)/2,t<=e){t===e?r=i:\"down\"===o?(r=i-1,s=t/n>8):r=\"up\"===o||t-n>e-t||t/n>2?i:i-1;break}n=e}}const x=0===r?a:l[r-1];return{pyramidLevel:r,pyramidResolution:new u({x:x.x,y:x.y,spatialReference:n.spatialReference}),excessiveReading:s}}const c=Math.log(e.x/a.x)/Math.LN2,f=Math.log(e.y/a.y)/Math.LN2,x=n.storageInfo.maximumPyramidLevel||0;r=\"down\"===o?Math.floor(Math.min(c,f)):\"up\"===o?Math.ceil(Math.max(c,f)):Math.round((c+f)/2),r<0?r=0:r>x&&(s=r>x+3,r=x);const m=2**r;return{pyramidLevel:r,pyramidResolution:new u({x:m*n.nativePixelSize.x,y:m*n.nativePixelSize.y,spatialReference:n.spatialReference}),excessiveReading:s}}function F(e,n,t=512,i=!0){const{extent:a,spatialReference:r,pixelSize:s}=e,l=R(new u({x:s.x,y:s.y,spatialReference:r}),n,a);if(null==l)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const c=(l.x+l.y)/2,f=o(n),x=c*f*96*39.37,m=n.isGeographic?256/t*295828763.7958547:256/t*591657527.591555;let p=\"vector-magdir\"===e.dataType||\"vector-uv\"===e.dataType;const h=j(a,n);p||i&&(n.isGeographic||n.isWebMercator)&&(p=h.xmin*h.xmax<0);let y,M=x;const g=1.001;if(p){M=m;const e=n.isGeographic?1341104507446289e-21:.29858214164761665,t=e*(96*f*39.37),o=n.isGeographic?4326:3857;y=R(new u({x:e,y:e,spatialReference:{wkid:o}}),r,h),y.x*=M/t,y.y*=M/t}else{y={x:s.x,y:s.y};const n=Math.ceil(Math.log(Math.min(e.width,e.height)/32)/Math.LN2);let t=0;for(;M<m*(g/2)&&t<n;)t++,M*=2,y.x*=2,y.y*=2;Math.max(M,m)/Math.min(M,m)<=g&&(M=m)}const d=[M],w=[{x:y.x,y:y.y}],b=70.5310735,v=Math.min(b,x)/g;for(;M>=v;)M/=2,y.x/=2,y.y/=2,d.push(M),w.push({x:y.x,y:y.y});return{projectedPixelSize:l,scales:d,srcResolutions:w,isCustomTilingScheme:!p}}export{F as computeProjectedScales,y as defaultGridSpacing,g as defaultProjectionToleranceInPixels,w as getDefaultDatumTransformationForDataset,L as getProjectionOffsetGrid,T as getRasterDatasetAlignmentInfo,P as getWorldWidth,G as getWorldWrapCount,d as load,M as minimumGridSpacing,j as projectExtent,v as projectPoint,R as projectResolution,x as requirePE,q as snapExtent,A as snapPyramid};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{isSome as e,isNone as t}from\"../../core/maybe.js\";import{getMetersPerUnitForSR as r}from\"../../core/unitUtils.js\";import{calculateTolerance as n}from\"../../renderers/support/clickToleranceUtils.js\";import i from\"../../geometry/Extent.js\";function a(t,n,a,o=new i){let s;if(\"2d\"===a.type)s=n*a.resolution;else if(\"3d\"===a.type){const i=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?r(o)/r(a.spatialReference):n*i}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,i){const o=i.toMap(e);if(t(o))return!1;return a(o,n(),i,s).intersects(r)}const s=new i;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n"],"sourceRoot":""}