{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/views/2d/engine/webgl/materialKey/MaterialKey.js","webpack:///./node_modules/@arcgis/core/views/2d/layers/WMSLayerView2D.js","webpack:///./node_modules/@arcgis/core/views/layers/RefreshableLayerView.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/meshUtils.js","webpack:///./node_modules/@arcgis/core/views/layers/WMSLayerView.js","webpack:///./node_modules/@arcgis/core/layers/support/ExportWMSImageParameters.js","webpack:///./node_modules/@arcgis/core/views/2d/viewStateUtils.js","webpack:///./node_modules/@arcgis/core/views/2d/layers/support/ExportStrategy.js"],"names":["r","t","s","a","SIZE_FIELD_STOPS","SIZE_MINMAX_VALUE","SIZE_SCALE_STOPS","SIZE_UNIT_VALUE","FIELD_TARGETS_OUTLINE","MINMAX_TARGETS_OUTLINE","SCALE_TARGETS_OUTLINE","UNIT_TARGETS_OUTLINE","isOutline","isOutlinedFill","n","v","o","l","h","S","u","d","V","c","p","g","z","m","y","E","T","M","L","e","FILL","x","from","LINE","B","MARKER","U","TEXT","R","LABEL","b","Error","F","_","load","geometryType","this","_data","shared","data","bits","setBits","bit","setBit","i","mapAligned","pattern","sdf","textureBinding","I","super","hasVV","vvSizeMinMaxValue","vvSizeScaleStops","vvSizeFieldStops","vvSizeUnitValue","setVV","O","vvRotation","ROTATION","A","vvColor","COLOR","f","vvOpacity","OPACITY","dotDensity","stride","fill","simple","outlinedFill","vvFlags","getVariation","placement","getLogger","layer","view","supportsSpatialReference","spatialReference","addResolvingPromise","Promise","reject","strategy","update","catch","error","imageMaxHeight","imageMaxWidth","_bitmapContainer","container","addChild","fetchSource","fetchImage","bind","requestUpdate","imageRotationSupported","imageNormalizationSupported","hidpi","handles","add","watch","remove","destroy","removeChild","removeAllChildren","children","some","width","height","resolution","xmin","ymin","xmax","ymax","Math","round","extent","updating","updateRequested","timeExtent","prototype","doRefresh","dataChanged","declaredClass","j","k","metrics","left","top","advance","C","D","G","H","J","K","N","P","Q","W","Y","Z","$","et","ct","ht","it","ot","at","dt","nt","exportImageParameters","commitProperty","_get","popupEnabled","createFetchPopupFeaturesQuery","resolve","fetchFeatureInfo","readOnly","visible","scale","_set","sublayers","on","notifyChange","propertyName","visibleSublayers","filter","name","map","join","minScale","maxScale","forEach","unshift","layers","imageFormat","imageTransparency","version","format","request","service","styles","transparent","type","Number","PI","rotation","abs","cos","sin","size","_imagePromise","bitmaps","stationary","destroyed","state","pixelRatio","worldScreenWidth","floor","valid","paddedViewState","center","_singleExport","min","_tiledExport","then","async","includes","fadeOut","fadeIn","stage","invalidateTexture","requestRender","signal","_export","create","scales","getTileCoverage","set","getTileBounds","push","all"],"mappings":"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","file":"js/chunk-8806bef8.d2ef296b.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../core/Error.js\";import{WGLVVFlag as e,WGLVVTarget as i,WGLGeometryType as s}from\"../enums.js\";import{isMapAligned as a}from\"../mesh/templates/meshUtils.js\";function r(t,s){const a=e.SIZE_FIELD_STOPS|e.SIZE_MINMAX_VALUE|e.SIZE_SCALE_STOPS|e.SIZE_UNIT_VALUE,r=(t&(i.FIELD_TARGETS_OUTLINE|i.MINMAX_TARGETS_OUTLINE|i.SCALE_TARGETS_OUTLINE|i.UNIT_TARGETS_OUTLINE))>>>4;return s.isOutline||s.isOutlinedFill?a&r:a&~r}const n=0,v=8,o=7,l=8,h=11,S=11,u=12,d=13,V=14,c=15,p=15,g=16,z=17,m=18,y=19,E=20,T=21,M=22;function L(t,e){switch(t){case s.FILL:return x.from(e);case s.LINE:return B.from(e);case s.MARKER:return U.from(e);case s.TEXT:return R.from(e);case s.LABEL:return b.from(e);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${t}`)}}function F(t){switch(_.load(t).geometryType){case s.MARKER:return new U(t);case s.FILL:return new x(t);case s.LINE:return new B(t);case s.TEXT:return new R(t);case s.LABEL:return new b(t)}}class _{constructor(t){this._data=0,this._data=t}static load(t){const e=this.shared;return e.data=t,e}set data(t){this._data=t}get data(){return this._data}get geometryType(){return this.bits(l,h)}set geometryType(t){this.setBits(t,l,h)}get mapAligned(){return!!this.bit(E)}set mapAligned(t){this.setBit(E,t)}get sdf(){return!!this.bit(S)}set sdf(t){this.setBit(S,t)}get pattern(){return!!this.bit(u)}set pattern(t){this.setBit(u,t)}get textureBinding(){return this.bits(n,v)}set textureBinding(t){this.setBits(t,n,v)}get geometryTypeString(){switch(this.geometryType){case s.FILL:return\"fill\";case s.MARKER:return\"marker\";case s.LINE:return\"line\";case s.TEXT:return\"text\";case s.LABEL:return\"label\";default:throw new t(`Unable to handle unknown geometryType: ${this.geometryType}`)}}setBit(t,e){const i=1<<t;e?this._data|=i:this._data&=~i}bit(t){return(this._data&1<<t)>>t}setBits(t,e,i){for(let s=e,a=0;s<i;s++,a++)this.setBit(s,0!=(t&1<<a))}bits(t,e){let i=0;for(let s=t,a=0;s<e;s++,a++)i|=this.bit(s)<<a;return i}hasVV(){return!1}setVV(t,e){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}}getVariationHash(){return this._data&~(o&this.textureBinding)}}_.shared=new _(0);const I=t=>class extends t{get vvSizeMinMaxValue(){return 0!==this.bit(g)}set vvSizeMinMaxValue(t){this.setBit(g,t)}get vvSizeScaleStops(){return 0!==this.bit(z)}set vvSizeScaleStops(t){this.setBit(z,t)}get vvSizeFieldStops(){return 0!==this.bit(m)}set vvSizeFieldStops(t){this.setBit(m,t)}get vvSizeUnitValue(){return 0!==this.bit(y)}set vvSizeUnitValue(t){this.setBit(y,t)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(t,i){super.setVV(t,i);const s=r(t,i)&t;this.vvSizeMinMaxValue=!!(s&e.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(s&e.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(s&e.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(s&e.SIZE_SCALE_STOPS)}},O=t=>class extends t{get vvRotation(){return 0!==this.bit(c)}set vvRotation(t){this.setBit(c,t)}hasVV(){return super.hasVV()||this.vvRotation}setVV(t,i){super.setVV(t,i),this.vvRotation=!i.isOutline&&!!(t&e.ROTATION)}},A=t=>class extends t{get vvColor(){return 0!==this.bit(d)}set vvColor(t){this.setBit(d,t)}hasVV(){return super.hasVV()||this.vvColor}setVV(t,i){super.setVV(t,i),this.vvColor=!i.isOutline&&!!(t&e.COLOR)}},f=t=>class extends t{get vvOpacity(){return 0!==this.bit(V)}set vvOpacity(t){this.setBit(V,t)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(t,i){super.setVV(t,i),this.vvOpacity=!i.isOutline&&!!(t&e.OPACITY)}};class x extends(A(f(I(_)))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=s.FILL,e.dotDensity=\"dot-density\"===t.stride.fill,e.simple=\"simple\"===t.stride.fill,e.outlinedFill=t.isOutlinedFill,e.dotDensity||e.setVV(t.vvFlags,t),e.data}getVariation(){return{...super.getVariation(),dotDensity:this.dotDensity,outlinedFill:this.outlinedFill,simple:this.simple,vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}get dotDensity(){return!!this.bit(p)}set dotDensity(t){this.setBit(p,t)}get simple(){return!!this.bit(M)}set simple(t){this.setBit(M,t)}get outlinedFill(){return!!this.bit(T)}set outlinedFill(t){this.setBit(T,t)}}x.shared=new x(0);class U extends(A(f(O(I(_))))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=s.MARKER,e.setVV(t.vvFlags,t),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}U.shared=new U(0);class B extends(A(f(I(_)))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=s.LINE,e.setVV(t.vvFlags,t),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}B.shared=new B(0);class R extends(A(f(O(I(_))))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=s.TEXT,e.setVV(t.vvFlags,t),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}R.shared=new R(0);class b extends(I(_)){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=s.LABEL,e.setVV(t.vvFlags,t),e.mapAligned=a(t.placement),e.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}b.shared=new b(0);export{x as FillMaterialKey,b as LabelMaterialKey,B as LineMaterialKey,U as MarkerMaterialKey,_ as MaterialKeyBase,R as TextMaterialKey,L as createMaterialKey,r as getSizeFlagsMask,F as hydrateMaterialKey};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import r from\"../../../core/Logger.js\";import{isAbortError as i}from\"../../../core/promiseUtils.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import o from\"../../../geometry/Extent.js\";import{BitmapContainer as n}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as p}from\"./LayerView2D.js\";import m from\"./support/ExportStrategy.js\";import h from\"../../layers/LayerView.js\";import{RefreshableLayerView as c}from\"../../layers/RefreshableLayerView.js\";import{WMSLayerView as d}from\"../../layers/WMSLayerView.js\";const l=r.getLogger(\"esri.views.2d.layers.WMSLayerView2D\");let y=class extends(d(c(p(h)))){initialize(){const{layer:e,view:r}=this;e.supportsSpatialReference(r.spatialReference)||this.addResolvingPromise(Promise.reject(new t(\"layerview:spatial-reference-incompatible\",\"The spatial references supported by this WMS layer are incompatible with the spatial reference of the view\",{layer:e})))}update(e){this.strategy.update(e).catch((e=>{i(e)||l.error(e)}))}attach(){const{layer:e}=this,{imageMaxHeight:t,imageMaxWidth:r}=e;this._bitmapContainer=new n,this.container.addChild(this._bitmapContainer),this.strategy=new m({container:this._bitmapContainer,fetchSource:this.fetchImage.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxHeight:t,imageMaxWidth:r,imageRotationSupported:!1,imageNormalizationSupported:!1,hidpi:!1}),this.handles.add(this.watch(\"exportImageVersion\",(()=>this.requestUpdate())),\"exportImageVersion\")}detach(){this.handles.remove(\"exportImageVersion\"),this.strategy.destroy(),this.container.removeChild(this._bitmapContainer),this._bitmapContainer.removeAllChildren()}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}createFetchPopupFeaturesQuery(e){const{view:t}=this,r=this._bitmapContainer,{x:i,y:s}=e,{spatialReference:a}=t;let n=null,p=0,m=0;if(r.children.some((e=>{const{width:t,height:r,resolution:h,x:c,y:d}=e,l=c+h*t,y=d-h*r;return i>=c&&i<=l&&s<=d&&s>=y&&(n=new o({xmin:c,ymin:y,xmax:l,ymax:d,spatialReference:a}),p=t,m=r,!0)})),!n)return null;const h=n.width/p,c=Math.round((i-n.xmin)/h),d=Math.round((n.ymax-s)/h);return{extent:n,width:p,height:m,x:c,y:d}}async doRefresh(){this.requestUpdate()}isUpdating(){return this.strategy.updating||this.updateRequested}fetchImage(e,t,r,i){return this.layer.fetchImage(e,t,r,{timeExtent:this.timeExtent,...i})}};e([s()],y.prototype,\"strategy\",void 0),e([s()],y.prototype,\"updating\",void 0),y=e([a(\"esri.views.2d.layers.WMSLayerView2D\")],y);const u=y;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Logger.js\";import{isAbortError as s}from\"../../core/promiseUtils.js\";import{on as o}from\"../../core/watchUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";const i=i=>{let c=class extends i{initialize(){this.handles.add(o(this,\"layer\",\"refresh\",(r=>{this.doRefresh(r.dataChanged).catch((r=>{s(r)||e.getLogger(this.declaredClass).error(r)}))})),\"RefreshableLayerView\")}};return r([t()],c.prototype,\"layer\",void 0),c=r([a(\"esri.layers.mixins.RefreshableLayerView\")],c),c};export{i as RefreshableLayerView,i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nconst t=8,e=t-2,c=1e-30,h=64,i=4294967295,o=512,a=256,d=256/360,n=!1,p=128,r=8,s=29,f=1,g=16,l=16,m=o/p,v=8,w=50,x=10,b=24,j=8,k={metrics:{width:15,height:17,left:0,top:-7,advance:14}},q=1024,u=0,y=0,z=0,A=1,B=2,C=3,D=4,E=5,F=6,G=5,H=6,I=0,J=1,K=2,L=3,M=3,N=2,O=1,P=2,Q=4,R=!1,S=1.05,T=6,U=5,V=6,W=1.15,X=2,Y=2,Z=8,$=500,_=4,tt=128,et=10,ct=2,ht=0,it=1,ot=4,at=8,dt=4,nt=1;export{d as ANGLE_FACTOR_256,J as ATTRIBUTE_DATA_ANIMATION,L as ATTRIBUTE_DATA_DD0,M as ATTRIBUTE_DATA_DD1,I as ATTRIBUTE_DATA_FILTER_FLAGS,K as ATTRIBUTE_DATA_VV,q as ATTRIBUTE_STORE_TEXTURE_SIZE,k as AVERAGE_GLYPH_MOSAIC_ITEM,ct as BITSET_GENERIC_LOCK_COLOR,dt as BITSET_LINE_SCALE_DASH,it as BITSET_MARKER_ALIGNMENT_MAP,ht as BITSET_MARKER_ALIGNMENT_SCREEN,ot as BITSET_MARKER_OUTLINE_ALLOW_COLOR_OVERRIDE,at as BITSET_MARKER_SCALE_SYMBOLS_PROPORTIONALLY,nt as BITSET_TYPE_FILL_OUTLINE,tt as BUFFER_DATA_MINIMUM_SIZE,_ as BUFFER_DATA_POOL_SIZE,l as COLLISION_BOX_PADDING,p as COLLISION_BUCKET_SIZE,g as COLLISION_EARLY_REJECT_BUCKET_SIZE,f as COLLISION_MAX_ZOOM_DELTA,v as COLLISION_PLACEMENT_PADDING,m as COLLISION_TILE_BOX_SIZE,n as DEBUG_LABELS,Z as DISPLAY_RECORD_INT_PER_ELEMENT,r as DOT_DENSITY_MAX_FIELDS,Q as EFFECT_FLAG_0,R as ENABLE_EARLY_LABEL_DISCARD,h as EXTRUDE_SCALE,P as FILTER_FLAG_0,b as GLYPH_SIZE,x as HEURISTIC_GLYPHS_PER_FEATURE,w as HEURISTIC_GLYPHS_PER_LINE,O as HIGHLIGHT_FLAG,T as HITTEST_SEARCH_SIZE,s as MAGIC_LABEL_LINE_HEIGHT,N as MAX_FILTERS,X as MAX_GPU_UPLOADS_PER_FRAME,et as MIN_MAX_ZOOM_PRECISION_FACTOR,c as NAN_MAGIC_NUMBER,$ as PATCH_PIXEL_BUFFER_ALLOC_SIZE,i as PICTURE_FILL_COLOR,a as RASTER_TILE_SIZE,Y as SPRITE_PADDING,A as TEXTURE_BINDING_ATTRIBUTE_DATA_0,B as TEXTURE_BINDING_ATTRIBUTE_DATA_1,C as TEXTURE_BINDING_ATTRIBUTE_DATA_2,D as TEXTURE_BINDING_ATTRIBUTE_DATA_3,z as TEXTURE_BINDING_BITMAP,y as TEXTURE_BINDING_GLYPH_ATLAS,E as TEXTURE_BINDING_HIGHLIGHT_0,F as TEXTURE_BINDING_HIGHLIGHT_1,G as TEXTURE_BINDING_RENDERER_0,H as TEXTURE_BINDING_RENDERER_1,u as TEXTURE_BINDING_SPRITE_ATLAS,j as TEXT_PLACEMENT_PADDING,S as THIN_LINE_HALF_WIDTH_THRESHOLD,o as TILE_SIZE,W as VTL_HIGH_RES_CUTOFF,V as VTL_TEXTURE_BINDING_UNIT_GLYPHS,U as VTL_TEXTURE_BINDING_UNIT_SPRITES,e as WEBGL_MAX_INNER_STOPS,t as WEBGL_MAX_STOPS};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction e(e){switch(e){case\"above-along\":case\"below-along\":case\"center-along\":case\"esriServerLinePlacementAboveAlong\":case\"esriServerLinePlacementBelowAlong\":case\"esriServerLinePlacementCenterAlong\":return!0;default:return!1}}export{e as isMapAligned};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as s}from\"../../layers/support/commonProperties.js\";import{ExportWMSImageParameters as p}from\"../../layers/support/ExportWMSImageParameters.js\";const a=a=>{let i=class extends a{initialize(){this.exportImageParameters=new p({layer:this.layer})}destroy(){this.exportImageParameters.destroy(),this.exportImageParameters=null}get exportImageVersion(){var e;return null==(e=this.exportImageParameters)||e.commitProperty(\"version\"),this.commitProperty(\"timeExtent\"),(this._get(\"exportImageVersion\")||0)+1}fetchPopupFeatures(e){const{layer:t}=this;if(!e)return Promise.reject(new r(\"wmslayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:t}));const{popupEnabled:o}=t;if(!o)return Promise.reject(new r(\"wmslayerview:fetchPopupFeatures\",\"popupEnabled should be true\",{popupEnabled:o}));const s=this.createFetchPopupFeaturesQuery(e);if(!s)return Promise.resolve([]);const{extent:p,width:a,height:i,x:m,y:n}=s;if(!(p&&a&&i))throw new r(\"wmslayerview:fetchPopupFeatures\",\"WMSLayer does not support fetching features.\",{extent:p,width:a,height:i});const u=t.fetchFeatureInfo(p,a,i,m,n);return Promise.resolve(u?[u]:[])}};return e([t()],i.prototype,\"exportImageParameters\",void 0),e([t({readOnly:!0})],i.prototype,\"exportImageVersion\",null),e([t()],i.prototype,\"layer\",void 0),e([t(s)],i.prototype,\"timeExtent\",void 0),i=e([o(\"esri.layers.mixins.WMSLayerView\")],i),i};export{a as WMSLayerView,a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Accessor.js\";import{HandleOwnerMixin as s}from\"../../core/HandleOwner.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";const a={visible:\"visibleSublayers\"};let l=class extends(s(r)){constructor(e){super(e),this.scale=0}set layer(e){this._get(\"layer\")!==e&&(this._set(\"layer\",e),this.handles.remove(\"layer\"),e&&this.handles.add([e.sublayers.on(\"change\",(()=>this.notifyChange(\"visibleSublayers\"))),e.on(\"wms-sublayer-update\",(e=>this.notifyChange(a[e.propertyName])))],\"layer\"))}get layers(){const{visibleSublayers:e}=this;return e.filter((e=>e.name)).map((e=>e.name)).join(\",\")}get version(){this.commitProperty(\"layers\");const e=this.layer;return e&&e.commitProperty(\"imageTransparency\"),(this._get(\"version\")||0)+1}get visibleSublayers(){const{layer:e,scale:r}=this,s=null==e?void 0:e.sublayers,t=[],o=e=>{const{minScale:s,maxScale:a,sublayers:l,visible:i}=e;i&&(0===r||(0===s||r<=s)&&(0===a||r>=a))&&(l?l.forEach(o):t.unshift(e))};return null==s||s.forEach(o),t}toJSON(){const{layer:e,layers:r}=this,{imageFormat:s,imageTransparency:t,version:o}=e;return{format:s,request:\"GetMap\",service:\"WMS\",styles:\"\",transparent:t,version:o,layers:r}}};e([t()],l.prototype,\"layer\",null),e([t({readOnly:!0})],l.prototype,\"layers\",null),e([t({type:Number})],l.prototype,\"scale\",void 0),e([t({readOnly:!0})],l.prototype,\"version\",null),e([t({readOnly:!0})],l.prototype,\"visibleSublayers\",null),l=e([o(\"esri.layers.support.ExportWMSImageParameters\")],l);export{l as ExportWMSImageParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nconst t=Math.PI/180;function n(n){return n*t}function o(t,n,o){const{resolution:r,size:u}=o;return t[0]=r*(Math.round(n[0]/r)+u[0]%2*.5),t[1]=r*(Math.round(n[1]/r)+u[1]%2*.5),t}function r(t,o){const r=n(o.rotation),u=Math.abs(Math.cos(r)),a=Math.abs(Math.sin(r)),[s,c]=o.size;return t[0]=Math.round(c*a+s*u),t[1]=Math.round(c*u+s*a),t}function u(t,n,o,r){const[u,a]=n,[s,c]=r,i=.5*o;return t[0]=u-i*s,t[1]=a-i*c,t[2]=u+i*s,t[3]=a+i*c,t}function a(t,n){const[o,r,u,a]=t,[s,c,i,e]=n;return!(o>i||u<s||r>e||a<c)}export{a as bboxIntersects,u as getBBox,r as getOuterSize,o as snapToPixel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/Accessor.js\";import{debounce as i}from\"../../../../core/promiseUtils.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import s from\"../../../../geometry/Extent.js\";import{create as a}from\"../../../../geometry/support/aaBoundingRect.js\";import{getInfo as p}from\"../../../../geometry/support/spatialReferenceUtils.js\";import n from\"../../../../layers/support/TileInfo.js\";import{getOuterSize as m,getBBox as l}from\"../../viewStateUtils.js\";import{Bitmap as d}from\"../../engine/Bitmap.js\";import h from\"../../tiling/TileInfoView.js\";import c from\"../../tiling/TileKey.js\";const u=a(),g=[0,0],f=new c(0,0,0,0),x={container:null,fetchSource:null,requestUpdate:null,imageMaxWidth:2048,imageMaxHeight:2048,imageRotationSupported:!1,imageNormalizationSupported:!1,hidpi:!1};let y=class extends e{constructor(t){super(t),this._imagePromise=null,this.bitmaps=[],this.hidpi=x.hidpi,this.imageMaxWidth=x.imageMaxWidth,this.imageMaxHeight=x.imageMaxHeight,this.imageRotationSupported=x.imageRotationSupported,this.imageNormalizationSupported=x.imageNormalizationSupported,this.update=i((async(t,e)=>{if(!t.stationary||this.destroyed)return null;const i=t.state,o=p(i.spatialReference),r=this.hidpi?t.pixelRatio:1,s=this.imageNormalizationSupported&&i.worldScreenWidth&&i.worldScreenWidth<i.size[0];s?(g[0]=i.worldScreenWidth,g[1]=i.size[1]):this.imageRotationSupported?(g[0]=i.size[0],g[1]=i.size[1]):m(g,i);const a=Math.floor(g[0]*r)>this.imageMaxWidth||Math.floor(g[1]*r)>this.imageMaxHeight,n=o&&(i.extent.xmin<o.valid[0]||i.extent.xmax>o.valid[1]),l=!this.imageNormalizationSupported&&n,d=!a&&!l,h=this.imageRotationSupported?i.rotation:0;if(d){const t=s?i.paddedViewState.center:i.center;this._imagePromise=this._singleExport(i,g,t,i.resolution,h,r,e)}else{let t=Math.min(this.imageMaxWidth,this.imageMaxHeight);l&&(t=Math.min(i.worldScreenWidth,t)),this._imagePromise=this._tiledExport(i,t,h,r,e)}return this._imagePromise.then((async t=>{if(this._imagePromise=null,!this.destroyed){this.bitmaps=null!=t?t:[];for(const e of this.container.children)t.includes(e)||e.fadeOut().then((()=>{e.remove()}));for(const e of t)this.container.addChild(e),e.fadeIn()}})).catch((t=>{throw this._imagePromise=null,t}))}),5e3)}destroy(){this.bitmaps=[]}get updating(){return!this.destroyed&&null!==this._imagePromise}updateExports(t){for(const e of this.container.children){if(!e.visible||!e.stage)return;t(e),e.invalidateTexture(),e.requestRender()}}async _export(t,e,i,o,r,s){const a=await this.fetchSource(t,Math.floor(e*r),Math.floor(i*r),{rotation:o,pixelRatio:r,signal:s}),p=new d(a,\"additive\");return p.x=t.xmin,p.y=t.ymax,p.resolution=t.width/e,p.rotation=o,p.pixelRatio=r,p}async _singleExport(t,e,i,o,r,a,p){l(u,i,o,e);const n=new s(u[0],u[1],u[2],u[3],t.spatialReference);return[await this._export(n,e[0],e[1],r,a,p)]}_tiledExport(t,e,i,o,r){const a=n.create({size:e,spatialReference:t.spatialReference,scales:[t.scale]}),p=new h(a),m=p.getTileCoverage(t);if(!m)return null;const l=[];return m.forEach(((a,n,m,d)=>{f.set(a,n,m,d),p.getTileBounds(u,f);const h=new s(u[0],u[1],u[2],u[3],t.spatialReference);l.push(this._export(h,e,e,i,o,r))})),Promise.all(l)}};t([o()],y.prototype,\"_imagePromise\",void 0),t([o()],y.prototype,\"bitmaps\",void 0),t([o()],y.prototype,\"container\",void 0),t([o()],y.prototype,\"fetchSource\",void 0),t([o()],y.prototype,\"hidpi\",void 0),t([o()],y.prototype,\"imageMaxWidth\",void 0),t([o()],y.prototype,\"imageMaxHeight\",void 0),t([o()],y.prototype,\"imageRotationSupported\",void 0),t([o()],y.prototype,\"imageNormalizationSupported\",void 0),t([o()],y.prototype,\"requestUpdate\",void 0),t([o()],y.prototype,\"updating\",null),y=t([r(\"esri.views.2d.layers.support.ExportStrategy\")],y);const S=y;export{S as default};\n"],"sourceRoot":""}