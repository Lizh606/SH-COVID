(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2290bf"],{dc7a:function(e,t,n){"use strict";n.r(t),n.d(t,"loadGLTFMesh",(function(){return T}));var c=n("9ef0"),o=n("2eab"),r=n("28eb"),a=n("b2b2"),s=n("1c92"),l=n("dae5"),i=n("0b2d"),u=n("0fc4"),b=n("f0ba"),f=n("83fa"),O=n("88da"),j=n("f5e7"),p=n("8190"),d=n("668b"),m=n("e4c1"),g=n("7e2d"),x=n("e9ba"),w=n("2b60"),h=n("3c3b"),v=n("087c"),y=n("1038"),C=n("0613"),B=n("4c96"),A=n("1c20"),M=n("dc56");async function T(e,t,n){const c=new w["a"]($(n)),o=(await Object(h["a"])(c,t,n,!0)).model,r=o.lods.shift(),s=new Map,l=new Map;o.textures.forEach((e,t)=>s.set(t,E(e))),o.materials.forEach((e,t)=>l.set(t,J(e,s)));const i=k(r);for(const a of i.parts)R(i,a,l);const{position:u,normal:b,tangent:f,color:O,texCoord0:p}=i.vertexAttributes,d={position:u.typedBuffer,normal:Object(a["l"])(b)?b.typedBuffer:null,tangent:Object(a["l"])(f)?f.typedBuffer:null,uv:Object(a["l"])(p)?p.typedBuffer:null,color:Object(a["l"])(O)?O.typedBuffer:null},m=Object(x["c"])(d,e,n);return{transform:m.transform,components:i.components,spatialReference:e.spatialReference,vertexAttributes:new j["c"]({position:m.vertexAttributes.position,normal:m.vertexAttributes.normal,tangent:m.vertexAttributes.tangent,color:d.color,uv:d.uv})}}function $(e){return null!=e&&e.resolveFile?{busy:!1,request:async(t,n,c)=>{const r=e.resolveFile(t),s="image"===n?"image":"binary"===n?"array-buffer":"json";return(await Object(o["default"])(r,{responseType:s,signal:Object(a["l"])(c)?c.signal:null})).data}}:null}function F(e,t){if(Object(a["k"])(e))return"-";const n=e.typedBuffer;return`${Object(r["b"])(t,n.buffer,()=>t.size)}/${n.byteOffset}/${n.byteLength}`}function S(e){return Object(a["l"])(e)?e.toString():"-"}function k(e){let t=0;const n={color:!1,tangent:!1,normal:!1,texCoord0:!1},c=new Map,o=new Map,a=[];for(const s of e.parts){const{attributes:{position:e,normal:l,color:i,tangent:u,texCoord0:b}}=s,f=`\n      ${F(e,c)}/\n      ${F(l,c)}/\n      ${F(i,c)}/\n      ${F(u,c)}/\n      ${F(b,c)}/\n      ${S(s.transform)}\n    `;let O=!1;const j=Object(r["b"])(o,f,()=>(O=!0,{start:t,length:e.count}));O&&(t+=e.count),l&&(n.normal=!0),i&&(n.color=!0),u&&(n.tangent=!0),b&&(n.texCoord0=!0),a.push({gltf:s,writeVertices:O,region:j})}return{vertexAttributes:{position:Object(g["a"])(p["v"],t),normal:n.normal?Object(g["a"])(p["u"],t):null,tangent:n.tangent?Object(g["a"])(p["C"],t):null,color:n.color?Object(g["a"])(p["J"],t):null,texCoord0:n.texCoord0?Object(g["a"])(p["m"],t):null},parts:a,components:[]}}function E(e){return new O["a"]({data:e.data,wrap:N(e.parameters.wrap)})}function J(e,t){const n=new c["a"](D(e.color,e.opacity)),o=e.emissiveFactor?new c["a"](G(e.emissiveFactor)):null;return new f["a"]({color:n,colorTexture:Object(a["u"])(Object(a["c"])(e.textureColor,e=>t.get(e))),normalTexture:Object(a["u"])(Object(a["c"])(e.textureNormal,e=>t.get(e))),emissiveColor:o,emissiveTexture:Object(a["u"])(Object(a["c"])(e.textureEmissive,e=>t.get(e))),occlusionTexture:Object(a["u"])(Object(a["c"])(e.textureOcclusion,e=>t.get(e))),alphaMode:L(e.alphaMode),alphaCutoff:e.alphaCutoff,doubleSided:e.doubleSided,metallic:e.metallicFactor,roughness:e.roughnessFactor,metallicRoughnessTexture:Object(a["u"])(Object(a["c"])(e.textureMetallicRoughness,e=>t.get(e)))})}function R(e,t,n){t.writeVertices&&z(e,t);const c=t.gltf,o=I(c.indices||c.attributes.position.count,c.primitiveType),r=t.region.start;if(r)for(let a=0;a<o.length;a++)o[a]+=r;e.components.push(new b["a"]({faces:o,material:n.get(c.material),trustSourceNormals:!0}))}function z(e,t){const{position:n,normal:c,tangent:o,color:r,texCoord0:i}=e.vertexAttributes,u=t.region.start,{attributes:b,transform:f}=t.gltf,O=b.position.count;if(Object(d["e"])(n.slice(u,O),b.position,f),Object(a["l"])(b.normal)&&Object(a["l"])(c)){const e=Object(s["a"])(Object(l["b"])(),f);Object(d["a"])(c.slice(u,O),b.normal,e)}else Object(a["l"])(c)&&Object(B["b"])(c,0,0,1,{dstIndex:u,count:O});if(Object(a["l"])(b.tangent)&&Object(a["l"])(o)){const e=Object(s["a"])(Object(l["b"])(),f);Object(m["c"])(o.slice(u,O),b.tangent,e)}else Object(a["l"])(o)&&Object(A["b"])(o,0,0,1,1,{dstIndex:u,count:O});if(Object(a["l"])(b.texCoord0)&&Object(a["l"])(i)?Object(M["b"])(i.slice(u,O),b.texCoord0):Object(a["l"])(i)&&Object(M["a"])(i,0,0,{dstIndex:u,count:O}),Object(a["l"])(b.color)&&Object(a["l"])(r)){const e=b.color,t=r.slice(u,O);if(4===e.elementCount)e instanceof p["C"]?Object(m["b"])(t,e,255):e instanceof p["J"]?Object(A["a"])(t,e):e instanceof p["H"]&&Object(m["a"])(t,e,8);else{Object(A["b"])(t,255,255,255,255);const n=p["B"].fromTypedArray(t.typedBuffer,t.typedBufferStride);e instanceof p["u"]?Object(d["d"])(n,e,255):e instanceof p["B"]?Object(B["a"])(n,e):e instanceof p["z"]&&Object(d["b"])(n,e,8)}}else Object(a["l"])(r)&&Object(A["b"])(r.slice(u,O),255,255,255,255)}function I(e,t){switch(t){case 4:return Object(v["c"])(e,y["e"]);case 5:return Object(v["b"])(e);case 6:return Object(v["a"])(e)}}function L(e){switch(e){case"OPAQUE":return"opaque";case"MASK":return"mask";case"BLEND":return"blend"}}function N(e){return{horizontal:q(e.s),vertical:q(e.t)}}function q(e){switch(e){case 33071:return"clamp";case 33648:return"mirror";case 10497:return"repeat"}}function V(e){return e**(1/C["a"])*255}function D(e,t){return Object(u["g"])(V(e[0]),V(e[1]),V(e[2]),t)}function G(e){return Object(i["h"])(V(e[0]),V(e[1]),V(e[2]))}}}]);
//# sourceMappingURL=chunk-2d2290bf.29ff6349.js.map