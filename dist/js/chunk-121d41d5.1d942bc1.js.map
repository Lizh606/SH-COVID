{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DScaleVisibility.js","webpack:///./node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js","webpack:///./node_modules/@arcgis/core/symbols/support/defaults3D.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFeatureStore.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DSymbolCreationContext.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DPointSymbol.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DSymbolFactory.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/GraphicStateTracking.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/SpatialIndex2D.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/support/StageLayerElevationProvider.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DCore.js","webpack:///./node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js"],"names":["h","super","arguments","this","_scaleRangeActive","layerScaleRangeVisibilityQuery","handles","layerView","layer","queryGraphicUIDsInExtent","extent","graphicsCore","basemapTerrain","layerScaleEnabled","suspended","updating","e","i","t","s","a","updateScaleRangeActive","r","view","resourceController","scheduler","add","registerTask","SCALE_VISIBILITY","destroy","_set","_setDirty","p","minScale","maxScale","labelingInfo","some","has","o","on","scaleUpdateHandler","remove","ready","queryVisibleScaleRange","finishUpdate","centroid","graphic","geometry","type","getScale","graphicScale","visibleAtLayerScale","graphicVisible","setVisibilityFlag","labelGraphics","length","updateLabelScaleVisibility","deconflictor","setDirty","labeler","_labelClass","visibleAtLabelScale","scale","l","spatialReference","n","getGraphics3DGraphicById","c","x","y","modifyGraphics3DGraphicVisibilities","clearVisibilityFlag","updateAllGraphicsVisibility","constructOnly","prototype","readOnly","getObjectId","objectId","getAttributes","attributes","getAttribute","cloneWithGeometry","getGeometry","getCentroid","hasZ","hasM","fromSimpleMarkerSymbol","fromSimpleLineSymbol","S","fromSimpleFillSymbol","u","symbolLayers","material","color","edges","size","b","events","objectIdField","featureAdapter","getAsOptimizedGeometry","Array","z","m","forAllGraphics","getSpatialIndex","forEachInBounds","getBounds","schedule","sharedResources","streamDataRequester","elevationProvider","renderer","stage","clippingExtent","renderCoordsHelper","overlaySR","localOriginFactory","featureExpressionInfoContext","screenSizePerspectiveEnabled","slicePlaneEnabled","physicalBasedRenderingEnabled","isAsync","calloutSymbolLayer","symbol","hasVisibleCallout","load","doLoad","abortLoad","createGraphics3DGraphic","createCalloutGraphic","addAuxiliaryGraphic","globalPropertyChanged","_getCalloutGraphicLayer","updateGeometry","renderingInfo","translation","centerOffset","screenOffset","centerOffsetUnits","elevationOffset","materialCollection","_auxiliaryGraphics","graphics3DSymbolLayer","idToState","Map","states","Set","owner","getGraphicId","getGraphics3DGraphicByObjectId","uid","clear","forEach","ensureStateList","push","displaying","isVisible","isDraped","tracking","emit","get","delete","forEachState","set","_index","minX","minY","maxX","maxY","_missing","_boundsByFeature","_addMany","from","values","equals","update","search","_get","computeExtent","getLogger","g","j","EventedMixin","_layerHandes","intersectLayers","stageLayer","intersector","state","viewingMode","options","store","computeLayerExtent","zmin","zmax","objectChanged","object","elevationInfo","mode","unit","offset","C","toRenderCoords","error","setAltitude","B","R","metadata","isElevationSource","reset","intersect","results","min","getIntersectionPoint","getAltitude","lastValidElevationBB","isEmpty","expandExtent","max","boundingVolumeWorldSpace","Math","E","objects","forAll","fromRenderCoords","aliasOf","context","_e","Pe","Re","De","Ie","propertiesPool","computedExtent","currentRenderer","rendererHasGeometryOperations","graphicStateTracking","symbolCreationContext","_frameTask","graphics3DGraphics","graphicsDrapedUids","graphicsBySymbol","symbolConversionCache","symbols","graphicsWithoutSymbol","graphicsWaitingForSymbol","graphicsUpdateId","_handles","suspendSymbolCleanup","_spatialReference","arcadeOnDemand","rendererChangeAbortController","elevationInfoChangeAbortController","setupAbortController","elevationAlignment","scaleVisibility","filterVisibility","_spatialIndex","extentPadding","_updatingPendingLoadedGraphicsChange","featureStore","objectStates","viewElevationProvider","stageLayerElevationProvider","sharedSymbolResourcesOwnerHandle","whenGraphics3DGraphicRequests","pendingUpdates","numberOfGraphics","numberOfGraphicsProvidingElevation","pendingAdds","pendingRemoves","pendingUpdatesPool","allocator","Ee","deallocator","symbolWarningLogged","geometryWarningLogged","objectIdInvisibleSet","_whenSymbolRemoved","preferredUpdatePolicy","forcedUpdatePolicy","elevationFeatureExpressionEnabled","graphicSymbolSupported","getRenderingInfoWithoutRenderer","_usedMemory","_visible","_startCreateGraphics","setup","running","suspendInfo","outsideOfView","updatingRemaining","qualitySettings","graphics3D","minTotalNumberOfFeatures","maxTotalNumberOfFeatures","maxTotalNumberOfPrimitives","averageSymbolComplexity","primitivesPerFeature","drawCallsPerFeature","ceil","d","minimumTotalNumberOfFeatures","maximumTotalNumberOfFeatures","maximumTotalNumberOfPrimitives","maximumNumberOfFeatures","symbolComplexities","numComplexities","estimated","primitivesPerCoordinate","labelsEnabled","memory","bytesPerFeatureLabel","abs","bytesPerFeature","usedMemoryPerGraphic","getSymbolComplexitiesUsedOrRenderer","getSymbolComplexitiesUsed","clone","id","retainId","hasLabelingContext","message","getSymbols","backgroundFillSymbol","getSymbolComplexityUsedOrRenderer","complexity","getConvertedSymbol","spatialIndex","AbortController","signal","initializeStage","sharedSymbolResources","addGraphicsOwner","renderSpatialReference","notifyGraphicGeometryChanged","notifyGraphicVisibilityChanged","physicallyBasedRenderingEnabled","watch","reschedule","updateLayerVisibility","recreateAllGraphics","slicePlaneEnabledChange","pixelRatioChange","physicalBasedRenderingChange","graphicsCollectionChanged","_signalUpdatingDuringAsyncLoadedGraphicsChange","runTask","updatePolicy","effectiveUpdatePolicy","GRAPHICS_CORE","featureReductionChange","notifyChange","rendererChange","abort","abortSetup","abortRendererChange","abortElevationInfoChange","removeGraphicsOwner","reject","allGraphicsDeleted","_stage","isPickable","suspendedOrOutsideOfView","graphicUid","updateGraphicGeometry","updateGraphicVisibility","displayFeatureLimit","Ue","hideAllGraphics","updateStageLayerVisibility","opacity","_findGraphics3DGraphicByObjectId","_getGraphicObjectID","layerLabelsEnabled","labelingInfoChange","visibilityInfoChange","getFastUpdateStatus","loading","fast","slow","processQueue","_applyPendingUpdates","_updateUserVisibility","visible","Promise","resolve","promise","service","useViewElevation","minDemResolution","minDemResolutionForPoints","resolution","getProjectedBoundingBox","boundingBox","requiresDrapedElevation","getElevation","screenSpaceObjects","loadedGraphics","find","whenGraphics3DGraphic","boundsForGraphics3DGraphic","computeAttachmentOrigin","render","num","draped","Oe","origin","je","indexOf","getSymbolLayerSize","added","removed","property","graphicUpdateVisibleHandler","graphicUpdateGeometryHandler","graphicUpdateSymbolHandler","recreateGraphic","loadStatus","graphics3DSymbol","newValue","expandComputedExtent","oldValue","updateSymbolMapping","diff","graphics3DGraphicPatches","symbolStatePatches","prepareSymbolPatch","_getRenderingInfo","recomputeExtentPadding","_cleanupSymbols","recreateGraphics","tmpVec","isFinite","xmin","ymin","xmax","ymax","elevationInfoChange","forEachGraphics3DSymbol","updateGraphicElevationContext","_recreateSymbol","updateStageLayerElevationProvider","unregister","dispose","register","invalidateSpatialQueryAccelerator","_recreateAllGraphics","tilingScheme","toArray","clearSymbolsAndGraphics","usedMemory","_conditionalRemove","removeGraphics3DGraphic","removeGraphic","_updatePolicyForGraphics","_addDelayed","_addImmediate","geometryType","loaded","_addGraphic","abortController","pushNew","_removeDelayed","_removeImmediate","_removeGraphic","_finishPendingUpdates","warn","done","_processPendingUpdateNew","madeProgress","_processPendingUpdateNewMesh","_processPendingUpdateNewRenderingInfo","_processPendingUpdateNewError","_getRenderingInfoAsync","getOrCreateGraphics3DSymbol","_beginGraphicUpdate","destroyed","removeUnordered","referenced","_createGraphics3DGraphic","_endGraphicUpdate","onRemoveGraphic","getRenderingInfo","getRenderingInfoAsync","hasValidSymbolCreationContext","ignoreDrivers","createGraphics3DSymbol","addGraphics3DGraphic","updateVisibility","addGraphic","setInitialIconVisibilityFlag","initialize","validateRenderer","currentRendererChange","arcadeRequired","arcadeUtils","ensureArcade","hasGeometryOperations","enableGeometryOperations","arcade","recreateAllGraphicsAndSymbols","updateUnchangedSymbolMappings","applyRendererDiff","volatileGraphicsUpdated","defaultSymbol","getSymbol","uniqueValueInfos","map","changed","applySymbolSetDiff","unchanged","oldId","newId","calculateUnchangedSymbolMapping","diffHasSymbolChange","applyUniqueValueRendererDiff","Object","keys","_recreateGraphicsForSymbol","isSliceable","Le","dirty","title","shaderTransformationChanged","graphics","sort","symbolId","numPending","forceUpdatePolicy","missing","pending","dependsOn","compareMinX","compareMinY","toBBox","_maxEntries","_minEntries","_initFormat","M","prune","X","Y","_all","data","children","leaf","pop","insert","_build","slice","height","_splitRoot","_insert","indexHint","splice","_condense","pushArray","log","sqrt","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","console","f","_allDistMargin","Function","join","_","w"],"mappings":"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","file":"js/chunk-121d41d5.1d942bc1.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import i from\"../../../../core/Accessor.js\";import t from\"../../../../core/Handles.js\";import{isSome as s,isNone as a}from\"../../../../core/maybe.js\";import{property as r}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{scaleBoundsPredicate as n}from\"../../../support/layerViewUtils.js\";import{TaskPriority as c}from\"../../../support/Scheduler.js\";let h=class extends i{constructor(){super(...arguments),this._scaleRangeActive=!1,this.layerScaleRangeVisibilityQuery=!1,this.handles=new t,this.layerView=null,this.layer=null,this.queryGraphicUIDsInExtent=null,this.extent=null,this.graphicsCore=null,this.basemapTerrain=null,this.layerScaleEnabled=!0,this.suspended=!1,this.updating=!0}setup(e,i,t,s,a){this.layerView=e,this.layer=i,this.queryGraphicUIDsInExtent=t,this.graphicsCore=s,this.basemapTerrain=a,this.updateScaleRangeActive();const r=this.layerView.view.resourceController.scheduler;this.handles.add(r.registerTask(c.SCALE_VISIBILITY,this))}destroy(){this.handles.destroy(),this.handles=null,this.layerView=null,this.extent=null,this.queryGraphicUIDsInExtent=null,this.graphicsCore=null}_setDirty(){this.updating||this._set(\"updating\",!0)}setExtent(e){this.extent=e,this._setDirty()}scaleRangeActive(){return this._scaleRangeActive}updateScaleRangeActive(){const e=this.layer;let i=this.layerScaleEnabled&&p(e.minScale,e.maxScale);e.labelingInfo&&!i&&(i=e.labelingInfo.some((e=>e&&p(e.minScale,e.maxScale))));const t=this._scaleRangeActive!==i;return this._scaleRangeActive=i,i&&!this.handles.has(o)&&this.basemapTerrain?(this.handles.add(this.basemapTerrain.on(\"scale-change\",(e=>this.scaleUpdateHandler(e))),o),this.layerScaleEnabled&&this.handles.add(this.basemapTerrain.on(\"tiles-visibility-changed\",(()=>this._setDirty())),o)):!i&&this.handles.has(o)&&this.handles.remove(o),t}get running(){return!(!this.layerView.view.basemapTerrain||!this.updating)}runTask(){const e=this.layerView.view.basemapTerrain;this.extent&&e&&e.ready&&this._scaleRangeActive&&this.layerScaleEnabled?this.layerScaleRangeVisibilityQuery||(this.layerScaleRangeVisibilityQuery=!0,e.queryVisibleScaleRange(this.extent,this.layer.minScale,this.layer.maxScale,(e=>this.finishUpdate(e)))):this.finishUpdate(!0)}finishUpdate(e){this.layerScaleRangeVisibilityQuery=!1,this._set(\"suspended\",!e),this._set(\"updating\",!1)}visibleAtLayerScale(e){return!this.layerScaleEnabled||n(e,this.layer.minScale||0,this.layer.maxScale||0)}visibleAtLabelScale(e,i){return n(e,i.minScale||0,i.maxScale||0)}graphicScale(e){let i;if(s(e.centroid)?i=e.centroid:s(e.graphic.geometry)&&\"point\"===e.graphic.geometry.type&&(i=e.graphic.geometry),i){return this.layerView.view.basemapTerrain?this.layerView.view.basemapTerrain.getScale(i):1}return null}graphicVisible(e){if(!this.layerScaleEnabled)return!0;const i=this.graphicScale(e);return this.visibleAtLayerScale(i)}updateVisibility(e){if(this._scaleRangeActive){const i=this.graphicVisible(e);return e.setVisibilityFlag(1,i,0)}return!1}updateGraphicLabelScaleVisibility(e){if(!this._scaleRangeActive)return!1;if(!e.labelGraphics||0===e.labelGraphics.length)return!1;const i=this.graphicScale(e),t=this.updateLabelScaleVisibility(e,i);return t&&(this.layerView.view.deconflictor.setDirty(),this.layerView.view.labeler.setDirty()),t}updateLabelScaleVisibility(e,i){if(!e.labelGraphics||0===e.labelGraphics.length)return!1;const t=e.labelGraphics[0]._labelClass;if(t&&null!=t.minScale&&null!=t.maxScale){const s=this.visibleAtLabelScale(i,t);if(e.setVisibilityFlag(1,s,1))return!0}return!1}scaleUpdateHandler(e){if(this._setDirty(),this.layerView.suspended)return;const i=e.extent,t=e.scale,r=this.visibleAtLayerScale(t);let l=!1;this.queryGraphicUIDsInExtent(i,e.spatialReference,(e=>{const n=this.graphicsCore.getGraphics3DGraphicById(e);if(a(n))return;const c=n.centroid;s(c)&&(i[0]>c.x||i[1]>c.y||i[2]<c.x||i[3]<c.y)||(n.setVisibilityFlag(1,r,0)&&(l=!0),this.updateLabelScaleVisibility(n,t)&&(l=!0))})),l&&(this.layerView.view.deconflictor.setDirty(),this.layerView.view.labeler.setDirty())}layerMinMaxScaleChangeHandler(){this.updateScaleRangeActive()&&!this._scaleRangeActive?this.graphicsCore.modifyGraphics3DGraphicVisibilities((e=>e.clearVisibilityFlag(1))):this._scaleRangeActive&&this.graphicsCore.updateAllGraphicsVisibility(),this._setDirty()}};function p(e,i){return e>0||i>0}e([r({constructOnly:!0})],h.prototype,\"layerScaleEnabled\",void 0),e([r({readOnly:!0})],h.prototype,\"suspended\",void 0),e([r({readOnly:!0})],h.prototype,\"updating\",void 0),h=e([l(\"esri.views.3d.layers.graphics.Graphics3DScaleVisibility\")],h);const o=\"terrain-events\",y=h;export{y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{getCentroidOptimizedGeometry as t}from\"../centroid.js\";import e from\"../OptimizedFeature.js\";import r from\"../OptimizedGeometry.js\";const o={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(t,r)=>new e(r,t.attributes,null,t.objectId),getGeometry:t=>t.geometry,getCentroid:(e,o)=>(e.centroid||(e.centroid=t(new r,e.geometry,o.hasZ,o.hasM)),e.centroid)};export{o as default,o as optimizedFeatureQueryEngineAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../core/has.js\";import{isNone as o}from\"../../core/maybe.js\";import r from\"../FillSymbol3DLayer.js\";import e from\"../LineSymbol3D.js\";import m from\"../MeshSymbol3D.js\";import l from\"../PointSymbol3D.js\";import t from\"../PolygonSymbol3D.js\";import s from\"../edges/SolidEdges3D.js\";import{defaultPointSymbol2D as i,defaultPolylineSymbol2D as n,defaultPolygonSymbol2D as p}from\"./defaults.js\";import{defaultColor as f,defaultOutlineColor as y}from\"./defaultsJSON.js\";const a=l.fromSimpleMarkerSymbol(i),c=e.fromSimpleLineSymbol(n),S=t.fromSimpleFillSymbol(p),u=new m({symbolLayers:[new r({material:{color:f},edges:new s({size:\"1px\",color:y})})]});function b(r){if(o(r))return null;switch(r.type){case\"mesh\":return u;case\"point\":case\"multipoint\":return a;case\"polyline\":return c;case\"polygon\":case\"extent\":return S}return null}export{b as getDefaultSymbol3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/Accessor.js\";import r from\"../../../../core/Evented.js\";import{isSome as o,isNone as s}from\"../../../../core/maybe.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{projectPoint as c}from\"../../../../geometry/projection.js\";import{getObjectId as p}from\"../../../../layers/graphics/dehydratedFeatures.js\";import n from\"../../../../layers/graphics/OptimizedFeature.js\";import h from\"../../../../layers/graphics/OptimizedGeometry.js\";import{optimizedFeatureQueryEngineAdapter as l}from\"../../../../layers/graphics/data/optimizedFeatureQueryEngineAdapter.js\";let d=class extends e{constructor(t){super(t),this.events=new r,this.hasZ=null,this.hasM=null,this.objectIdField=null,this.spatialReference=null,this.featureAdapter={getAttribute:(t,e)=>\"graphic\"in t?t.graphic.attributes[e]:l.getAttribute(t,e),getAttributes:t=>\"graphic\"in t?t.graphic.attributes:l.getAttributes(t),getObjectId:t=>\"graphic\"in t?p(t.graphic,this.objectIdField):l.getObjectId(t),getGeometry:t=>\"graphic\"in t?t.getAsOptimizedGeometry(this.hasZ,this.hasM):l.getGeometry(t),getCentroid:(t,e)=>{if(\"graphic\"in t){let r=null;o(t.centroid)?r=t.centroid:\"point\"===t.graphic.geometry.type&&c(t.graphic.geometry,u,this.spatialReference)&&(r=u);const i=new Array(2+(e.hasZ?1:0)+(e.hasM?1:0));return s(r)?(i[0]=0,i[1]=0,i[2]=0,i[3]=0):(i[0]=r.x,i[1]=r.y,e.hasZ&&(i[2]=r.hasZ?r.z:0),e.hasM&&(i[e.hasZ?3:2]=r.hasM?r.m:0)),new h([],i)}return l.getCentroid(t,e)},cloneWithGeometry:(t,e)=>\"graphic\"in t?new n(e,this.featureAdapter.getAttributes(t),null,this.featureAdapter.getObjectId(t)):l.cloneWithGeometry(t,e)}}forEach(t){this.forAllGraphics((e=>{t(e)}))}forEachInBounds(t,e){this.getSpatialIndex().forEachInBounds(t,e)}forEachBounds(t,e,r){const s=this.getSpatialIndex();for(const i of t){const t=this.featureAdapter.getObjectId(i);o(s.getBounds(t,r))&&e(r)}}};t([i({constructOnly:!0})],d.prototype,\"getSpatialIndex\",void 0),t([i({constructOnly:!0})],d.prototype,\"forAllGraphics\",void 0),t([i({constructOnly:!0})],d.prototype,\"hasZ\",void 0),t([i({constructOnly:!0})],d.prototype,\"hasM\",void 0),t([i({constructOnly:!0})],d.prototype,\"objectIdField\",void 0),t([i({constructOnly:!0})],d.prototype,\"spatialReference\",void 0),d=t([a(\"esri.views.3d.layers.graphics.Graphics3DFeatureStore\")],d);const u={type:\"point\",x:0,y:0,hasZ:!1,hasM:!1,spatialReference:null},m=d;export{d as Graphics3DFeatureStore,m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nclass e{constructor(e){this.schedule=e,this.sharedResources=null,this.streamDataRequester=null,this.elevationProvider=null,this.renderer=null,this.stage=null,this.clippingExtent=null,this.renderCoordsHelper=null,this.overlaySR=null,this.layer=null,this.layerView=null,this.localOriginFactory=null,this.featureExpressionInfoContext=null,this.screenSizePerspectiveEnabled=!0,this.slicePlaneEnabled=!1,this.physicalBasedRenderingEnabled=!1,this.isAsync=!1}}class l{}export{e as Graphics3DSymbolCreationContext,l as Graphics3DSymbolLayerCreationContext};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{result as r}from\"../../../../core/asyncUtils.js\";import{destroyMaybe as t}from\"../../../../core/maybe.js\";import{throwIfAborted as a}from\"../../../../core/promiseUtils.js\";import{make as e}from\"./Graphics3DCalloutSymbolLayerFactory.js\";import o from\"./Graphics3DSymbol.js\";class l extends o{constructor(r,t,a){super(r,t,a),this.calloutSymbolLayer=null,this.symbol.hasVisibleCallout()&&(this.calloutSymbolLayer=e(this.symbol,t))}async doLoad(t){const e=this.calloutSymbolLayer?r(this.calloutSymbolLayer.load()):null;try{await super.doLoad(t),a(t)}catch(l){var o;throw null==(o=this.calloutSymbolLayer)||o.abortLoad(),l}e&&await e}destroy(){super.destroy(),this.calloutSymbolLayer=t(this.calloutSymbolLayer)}createGraphics3DGraphic(r,t){const a=super.createGraphics3DGraphic(r,t);if(this.calloutSymbolLayer){const t=this.createCalloutGraphic(r);t&&a.addAuxiliaryGraphic(t)}return a}globalPropertyChanged(r,t){return!!super.globalPropertyChanged(r,t)&&(!this.calloutSymbolLayer||this.calloutSymbolLayer.globalPropertyChanged(r,t,(r=>this._getCalloutGraphicLayer(r))))}updateGeometry(r,t){const a=super.updateGeometry(r,t);if(a&&this.calloutSymbolLayer){const a=this._getCalloutGraphicLayer(r);if(a)return this.calloutSymbolLayer.updateGeometry(a,t)}return a}createCalloutGraphic(r){const t=r.renderingInfo,a={renderer:t.renderer,symbol:t.symbol,translation:[0,0,0],centerOffset:[0,0,0,0],screenOffset:[0,0],centerOffsetUnits:\"world\",elevationOffset:0,materialCollection:null};return r.renderingInfo=a,this.calloutSymbolLayer.createGraphics3DGraphic(r)}_getCalloutGraphicLayer(r){for(const t of r._auxiliaryGraphics)if(t.graphics3DSymbolLayer===this.calloutSymbolLayer)return t}}export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport o from\"./Graphics3DPointSymbol.js\";import r from\"./Graphics3DSymbol.js\";function t(t,i,e){let p;if(\"point-3d\"===t.type)p=o;else p=r;return new p(t,i,e)}export{t as make};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{remove as t}from\"../../../../core/arrayUtils.js\";import{isSome as i}from\"../../../../core/maybe.js\";import{getObjectId as e}from\"../../../../layers/graphics/dehydratedFeatures.js\";class s{constructor(t){this.graphicsCore=t,this.idToState=new Map,this.states=new Set;const i=t.owner.layer&&t.owner.layer.objectIdField;i?(this.getGraphicId=t=>e(t,i),this.getGraphics3DGraphicById=t=>this.graphicsCore.getGraphics3DGraphicByObjectId(t)):(this.getGraphicId=t=>t.uid,this.getGraphics3DGraphicById=t=>this.graphicsCore.getGraphics3DGraphicById(t))}destroy(){this.idToState.clear(),this.states.forEach(((t,i)=>this.remove(i)))}add(t){const e={remove:()=>this.remove(t)};if(this.states.has(t))return e;const s=this.getGraphicId(t.graphic),a=this.getGraphics3DGraphicById(s);this.states.has(t)||this.states.add(t);return this.ensureStateList(s).push(t),t.displaying=!!i(a)&&a.isVisible(),t.isDraped=!!i(a)&&a.isDraped,t.tracking=!0,i(a)&&t.emit(\"changed\",{}),e}remove(i){if(this.states.has(i)){if(this.idToState.size){const e=this.getGraphicId(i.graphic),s=this.idToState.get(e);s&&(t(s,i),0===s.length&&this.idToState.delete(e))}this.states.delete(i),i.tracking=!1,i.displaying=!1}}addGraphic(t){this.forEachState(t,(i=>{i.displaying=t.isVisible(),i.isDraped=t.isDraped,i.emit(\"changed\",{})}))}removeGraphic(t){this.forEachState(t,(t=>{t.displaying=!1,t.isDraped=!1}))}updateGraphicGeometry(t){this.forEachState(t,(t=>{t.emit(\"changed\",{})}))}updateGraphicVisibility(t){this.forEachState(t,(i=>{i.displaying=t.isVisible()}))}allGraphicsDeleted(){this.states.forEach((t=>{t.displaying=!1}))}ensureStateList(t){const i=this.idToState.get(t);if(i)return i;const e=new Array;return this.idToState.set(t,e),e}forEachState(t,i){if(0===this.states.size||0===this.idToState.size)return;const e=this.getGraphicId(t.graphic),s=this.idToState.get(e);null!=s&&s.forEach(i)}}export{s as GraphicStateTracking};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/Accessor.js\";import s from\"../../../../core/has.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{PooledRBush as n}from\"../../../../core/libs/rbush/PooledRBush.js\";import{fromRect as o}from\"../../../../geometry/support/aaBoundingBox.js\";import{getObjectId as a}from\"../../../../layers/graphics/dehydratedFeatures.js\";let d=class extends e{constructor(t){super(t),this._index=new n(9,s(\"esri-csp-restrictions\")?t=>({minX:t.extent[0],minY:t.extent[1],maxX:t.extent[2],maxY:t.extent[3]}):[\".extent[0]\",\".extent[1]\",\".extent[2]\",\".extent[3]\"]),this._missing=new Set,this._boundsByFeature=new Map,this.spatialReference=null,this.hasZ=null,this.hasM=null,this.objectIdField=null,this.updating=!1}setup(t){this._addMany(t)}destroy(){this._missing.clear(),this._index.destroy(),this._index=null,this._boundsByFeature.clear(),this._boundsByFeature=null}update(){this._missing.size>0&&(this._addMany(Array.from(this._missing.values())),this.updating=!1,this._missing.clear())}get updatingRemaining(){return this._missing.size}queryGraphicUIDsInExtent(t,e,s){e.equals(this.spatialReference)&&(u.minX=t[0],u.minY=t[1],u.maxX=t[2],u.maxY=t[3],this.update(),this._index.search(u,(t=>s(t.graphic.uid))))}add(t){this._missing.add(t),this.updating=!0}remove(t){if(this._missing.delete(t))return void(this.updating=this._missing.size>0);this._index.remove(t);const e=a(t.graphic,this._get(\"objectIdField\"));null!=e&&this._boundsByFeature.delete(e)}_addMany(t){if(0===t.length)return;const e=this._get(\"objectIdField\");for(const s of t){s.computeExtent(this.spatialReference);const t=a(s.graphic,e);null!=t&&this._boundsByFeature.set(t,s.extent)}this._index.load(t)}clear(){this._index.clear(),this._missing.clear(),this._boundsByFeature.clear(),this.updating=!1}forEachInBounds(t,e){u.minX=t[0],u.minY=t[1],u.maxX=t[2],u.maxY=t[3],this.update(),this._index.search(u,(t=>{e(t)}))}getBounds(t,e){this.update();const s=this._boundsByFeature.get(t);return s?o(e,s):null}};t([i({constructOnly:!0})],d.prototype,\"spatialReference\",void 0),t([i({constructOnly:!0})],d.prototype,\"hasZ\",void 0),t([i({constructOnly:!0})],d.prototype,\"hasM\",void 0),t([i({constructOnly:!0})],d.prototype,\"objectIdField\",void 0),t([i()],d.prototype,\"updating\",void 0),t([i({readOnly:!0})],d.prototype,\"updatingRemaining\",null),d=t([r(\"esri.views.3d.layers.graphics.SpatialIndex2D\")],d);const u={minX:0,minY:0,maxX:0,maxY:0};export{d as SpatialIndex2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import o from\"../../../../core/Evented.js\";import r from\"../../../../core/Handles.js\";import s from\"../../../../core/Logger.js\";import{unwrapOr as i}from\"../../../../core/maybe.js\";import{getMetersPerVerticalUnitForSR as n}from\"../../../../core/unitUtils.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{g as c}from\"../../../../chunks/vec3.js\";import{c as d}from\"../../../../chunks/vec3f64.js\";import{empty as m,toRect as p,expandWithVec3 as h}from\"../../../../geometry/support/aaBoundingBox.js\";import{empty as u}from\"../../../../geometry/support/aaBoundingRect.js\";import{getMetersPerUnit as f}from\"../../../../symbols/support/unitConversionUtils.js\";import{newIntersector as v}from\"../../webgl-engine/lib/Intersector.js\";const y=s.getLogger(\"esri.views.3d.layers.support.StageLayerElevationProvider\"),g=1;let j=class extends(o.EventedMixin(t)){constructor(e){super(e),this.elevationOffset=0,this._layerHandes=new r}initialize(){this.renderCoordsHelper=this.view.renderCoordsHelper,this.intersectLayers=[this.stageLayer],this.intersector=v(this.view.state.viewingMode),this.intersector.options.store=0;const e=this.computeLayerExtent(this.stageLayer);this.zmin=e[2],this.zmax=e[5];const t=this.stageLayer.events;this._layerHandes.add([t.on(\"layerObjectAdded\",(e=>this.objectChanged(e.object))),t.on(\"layerObjectRemoved\",(e=>this.objectChanged(e.object))),t.on(\"objectGeometryAdded\",(e=>this.objectChanged(e.object))),t.on(\"objectGeometryRemoved\",(e=>this.objectChanged(e.object))),t.on(\"vertexAttrsUpdated\",(e=>this.objectChanged(e.object))),t.on(\"objectTransformation\",(e=>this.objectChanged(e)))])}dispose(){this._layerHandes.destroy()}elevationInfoChanged(){const e=null!=this.layer?this.layer.elevationInfo:null;if(null!=e&&\"on-the-ground\"!==e.mode){const t=n(this.layer.spatialReference),o=f(e.unit);this.elevationOffset=i(e.offset,0)*o/t}else this.elevationOffset=0}getElevation(e,t,o,r){if(C[0]=e,C[1]=t,C[2]=o,!this.renderCoordsHelper.toRenderCoords(C,r,C))return y.error(\"could not project point for elevation alignment\"),null;const s=this.elevationOffset,i=this.zmin+s,n=this.zmax+s;this.renderCoordsHelper.setAltitude(B,n,C),this.renderCoordsHelper.setAltitude(R,i,C);const a=e=>e.metadata&&e.metadata.isElevationSource;return this.intersector.reset(B,R,null),this.intersector.intersect(this.intersectLayers,null,g,null,a),this.intersector.results.min.getIntersectionPoint(C)?this.renderCoordsHelper.getAltitude(C):null}objectChanged(e){var t;if(null==(t=e.metadata)||!t.isElevationSource||!this.spatialReference)return;m(b),e.metadata.lastValidElevationBB.isEmpty()||this.expandExtent(e.metadata.lastValidElevationBB.min,e.metadata.lastValidElevationBB.max,b);const o=e.boundingVolumeWorldSpace.min,r=e.boundingVolumeWorldSpace.max;this.expandExtent(o,r,b),p(b,x),this.zmin=Math.min(this.zmin,b[2]),this.zmax=Math.max(this.zmax,b[5]),E.extent=x,E.spatialReference=this.spatialReference,this.emit(\"elevation-change\",E),c(e.metadata.lastValidElevationBB.min,o),c(e.metadata.lastValidElevationBB.max,r)}computeLayerExtent(e){return m(b),e.objects.forAll((e=>this.expandExtent(e.boundingVolumeWorldSpace.min,e.boundingVolumeWorldSpace.max,b))),b}expandExtent(e,t,o){for(let r=0;r<8;++r)C[0]=1&r?e[0]:t[0],C[1]=2&r?e[1]:t[1],C[2]=4&r?e[2]:t[2],this.renderCoordsHelper.fromRenderCoords(C,C,this.spatialReference),h(o,C);return o}};e([a({constructOnly:!0})],j.prototype,\"layer\",void 0),e([a({constructOnly:!0})],j.prototype,\"stageLayer\",void 0),e([a({constructOnly:!0})],j.prototype,\"view\",void 0),e([a({readOnly:!0,aliasOf:\"view.spatialReference\"})],j.prototype,\"spatialReference\",void 0),j=e([l(\"esri.views.3d.layers.support.StageLayerElevationProvider\")],j);const b=m(),x=u(),E={spatialReference:null,extent:x,context:\"scene\"},C=d(),B=d(),R=d();export{j as StageLayerElevationProvider};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import\"../../../../renderers/ClassBreaksRenderer.js\";import\"../../../../renderers/DictionaryRenderer.js\";import\"../../../../renderers/DotDensityRenderer.js\";import\"../../../../renderers/HeatmapRenderer.js\";import\"../../../../renderers/Renderer.js\";import\"../../../../renderers/SimpleRenderer.js\";import t from\"../../../../renderers/UniqueValueRenderer.js\";import\"../../../../renderers/support/jsonUtils.js\";import\"../../../../symbols.js\";import i from\"../../../../core/Accessor.js\";import\"../../../../core/has.js\";import r from\"../../../../core/Error.js\";import s from\"../../../../core/Handles.js\";import a from\"../../../../core/Logger.js\";import{someMap as n,findInMap as o}from\"../../../../core/MapUtils.js\";import{isSome as l,unwrapOr as h,isNone as d,removeMaybe as p,destroyMaybe as c,get as y,unwrap as m}from\"../../../../core/maybe.js\";import g from\"../../../../core/PooledArray.js\";import{throwIfAborted as u,eachAlways as b,createDeferred as f,isAbortError as v}from\"../../../../core/promiseUtils.js\";import{schedule as C}from\"../../../../core/scheduling.js\";import{when as S,whenFalse as w,init as G,whenOnce as x,on as _}from\"../../../../core/watchUtils.js\";import{property as P}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as R}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{diff as D,isEmpty as I}from\"../../../../core/accessorSupport/diffUtils.js\";import{s as E,b as U,a as O}from\"../../../../chunks/vec3.js\";import{c as j}from\"../../../../chunks/vec3f64.js\";import{projectVectorToVector as L,projectXYZToVector as A,canProjectWithoutEngine as V,projectBuffer as F}from\"../../../../geometry/projection.js\";import{create as k,center as T,fromRect as M,equals as W}from\"../../../../geometry/support/aaBoundingBox.js\";import{create as z}from\"../../../../geometry/support/aaBoundingRect.js\";import B from\"../../../../layers/Layer.js\";import{getObjectId as q,computeAABB as N,hasGeometry as H}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{hydrateGraphic as $}from\"../../../../layers/graphics/hydratedFeatures.js\";import{isSupportedRenderer3D as Z,validateTo3D as Q}from\"../../../../renderers/support/rendererConversion.js\";import{loadArcade as J}from\"../../../../support/arcadeOnDemand.js\";import{getDefaultSymbol3D as K}from\"../../../../symbols/support/defaults3D.js\";import{to3D as X}from\"../../../../symbols/support/symbolConversion.js\";import{ViewElevationProvider as Y}from\"./ElevationQuery.js\";import{extractExpressionInfo as ee,createContext as te}from\"./featureExpressionInfoUtils.js\";import ie from\"./Graphics3DFeatureStore.js\";import re from\"./Graphics3DGraphicCreationContext.js\";import{Graphics3DSymbolCreationContext as se}from\"./Graphics3DSymbolCreationContext.js\";import{make as ae}from\"./Graphics3DSymbolFactory.js\";import ne from\"./Graphics3DWebStyleSymbol.js\";import{GraphicStateTracking as oe}from\"./GraphicStateTracking.js\";import{computeCentroid as le}from\"./graphicUtils.js\";import{SpatialIndex2D as he}from\"./SpatialIndex2D.js\";import{averageSymbolComplexities as de,defaultSymbolComplexity as pe}from\"./symbolComplexity.js\";import{StageLayerElevationProvider as ce}from\"../support/StageLayerElevationProvider.js\";import{toBoundingRect as ye}from\"../../support/extentUtils.js\";import{PropertiesPool as me}from\"../../support/PropertiesPool.js\";import{GridLocalOriginFactory as ge}from\"../../webgl-engine/lib/GridLocalOriginFactory.js\";import{WebGLLayer as ue}from\"../../webgl-engine/lib/WebGLLayer.js\";import{ImmediateTask as be,noBudget as fe,TaskPriority as ve}from\"../../../support/Scheduler.js\";import Ce from\"../../../../geometry/Extent.js\";import Se from\"../../../../geometry/Point.js\";import we from\"../../../../symbols/LabelSymbol3D.js\";import Ge from\"../../../../symbols/TextSymbol.js\";import xe from\"../../../../symbols/WebStyleSymbol.js\";var _e;const Pe=j(),Re=k(),De=a.getLogger(\"esri.views.3d.layers.graphics.Graphics3DCore\");let Ie=_e=class extends i{constructor(e){super(e),this.propertiesPool=new me({computedExtent:Ce},this),this.computedExtent=null,this.currentRenderer=null,this.rendererHasGeometryOperations=!1,this.graphicStateTracking=null,this.symbolCreationContext=new se(((e,t)=>this._frameTask.schedule(e,t))),this.graphics3DGraphics=new Map,this.stageLayer=null,this.stage=null,this.graphicsDrapedUids=new Set,this.graphicsBySymbol=new Map,this.symbolConversionCache=new Map,this.symbols=new Map,this.graphicsWithoutSymbol=new Map,this.graphicsWaitingForSymbol=new Map,this.graphicsUpdateId=0,this._handles=new s,this._frameTask=be,this.suspendSymbolCleanup=!1,this._spatialReference=null,this.arcadeOnDemand=null,this.rendererChangeAbortController=null,this.elevationInfoChangeAbortController=null,this.setupAbortController=null,this.elevationAlignment=null,this.scaleVisibility=null,this.filterVisibility=null,this._spatialIndex=null,this.extentPadding=0,this._updatingPendingLoadedGraphicsChange=null,this.featureStore=null,this.deconflictor=null,this.labeler=null,this.objectStates=null,this.viewElevationProvider=null,this.stageLayerElevationProvider=null,this.sharedSymbolResourcesOwnerHandle=null,this.whenGraphics3DGraphicRequests={},this.pendingUpdates=new Map,this.numberOfGraphics=0,this.numberOfGraphicsProvidingElevation=0,this.pendingAdds=0,this.pendingRemoves=0,this.pendingUpdatesPool=new g({allocator:e=>e||new Ee,deallocator:e=>(e.clear(),e)}),this.symbolWarningLogged=!1,this.geometryWarningLogged=!1,this.objectIdInvisibleSet=new Set,this._whenSymbolRemoved=new g,this.preferredUpdatePolicy=1,this.forcedUpdatePolicy=null,this.elevationFeatureExpressionEnabled=!0,this.owner=null,this.layer=null,this.graphicSymbolSupported=!0,this.getRenderingInfoWithoutRenderer=!1,this.hasZ=null,this.hasM=null,this._usedMemory=0,this._visible=void 0,this._startCreateGraphics=!1}get spatialIndex(){var e;this._spatialIndex||(this._spatialIndex=new he({objectIdField:null==(e=this.owner.layer)?void 0:e.objectIdField,spatialReference:this._spatialReference,hasZ:this.hasZ,hasM:this.hasM}),this._spatialIndex.setup(Array.from(this.graphics3DGraphics.values())));return this._spatialIndex.update(),this._spatialIndex}get effectiveUpdatePolicy(){return l(this.currentRenderer)&&\"dictionary\"===this.currentRenderer.type?0:h(this.forcedUpdatePolicy,this.preferredUpdatePolicy)}get updating(){var e,t;return!!(this.graphicsWaitingForSymbol.size>0||this.running||null!=(e=this.elevationAlignment)&&e.updating||l(this.scaleVisibility)&&this.scaleVisibility.updating||null!=(t=this.filterVisibility)&&t.updating||this.rendererChangeAbortController||this.elevationInfoChangeAbortController||this._updatingPendingLoadedGraphicsChange||this._frameTask.updating)}get running(){var e;return this.pendingUpdates.size>0||!(null==(e=this._spatialIndex)||!e.updating)}get suspendedOrOutsideOfView(){var e;return this.owner.suspended||(null==(e=this.owner.suspendInfo)?void 0:e.outsideOfView)}get updatingRemaining(){var e,t;return this.updating?this.pendingUpdates.size+.1*((null==(e=this._spatialIndex)?void 0:e.updatingRemaining)||0)+.1*((null==(t=this.elevationAlignment)?void 0:t.updatingRemaining)||0):0}get displayFeatureLimit(){const e=this.owner&&this.owner.view&&this.owner.view.qualitySettings,t=e?e.graphics3D.minTotalNumberOfFeatures:0,i=e?e.graphics3D.maxTotalNumberOfFeatures:0,r=e?e.graphics3D.maxTotalNumberOfPrimitives:0,s=this.averageSymbolComplexity,a=Math.max(1,l(s)?s.primitivesPerFeature:1),n=l(s)&&s.drawCallsPerFeature>0?i/s.drawCallsPerFeature*.3:i,o=Math.ceil(r/a),h=Math.max(t,Math.min(i,o,n)),d=this._get(\"displayFeatureLimit\");return d&&d.minimumTotalNumberOfFeatures===t&&d.maximumTotalNumberOfFeatures===i&&d.maximumTotalNumberOfPrimitives===r&&d.averageSymbolComplexity===s&&d.maximumNumberOfFeatures===h?d:{minimumTotalNumberOfFeatures:t,maximumTotalNumberOfFeatures:i,maximumTotalNumberOfPrimitives:r,averageSymbolComplexity:s,maximumNumberOfFeatures:h}}get averageSymbolComplexity(){const e=de(this.symbolComplexities),t=this._get(\"averageSymbolComplexity\");return 0===e.numComplexities||l(t)&&(e.estimated&&(t.primitivesPerFeature>=e.primitivesPerFeature||t.primitivesPerCoordinate>=e.primitivesPerCoordinate||t.drawCallsPerFeature>=e.drawCallsPerFeature)||t.primitivesPerFeature===e.primitivesPerFeature&&t.primitivesPerCoordinate===e.primitivesPerCoordinate&&t.drawCallsPerFeature===e.drawCallsPerFeature)?t:e}get spatialReference(){return this._spatialReference}get usedMemory(){const e=l(this.averageSymbolComplexity)&&this.labelsEnabled?this.averageSymbolComplexity.memory.bytesPerFeatureLabel*this.numberOfGraphics:0;return this._usedMemory+e}get usedMemoryPerGraphic(){if(this._usedMemory&&this.numberOfGraphics)return Math.abs(this.pendingAdds-this.pendingRemoves)/this.numberOfGraphics>30?0:this._usedMemory/this.numberOfGraphics;if(l(this.averageSymbolComplexity)){const e=this.labelsEnabled?this.averageSymbolComplexity.memory.bytesPerFeatureLabel:0;return this.averageSymbolComplexity.memory.bytesPerFeature+e}return 0}get unprocessedMemoryEstimate(){return Math.max(0,(this.pendingAdds-this.pendingRemoves)*this.usedMemoryPerGraphic)}get symbolComplexities(){return this.currentRenderer?this.getSymbolComplexitiesUsedOrRenderer(this.currentRenderer):this.getSymbolComplexitiesUsed()}getConvertedSymbol(e){if(\"web-style\"===e.type)return e.clone();const t=this.symbolConversionCache.get(e.id);if(l(t))return t;const i=X(e,{retainId:!0,hasLabelingContext:this.hasLabelingContext(e)}),r=i.symbol||null;return d(r)&&i.error&&De.error(i.error.message),this.symbolConversionCache.set(e.id,r),r}getSymbolComplexitiesUsedOrRenderer(e){if(d(e))return[];const t=e.getSymbols(),i=\"backgroundFillSymbol\"in e&&e.backgroundFillSymbol;if(!(i||t&&t.length))return[];const r=[],s=this.getSymbolComplexityUsedOrRenderer(i);l(s)&&r.push(s);for(const a of t){const e=this.getSymbolComplexityUsedOrRenderer(a);l(e)&&r.push(e)}return r}getSymbolComplexityUsedOrRenderer(e){if(d(e))return null;const t=this.symbols.get(e.id);if(l(t))return t.complexity;const i=this.getConvertedSymbol(e);return l(i)?pe(i):null}getSymbolComplexitiesUsed(){const e=[];return this.symbols.forEach((t=>{l(t)&&e.push(t.complexity)})),e}initialize(){this._spatialReference=this.owner.view.spatialReference,this._set(\"featureStore\",new ie({objectIdField:this.owner.layer&&this.owner.layer.objectIdField,hasZ:this.hasZ,hasM:this.hasM,spatialReference:this._spatialReference,getSpatialIndex:()=>this.spatialIndex,forAllGraphics:e=>this.graphics3DGraphics.forEach(e)}))}async setup(e){this.setupAbortController=new AbortController;const t=this.setupAbortController.signal;this._set(\"elevationAlignment\",e.elevationAlignment),this._set(\"scaleVisibility\",e.scaleVisibility),this._set(\"filterVisibility\",e.filterVisibility),this._set(\"deconflictor\",e.deconflictor),this._set(\"labeler\",e.labeler),this._set(\"objectStates\",e.objectStates);const i=this.owner.view;this.viewElevationProvider=new Y(this._spatialReference,i),this.initializeStage(i,this.layer.uid),this.symbolCreationContext.sharedResources=i.sharedSymbolResources,this.sharedSymbolResourcesOwnerHandle=i.sharedSymbolResources.addGraphicsOwner(this.owner),l(this.currentRenderer)&&(this.symbolCreationContext.renderer=this.currentRenderer),this.symbolCreationContext.stage=this.stage,this.symbolCreationContext.streamDataRequester=i.sharedSymbolResources.streamDataRequester,this.symbolCreationContext.renderCoordsHelper=i.renderCoordsHelper,this.symbolCreationContext.layer=this.layer,this.symbolCreationContext.layerView=this.owner,this.symbolCreationContext.localOriginFactory=new ge(i.renderSpatialReference),this.symbolCreationContext.elevationProvider=i.elevationProvider,this.symbolCreationContext.notifyGraphicGeometryChanged=e=>this.notifyGraphicGeometryChanged(e),this.symbolCreationContext.notifyGraphicVisibilityChanged=e=>this.notifyGraphicVisibilityChanged(e);const r=ee(this.layer.elevationInfo,this.elevationFeatureExpressionEnabled);this.symbolCreationContext.featureExpressionInfoContext=await te(r,this._spatialReference,De),u(t),this.symbolCreationContext.screenSizePerspectiveEnabled=i.screenSizePerspectiveEnabled&&this.layer.screenSizePerspectiveEnabled,this.symbolCreationContext.slicePlaneEnabled=!!this.owner.slicePlaneEnabled,this.symbolCreationContext.physicalBasedRenderingEnabled=!!this.owner.view.qualitySettings.physicallyBasedRenderingEnabled;const s=\"layer\"in this.owner?[\"layer.screenSizePerspectiveEnabled,view.screenSizePerspectiveEnabled\"]:\"view.screenSizePerspectiveEnabled\";this._handles.add([this.watch(\"suspendedOrOutsideOfView\",(()=>this._frameTask.reschedule((()=>this.updateLayerVisibility())))),this.owner.watch(s,(()=>{const e=i.screenSizePerspectiveEnabled&&this.layer.screenSizePerspectiveEnabled;var t;e!==this.symbolCreationContext.screenSizePerspectiveEnabled&&(this.symbolCreationContext.screenSizePerspectiveEnabled=e,null==(t=this.labeler)||t.reset(),this.recreateAllGraphics())})),this.owner.watch(\"slicePlaneEnabled\",(e=>this.slicePlaneEnabledChange(!!e))),this.owner.view.watch(\"pixelRatio\",(()=>this.pixelRatioChange())),this.owner.view.watch(\"qualitySettings.physicallyBasedRenderingEnabled\",(e=>this.physicalBasedRenderingChange(e))),S(i.basemapTerrain,\"tilingScheme\",(e=>{e.spatialReference.equals(this.symbolCreationContext.overlaySR)||(this.symbolCreationContext.overlaySR=i.basemapTerrain.spatialReference),this._handles.has(\"loaded-graphics\")?this.recreateAllGraphics():this._handles.add([_(this.owner,\"loadedGraphics\",\"change\",(e=>this.graphicsCollectionChanged(e)),(()=>this.recreateAllGraphics())),_(this.owner,\"loadedGraphics\",\"after-changes\",(()=>this._signalUpdatingDuringAsyncLoadedGraphicsChange()),(()=>this._signalUpdatingDuringAsyncLoadedGraphicsChange()))],\"loaded-graphics\")})),w(this,\"asyncUpdates\",(()=>this.runTask(fe)),!0),G(this,\"effectiveUpdatePolicy\",(e=>{l(this.stageLayer)&&(this.stageLayer.updatePolicy=e),this.symbolCreationContext.isAsync=0===this.effectiveUpdatePolicy,1===e&&this.runTask(fe)}),!0)]),this._frameTask=i.resourceController.scheduler.registerTask(ve.GRAPHICS_CORE,this),this.owner.layer&&\"featureReduction\"in this.owner.layer&&this._handles.add(this.owner.watch(\"layer.featureReduction\",(()=>this.deconflictor.featureReductionChange()))),this.notifyChange(\"averageSymbolComplexity\");try{await this.rendererChange(this.layer.renderer)}catch{}u(t),this.setupAbortController=null}abortSetup(){this.setupAbortController&&(this.setupAbortController.abort(),this.setupAbortController=null)}destroy(){this.abortSetup(),this.abortRendererChange(),this.abortElevationInfoChange(),this.owner.view.deconflictor.removeGraphicsOwner(this),this.owner.view.labeler.removeGraphicsOwner(this),this._updatingPendingLoadedGraphicsChange=p(this._updatingPendingLoadedGraphicsChange),this.clear(),this.graphicStateTracking=c(this.graphicStateTracking),this.stage&&(this.stage.remove(this.stageLayer),this.stageLayer=null,this.stage=null),this._handles=c(this._handles),this._frameTask.remove(),this._frameTask=be,this._spatialReference=null,this._set(\"owner\",null);for(const e in this.whenGraphics3DGraphicRequests)this.whenGraphics3DGraphicRequests[e].reject(new r(\"graphic:layer-destroyed\",\"Layer has been destroyed\"));this.whenGraphics3DGraphicRequests=null,this.sharedSymbolResourcesOwnerHandle=p(this.sharedSymbolResourcesOwnerHandle),this.propertiesPool=c(this.propertiesPool),this.pendingUpdatesPool=null,this.symbolConversionCache.clear(),this.objectIdInvisibleSet.clear(),this._spatialIndex=c(this._spatialIndex),this._set(\"featureStore\",c(this.featureStore))}clear(){var e,t;null==(e=this.objectStates)||e.allGraphicsDeleted(),l(this.graphicStateTracking)&&this.graphicStateTracking.allGraphicsDeleted(),this.graphics3DGraphics.forEach((e=>e.destroy())),null==(t=this._spatialIndex)||t.clear(),this.graphics3DGraphics.clear(),this.numberOfGraphics=0,this._usedMemory=0,this.updateLayerVisibility(),this.symbols.forEach(c),this.symbols.clear(),this.graphicsBySymbol.clear(),this.graphicsWithoutSymbol.clear(),this.graphicsWaitingForSymbol.clear(),this.pendingUpdates.clear(),this.pendingUpdatesPool.clear(),this.pendingAdds=0,this.pendingRemoves=0,this.notifyChange(\"updating\"),this.notifyChange(\"running\"),this.notifyChange(\"updatingRemaining\"),this.featureStore.events.emit(\"changed\")}initializeStage(e,t){this.stage=e._stage,this.stageLayer=new ue({isPickable:!this.suspendedOrOutsideOfView,updatePolicy:this.effectiveUpdatePolicy},t),this.stage.add(this.stageLayer);const i=this.stageLayer.events;i.on(\"objectTransformation\",(e=>this.notifyGraphicGeometryChanged(e.metadata.graphicUid))),i.on(\"visibilityChanged\",(e=>this.notifyGraphicVisibilityChanged(e.metadata.graphicUid))),i.on(\"objectGeometryAdded\",(e=>this.notifyGraphicGeometryChanged(e.object.metadata.graphicUid))),i.on(\"objectGeometryRemoved\",(e=>this.notifyGraphicGeometryChanged(e.object.metadata.graphicUid))),i.on(\"vertexAttrsUpdated\",(e=>this.notifyGraphicGeometryChanged(e.object.metadata.graphicUid)))}notifyGraphicGeometryChanged(e){if(d(this.graphicStateTracking)||d(e))return;const t=this.graphics3DGraphics.get(e);t&&this.graphicStateTracking.updateGraphicGeometry(t)}notifyGraphicVisibilityChanged(e){if(d(this.graphicStateTracking)||d(e))return;const t=this.graphics3DGraphics.get(e);t&&this.graphicStateTracking.updateGraphicVisibility(t)}updateLayerVisibility(){const e=this.displayFeatureLimit.maximumNumberOfFeatures,t=this.numberOfGraphics>e*Ue,i=!this.suspendedOrOutsideOfView&&!t;i!==this._visible&&(this._visible=i,i?(this.stageLayer.isPickable=!0,this.updateAllGraphicsVisibility()):(this.stageLayer.isPickable=!1,this.hideAllGraphics()),this.updateStageLayerVisibility())}updateStageLayerVisibility(){this.stageLayer.isVisible=this._visible&&(null==this.layer.opacity||this.layer.opacity>0)}getGraphics3DGraphicById(e){return this.graphics3DGraphics.get(e)}getGraphics3DGraphicByObjectId(e){var t;return null!=(t=this.owner.layer)&&t.objectIdField?this._findGraphics3DGraphicByObjectId(e):null}_getGraphicObjectID(e,t=this.owner.layer&&this.owner.layer.objectIdField){return q(e,t)}get graphics3DGraphicsByObjectID(){const e=this.owner.layer&&this.owner.layer.objectIdField;if(!e)return null;const t=new Map;return this.graphics3DGraphics.forEach((i=>{if(!i)return;const r=i.graphic,s=this._getGraphicObjectID(r,e);l(s)&&t.set(s,i)})),t}get labelsEnabled(){return!(!this.labeler||!this.labeler.layerLabelsEnabled())}async updateLabelingInfo(e){const t=this.deconflictor&&this.deconflictor.labelingInfoChange(e),i=this.labeler&&this.labeler.labelingInfoChange(e);await b([t,i])}updateVisibilityInfo(){this.deconflictor&&this.deconflictor.labelingInfoChange(),this.labeler&&this.labeler.visibilityInfoChange()}get symbolUpdateType(){if(this.pendingUpdates.size>0)return\"unknown\";let e=0,t=0;return n(this.symbols,((i,r)=>{if(l(i)){const s=i.getFastUpdateStatus();if(s.loading>0)return!0;this.graphicsBySymbol.has(r)&&(t+=s.fast,e+=s.slow)}return!1}))?\"unknown\":t>=0&&0===e?\"fast\":e>=0&&0===t?\"slow\":\"mixed\"}runTask(e){this._frameTask.processQueue(e),this._applyPendingUpdates(e),this.notifyChange(\"running\"),this.running||this.notifyChange(\"updating\"),this.notifyChange(\"updatingRemaining\")}setObjectIdVisibility(e,t){t?this.objectIdInvisibleSet.delete(e):this.objectIdInvisibleSet.add(e);const i=this._findGraphics3DGraphicByObjectId(e);l(i)&&this._updateUserVisibility(i)}_findGraphics3DGraphicByObjectId(e){return o(this.graphics3DGraphics,(t=>this._getGraphicObjectID(t.graphic)===e))}_updateUserVisibility(e){if(d(e))return!1;const t=e.graphic,i=this._getGraphicObjectID(t),r=t.visible&&!this.owner.suspended&&(d(i)||!this.objectIdInvisibleSet.has(i));return e.setVisibilityFlag(0,r,0)}whenGraphics3DGraphic(e){const t=this.graphics3DGraphics.get(e.uid);if(t)return Promise.resolve(t);const i=this.whenGraphics3DGraphicRequests[e.uid];if(i)return i.promise;const r=f();return this.whenGraphics3DGraphicRequests[e.uid]=r,r.promise}async boundsForGraphics3DGraphic(e,t){const i=this._spatialReference,r=this.owner.view.renderSpatialReference,s=this.owner.view.basemapTerrain.spatialReference,a=(e,t,s)=>F(e,r,t,e,i,t,s),n=(e,t,r)=>F(e,s,t,e,i,t,r),o=this.viewElevationProvider?{service:this.viewElevationProvider,useViewElevation:l(t)&&t.useViewElevation,minDemResolution:l(t)&&t.minDemResolution,minDemResolutionForPoints:this.owner.view.resolution}:null,d=await e.getProjectedBoundingBox(a,n,o,y(t,\"signal\"));if(!d)return null;const p=d.boundingBox;if(d.requiresDrapedElevation){const e=this.symbolCreationContext.elevationProvider;if(e){T(p,Pe);const t=h(e.getElevation(Pe[0],Pe[1],0,i,\"ground\"),0);p[2]=Math.min(p[2],t),p[5]=Math.max(p[5],t)}}return{boundingBox:p,screenSpaceObjects:d.screenSpaceObjects}}async whenGraphicBounds(e,t){await x(this.owner,\"loadedGraphics\");const i=this.owner.layer&&this.owner.layer.objectIdField,s=this.owner.loadedGraphics.find((t=>t===e||i&&t.attributes&&e.attributes&&t.attributes[i]===e.attributes[i]));if(!s)throw new r(\"internal:graphic-not-part-of-view\",\"Graphic is not part of this view\");const a=await this.whenGraphics3DGraphic(s);return this.boundsForGraphics3DGraphic(a,t)}computeAttachmentOrigin(e,t){const i=this.graphics3DGraphics.get(e.uid);if(!i)return null;const r=i.computeAttachmentOrigin();if(0===r.render.num&&0===r.draped.num)return null;E(Oe,0,0,0);let s=0;if(r.render.num>0){if(!L(r.render.origin,this.symbolCreationContext.renderCoordsHelper.spatialReference,je,t))return null;U(Oe,Oe,je),s++}if(r.draped.num>0){const[e,i]=r.draped.origin,a=h(this.viewElevationProvider.getElevation(e,i,\"ground\"),0);if(E(je,e,i,a),!L(je,this.viewElevationProvider.spatialReference,je,t))return null;U(Oe,Oe,je),s++}return s>1&&O(Oe,Oe,1/s),new Se({x:Oe[0],y:Oe[1],z:Oe[2],spatialReference:t})}getSymbolLayerSize(e,t){const i=this.symbols.get(e.id);if(d(i))throw new r(\"internal:symbol-not-part-of-view\",\"Symbol is not part of this view\");const s=e.symbolLayers.indexOf(t);if(-1===s)throw new r(\"internal:missing-symbol-layer\",\"Symbol layer is not in symbol\");const a=i.getSymbolLayerSize(s);if(null==a)throw new r(\"internal:missing-size\",\"Symbol layer has no valid size\");return a}graphicsCollectionChanged(e){this._startCreateGraphics&&(this.add(e.added),this.remove(e.removed))}graphicUpdateHandler(e){const t=e.graphic.uid,i=this.graphics3DGraphics.get(t),r=this.graphicsWithoutSymbol.get(t);if(i||r)switch(e.property){case\"visible\":this.graphicUpdateVisibleHandler(i);break;case\"geometry\":this.graphicUpdateGeometryHandler(i,e);break;case\"symbol\":this.graphicUpdateSymbolHandler(i,e)}}graphicUpdateGeometryHandler(e,t){const i=t.graphic.geometry;if(d(i))return void this.recreateGraphic(t.graphic);if(d(e)){const e=t.graphic.symbol&&t.graphic.symbol.id;if(e){const t=this.symbols.get(e);if(l(t)&&0===t.loadStatus)return}return void this.recreateGraphic(t.graphic)}const r=e.graphics3DSymbol;!d(t.newValue)&&r.updateGeometry(e,t.newValue)||this.recreateGraphic(e.graphic),this.expandComputedExtent(i)}graphicUpdateSymbolHandler(e,t){const i=t.graphic,r=l(e)?e.graphics3DSymbol:l(t.oldValue)?this.symbols.get(t.oldValue.id):null;if(d(r)||d(t.newValue))return void this.recreateGraphic(i);const s=r.symbol,a=this.getConvertedSymbol(t.newValue);if(l(a)&&(a.type!==s.type||\"web-style\"===a.type)||\"web-style\"===s.type)return void this.recreateGraphic(i);const n=this.graphicsBySymbol.get(s.id);if(n&&1!==n.size)return void this.recreateGraphic(i);const o=D(s,a);if(d(o))return void this.updateSymbolMapping(s.id,a);const h={diff:o,graphics3DGraphicPatches:[],symbolStatePatches:[]};if(r.prepareSymbolPatch(h),!I(h.diff))return void this.recreateGraphic(i);const p=this._getRenderingInfo(i);if(d(p))return void this.recreateGraphic(i);const c=r.extentPadding;for(const l of h.symbolStatePatches)l();if(c!==r.extentPadding&&this.recomputeExtentPadding(),l(e))for(const l of h.graphics3DGraphicPatches)l(e,p);this.updateSymbolMapping(s.id,a)}graphicUpdateVisibleHandler(e){this._updateUserVisibility(e)&&(this.labeler&&this.owner.view.labeler.setDirty(),this.owner.view.deconflictor.setDirty())}recreateGraphics(e){this.suspendSymbolCleanup=!0,this.remove(e),this.add(e),this.suspendSymbolCleanup=!1,1===this.effectiveUpdatePolicy&&this._cleanupSymbols()}recreateGraphic(e){this.recreateGraphics([e])}_beginGraphicUpdate(e){const t=this.graphicsUpdateId;return this.graphicsUpdateId++,this.graphicsWaitingForSymbol.set(e.uid,t),1===this.graphicsWaitingForSymbol.size&&this.notifyChange(\"updating\"),t}_endGraphicUpdate(e){e&&(this.graphicsWaitingForSymbol.delete(e.uid),0===this.graphicsWaitingForSymbol.size&&(this._cleanupSymbols(),this.notifyChange(\"updating\")))}recomputeExtentPadding(){let e=0;this.symbols.forEach((t=>{l(t)&&(e=Math.max(e,t.extentPadding))})),this._set(\"extentPadding\",e)}expandComputedExtent(e){const t=Re,i=e.spatialReference;N(e,t);const r=this._spatialReference,s=_e.tmpVec;if(i.equals(r)||A(t[0],t[1],0,i,s,r)&&(t[0]=s[0],t[1]=s[1],A(t[3],t[4],0,i,s,r),t[3]=s[0],t[4]=s[1]),!(isFinite(t[0])&&isFinite(t[3])&&isFinite(t[1])&&isFinite(t[4])))return;const a=this.computedExtent;let n=null;const o=isFinite(t[2])&&isFinite(t[5]),l=o&&(!a||null==a.zmin||t[2]<a.zmin),h=o&&(!a||null==a.zmax||t[5]>a.zmax);if(a){(t[0]<a.xmin||t[1]<a.ymin||t[3]>a.xmax||t[4]>a.ymax||l||h)&&(n=this.propertiesPool.get(\"computedExtent\"),n.xmin=Math.min(t[0],a.xmin),n.ymin=Math.min(t[1],a.ymin),n.xmax=Math.max(t[3],a.xmax),n.ymax=Math.max(t[4],a.ymax),n.spatialReference=r)}else n=this.propertiesPool.get(\"computedExtent\"),n.xmin=t[0],n.ymin=t[1],n.xmax=t[3],n.ymax=t[4],n.spatialReference=r;n&&(l&&(n.zmin=t[2]),h&&(n.zmax=t[5]),this._set(\"computedExtent\",n))}abortElevationInfoChange(){this.elevationInfoChangeAbortController&&(this.elevationInfoChangeAbortController.abort(),this.elevationInfoChangeAbortController=null)}async elevationInfoChange(){var e,t;this.abortElevationInfoChange();const i=new AbortController;this.elevationInfoChangeAbortController=i;const r=ee(this.layer.elevationInfo,this.elevationFeatureExpressionEnabled);this.symbolCreationContext.featureExpressionInfoContext=await te(r,this._spatialReference,De),u(i),this.elevationInfoChangeAbortController=null,null==(e=this.labeler)||e.elevationInfoChange(),this.forEachGraphics3DSymbol(((e,t,i)=>{e.globalPropertyChanged(\"elevationInfo\",t)?t.forEach((e=>{const t=e.graphic,i=e.labelGraphics;for(const r of i){r.graphics3DSymbolLayer.updateGraphicElevationContext(t,r)}})):this._recreateSymbol(i)})),this.updateStageLayerElevationProvider(),null==(t=this.elevationAlignment)||t.elevationInfoChange()}updateStageLayerElevationProvider(){this.stageLayerElevationProvider?(this.layer.elevationInfo&&\"relative-to-scene\"===this.layer.elevationInfo.mode||0===this.numberOfGraphicsProvidingElevation)&&(this.owner.view.elevationProvider.unregister(this.stageLayerElevationProvider),this.stageLayerElevationProvider.dispose(),this.stageLayerElevationProvider=null):(!this.layer.elevationInfo||this.layer.elevationInfo&&\"relative-to-scene\"!==this.layer.elevationInfo.mode)&&this.numberOfGraphicsProvidingElevation>0&&(this.stageLayerElevationProvider=new ce({layer:this.layer,stageLayer:this.stageLayer,view:this.owner.view}),this.owner.view.elevationProvider.register(\"scene\",this.stageLayerElevationProvider))}clearSymbolsAndGraphics(){var e,t,i,r,s;this.clear(),null==(e=this.filterVisibility)||e.clear(),null==(t=this.labeler)||t.reset(),null==(i=this.deconflictor)||i.clear(),null==(r=this.elevationAlignment)||r.clear(),null==(s=this.stageLayer)||s.invalidateSpatialQueryAccelerator(),this.stageLayerElevationProvider&&(this.owner.view.elevationProvider.unregister(this.stageLayerElevationProvider),this.stageLayerElevationProvider.dispose(),this.stageLayerElevationProvider=null)}startCreateGraphics(){this._startCreateGraphics=!0,this.recreateAllGraphics()}recreateAllGraphics(){this._recreateAllGraphics(!1)}recreateAllGraphicsAndSymbols(){this._recreateAllGraphics(!0)}_recreateAllGraphics(e=!1){if(!this._startCreateGraphics)return;const{loadedGraphics:t,view:i}=this.owner,r=i.basemapTerrain.tilingScheme&&t&&t.length?t.toArray():null;!e&&r||this.clearSymbolsAndGraphics(),this.symbolCreationContext.screenSizePerspectiveEnabled=this.owner.view.screenSizePerspectiveEnabled&&this.layer.screenSizePerspectiveEnabled,this.symbolCreationContext.slicePlaneEnabled=!!this.owner.slicePlaneEnabled,this._set(\"computedExtent\",null),r&&(e?this.add(r):this.recreateGraphics(r))}_recreateSymbol(e){const t=this.graphicsBySymbol.get(e),i=[];t&&(t.forEach(((e,t)=>{var r;const s=e.usedMemory;this._conditionalRemove(e,t),null==(r=this._spatialIndex)||r.remove(e),i.push(e.graphic),e.destroy(),this.removeGraphics3DGraphic(t,s),this.updateLayerVisibility(),this.featureStore.events.emit(\"changed\")})),this.graphicsBySymbol.set(e,new Map));const r=this.symbols.get(e);c(r),this.symbols.delete(e),this.add(i)}_recreateGraphicsForSymbol(e){const t=this.graphicsBySymbol.get(e);if(t){const e=[];t.forEach((t=>e.push(t.graphic))),this.recreateGraphics(e)}}_conditionalRemove(e,t){var i,r,s;this.graphicsDrapedUids.delete(t),null==(i=this.objectStates)||i.removeGraphic(e),null==(r=this.labeler)||r.removeGraphic(e),null==(s=this.deconflictor)||s.removeGraphic(e),l(this.graphicStateTracking)&&this.graphicStateTracking.removeGraphic(e)}add(e){e&&0!==e.length&&(this.owner.view.basemapTerrain&&this.owner.view.basemapTerrain.tilingScheme?(0===this._updatePolicyForGraphics(e)?this._addDelayed(e):this._addImmediate(e),this.notifyChange(\"updating\")):De.error(\"#add()\",\"Cannot add graphics before terrain surface has been initialized\"))}_updatePolicyForGraphics(e){if(1===this.effectiveUpdatePolicy&&(\"mesh\"===this.layer.geometryType||null==this.layer.geometryType))for(const t of e)if(l(t.geometry)&&\"mesh\"===t.geometry.type&&!t.geometry.loaded)return 0;return this.effectiveUpdatePolicy}_addImmediate(e){this.geometryWarningLogged=!1,this.symbolWarningLogged=!1;for(const t of e)this._addGraphic(t,this._getRenderingInfo(t,De),1);this._cleanupSymbols(),this.labeler&&(this.owner.view.labeler.setDirty(),this._cleanupSymbols()),this.owner.view.deconflictor.setDirty()}_addDelayed(e){for(const t of e){const e=t.uid;let i=this.pendingUpdates.get(e);i?i.add?0!==i.state&&i.abortController.abort():this.pendingAdds++:(i=this.pendingUpdatesPool.pushNew(),this.pendingAdds++,this.pendingUpdates.set(e,i)),i.add=t}this.notifyChange(\"running\"),this.notifyChange(\"updatingRemaining\")}remove(e){0===this.effectiveUpdatePolicy?this._removeDelayed(e):this._removeImmediate(e),this.notifyChange(\"updating\")}_removeImmediate(e){for(const t of e)this._removeGraphic(t);this._cleanupSymbols(),this.labeler&&this.owner.view.labeler.setDirty(),this.owner.view.deconflictor.setDirty()}_removeDelayed(e){for(const t of e){const e=t.uid,i=this.pendingUpdates.get(e);if(i)i.add&&(i.remove?i.add=null:this.pendingUpdates.delete(e),1===i.state&&i.abortController.abort(),this.pendingAdds--);else{const i=this.pendingUpdatesPool.pushNew();i.remove=t,this.pendingUpdates.set(e,i),this.pendingRemoves++}}0===this.pendingUpdates.size&&this._finishPendingUpdates(),this.notifyChange(\"running\"),this.notifyChange(\"updatingRemaining\")}_finishPendingUpdates(){this.pendingUpdatesPool.clear(),this._cleanupSymbols(),(this.pendingAdds||this.pendingRemoves)&&De.warn(\"pendingAdds/Removes in inconsistent state!\"),this.pendingAdds=0,this.pendingRemoves=0}_applyPendingUpdates(e){var t;if(this.geometryWarningLogged=!1,this.symbolWarningLogged=!1,0===this.pendingUpdates.size&&null!=(t=this._spatialIndex)&&t.updating)this._spatialIndex.update();else{for(const[t,i]of this.pendingUpdates){if(e.done)break;i.add&&0===i.state&&this._processPendingUpdateNew(i);let r=this.effectiveUpdatePolicy;if(!i.remove||i.add&&2!==i.state||(this.pendingRemoves--,e.madeProgress(),this._removeGraphic(i.remove),i.remove=null,r=1),i.add)switch(i.state){case 2:this._addGraphic(i.add,i.renderingInfo,r),i.add=null,this.pendingAdds--,e.madeProgress();break;case 3:i.add=null,this.pendingAdds--}null==i.remove&&null==i.add&&this.pendingUpdates.delete(t)}0===this.pendingUpdates.size&&(this._finishPendingUpdates(),this.notifyChange(\"running\"))}}_processPendingUpdateNew(e){if(!e.add)return void(e.state=2);const t=e.add.geometry;l(t)&&\"mesh\"===t.type&&!t.loaded?this._processPendingUpdateNewMesh(e,t):this._processPendingUpdateNewRenderingInfo(e)}async _processPendingUpdateNewMesh(e,t){e.state=1,e.abortController=new AbortController;const i=e.abortController.signal;try{await t.load({signal:i})}catch(r){return this._processPendingUpdateNewError(e,r)}e.abortController=null,this._processPendingUpdateNewRenderingInfo(e)}_processPendingUpdateNewError(e,t){e.abortController=null,v(t)?e.state=0:e.state=3}async _processPendingUpdateNewRenderingInfo(e){if(d(this.layer.renderer)||\"dictionary\"!==this.layer.renderer.type)return e.renderingInfo=this._getRenderingInfo(e.add,De),void(e.state=2);e.state=1,e.abortController=new AbortController;let t=null;try{t=await this._getRenderingInfoAsync(e.add,{signal:e.abortController.signal})}catch(i){return e.abortController=null,void(v(i)?e.state=0:e.state=3)}d(t)||d(t.symbol)?(De&&!this.symbolWarningLogged&&(this.symbolWarningLogged=!0,De.warn(`Graphic in layer ${this.layer.id} has no symbol and will not render`)),e.renderingInfo=null):e.renderingInfo=t,e.state=2}_addGraphic(e,t,i){if(this.graphicsWithoutSymbol.set(e.uid,e),d(t)||d(t.symbol)||!H(e))return;const r=t.symbol,s=this.getOrCreateGraphics3DSymbol(r,t.renderer);if(d(s))return;this.expandComputedExtent(e.geometry);const a=this._beginGraphicUpdate(e),n=new re(e,t,this.layer);let o=!1;const h=e=>{e===s.symbol.id&&(o=!0)};this._whenSymbolRemoved.push(h);const p=()=>{if(this.destroyed)return;this._whenSymbolRemoved.removeUnordered(h);if(this.graphicsWaitingForSymbol.get(e.uid)!==a||o||s.destroyed||this.graphicSymbolSupported&&e.symbol&&e.symbol.id!==s.symbol.id)--s.referenced;else{const t=this._createGraphics3DGraphic(s,n);this._spatialIndex&&l(t)&&this._spatialIndex.add(t),--s.referenced,this._endGraphicUpdate(e)}this.featureStore.events.emit(\"changed\"),this.labeler&&this.owner.view.labeler.setDirty()},c=t=>{this.destroyed||(this._whenSymbolRemoved.removeUnordered(h),o||(v(t)?this.add([e]):s.destroyed||this._endGraphicUpdate(e)))};0===i?s.load((()=>this._frameTask.schedule(p)),(e=>this._frameTask.schedule((()=>c(e))))):s.load(p,c)}_removeGraphic(e){const t=e.uid,i=this.graphics3DGraphics.get(t);if(i){var r;i.graphics3DSymbol.onRemoveGraphic(i);const e=i.usedMemory,s=i.isElevationSource;this._conditionalRemove(i,t),null==(r=this._spatialIndex)||r.remove(i);const a=i.graphics3DSymbol.symbol.id;this.graphicsBySymbol.get(a).delete(t),this.graphicsWithoutSymbol.delete(t),this.removeGraphics3DGraphic(t,e,s),i.destroy(),this.featureStore.events.emit(\"changed\")}else this.graphicsWithoutSymbol.delete(t),this.graphicsWaitingForSymbol.delete(t),0===this.graphicsWaitingForSymbol.size&&(this._cleanupSymbols(),this.notifyChange(\"updating\"))}hasLabelingContext(e){if(e instanceof we||e instanceof Ge){const t=this.symbolCreationContext.layer;return!!t.labelingInfo&&t.labelingInfo.some((t=>t.symbol===e))}return!1}hasValidSymbolCreationContext(e){return!(e instanceof we&&!this.hasLabelingContext(e))||(De.error(\"LabelSymbol3D is only valid as part of a LabelClass. Using LabelSymbol3D as a renderer symbol is not supported.\"),!1)}_getRenderingInfo(e,t){const i=e.geometry;if(d(i))return t&&!this.geometryWarningLogged&&(this.geometryWarningLogged=!0,t.warn(`Graphic in layer ${this.layer.id} has no geometry and will not render`)),null;if(!V(i.spatialReference,this._spatialReference))return t&&!this.geometryWarningLogged&&(this.geometryWarningLogged=!0,t.warn(`Graphic in layer ${this.layer.id} has incompatible spatial reference and will not render`)),null;if(!this.graphicSymbolSupported&&l(e.symbol))return t&&!this.symbolWarningLogged&&(this.symbolWarningLogged=!0,t.warn(`Graphic in layer ${this.layer.id} is not allowed to have a symbol, use a renderer instead`)),null;const r=this.rendererHasGeometryOperations?$(e,this.layer):e;let s;if(this.owner.getRenderingInfo&&(this.getRenderingInfoWithoutRenderer||l(this.currentRenderer)))s=this.owner.getRenderingInfo(r,this.currentRenderer,m(this.arcadeOnDemand));else{s={symbol:r.symbol||K(r.geometry)}}return d(s)||d(s.symbol)?(t&&!this.symbolWarningLogged&&(this.symbolWarningLogged=!0,t.warn(`Graphic in layer ${this.layer.id} has no symbol and will not render`)),null):s}_getRenderingInfoAsync(e,t){const i=e.geometry;if(d(i))return De&&!this.geometryWarningLogged&&(this.geometryWarningLogged=!0,De.warn(`Graphic in layer ${this.layer.id} has no geometry and will not render`)),null;if(!this.graphicSymbolSupported&&l(e.symbol))return De&&!this.symbolWarningLogged&&(this.symbolWarningLogged=!0,De.warn(`Graphic in layer ${this.layer.id} is not allowed to have a symbol, use a renderer instead`)),null;const r=this.rendererHasGeometryOperations?$(e,this.layer):e;return this.owner.getRenderingInfoAsync(r,m(this.currentRenderer),m(this.arcadeOnDemand),t)}createGraphics3DSymbol(e,t){if(!this.hasValidSymbolCreationContext(e))return null;const i=this.getConvertedSymbol(e);if(!i)return null;let r;if(l(t)&&\"backgroundFillSymbol\"in t&&t.backgroundFillSymbol){const e=X(t.backgroundFillSymbol,{ignoreDrivers:!0});l(e.symbol)&&\"web-style\"!==e.symbol.type&&\"cim\"!==e.symbol.type&&(r=e.symbol.symbolLayers)}const s=ae(i,this.symbolCreationContext,r);return s.load((()=>{const e=s.extentPadding;e>this.extentPadding&&this._set(\"extentPadding\",e),this.notifyChange(\"averageSymbolComplexity\")}),(()=>{})),s}getOrCreateGraphics3DSymbol(e,t){let i=this.symbols.get(e.id);return void 0===i&&(i=e instanceof xe?new ne(e,(e=>this._frameTask.schedule(e)),(e=>this.createGraphics3DSymbol(e,t))):this.createGraphics3DSymbol(e,t),this.symbols.set(e.id,i)),l(i)&&++i.referenced,i}trackGraphicState(e){return d(this.graphicStateTracking)&&(this.graphicStateTracking=new oe(this)),this.graphicStateTracking.add(e)}addGraphics3DGraphic(e){this._usedMemory+=e.usedMemory,this.graphics3DGraphics.set(e.graphic.uid,e),this.numberOfGraphics++,e.isElevationSource&&(this.numberOfGraphicsProvidingElevation++,this.updateStageLayerElevationProvider()),this.updateLayerVisibility()}removeGraphics3DGraphic(e,t,i=!1){this._usedMemory-=t,this.graphics3DGraphics.delete(e),this.numberOfGraphics--,i&&(this.numberOfGraphicsProvidingElevation--,this.updateStageLayerElevationProvider()),this.updateLayerVisibility()}_createGraphics3DGraphic(e,t){var i,r,s,a;const n=t.graphic;if(this.graphicsWithoutSymbol.delete(n.uid),!this.symbols.has(e.symbol.id))return this.add([n]),null;if(this.graphics3DGraphics.has(n.uid))return null;const o=e.createGraphics3DGraphic(t);if(d(o))return null;this.addGraphics3DGraphic(o);const h=e.symbol.id;this.graphicsBySymbol.has(h)||this.graphicsBySymbol.set(h,new Map),this.graphicsBySymbol.get(h).set(n.uid,o);o.isDraped&&this.graphicsDrapedUids.add(n.uid),o.centroid=null,l(n.geometry)&&\"point\"!==n.geometry.type&&(o.centroid=le(n.geometry,this._spatialReference)),this._updateUserVisibility(o),l(this.scaleVisibility)&&this.scaleVisibility.updateVisibility(o),null==(i=this.filterVisibility)||i.updateVisibility(o),null==(r=this.deconflictor)||r.addGraphic(o),null==(s=this.labeler)||s.addGraphic(o),null==(a=this.objectStates)||a.addGraphic(o),this.deconflictor&&this.owner.view.deconflictor.setInitialIconVisibilityFlag(this,o),o.initialize(this.stage,this.stageLayer,this.owner),l(this.graphicStateTracking)&&this.graphicStateTracking.addGraphic(o);const p=this.whenGraphics3DGraphicRequests[n.uid];return p&&(delete this.whenGraphics3DGraphicRequests[n.uid],p.resolve(o)),o}abortRendererChange(){this.rendererChangeAbortController&&(this.rendererChangeAbortController.abort(),this.rendererChangeAbortController=null)}async rendererChange(e){if(this.abortRendererChange(),e!==this.currentRenderer)if(this.validateRenderer(e),d(e)&&this.currentRendererChange(null,!1),Z(e))if(l(e)&&e.arcadeRequired){const t=new AbortController;this.rendererChangeAbortController=t;const{arcadeUtils:i}=await this.ensureArcade();u(t),i.hasGeometryOperations(e)&&(await i.enableGeometryOperations(),u(t)),0===this.effectiveUpdatePolicy?await this._frameTask.schedule((()=>this.currentRendererChange(e,!0)),t.signal):this.currentRendererChange(e,!0),this.rendererChangeAbortController=null}else if(0===this.effectiveUpdatePolicy){const t=new AbortController;this.rendererChangeAbortController=t,await this._frameTask.schedule((()=>this.currentRendererChange(e,!1)),t.signal),this.rendererChangeAbortController=null}else this.currentRendererChange(e,!1);else this.currentRendererChange(e,!1)}async ensureArcade(){return d(this.arcadeOnDemand)?(this.arcadeOnDemand=await J(),this.arcadeOnDemand):this.arcadeOnDemand}currentRendererChange(e,t){this.currentRenderer=e,this.rendererHasGeometryOperations=t,this.symbolCreationContext.arcade=m(this.arcadeOnDemand);const i=this.symbolCreationContext.renderer;if(e===i)return;if(this.symbolConversionCache.clear(),d(e))return this.symbolCreationContext.renderer=null,void this.recreateAllGraphicsAndSymbols();const r=D(i,e);this.updateUnchangedSymbolMappings(r,e,i),this.symbolCreationContext.renderer=e,d(r)||(\"complete\"===r.type?this.recreateAllGraphicsAndSymbols():\"partial\"===r.type&&(this.applyRendererDiff(r,e,i)?this.volatileGraphicsUpdated():this.recreateAllGraphicsAndSymbols()),this.notifyChange(\"averageSymbolComplexity\"))}diffHasSymbolChange(e){for(const t in e.diff)switch(t){case\"visualVariables\":case\"defaultSymbol\":case\"uniqueValueInfos\":break;case\"authoringInfo\":case\"fieldDelimiter\":delete e.diff[t];break;default:return!0}return!1}applySymbolSetDiff(e,t,i){e=e||[],t=t||[];const r=[];for(const s of t){const t=this.graphicsBySymbol.get(s.id);t&&t.forEach(((a,n)=>{const o=a.graphic,l=this.layer instanceof B?this.layer:null,h=m(this.arcadeOnDemand);if(s===i.defaultSymbol&&i.getSymbol($(o,l),{arcade:h})===i.defaultSymbol)return;const d=a.usedMemory;e.length||i.defaultSymbol?r.push(o):this.graphicsWithoutSymbol.set(n,o);const p=this.graphics3DGraphics.get(n);this._conditionalRemove(p,n),a.destroy(),t.delete(n),this.removeGraphics3DGraphic(n,d),this.updateLayerVisibility()})),this._whenSymbolRemoved.forAll((e=>e(s.id)))}(e.length||r.length)&&(this.graphicsWithoutSymbol.forEach((e=>r.push(e))),this.graphicsWithoutSymbol.clear(),this.add(r)),this._cleanupSymbols(),this.labeler&&this.owner.view.labeler.setDirty(),this.owner.view.deconflictor.setDirty()}applyUniqueValueRendererDiff(e,t,i){const r=e.diff.defaultSymbol,s=e.diff.uniqueValueInfos;if(r||s){const a=s?s.added.map((e=>e.symbol)):[],n=s?s.removed.map((e=>e.symbol)):[];if(s)for(let e=0;e<s.changed.length;e++)a.push(s.changed[e].newValue.symbol),n.push(s.changed[e].oldValue.symbol);return r?(i.defaultSymbol&&n.push(i.defaultSymbol),t.defaultSymbol&&a.push(t.defaultSymbol)):i.defaultSymbol&&a.length&&n.push(t.defaultSymbol),this.applySymbolSetDiff(a,n,t),delete e.diff.defaultSymbol,delete e.diff.uniqueValueInfos,!0}return!1}calculateUnchangedSymbolMapping(e,i,r){const s=e=>l(e)?e.id:null;if(i instanceof t&&r instanceof t&&(d(e)||\"partial\"===e.type)){const t=e&&e.diff,a=t&&t.defaultSymbol,n=t&&t.uniqueValueInfos;let o;return o=n?n.unchanged.map((e=>({oldId:s(e.oldValue.symbol),newId:s(e.newValue.symbol)}))):r.uniqueValueInfos.map(((e,t)=>({oldId:s(e.symbol),newId:s(i.uniqueValueInfos[t].symbol)}))),!a&&r.defaultSymbol&&o.push({oldId:s(r.defaultSymbol),newId:s(i.defaultSymbol)}),o}return[]}updateSymbolMapping(e,t){const i=l(t)&&t?\"string\"==typeof t?t:t.id:null,r=\"string\"==typeof t?null:t;if(!e||e===i)return;const s=this.graphicsBySymbol.get(e);this.graphicsBySymbol.delete(e),void 0!==s&&this.graphicsBySymbol.set(i,s);const a=this.symbols.get(e);void 0!==a&&(this.symbols.delete(e),this.symbols.set(i,a),l(a)&&(l(r)?a.symbol=r:a.symbol.id=i))}updateUnchangedSymbolMappings(e,t,i){const r=this.calculateUnchangedSymbolMapping(e,t,i);for(const{oldId:s,newId:a}of r)this.updateSymbolMapping(s,a)}applyRendererDiff(e,i,r){if(this.diffHasSymbolChange(e))return!1;if(i instanceof t&&r instanceof t&&this.applyUniqueValueRendererDiff(e,i,r)&&0===Object.keys(e.diff).length)return!0;for(const[t]of this.graphicsBySymbol){const r=this.symbols.get(t);if(l(r))switch(r.applyRendererDiff(e,i)){case 0:this._recreateSymbol(t);break;case 1:this._recreateGraphicsForSymbol(t)}}return!0}opacityChange(){this.forEachGraphics3DSymbol(((e,t)=>e.globalPropertyChanged(\"opacity\",t))),this.updateStageLayerVisibility()}slicePlaneEnabledChange(e){e!==this.symbolCreationContext.slicePlaneEnabled&&(this.symbolCreationContext.slicePlaneEnabled=e,this.stageLayer.isSliceable=e,this.forEachGraphics3DSymbol(((e,t)=>e.globalPropertyChanged(\"slicePlaneEnabled\",t))),this.deconflictor&&this.deconflictor.slicePlaneEnabledChange(),this.labeler&&this.labeler.slicePlaneEnabledChange())}physicalBasedRenderingChange(e){e!==this.symbolCreationContext.physicalBasedRenderingEnabled&&(this.symbolCreationContext.physicalBasedRenderingEnabled=e,this.forEachGraphics3DSymbol(((e,t,i)=>{e.globalPropertyChanged(\"physicalBasedRenderingEnabled\",t)||this._recreateSymbol(i)})))}pixelRatioChange(){this.forEachGraphics3DSymbol(((e,t,i)=>{e.globalPropertyChanged(\"pixelRatio\",t)||this._recreateSymbol(i)}))}_signalUpdatingDuringAsyncLoadedGraphicsChange(){this._updatingPendingLoadedGraphicsChange&&this._updatingPendingLoadedGraphicsChange.remove(),this._updatingPendingLoadedGraphicsChange=C((()=>{this._updatingPendingLoadedGraphicsChange=null}))}setClippingExtent(e,t){const i=this.symbolCreationContext.clippingExtent,r=z();return ye(e,r,t)?this.symbolCreationContext.clippingExtent=M(k(),r):this.symbolCreationContext.clippingExtent=null,!W(this.symbolCreationContext.clippingExtent,i)}modifyGraphics3DGraphicVisibilities(e){let t=!1;this.graphics3DGraphics.forEach((i=>{e(i)&&(t=!0)})),t&&(this.labeler&&this.owner.view.labeler.setDirty(),this.owner.view.deconflictor.setDirty())}forEachGraphics3DSymbol(e){for(const[t,i]of this.symbols){if(d(i))return;e(i,this.graphicsBySymbol.get(t)||Le,t)}}updateAllGraphicsVisibility(){this.filterVisibility&&(this.filterVisibility.dirty=!0),this.modifyGraphics3DGraphicVisibilities((e=>{const t=this._updateUserVisibility(e),i=l(this.scaleVisibility)&&this.scaleVisibility.updateVisibility(e);return t||i}))}hideAllGraphics(){this.modifyGraphics3DGraphicVisibilities((e=>e.setVisibilityFlag(0,!1,0)))}validateRenderer(e){const t=Q(e);if(t){const e=`Renderer for layer '${this.layer.title?`${this.layer.title}, `:\"\"}, id:${this.layer.id}' is not supported in a SceneView`;De.warn(e,t.message)}}volatileGraphicsUpdated(){var e;null==(e=this.labeler)||e.reset(),this.stageLayer.shaderTransformationChanged(),this.notifyChange(\"updating\")}_cleanupSymbols(){if(this.graphicsWaitingForSymbol.size>0||this.suspendSymbolCleanup)return;let e=!1;this.symbols.forEach(((t,i)=>{if(d(t)||t.referenced>0)return;const r=this.graphicsBySymbol.get(i);r&&0!==r.size||(this.graphicsBySymbol.delete(i),this.symbols.delete(i),c(t),e=!0)})),e&&(this.recomputeExtentPadding(),this.notifyChange(\"averageSymbolComplexity\"))}snapshotInternals(){return{graphics:[...this.graphics3DGraphics.keys()].sort(),symbols:[...this.symbols.keys()].sort(),graphicsBySymbol:[...this.graphicsBySymbol.keys()].sort().map((e=>({symbolId:e,graphics:[...this.graphicsBySymbol.get(e).keys()].sort()}))),graphicsWithoutSymbol:[...this.graphicsWithoutSymbol.keys()].sort(),graphicsDrapedUids:[...this.graphicsDrapedUids].sort(),pendingUpdates:this.pendingUpdates}}get test(){return{symbols:this.symbols,filterVisibility:this.filterVisibility,numPending:this.pendingUpdates.size,forceUpdatePolicy:e=>{this.forcedUpdatePolicy=e}}}get performanceInfo(){return{visible:this.graphics3DGraphics.size,missing:this.graphicsWithoutSymbol.size,pending:this.pendingUpdates.size}}};Ie.tmpVec=j(),e([P({readOnly:!0})],Ie.prototype,\"computedExtent\",void 0),e([P()],Ie.prototype,\"currentRenderer\",void 0),e([P()],Ie.prototype,\"rendererHasGeometryOperations\",void 0),e([P()],Ie.prototype,\"_frameTask\",void 0),e([P()],Ie.prototype,\"rendererChangeAbortController\",void 0),e([P()],Ie.prototype,\"elevationInfoChangeAbortController\",void 0),e([P()],Ie.prototype,\"setupAbortController\",void 0),e([P({readOnly:!0})],Ie.prototype,\"elevationAlignment\",void 0),e([P({readOnly:!0})],Ie.prototype,\"scaleVisibility\",void 0),e([P({readOnly:!0})],Ie.prototype,\"filterVisibility\",void 0),e([P()],Ie.prototype,\"_spatialIndex\",void 0),e([P({readOnly:!0})],Ie.prototype,\"extentPadding\",void 0),e([P()],Ie.prototype,\"_updatingPendingLoadedGraphicsChange\",void 0),e([P({readOnly:!0})],Ie.prototype,\"featureStore\",void 0),e([P({readOnly:!0})],Ie.prototype,\"deconflictor\",void 0),e([P({readOnly:!0})],Ie.prototype,\"labeler\",void 0),e([P({readOnly:!0})],Ie.prototype,\"objectStates\",void 0),e([P()],Ie.prototype,\"preferredUpdatePolicy\",void 0),e([P()],Ie.prototype,\"forcedUpdatePolicy\",void 0),e([P({readOnly:!0})],Ie.prototype,\"effectiveUpdatePolicy\",null),e([P({constructOnly:!0})],Ie.prototype,\"elevationFeatureExpressionEnabled\",void 0),e([P({constructOnly:!0})],Ie.prototype,\"owner\",void 0),e([P({constructOnly:!0})],Ie.prototype,\"layer\",void 0),e([P({constructOnly:!0})],Ie.prototype,\"graphicSymbolSupported\",void 0),e([P({constructOnly:!0})],Ie.prototype,\"getRenderingInfoWithoutRenderer\",void 0),e([P({readOnly:!0})],Ie.prototype,\"updating\",null),e([P({readOnly:!0})],Ie.prototype,\"running\",null),e([P({readOnly:!0})],Ie.prototype,\"suspendedOrOutsideOfView\",null),e([P({readOnly:!0,dependsOn:[]})],Ie.prototype,\"updatingRemaining\",null),e([P({readOnly:!0,dependsOn:[\"owner.view.qualitySettings.graphics3D.maxTotalNumberOfPrimitives\",\"owner.view.qualitySettings.graphics3D.maxTotalNumberOfFeatures\",\"averageSymbolComplexity\"]})],Ie.prototype,\"displayFeatureLimit\",null),e([P({readOnly:!0,dependsOn:[]})],Ie.prototype,\"averageSymbolComplexity\",null),e([P({constructOnly:!0})],Ie.prototype,\"hasZ\",void 0),e([P({constructOnly:!0})],Ie.prototype,\"hasM\",void 0),Ie=_e=e([R(\"esri.views.3d.layers.graphics.Graphics3DCore\")],Ie);class Ee{constructor(){this.add=null,this.renderingInfo=null,this.state=0,this.remove=null}clear(){this.add=null,this.renderingInfo=null,this.state=0,this.abortController=null,this.remove=null}}const Ue=10,Oe=j(),je=j(),Le=new Map;export{Ie as Graphics3DCore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{indexOf as t,PositionHint as i}from\"../../arrayUtils.js\";import{assumeNonNull as n}from\"../../maybe.js\";import e from\"../../PooledArray.js\";import{q as s}from\"../../../chunks/quickselect.js\";class h{constructor(t=9,i){this.compareMinX=l,this.compareMinY=c,this.toBBox=function(t){return t},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&(\"function\"==typeof i?this.toBBox=i:this._initFormat(i)),this.clear()}destroy(){this.clear(),M.prune(),X.prune(),Y.prune(),B.prune()}all(t){this._all(this.data,t)}search(t,i){let n=this.data;const e=this.toBBox;if(p(t,n))for(M.clear();n;){for(let s=0,h=n.children.length;s<h;s++){const h=n.children[s],a=n.leaf?e(h):h;p(t,a)&&(n.leaf?i(h):x(t,a)?this._all(h,i):M.push(h))}n=M.pop()}}collides(t){let i=this.data;const n=this.toBBox;if(!p(t,i))return!1;for(M.clear();i;){for(let e=0,s=i.children.length;e<s;e++){const s=i.children[e],h=i.leaf?n(s):s;if(p(t,h)){if(i.leaf||x(t,h))return!0;M.push(s)}}i=M.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}let i=this._build(t.slice(0,t.length),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const t=this.data;this.data=i,i=t}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=new b([]),this}remove(i){if(!i)return this;let e,s=this.data,h=null,a=0,r=!1;const o=this.toBBox(i);for(Y.clear(),B.clear();s||Y.length>0;){var l;if(!s)s=n(Y.pop()),h=Y.data[Y.length-1],a=null!=(l=B.pop())?l:0,r=!0;if(s.leaf&&(e=t(s.children,i,s.children.length,s.indexHint),-1!==e))return s.children.splice(e,1),Y.push(s),this._condense(Y),this;r||s.leaf||!x(s,o)?h?(a++,s=h.children[a],r=!1):s=null:(Y.push(s),B.push(a),a=0,h=s,s=s.children[0])}return this}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,i){let n=t;for(X.clear();n;){var e;if(!0===n.leaf)for(const t of n.children)i(t);else X.pushArray(n.children);n=null!=(e=X.pop())?e:null}}_build(t,i,n,e){const s=n-i+1;let h=this._maxEntries;if(s<=h){const e=new b(t.slice(i,n+1));return a(e,this.toBBox),e}e||(e=Math.ceil(Math.log(s)/Math.log(h)),h=Math.ceil(s/h**(e-1)));const r=new j([]);r.height=e;const o=Math.ceil(s/h),l=o*Math.ceil(Math.sqrt(h));g(t,i,n,l,this.compareMinX);for(let a=i;a<=n;a+=l){const i=Math.min(a+l-1,n);g(t,a,i,o,this.compareMinY);for(let n=a;n<=i;n+=o){const s=Math.min(n+o-1,i);r.children.push(this._build(t,n,s,e-1))}}return a(r,this.toBBox),r}_chooseSubtree(t,i,n,e){for(;e.push(i),!0!==i.leaf&&e.length-1!==n;){let n,e=1/0,s=1/0;for(let h=0,a=i.children.length;h<a;h++){const a=i.children[h],r=m(a),o=d(t,a)-r;o<s?(s=o,e=r<e?r:e,n=a):o===s&&r<e&&(e=r,n=a)}i=n||i.children[0]}return i}_insert(t,i,n){const e=this.toBBox,s=n?t:e(t);Y.clear();const h=this._chooseSubtree(s,this.data,i,Y);for(h.children.push(t),o(h,s);i>=0&&Y.data[i].children.length>this._maxEntries;)this._split(Y,i),i--;this._adjustParentBBoxes(s,Y,i)}_split(t,i){const n=t.data[i],e=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,e);const h=this._chooseSplitIndex(n,s,e);if(!h)return void console.log(\"  Error: assertion failed at PooledRBush._split: no valid split index\");const r=n.children.splice(h,n.children.length-h),o=n.leaf?new b(r):new j(r);o.height=n.height,a(n,this.toBBox),a(o,this.toBBox),i?t.data[i-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,i){this.data=new j([t,i]),this.data.height=t.height+1,a(this.data,this.toBBox)}_chooseSplitIndex(t,i,n){let e,s,h;e=s=1/0;for(let a=i;a<=n-i;a++){const i=r(t,0,a,this.toBBox),o=r(t,a,n,this.toBBox),l=f(i,o),c=m(i)+m(o);l<e?(e=l,h=a,s=c<s?c:s):l===e&&c<s&&(s=c,h=a)}return h}_chooseSplitAxis(t,i,n){const e=t.leaf?this.compareMinX:l,s=t.leaf?this.compareMinY:c;this._allDistMargin(t,i,n,e)<this._allDistMargin(t,i,n,s)&&t.children.sort(e)}_allDistMargin(t,i,n,e){t.children.sort(e);const s=this.toBBox,h=r(t,0,i,s),a=r(t,n-i,n,s);let l=u(h)+u(a);for(let r=i;r<n-i;r++){const i=t.children[r];o(h,t.leaf?s(i):i),l+=u(h)}for(let r=n-i-1;r>=i;r--){const i=t.children[r];o(a,t.leaf?s(i):i),l+=u(a)}return l}_adjustParentBBoxes(t,i,n){for(let e=n;e>=0;e--)o(i.data[e],t)}_condense(i){for(let n=i.length-1;n>=0;n--){const e=i.data[n];if(0===e.children.length)if(n>0){const s=i.data[n-1],h=s.children;h.splice(t(h,e,h.length,s.indexHint),1)}else this.clear();else a(e,this.toBBox)}}_initFormat(t){const i=[\"return a\",\" - b\",\";\"];this.compareMinX=new Function(\"a\",\"b\",i.join(t[0])),this.compareMinY=new Function(\"a\",\"b\",i.join(t[1])),this.toBBox=new Function(\"a\",\"return {minX: a\"+t[0]+\", minY: a\"+t[1]+\", maxX: a\"+t[2]+\", maxY: a\"+t[3]+\"};\")}}function a(t,i){r(t,0,t.children.length,i,t)}function r(t,i,n,e,s){s||(s=new b([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let h,a=i;a<n;a++)h=t.children[a],o(s,t.leaf?e(h):h);return s}function o(t,i){t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY)}function l(t,i){return t.minX-i.minX}function c(t,i){return t.minY-i.minY}function m(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function f(t,i){const n=Math.max(t.minX,i.minX),e=Math.max(t.minY,i.minY),s=Math.min(t.maxX,i.maxX),h=Math.min(t.maxY,i.maxY);return Math.max(0,s-n)*Math.max(0,h-e)}function x(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function p(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function g(t,i,e,h,a){const r=[i,e];for(;r.length;){const i=n(r.pop()),e=n(r.pop());if(i-e<=h)continue;const o=e+Math.ceil((i-e)/h/2)*h;s(t,o,e,i,a),r.push(e,o,o,i)}}const M=new e,X=new e,Y=new e,B=new e({deallocator:void 0});class _{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class w extends _{constructor(){super(...arguments),this.height=1,this.indexHint=new i}}class b extends w{constructor(t){super(),this.children=t,this.leaf=!0}}class j extends w{constructor(t){super(),this.children=t,this.leaf=!1}}export{_ as BBox,h as PooledRBush,h as default};\n"],"sourceRoot":""}