(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2671d02c"],{"1f69":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return W}));var i=n("a4ee"),r=(n("e06a"),n("4856")),o=(n("b423"),n("261a"),n("b48d"),n("478c"),n("667b"),n("ff57"),n("da00"),n("f976"),n("5cdb")),s=n("e694"),a=n("59b2"),l=(n("b50f"),n("c120"),n("cea0"),n("d386")),c=n("74e2"),u=n("a6a3"),p=n("ce50"),d=n("6d5f"),f=n("b2b2"),y=n("7e5e"),b=n("2edc"),m=n("5996");let g=class extends d["a"]{constructor(){super(...arguments),this.featureDefinition=null,this.type="ogc-feature"}load(e){return this.addResolvingPromise(this._loadOGCServices(this.layer,e)),this.when()}getFeatureDefinition(){const{featureDefinition:{collection:e,layerDefinition:t,spatialReference:n,supportedCrs:i},layer:{apiKey:r,capabilities:o,customParameters:s}}=this;return{capabilities:o,collection:e,layerDefinition:t,queryParameters:{apiKey:r,customParameters:s},spatialReference:n,supportedCrs:i}}queryExtent(e,t={}){return null}queryFeatureCount(e,t={}){return null}queryFeatures(e,t={}){return this.queryFeaturesJSON(e,t).then(e=>b["default"].fromJSON(e))}queryFeaturesJSON(e,t={}){const n=this.getFeatureDefinition();return this.load(t).then(()=>Object(y["i"])(n,e,t))}queryObjectIds(e,t={}){return null}supportsSpatialReference(e){return!(!e.isWGS84&&!e.isWebMercator)||!!this.featureDefinition.supportedCrs[e.wkid]}_conformsToType(e,t){var n;const i=new RegExp(`^${t}$`,"i");return null!=(n=e.conformsTo.some(e=>i.test(e)))&&n}_getCapabilities(e,t){var n,i,r,o,s,a,l;const c=Object(f["k"])(t)?null==(n=t.components)?void 0:n.parameters:null;return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},query:{maxRecordCount:null!=(i=null!=(r=null==c||null==(o=c.limit)||null==(s=o.schema)?void 0:s.maximum)?r:null==c||null==(a=c.limitFeatures)||null==(l=a.schema)?void 0:l.maximum)?i:5e3,maxRecordCountFactor:void 0,standardMaxRecordCount:void 0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsStatistics:!1,supportsSqlExpression:!1,tileMaxRecordCount:void 0},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUploadWithItemId:!1,supportsUpdateWithoutM:!1}}}_getExtent(e){var t;const n=null==(t=e.extent)?void 0:t.spatial;if(!n)return null;const i=n.bbox[0],r=4===i.length,o=i[0],s=i[1],a=r?void 0:i[2];return{xmin:o,ymin:s,xmax:r?i[2]:i[3],ymax:r?i[3]:i[4],zmin:a,zmax:r?void 0:i[5],spatialReference:m["a"].WGS84.toJSON()}}_getStorageSpatialReference(e){var t;const n=null!=(t=e.storageCrs)?t:y["a"],i=Object(y["h"])(n);return Object(f["j"])(i)?m["a"].WGS84:new m["a"]({wkid:i})}_getSupportedSpatialReferences(e,t){var n;const i="#/crs",r=null!=(n=e.crs)?n:[y["a"]],o=r.includes(i)?r.filter(e=>e!==i).concat(t.crs):r,s=/^http:\/\/www\.opengis.net\/def\/crs\/epsg\/.*\/3785$/i;return o.filter(e=>!s.test(e))}async _loadOGCServices(e,t){const n=Object(f["k"])(t)?t.signal:null,{apiKey:i,collectionId:r,customParameters:o,fields:s,geometryType:a,hasZ:l,objectIdField:u,timeInfo:d,url:b}=e,m={fields:null==s?void 0:s.map(e=>e.toJSON()),geometryType:c["c"].toJSON(a),hasZ:l,objectIdField:u,timeInfo:null==d?void 0:d.toJSON()},g={apiKey:i,customParameters:o,signal:n},j=await Object(y["f"])(b,g),[h,O]=await Promise.all([Object(y["e"])(j,g),Object(y["d"])(j,g)]);if(!this._conformsToType(h,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/geojson"))throw new p["a"]("ogc-feature-layer:no-geojson-support","Server does not support geojson");const w=O.collections.find(e=>e.id===r);if(!w)throw new p["a"]("ogc-feature-layer:collection-not-found","Server does not contain the named collection");const v=this._conformsToType(h,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/oas30")?await Object(y["g"])(j,g):null,F=await Object(y["c"])(w,m,g),I=this._getCapabilities(F.hasZ,v),S=this._getExtent(w),T=this._getStorageSpatialReference(w).toJSON(),k=this._getSupportedSpatialReferences(w,O),x=new RegExp("^"+y["b"],"i"),P={};for(const c of k){const e=Object(y["h"])(c);Object(f["k"])(e)&&(P[e]||(P[e]=c.replace(x,"")))}F.extent=S,this.featureDefinition={capabilities:I,collection:w,layerDefinition:F,queryParameters:{},spatialReference:T,supportedCrs:P}}};Object(i["a"])([Object(a["b"])()],g.prototype,"featureDefinition",void 0),Object(i["a"])([Object(a["b"])({constructOnly:!0})],g.prototype,"layer",void 0),Object(i["a"])([Object(a["b"])()],g.prototype,"type",void 0),g=Object(i["a"])([Object(l["a"])("esri.layers.graphics.sources.OGCFeatureSource")],g);const j=g;var h=n("f46e"),O=n("997b"),w=n("8b28"),v=n("662d"),F=n("b911"),I=n("d9fd"),S=n("0db5"),T=n("8e17"),k=n("5a62"),x=n("601a"),P=n("22f4"),D=n("05b7"),R=n("a2b1"),C=n("a1f3"),G=n("2feb"),M=n("c1da"),q=n("c246"),E=n("10eb"),N=n("69dd"),_=n("f51b"),L=n("3af1");const J=Object(G["a"])();let Z=class extends(Object(h["a"])(Object(w["a"])(Object(v["a"])(Object(O["a"])(Object(I["a"])(Object(x["a"])(Object(k["a"])(Object(F["a"])(Object(S["a"])(Object(T["a"])(Object(s["a"])(u["a"])))))))))))){constructor(e){super(e),this.collectionId=null,this.copyright=null,this.definitionExpression=null,this.description=null,this.displayField=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.fullExtent=null,this.geometryType=null,this.hasZ=void 0,this.labelingInfo=null,this.labelsVisible=!0,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="OGCFeatureLayer",this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=new j({layer:this}),this.spatialReference=null,this.title=null,this.type="ogc-feature",this.typeIdField=null,this.types=null,this.url=null}destroy(){var e;null==(e=this.source)||e.destroy()}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["OGCFeatureServer"]},e).then(()=>this._fetchService(e))),this.when()}get defaultPopupTemplate(){return this.createPopupTemplate()}get isTable(){return this.loaded&&null==this.geometryType}set renderer(e){Object(M["k"])(e,this.fieldsIndex),this._set("renderer",e)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return Object(_["a"])(this,e)}createQuery(){return new N["a"]}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,t){var n;let i,r=!1;const o=null==t||null==(n=t.feature)?void 0:n.attributes,s=this.typeIdField&&(null==o?void 0:o[this.typeIdField]);return null!=s&&this.types&&(r=this.types.some(t=>{var n,r;return t.id==s&&(i=null==(n=t.domains)?void 0:n[e],"inherited"===(null==(r=i)?void 0:r.type)&&(i=this._getLayerDomain(e)),!0)})),r||i||(i=this._getLayerDomain(e)),i}queryFeatures(e,t){return this.load().then(()=>this.source.queryFeatures(N["a"].from(e)||this.createQuery(),t)).then(e=>{var t;return null==e||null==(t=e.features)||t.forEach(e=>{e.layer=e.sourceLayer=this}),e})}async _fetchService(e){await this.source.load(e),this.read(this.source.featureDefinition,{origin:"service"}),Object(M["k"])(this.renderer,this.fieldsIndex),Object(M["l"])(this.timeInfo,this.fieldsIndex)}_getLayerDomain(e){if(!this.fields)return null;for(const t of this.fields)if(t.name===e&&t.domain)return t.domain;return null}};Object(i["a"])([Object(a["b"])({readOnly:!0,json:{origins:{service:{read:!0}}}})],Z.prototype,"capabilities",void 0),Object(i["a"])([Object(a["b"])({type:String,json:{write:!0}})],Z.prototype,"collectionId",void 0),Object(i["a"])([Object(a["b"])({type:String})],Z.prototype,"copyright",void 0),Object(i["a"])([Object(a["b"])({readOnly:!0})],Z.prototype,"defaultPopupTemplate",null),Object(i["a"])([Object(a["b"])({type:String})],Z.prototype,"definitionExpression",void 0),Object(i["a"])([Object(a["b"])({readOnly:!0,type:String,json:{origins:{service:{name:"collection.description"}}}})],Z.prototype,"description",void 0),Object(i["a"])([Object(a["b"])({type:String})],Z.prototype,"displayField",void 0),Object(i["a"])([Object(a["b"])(P["b"])],Z.prototype,"elevationInfo",void 0),Object(i["a"])([Object(a["b"])(D["a"])],Z.prototype,"featureReduction",void 0),Object(i["a"])([Object(a["b"])({type:[C["a"]],json:{origins:{service:{name:"layerDefinition.fields"}}}})],Z.prototype,"fields",void 0),Object(i["a"])([Object(a["b"])(J.fieldsIndex)],Z.prototype,"fieldsIndex",void 0),Object(i["a"])([Object(a["b"])({readOnly:!0,type:L["a"],json:{origins:{service:{name:"layerDefinition.extent"}}}})],Z.prototype,"fullExtent",void 0),Object(i["a"])([Object(a["b"])({type:c["a"].apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:c["a"].read}}}}})],Z.prototype,"geometryType",void 0),Object(i["a"])([Object(a["b"])({type:Boolean,json:{origins:{service:{name:"layerDefinition.hasZ"}}}})],Z.prototype,"hasZ",void 0),Object(i["a"])([Object(a["b"])({type:Boolean,readOnly:!0})],Z.prototype,"isTable",null),Object(i["a"])([Object(a["b"])({type:[q["a"]],json:{origins:{"web-document":{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:E["a"]},write:!0}}}})],Z.prototype,"labelingInfo",void 0),Object(i["a"])([Object(a["b"])(P["d"])],Z.prototype,"labelsVisible",void 0),Object(i["a"])([Object(a["b"])(P["e"])],Z.prototype,"legendEnabled",void 0),Object(i["a"])([Object(a["b"])({type:String,json:{origins:{service:{name:"layerDefinition.objectIdField"}}}})],Z.prototype,"objectIdField",void 0),Object(i["a"])([Object(a["b"])({type:["OGCFeatureLayer"]})],Z.prototype,"operationalLayerType",void 0),Object(i["a"])([Object(a["b"])(P["j"])],Z.prototype,"popupEnabled",void 0),Object(i["a"])([Object(a["b"])({type:r["a"],json:{name:"popupInfo",write:!0}})],Z.prototype,"popupTemplate",void 0),Object(i["a"])([Object(a["b"])({types:o["a"],json:{origins:{service:{name:"layerDefinition.drawingInfo.renderer",write:!1},"web-scene":{types:o["b"],name:"layerDefinition.drawingInfo.renderer",write:!0}},name:"layerDefinition.drawingInfo.renderer",write:!0}})],Z.prototype,"renderer",null),Object(i["a"])([Object(a["b"])(P["m"])],Z.prototype,"screenSizePerspectiveEnabled",void 0),Object(i["a"])([Object(a["b"])({readOnly:!0})],Z.prototype,"source",void 0),Object(i["a"])([Object(a["b"])({readOnly:!0,type:m["a"],json:{origins:{service:{read:!0}}}})],Z.prototype,"spatialReference",void 0),Object(i["a"])([Object(a["b"])({type:String,json:{write:{enabled:!0,ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"collection.title"}}}})],Z.prototype,"title",void 0),Object(i["a"])([Object(a["b"])({readOnly:!0,json:{read:!1}})],Z.prototype,"type",void 0),Object(i["a"])([Object(a["b"])({type:String,readOnly:!0})],Z.prototype,"typeIdField",void 0),Object(i["a"])([Object(a["b"])({type:[R["a"]]})],Z.prototype,"types",void 0),Object(i["a"])([Object(a["b"])(P["n"])],Z.prototype,"url",void 0),Z=Object(i["a"])([Object(l["a"])("esri.layers.OGCFeatureLayer")],Z);const W=Z},"7e5e":function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return w})),n.d(t,"f",(function(){return v})),n.d(t,"g",(function(){return F})),n.d(t,"h",(function(){return I})),n.d(t,"i",(function(){return S})),n.d(t,"j",(function(){return T}));n("e06a");var i=n("2eab"),r=n("ce50"),o=n("e92d"),s=n("b2b2"),a=n("7f83"),l=n("9786"),c=n("6655"),u=n("eed5"),p=n("e3a3"),d=n("88d1"),f=n("80b7"),y=n("6781"),b=n("5996");const m=o["a"].getLogger("esri.layers.graphics.sources.ogcfeature"),g="http://www.opengis.net/def/crs/",j=g+"OGC/1.3/CRS84";async function h(e,t,n={},o=5){const{links:a}=e,l=G(a,"items","application/geo+json")||G(a,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if(Object(s["j"])(l))throw new r["a"]("ogc-feature-layer:missing-items-page","Missing items url");const{data:c}=await Object(i["default"])(l.href,{signal:n.signal,query:{limit:o,...n.customParameters,token:n.apiKey},headers:{accept:"application/geo+json"}});await Object(p["d"])(c);const u=Object(p["c"])(c,{geometryType:t.geometryType}),b=t.fields||u.fields||[],g=null!=t.hasZ?t.hasZ:u.hasZ,j=u.geometryType,h=t.objectIdField||u.objectIdFieldName||"OBJECTID";let O=t.timeInfo;const w=b.find(e=>e.name===h);if(w)w.type="esriFieldTypeOID",w.editable=!1,w.nullable=!1;else{if(!u.objectIdFieldType)throw new r["a"]("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");b.unshift({name:h,alias:h,type:"esriFieldTypeOID",editable:!1,nullable:!1})}if(h!==u.objectIdFieldName){const e=b.find(e=>e.name===u.objectIdFieldName);e&&(e.type="esriFieldTypeInteger")}b===u.fields&&u.unknownFields.length>0&&m.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:u.unknownFields}});for(const i of b){if(null==i.name&&(i.name=i.alias),null==i.alias&&(i.alias=i.name),"esriFieldTypeOID"!==i.type&&"esriFieldTypeGlobalID"!==i.type&&(i.editable=null==i.editable||!!i.editable,i.nullable=null==i.nullable||!!i.nullable),!i.name)throw new r["a"]("ogc-feature-layer:invalid-field-name","field name is missing",{field:i});if(-1===y["a"].jsonValues.indexOf(i.type))throw new r["a"]("ogc-feature-layer:invalid-field-type",`invalid type for field "${i.name}"`,{field:i})}if(O){const e=new f["a"](b);if(O.startTimeField){const t=e.get(O.startTimeField);t?(O.startTimeField=t.name,t.type="esriFieldTypeDate"):O.startTimeField=null}if(O.endTimeField){const t=e.get(O.endTimeField);t?(O.endTimeField=t.name,t.type="esriFieldTypeDate"):O.endTimeField=null}if(O.trackIdField){const t=e.get(O.trackIdField);t?O.trackIdField=t.name:(O.trackIdField=null,m.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:O}}))}O.startTimeField||O.endTimeField||(m.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:O}}),O=null)}return{drawingInfo:j?Object(d["d"])(j):null,geometryType:j,fields:b,hasZ:!!g,objectIdField:h,timeInfo:O}}async function O(e,t={}){const{links:n}=e,o=G(n,"data","application/json")||G(n,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json");if(Object(s["j"])(o))throw new r["a"]("ogc-feature-layer:missing-collections-page","Missing collections url");const{apiKey:a,customParameters:l,signal:c}=t,{data:u}=await Object(i["default"])(o.href,{signal:c,headers:{accept:"application/json"},query:{...l,token:a}});return u}async function w(e,t={}){const{links:n}=e,o=G(n,"conformance","application/json")||G(n,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json");if(Object(s["j"])(o))throw new r["a"]("ogc-feature-layer:missing-conformance-page","Missing conformance url");const{apiKey:a,customParameters:l,signal:c}=t,{data:u}=await Object(i["default"])(o.href,{signal:c,headers:{accept:"application/json"},query:{...l,token:a}});return u}async function v(e,t={}){const{apiKey:n,customParameters:r,signal:o}=t,{data:s}=await Object(i["default"])(e,{signal:o,headers:{accept:"application/json"},query:{...r,token:n}});return s}async function F(e,t={}){const n="application/vnd.oai.openapi+json;version=3.0",r=G(e.links,"service-desc",n);if(Object(s["j"])(r))return m.warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null;const{apiKey:o,customParameters:a,signal:l}=t,{data:c}=await Object(i["default"])(r.href,{signal:l,headers:{accept:n},query:{...a,token:o}});return c}function I(e){const t=/^http:\/\/www\.opengis.net\/def\/crs\/(?<authority>.*)\/(?<version>.*)\/(?<code>.*)$/i.exec(e),n=null==t?void 0:t.groups;if(!n)return null;const{authority:i,code:r}=n;switch(i.toLowerCase()){case"ogc":switch(r.toLowerCase()){case"crs27":return b["a"].GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return b["a"].WGS84.wkid;default:return null}case"esri":case"epsg":{const e=Number.parseInt(r,10);return Number.isNaN(e)?null:e}default:return null}}async function S(e,t,n){const i=await T(e,t,n);return Object(c["j"])(i)}async function T(e,t,n){const{capabilities:{query:{maxRecordCount:o}},collection:d,layerDefinition:f,queryParameters:{apiKey:y,customParameters:m},spatialReference:g,supportedCrs:j}=e,{links:h}=d,O=G(h,"items","application/geo+json")||G(h,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if(Object(s["j"])(O))throw new r["a"]("ogc-feature-layer:missing-items-page","Missing items url");const{geometry:w,num:v,start:F,timeExtent:I,where:S}=t;if(t.objectIds)throw new r["a"]("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");const T=b["a"].fromJSON(g),k=Object(s["s"])(t.outSpatialReference,T),P=k.isWGS84?null:x(k,j),M=C(w,j),q=D(I),E=R(S),N=null!=v?v:null!=F&&void 0!==F?10:o,{data:_}=await Object(i["default"])(O.href,{...n,query:{...m,...M,crs:P,datetime:q,query:E,limit:N,startindex:F,token:y},headers:{accept:"application/geo+json"}});let L=!1;if(_.links){const e=_.links.find(e=>"next"===e.rel);L=!!e}!L&&Number.isInteger(_.numberMatched)&&Number.isInteger(_.numberReturned)&&(L=_.numberReturned<_.numberMatched);const{fields:J,globalIdField:Z,hasM:W,hasZ:$,objectIdField:A}=f,B=f.geometryType,Q=Object(p["a"])(_,{geometryType:B,hasZ:$,objectIdField:A});if(!P&&k.isWebMercator)for(const i of Q)if(Object(s["k"])(i.geometry)){const e=Object(c["k"])(i.geometry,B,$,!1);e.spatialReference=b["a"].WGS84,i.geometry=Object(c["d"])(Object(l["d"])(e,k))}for(const i of Q)i.objectId=i.attributes[A];const K=P||!P&&k.isWebMercator?k.toJSON():a["b"],z=new u["a"];return z.exceededTransferLimit=L,z.features=Q,z.fields=J,z.geometryType=B,z.globalIdFieldName=Z,z.hasM=W,z.hasZ=$,z.objectIdFieldName=A,z.spatialReference=K,z}function k(e){return Object(s["k"])(e)&&"extent"===e.type}function x(e,t){var n,i,r;const{isWebMercator:o,wkid:s}=e;if(!s)return null;const a=o?null!=(n=null!=(i=null!=(r=t[3857])?r:t[102100])?i:t[102113])?n:t[900913]:t[e.wkid];return a?`${g}${a}`:null}function P(e){if(Object(s["j"])(e))return"";const{xmin:t,ymin:n,xmax:i,ymax:r}=e;return`${t},${n},${i},${r}`}function D(e){if(Object(s["j"])(e))return null;const{start:t,end:n}=e;return`${Object(s["k"])(t)?t.toISOString():".."}/${Object(s["k"])(n)?n.toISOString():".."}`}function R(e){return Object(s["j"])(e)||!e||"1=1"===e?null:e}function C(e,t){if(!k(e))return null;const{spatialReference:n}=e;if(!n||n.isWGS84)return{bbox:P(e)};const i=x(n,t);return Object(s["k"])(i)?{bbox:P(e),"bbox-crs":i}:n.isWebMercator?{bbox:P(Object(l["d"])(e,b["a"].WGS84))}:null}function G(e,t,n){return e.find(e=>e.rel===t&&e.type===n)||e.find(e=>e.rel===t&&!e.type)}},e3a3:function(e,t,n){"use strict";n.d(t,"a",(function(){return C})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return R})),n.d(t,"d",(function(){return D}));var i=n("ce50"),r=n("9392"),o=n("8152"),s=n("c1da");const a={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function l(e){return a[e]}function*c(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const t of e.features)t&&(yield t)}}function*u(e){if(!e)return null;switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const t of e.coordinates)yield*t;break;case"MultiPolygon":for(const t of e.coordinates)for(const e of t)yield*e}}function*p(e,t={}){const{geometryType:n,objectIdField:i}=t;for(const a of e){var s;const{geometry:e,properties:c,id:u}=a;if(e&&l(e.type)!==n)continue;const p=c||{};let d=null!=(s=p[i])?s:null;i&&null!=u&&!p[i]&&(p[i]=d=u);const f=new r["b"](e?g(new o["a"],e,t):null,p,null,d);yield f}}function d(e){for(const t of e)if(t.length>2)return!0;return!1}function f(e){return!b(e)}function y(e){return b(e)}function b(e){let t=0;for(let n=0;n<e.length;n++){const i=e[n],r=e[(n+1)%e.length];t+=i[0]*r[1]-r[0]*i[1]}return t<=0}function m(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function g(e,t,n){switch(t.type){case"LineString":return j(e,t,n);case"MultiLineString":return h(e,t,n);case"MultiPoint":return O(e,t,n);case"MultiPolygon":return w(e,t,n);case"Point":return v(e,t,n);case"Polygon":return F(e,t,n)}}function j(e,t,n){return T(e,t.coordinates,n),e}function h(e,t,n){for(const i of t.coordinates)T(e,i,n);return e}function O(e,t,n){return T(e,t.coordinates,n),e}function w(e,t,n){for(const i of t.coordinates){I(e,i[0],n);for(let t=1;t<i.length;t++)S(e,i[t],n)}return e}function v(e,t,n){return x(e,t.coordinates,n),e}function F(e,t,n){const i=t.coordinates;I(e,i[0],n);for(let r=1;r<i.length;r++)S(e,i[r],n);return e}function I(e,t,n){const i=m(t);f(i)?k(e,i,n):T(e,i,n)}function S(e,t,n){const i=m(t);y(i)?k(e,i,n):T(e,i,n)}function T(e,t,n){for(const i of t)x(e,i,n);e.lengths.push(t.length)}function k(e,t,n){for(let i=t.length-1;i>=0;i--)x(e,t[i],n);e.lengths.push(t.length)}function x(e,t,n){const[i,r,o]=t;e.coords.push(i,r),n.hasZ&&e.coords.push(o||0)}function P(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function D(e){if(!e)throw new i["a"]("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new i["a"]("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:t}=e;if(!t)return;const n="string"==typeof t?t:"name"===t.type?t.properties.name:"EPSG"===t.type?t.properties.code:null,r=new RegExp(".*(CRS84H?|4326)$","i");if(!n||!r.test(n))throw new i["a"]("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}function R(e,t={}){const n=[],i=new Set,r=new Set;let o,a=!1,p=null,f=!1,{geometryType:y=null}=t,b=!1;for(const s of c(e)){const{geometry:e,properties:t,id:c}=s;if((!e||(y||(y=l(e.type)),l(e.type)===y))&&(a||(a=d(u(e))),f||(f=null!=c,f&&(o=typeof c,p=Object.keys(t).filter(e=>t[e]===c))),f&&null!=c&&(p.length>1?p=p.filter(e=>t[e]===c):1===p.length&&(p=t[p[0]]===c?p:[])),!b&&t)){let e=!0;for(const o in t){if(i.has(o))continue;const s=t[o];if(null==s){e=!1,r.add(o);continue}const a=P(s);"unknown"!==a?(r.delete(o),i.add(o),n.push({name:o,alias:o,type:a})):r.add(o)}b=e}}const m=p&&1===p.length&&p[0]||null;if(m)for(const l of n)if(l.name===m&&Object(s["q"])(l)){l.type="esriFieldTypeOID";break}return{fields:n,geometryType:y,hasZ:a,objectIdFieldName:m,objectIdFieldType:o,unknownFields:Array.from(r)}}function C(e,t){return Array.from(p(c(e),t))}}}]);