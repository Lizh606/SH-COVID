(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aa480dd4"],{"0041":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"layout"}},[r("Layout",{staticClass:"layout-first"},[r("Header",[r("Menu",{staticClass:"layout-header",attrs:{mode:"horizontal"}},[r("MenuItem",{staticClass:"menu-item-word",attrs:{name:"logout"}},[r("Dropdown",[r("a",{attrs:{href:"javascript:void(0)"}},[r("span",[r("span",{staticClass:"info_name",staticStyle:{color:"aliceblue"}},[t._v(t._s(t.userinfos.nickName))]),r("img",{staticClass:"menu-item-icon",staticStyle:{height:"50px","border-radius":"50%"},attrs:{src:t.userinfos.imgUrl},on:{click:t.GoHome}})])]),r("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[r("DropdownItem",[t._v("个人中心")]),r("DropdownItem",[r("div",{on:{click:function(e){return t.changeInfos()}}},[t._v("修改信息")])]),r("DropdownItem",[r("div",{on:{click:function(e){return t.ToLogin()}}},[t._v("退出登录")])])],1)],1)],1),r("MenuItem",{staticClass:"system-item",attrs:{name:"system"}},[r("IconSvg",{staticClass:"system-icon",attrs:{iconClass:"ziyuan"}}),r("span",{staticClass:"system-name",on:{click:function(e){return t.welcome()}}},[t._v("上海市新冠疫情动态分布可视化系统")])],1)],1)],1),r("Layout",{staticClass:"layout-sider"},[r("Sider",{staticClass:"sider",attrs:{"hide-trigger":""}},[r("Menu",{ref:"siderMenu",staticClass:"sider-menu",attrs:{theme:"light","active-name":t.siderActiveName}},[r("Submenu",{attrs:{name:"1"}},[r("template",{slot:"title"},[r("IconSvg",{staticClass:"sider-item-icon",attrs:{iconClass:"diqiu"}}),r("span",{staticClass:"sider-item-word"},[t._v(" 地图展示")])],1),r("MenuItem",{attrs:{name:"tiandutu"},nativeOn:{click:function(e){return t.totianditu.apply(null,arguments)}}},[r("IconSvg",{staticClass:"sider-item-icon-son",attrs:{iconClass:"ditu4"}}),r("span",{staticClass:"sider-item-word-son"},[t._v("天地图")])],1),r("MenuItem",{attrs:{name:"shanghai"},nativeOn:{click:function(e){return t.toSH.apply(null,arguments)}}},[r("IconSvg",{staticClass:"sider-item-icon-son",attrs:{iconClass:"ditu3"}}),r("span",{staticClass:"sider-item-word-son"},[t._v("上海底图")])],1)],2),r("Submenu",{attrs:{name:"2"}},[r("template",{slot:"title"},[r("IconSvg",{staticClass:"sider-item-icon",attrs:{iconClass:"liebiao"}}),r("span",{staticClass:"sider-item-word"},[t._v("功能列表")])],1),r("MenuItem",{attrs:{name:"popup"},nativeOn:{click:function(e){return t.tohos.apply(null,arguments)}}},[r("IconSvg",{staticClass:"sider-item-icon-son",attrs:{iconClass:"yiyuan"}}),r("span",{staticClass:"sider-item-word-son"},[t._v("疫情可视化")])],1),r("MenuItem",{attrs:{name:"yq"},nativeOn:{click:function(e){return t.todata.apply(null,arguments)}}},[r("IconSvg",{staticClass:"sider-item-icon-son",attrs:{iconClass:"biaoge"}}),r("span",{staticClass:"sider-item-word-son"},[t._v("疫情数据表")])],1),r("MenuItem",{attrs:{name:"Echarts"},nativeOn:{click:function(e){return t.toEcharts.apply(null,arguments)}}},[r("IconSvg",{staticClass:"sider-item-icon-son",attrs:{iconClass:"shuzhuangtu"}}),r("span",{staticClass:"sider-item-word-son"},[t._v("Echarts")])],1),r("MenuItem",{attrs:{name:"text"},nativeOn:{click:function(e){return t.text.apply(null,arguments)}}},[r("IconSvg",{staticClass:"sider-item-icon-son",attrs:{iconClass:"shuzhuangtu"}}),r("span",{staticClass:"sider-item-word-son"},[t._v("测试页")])],1)],2)],1)],1),r("Content",{attrs:{id:"layout-content"}},[r("router-view",{scopedSlots:t._u([{key:"default",fn:function(t){var e=t.Component,n=t.path;return[r("keep-alive",[r(e,{key:n,tag:"component"})],1)]}}])})],1)],1)],1),r("infosModal",{attrs:{modal:t.modal,userinfos:t.userinfos}})],1)},a=[],s=r("1da1"),i=(r("96cf"),r("ac1f"),r("1276"),r("99af"),r("14c8")),o=r("7ded"),c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Modal",{attrs:{width:"1000"},on:{"on-ok":t.okHandler},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[r("p",{staticStyle:{"background-color":"#00bec9","text-align":"center","font-size":"20px"},attrs:{slot:"header"},slot:"header"},[r("span",{staticStyle:{color:"#eee"}},[t._v("修改用户信息")])]),r("div",{staticClass:"box"},[r("div",{staticClass:"left"},[r("div",[r("img",{staticClass:"img",attrs:{src:t.imgUrl}})]),r("span",{staticClass:"img_info"},[t._v(" 修改头像:"),r("Input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入头像url"},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}}),r("Button",{staticClass:"img_btn",attrs:{type:"primary"},on:{click:function(e){return t.changeImg()}}},[t._v("确定")])],1)]),r("div",{staticClass:"right"},[r("div",{on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleName.apply(null,arguments)}}},[r("Form",{ref:"formValidate1",attrs:{id:"form1",model:t.formValidate1,rules:t.ruleValidate1}},[r("FormItem",{attrs:{label:"用户名",prop:"user"}},[r("i-input",{staticStyle:{width:"250px"},attrs:{id:"user",type:"text",disabled:"",placeholder:"请输入用户名"},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}})],1),r("FormItem",{attrs:{label:"昵称",prop:"nickName"}},[r("i-input",{staticStyle:{width:"250px"},attrs:{id:"user",type:"text",placeholder:"请输入昵称"},model:{value:t.formValidate1.nickName,callback:function(e){t.$set(t.formValidate1,"nickName",e)},expression:"formValidate1.nickName"}})],1),r("FormItem",[r("Button",{staticClass:"form-buttom",attrs:{type:"primary",loading:t.loading1},on:{click:function(e){return t.handleName("formValidate1")}}},[t._v("确认修改")])],1)],1)],1),r("div",{on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handlePwd.apply(null,arguments)}}},[r("Form",{ref:"formValidate",attrs:{id:"form",model:t.formValidate,rules:t.ruleValidate}},[r("FormItem",{attrs:{label:"密码",prop:"password"}},[r("i-input",{staticStyle:{width:"550px"},attrs:{id:"password",type:"password",placeholder:"请输入修改的密码"},model:{value:t.formValidate.password,callback:function(e){t.$set(t.formValidate,"password",e)},expression:"formValidate.password"}})],1),r("FormItem",{attrs:{label:"确认密码",prop:"password"}},[r("i-input",{staticStyle:{width:"550px"},attrs:{id:"password",type:"password",placeholder:"请确认修改的密码"},model:{value:t.formValidate.retypedPassword,callback:function(e){t.$set(t.formValidate,"retypedPassword",e)},expression:"formValidate.retypedPassword"}})],1),r("FormItem",[r("Button",{staticClass:"form-buttom",attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.handlePwd("formValidate")}}},[t._v("确定修改")])],1)],1)],1)])])])},u=[],l=(r("498a"),{data:function(){return{loading:!1,loading1:!1,formValidate1:{nickName:this.nickName},ruleValidate1:{nickName:[{required:!0,message:"用户名不能为空",trigger:"blur"},{trigger:"blur"}]},formValidate:{nickName:"",savePwd:!1,password:""},ruleValidate:{password:[{required:!0,message:"用户密码不能为空",trigger:"blur"},{type:"string",min:6,message:"密码不能少于6位",trigger:"blur"}],retypedPassword:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{type:"string",min:6,message:"密码不能少于6位",trigger:"blur"}],nickName:[{required:!0,message:"用户名不能为空",trigger:"blur"},{trigger:"blur"}]},user:"",nickName:"",modal1:!1,imgUrl:"",url:""}},props:{modal:{type:Boolean,default:!1},userinfos:{type:Object,default:function(){}}},computed:{},watch:{userinfos:{handler:function(t){this.user=t.userName,this.imgUrl=t.imgUrl,this.formValidate1.nickName=t.nickName},deep:!0},modal:function(t){this.modal1=t}},mounted:function(){},methods:{okHandler:function(){this.modal1=!1,location.reload()},changeImg:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={imgUrl:t.url},e.next=3,Object(o["a"])(t.$store.getters.id,r);case 3:n=e.sent,t.$store.commit("setUserImg",n.data.imgUrl);case 5:case"end":return e.stop()}}),e)})))()},handleName:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.loading1=!0,n=e.formValidate1.nickName.trim(),e.$refs[t].validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(r){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=12;break}return t.prev=1,a={nickName:n},t.next=5,Object(o["a"])(e.$store.getters.id,a);case 5:s=t.sent,s?(e.$store.commit("setnickName",s.data.nickName),e.$Message.success("修改成功"),e.loading1=!1):e.$Message.error("更改失败"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),e.$Message.error("请求失败");case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return r.stop()}}),r)})))()},handlePwd:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.loading=!0,n=e.formValidate.password,e.$refs[t].validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(r){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=12;break}return t.prev=1,a={password:n},t.next=5,Object(o["a"])(e.$store.getters.id,a);case 5:s=t.sent,s?(e.$Message.success("修改成功"),e.loading=!1):e.$Message.error("更改失败"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),e.$Message.error("请求失败");case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return r.stop()}}),r)})))()}}}),d=l,m=(r("716f"),r("2877")),f=Object(m["a"])(d,c,u,!1,null,"3ef6fdf0",null),p=f.exports,h={name:"LayOut",data:function(){return{path:this.$route.path,siderActiveName:null,nowDate:"",info:{},userinfos:{userName:"",nickName:"",imgUrl:""},modal:!1}},components:{infosModal:p},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t.userinfos.imgUrl),t.currentTime(),e.next=4,Object(o["b"])();case 4:return r=e.sent,t.info=r,t.$nextTick((function(){t.userinfos.userName=t.info.username,t.userinfos.nickName=t.info.nickName,t.userinfos.imgUrl=t.info.imgUrl;var e=t.$route.path.split("/");t.changeActiveName(e)})),n={postStr:{searchWord:"上海市",searchType:"1",needSubInfo:"true",needAll:"true",needPolygon:"true",needPre:"true"},tk:"6156b0fb9f9e853e3f64234d82d9abf1"},e.next=10,Object(i["d"])(n);case 10:return a=e.sent,console.log(a),s={ds:{keyWord:"玉兰香苑"},tk:"6156b0fb9f9e853e3f64234d82d9abf1"},e.next=15,Object(i["a"])(s);case 15:e.sent,{postStr:{lon:121.63121,lat:31.19935,ver:1},type:"geocode",tk:"6156b0fb9f9e853e3f64234d82d9abf1"};case 17:case"end":return e.stop()}}),e)})))()},watch:{$route:function(t){var e=t.path.split("/");this.changeActiveName(e)}},methods:{changeInfos:function(){this.modal=!0},currentTime:function(){setInterval(this.formatDate,500)},formatDate:function(){var t=new Date,e=t.getFullYear(),r=t.getMonth()+1,n=t.getDate(),a=t.getDay(),s=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],i=t.getHours();i=i<10?"0"+i:i;var o=t.getMinutes();o=o<10?"0"+o:o;var c=t.getSeconds();c=c<10?"0"+c:c,this.nowDate="".concat(e,"/").concat(r,"/").concat(n," ").concat(i,":").concat(o,":").concat(c," ").concat(s[a])},GoHome:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["b"])();case 2:r=e.sent,t.userinfos.imgUrl=r.imgUrl,t.$router.push("/animation1");case 5:case"end":return e.stop()}}),e)})))()},welcome:function(){this.$router.push("/Welcome")},ToLogin:function(){window.localStorage.token?(this.$store.commit("del_token"),this.$router.push("/")):this.$router.push("/")},changeActiveName:function(t){var e=t.length,r=t[e-1];this.siderActiveName="layout"==r?"Map":r},totianditu:function(){"/TianDiTu"!=this.$route.path?this.$router.push("/TianDiTu"):this.$Message.error("当前页面已经打开")},toSH:function(){"/GeoJsonLayer"!=this.$route.path?this.$router.push("/GeoJsonLayer"):this.$Message.error("当前页面已经打开")},tohos:function(){"/Popup"!=this.$route.path?this.$router.push("/Popup"):this.$Message.error("当前页面已经打开")},todata:function(){"/yqData"!=this.$route.path?this.$router.push("/yqData"):this.$Message.error("当前页面已经打开")},toEcharts:function(){"/Echarts"!=this.$route.path?this.$router.push("/Echarts"):this.$Message.error("当前页面已经打开")},text:function(){"/text"!=this.$route.path?this.$router.push("/text"):this.$Message.error("当前页面已经打开")}}},g=h,v=(r("2e15"),Object(m["a"])(g,n,a,!1,null,"8709d3aa",null));e["default"]=v.exports},"2e15":function(t,e,r){"use strict";r("74a1")},"3a7d":function(t,e,r){},"498a":function(t,e,r){"use strict";var n=r("23e7"),a=r("58a8").trim,s=r("c8d2");n({target:"String",proto:!0,forced:s("trim")},{trim:function(){return a(this)}})},"716f":function(t,e,r){"use strict";r("3a7d")},"74a1":function(t,e,r){},"7ded":function(t,e,r){"use strict";r.d(e,"c",(function(){return s})),r.d(e,"d",(function(){return i})),r.d(e,"b",(function(){return o})),r.d(e,"a",(function(){return c}));var n=r("a27e"),a=r("b775");function s(t){return Object(n["b"])("/user/login","登录",t)}function i(t){return Object(n["b"])("/user-profile","注册",t)}function o(){return Object(n["a"])("/user/profile","获取用户信息")}function c(t,e){return Object(a["a"])({url:"/user-profile/".concat(t),method:"PATCH",data:e})}},a27e:function(t,e,r){"use strict";r.d(e,"a",(function(){return s})),r.d(e,"b",(function(){return o}));r("d3b7"),r("d9e2");var n=r("b775"),a=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"未知服务",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return new Promise((function(s,i){t({url:e,method:"get",params:n,showErrorMessage:a}).then((function(t){s(t.data)})).catch((function(t){throw i(t),new Error("请求---".concat(r,"---接口失败"))}))}))},s=function(t,e,r,s){return a(n["a"],t,e,r,s)},i=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"未知服务",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],i=arguments.length>6?arguments[6]:void 0;return new Promise((function(o,c){t({url:e,method:"post",data:n,headers:a,withCredentials:s,onUploadProgress:i}).then((function(t){o(t.data)})).catch((function(t){throw c(t),new Error("请求---".concat(r,"---接口失败"))}))}))},o=function(t,e,r,a,s){return i(n["a"],t,e,r,a,!0,s)}},b775:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));r("d3b7");var n=r("bc3a"),a=r.n(n),s=r("4360"),i=r("65fb");console.log("/prod-api");var o=a.a.create({baseURL:"/prod-api",timeout:1e4});o.interceptors.request.use((function(t){return window.localStorage.getItem("token")&&(t.headers.Authorization="Bearer ".concat(s["a"].getters.get_token),Object(i["a"])()&&s["a"].dispatch("logout")),t}),(function(t){return Promise.reject(t)}))},c8d2:function(t,e,r){var n=r("5e77").PROPER,a=r("d039"),s=r("5899"),i="​᠎";t.exports=function(t){return a((function(){return!!s[t]()||i[t]()!==i||n&&s[t].name!==t}))}}}]);