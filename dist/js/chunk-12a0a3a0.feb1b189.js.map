{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3DStateSet.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectStateSet.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectStates.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/support/DefinitionExpressionSceneLayerView.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFilterVisibility.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFeatureLikeLayerView.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/ExtentSet.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DElevationAlignment.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/QueryEngine.js","webpack:///./node_modules/@arcgis/core/views/layers/support/popupUtils.js","webpack:///./node_modules/@arcgis/core/core/AsyncUpdate.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/support/SceneLayerViewRequiredFields.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/I3SPointsWorkerHandle.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/SceneLayerGraphicsView3D.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/i3s/attributeEditing.js","webpack:///./node_modules/@arcgis/core/views/layers/SceneLayerView.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFrustumVisibility.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/support/fieldProperties.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/support/PopupSceneLayerView.js"],"names":["this","items","e","t","push","type","objectStateId","object","s","renderGeometry","owner","remove","length","_removeObjectStateItem","splice","forEach","channel","removeHighlight","removeOcclude","removeRenderGeometryObjectState","i","stateType","objectIdField","objectStateSet","ids","Set","paused","graphic","attributes","has","uid","_graphicsCore","_stateSets","Array","removeAll","a","h","releaseSet","set","handle","indexOf","addObjectStateSet","removeObjectState","add","graphics3DGraphics","get","_addObjectStateSet","setUid","initializeSet","hasGraphic","_removeObjectStateSet","states","getLogger","p","super","arguments","_definitionExpressionErrors","_maxDefinitionExpressionErrors","logError","r","error","i3slayer","definitionExpression","create","fieldsIndex","isStandardized","fieldNames","fields","missingFields","join","parsedDefinitionExpression","testFeature","clone","where","prototype","readOnly","_","_dirty","_querying","_handles","_queryResult","_layerView","_core","_objectIdField","layer","_queryEngine","layerView","priority","FILTER_VISIBILITY","view","resourceController","scheduler","registerTask","_graphicsChanged","dirty","filterChanged","destroy","clear","modifyGraphics3DGraphicVisibilities","clearVisibilityFlag","active","hasVisibilityFlag","setVisibilityFlag","recomputeFilter","_filter","size","filter","timeExtent","intersection","done","executeQueryForIdSet","then","catch","warn","_getFeatureId","madeProgress","objectId","V","watchUpdatingTracking","suspendResumeExtentMode","dataExtent","suspendResumeExtent","scaleVisibility","suspended","outsideScaleRange","frustumVisibility","outsideOfView","graphicsCore","updating","frustumVisibilityEnabled","scaleVisibilityEnabled","filterVisibilityEnabled","timeExtentVisibilityEnabled","geometryType","elevationAlignmentEnabled","n","preferredUpdatePolicy","elevationFeatureExpressionEnabled","graphicSymbolSupported","hasZ","hasM","updateClippingExtent","o","l","filterVisibility","elevationAlignment","layerMinMaxScaleChangeHandler","addPromise","elevationInfoChange","updateVisibilityInfo","updateLabelingInfo","setup","basemapTerrain","spatialIndex","queryGraphicUIDsInExtent","elevationProvider","_set","labeler","addGraphicsOwner","deconflictor","deconfliction","labeling","objectStates","rendererChange","opacityChange","setupSuspendResumeExtent","_updateClippingExtent","startCreateGraphics","labelsEnabled","acquireSet","queryObjectIds","setObjectIds","highlight","toArray","isArray","map","setUids","S","clippingArea","setClippingExtent","spatialReference","recreateAllGraphics","j","updateSuspendResumeExtent","watch","computedExtent","suspendResumeExtentChanged","extentToSuspendResumeRect","equals","extentPadding","setExtent","aliasOf","constructOnly","dependsOn","v","_extents","allocator","_tmpExtent","contains","removeContained","pushNew","mergeTight","pop","hasProgressed","sort","getItemAt","delete","c","g","m","d","some","filterInPlace","containsPoint","dirtyExtents","globalDirty","averageExtentUpdateSize","dirtyGraphicsSet","handles","updateElevation","events","on","_elevationChanged","suspendedChange","ELEVATION_ALIGNMENT","notifyChange","running","empty","markAllGraphicsElevationDirty","run","merge","_updateDirtyGraphics","_updateDirtyExtents","setDirty","renderCoordsHelper","effectiveUpdatePolicy","keys","getGraphics3DGraphicById","alignWithElevation","emit","extent","needsElevationUpdates","context","elevationInfo","mode","xmin","xmax","ymin","ymax","_dataQueryEngineInstance","outSpatialReference","toJSON","ensureDataQueryEngine","dataQueryEngine","_ensureQueryJSON","executeQueryForCount","count","executeQueryForExtent","fromJSON","executeQueryForIds","executeQueryForLatestObservations","features","sourceLayer","executeQuery","defaultQueryJSON","timeInfo","queryGeometryType","graphics3d","featureStore","u","async","popupTemplate","getRequiredFields","lastEditInfoEnabled","typeIdField","globalIdField","relationships","includes","f","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate","_numUpdating","asyncUpdateState","Map","updateAsync","startAsyncUpdate","declaredClass","endAsyncUpdate","definitionExpressionFields","rendererFields","labelingFields","viewFilterFields","autoUpdateAsync","renderer","y","collectRequiredFields","labelsVisible","from","hasInitialize","geometryBuffer","K","Z","J","_nodesAddedToStage","drapeSourceType","_memCache","_interactiveEditingSessions","loadedGraphics","holeFilling","progressiveLoadFactor","supportsHeightUnitConversion","_coordinatesOutsideExtentErrors","_maxCoordinatesOutsideExtentErrors","addResolvingPromise","indexInfo","_attributeOverrides","memoryController","viewingMode","fieldsHelper","updatingHandles","_rangeInfosChanged","_rendererChange","_filterChange","_treeDebugger","_controller","crsIndex","I3STreeDebugger","I3S_TREE_SHOW_TILES","lv","nodeSR","fullExtent","_invalidateElevation","_verticalScale","newCache","geometryDefinitions","_worker","schedule","result","_handleEdits","when","FEATURE_QUERY_ENGINE","featureTarget","_removeAllNodeData","requiredFields","displayFeatureLimit","maximumNumberOfFeatures","_override","fixedFeatureTarget","_clearOverride","leavesReached","notifyGraphicGeometryChanged","notifyGraphicVisibilityChanged","_getObjectIdField","values","find","whenGraphicBounds","computeAttachmentOrigin","canResume","rootNodeVisible","arcade","color","symbolUpdateType","attributeEditingContext","invoke","positionData","positions","featureIds","Error","X","$","Promise","reject","index","id","te","crsVertex","graphics","attributeInfo","attributeDataInfo","node","_addNodeBinaryPointData","_addNodeLegacyPointData","apply","numFeatures","_updateNodeMemory","ee","computeObb","updateVisibility","isGeometryVisible","_cacheNodeData","resolve","geometry","addMany","_filterNode","update","isGeographic","renderSpatialReference","data","serviceObb","center","extractBinaryPointData","E","x","I","checkExtent","w","generateUID","ie","C","level","se","property","oldValue","newValue","graphicUpdateHandler","visible","pointData","featureDataPosition","geometries","re","params","vertexAttributes","position","memory","usedMemoryPerGraphic","reduce","put","_getMemCacheKey","_removeNodeStageData","removeMany","updateAttributes","loadedAttributes","attributeData","_attributeValuesChanged","updateClippingArea","every","_reloadAllNodes","restartNodeLoading","_evaluateClause","oe","updateElevationChanged","outFields","returnGeometry","createQuery","_ensureQuery","signal","_addDefinitionExpressionToQuery","usedMemory","unloadedMemoryEstimate","unprocessedMemoryEstimate","sessions","forEachNode","attributeStorageInfo","attributeOverrides","getAttributeData","setAttributeData","recreateGraphics","clearMemCache","displayedNumberOfFeatures","totalNumberOfFeatures","nodes","core","performanceInfo","updateStats","controller","numNodes","availableFields","Number","Y","name","zmin","zmax","mmin","mmax","2","3","createInteractiveEditSession","b","findIndex","setAttribute","rollback","commit","featureIndex","value","featureId","updateValue","edits","updateFeatures","normalizeFieldName","updatedFeatures","extentIntersectionDirty","_isVisibleBelowSurface","extentIntersection","viewChange","state","FRUSTUM_VISIBILITY","elevationBoundsChange","isVisibleBelowSurface","updateIsVisibleBelowSurface","_setDirty","ground","navigationConstraint","opaque","radius","min","max","elevationBounds","Math","updateExtentIntersection","frustum","isVisibleInFrustum","String","popupEnabled","_validateFetchPopupFeatures","clientGraphics","associatedLayer","prepareFetchPopupFeatures","whenGraphicAttributes","concat"],"mappings":"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","file":"js/chunk-12a0a3a0.feb1b189.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nclass e{constructor(){this.items=[]}addObject(e,t){this.items.push({type:0,objectStateId:t,object:e})}addRenderGeometry(e,t,s){this.items.push({type:1,objectStateId:t,renderGeometry:e,owner:s})}addExternal(e,t){this.items.push({type:2,objectStateId:t,remove:e})}remove(e){for(let t=this.items.length-1;t>=0;--t){const s=this.items[t];s.objectStateId===e&&(this._removeObjectStateItem(s),this.items.splice(t,1))}}removeObject(e){for(let t=this.items.length-1;t>=0;--t){const s=this.items[t];0===s.type&&s.object===e&&(this._removeObjectStateItem(s),this.items.splice(t,1))}}removeRenderGeometry(e){for(let t=this.items.length-1;t>=0;--t){const s=this.items[t];1===s.type&&s.renderGeometry===e&&(this._removeObjectStateItem(s),this.items.splice(t,1))}}removeAll(){this.items.forEach((e=>{this._removeObjectStateItem(e)})),this.items=[]}_removeObjectStateItem(e){switch(e.type){case 0:0===e.objectStateId.channel?e.object.removeHighlight(e.objectStateId):1===e.objectStateId.channel&&e.object.removeOcclude(e.objectStateId);break;case 1:e.owner.removeRenderGeometryObjectState(e.renderGeometry,e.objectStateId);break;case 2:e.remove(e.objectStateId)}}}export{e as Object3DStateSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{Object3DStateSet as t}from\"../../webgl-engine/lib/Object3DStateSet.js\";class e{constructor(e,i){this.stateType=e,this.objectIdField=i,this.objectStateSet=new t,this.ids=new Set,this.paused=!1}hasGraphic(t){if(this.objectIdField){const e=t.graphic.attributes[this.objectIdField];return this.ids.has(e)}return this.ids.has(t.graphic.uid)}}export{e as Graphics3DObjectStateSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{makeHandle as t}from\"../../../../core/handleUtils.js\";import{Graphics3DObjectStateSet as e}from\"./Graphics3DObjectStateSet.js\";class s{constructor(t){this._graphicsCore=t,this._stateSets=new Array}destroy(){this._stateSets&&this._stateSets.forEach((t=>t.objectStateSet.removeAll())),this._stateSets=null}acquireSet(s,a){const i=new e(s,a);this._stateSets.push(i);const h=t((()=>this.releaseSet(i)));return{set:i,handle:h}}releaseSet(t){t.objectStateSet.removeAll();const e=this._stateSets?this._stateSets.indexOf(t):-1;-1!==e&&this._stateSets.splice(e,1)}_addObjectStateSet(t,e){t.addObjectStateSet(e.stateType,e.objectStateSet)}_removeObjectStateSet(t,e){t.removeObjectState(e.objectStateSet)}setUid(t,e){t.ids.add(e);const s=this._graphicsCore.graphics3DGraphics.get(e);s&&this._addObjectStateSet(s,t)}setUids(t,e){e.forEach((e=>this.setUid(t,e)))}setObjectIds(t,e){e.forEach((e=>t.ids.add(e))),this.initializeSet(t)}addGraphic(t){this._stateSets.forEach((e=>{!e.paused&&e.hasGraphic(t)&&this._addObjectStateSet(t,e)}))}removeGraphic(t){this._stateSets.forEach((e=>{e.hasGraphic(t)&&this._removeObjectStateSet(t,e)}))}allGraphicsDeleted(){this._stateSets&&this._stateSets.forEach((t=>t.objectStateSet.removeAll()))}initializeSet(t){const e=this._graphicsCore.graphics3DGraphics;t.objectIdField?e.forEach((e=>{e&&t.hasGraphic(e)&&this._addObjectStateSet(e,t)})):t.ids.forEach((s=>{const a=e.get(s);a&&this._addObjectStateSet(a,t)}))}get test(){return{states:this._stateSets}}}export{s as Graphics3DObjectStates};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/Logger.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{WhereClause as o}from\"../../../../core/sql/WhereClause.js\";import{findFieldsCaseInsensitive as n}from\"../i3s/I3SUtil.js\";const t=e.getLogger(\"esri.views.3d.layers.support.DefinitionExpressionSceneLayerView\"),p=e=>{let p=class extends e{constructor(){super(...arguments),this._definitionExpressionErrors=0,this._maxDefinitionExpressionErrors=20,this.logError=r=>{this._definitionExpressionErrors<this._maxDefinitionExpressionErrors&&t.error(\"Error while evaluating definitionExpression: \"+r),this._definitionExpressionErrors++,this._definitionExpressionErrors===this._maxDefinitionExpressionErrors&&t.error(\"Further errors are ignored\")}}get parsedDefinitionExpression(){if(!this.i3slayer||!this.i3slayer.definitionExpression)return null;try{const r=o.create(this.i3slayer.definitionExpression,this.i3slayer.fieldsIndex);if(!r.isStandardized)return t.error(\"definitionExpression is using non standard function\"),null;const e=[],i=r.fieldNames;return n(i,this.i3slayer.fields,{missingFields:e}),e.length>0?(t.error(`definitionExpression references unknown fields: ${e.join(\", \")}`),null):(this._definitionExpressionErrors=0,r)}catch(r){return t.error(\"Failed to parse definitionExpression: \"+r),null}}get definitionExpressionFields(){return this.parsedDefinitionExpression?this.parsedDefinitionExpression.fieldNames:null}_evaluateClause(r,e){try{return r.testFeature(e)}catch(i){return this.logError(i),!1}}_addDefinitionExpressionToQuery(r){if(!this.parsedDefinitionExpression)return r;const e=this.i3slayer.definitionExpression,i=r.clone();return i.where?i.where=`(${e}) AND (${i.where})`:i.where=e,i}};return r([i()],p.prototype,\"i3slayer\",void 0),r([i({readOnly:!0})],p.prototype,\"parsedDefinitionExpression\",null),r([i({readOnly:!0})],p.prototype,\"definitionExpressionFields\",null),p=r([s(\"esri.views.3d.layers.support.DefinitionExpressionSceneLayerView\")],p),p};export{p as DefinitionExpressionSceneLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import i from\"../../../../core/Accessor.js\";import t from\"../../../../core/Handles.js\";import r from\"../../../../core/Logger.js\";import{isSome as s,isNone as o}from\"../../../../core/maybe.js\";import{isAbortError as h}from\"../../../../core/promiseUtils.js\";import{on as l}from\"../../../../core/watchUtils.js\";import{property as n}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../../core/accessorSupport/decorators/subclass.js\";import c from\"../../../../layers/support/FeatureFilter.js\";import u from\"./QueryEngine.js\";import{getFloorFilterClause as y}from\"../../../support/floorFilterUtils.js\";import{TaskPriority as d}from\"../../../support/Scheduler.js\";const p=r.getLogger(\"esri.views.3d.layers.graphics.Graphics3DFilterVisibility\");let _=class extends i{constructor(...e){super(...e),this._dirty=!1,this._querying=!1,this._handles=new t}get updating(){return this._dirty||this._querying||s(this._queryResult)}setup(e,i){this._layerView=e,this._core=i,this._objectIdField=e.layer.objectIdField,this._queryEngine=new u({layerView:this._layerView,priority:d.FILTER_VISIBILITY});const t=this._layerView.view.resourceController.scheduler;this._handles.add(t.registerTask(d.FILTER_VISIBILITY,this)),this._handles.add(l(i.owner,\"loadedGraphics\",\"after-changes\",(e=>this._graphicsChanged(e)),(()=>this.dirty=!0))),this.filterChanged()}destroy(){this._handles.destroy(),this._handles=null,this.clear(),this._layerView=null,this._core=null}clear(){this._queryEngine.clear()&&(this._core.modifyGraphics3DGraphicVisibilities((e=>e.clearVisibilityFlag(2))),this._queryResult=null,this._querying=!1),this.dirty=!1}_graphicsChanged(e){this._queryEngine&&0==(1&e.type)||(this.dirty=!0)}updateVisibility(e){this.active&&(e.hasVisibilityFlag(2,0)||e.setVisibilityFlag(2,!1,0),this.dirty=!0)}filterChanged(){const e=this.recomputeFilter();e!==this._filter&&(this._filter=e,this.dirty=!0)}get active(){return this._filter&&this._core.graphics3DGraphics.size>0}recomputeFilter(){const e=\"filter\"in this._layerView?this._layerView.filter:null,i=\"timeExtent\"in this._layerView?this._layerView.timeExtent:null,t=y(this._layerView);if(o(i)&&o(t))return e;const r=s(e)?e.clone():new c;if(s(i)&&(r.timeExtent=s(r.timeExtent)?r.timeExtent.intersection(i):i),s(t)){const e=null==r.where||\"\"===r.where;r.where=e?t:`(${r.where}) AND (${t})`}return r}get running(){return this._dirty&&!this._querying||s(this._queryResult)}runTask(e){if(!this.active)return void this.clear();!this._dirty||this._querying||e.done||(this._querying=!0,this.dirty=!1,this._queryEngine.executeQueryForIdSet(this._filter).then((e=>{this._queryResult=e,this._querying=!1})).catch((e=>{if(!h(e)){p.warn(\"FeatureFilter query failed: \"+e,{error:e});const i=new Set;this._core.graphics3DGraphics.forEach((e=>i.add(this._getFeatureId(e.graphic)))),this._queryResult=i,this._querying=!1}})),e.madeProgress());const i=this._queryResult;s(i)&&!e.done&&(this._core.modifyGraphics3DGraphicVisibilities((t=>{if(e.done)return!1;const r=i.has(this._getFeatureId(t.graphic));return!!t.setVisibilityFlag(2,r,0)&&(e.madeProgress(),!0)})),e.done||(this._queryResult=null))}_getFeatureId(e){return null==e.objectId?e.attributes[this._objectIdField]:e.objectId}set dirty(e){this._dirty=e}};e([n({readOnly:!0})],_.prototype,\"updating\",null),e([n({readOnly:!0})],_.prototype,\"running\",null),e([n()],_.prototype,\"_dirty\",void 0),e([n()],_.prototype,\"_querying\",void 0),e([n()],_.prototype,\"_queryResult\",void 0),_=e([a(\"esri.views.3d.layers.graphics.Graphics3DFilterVisibility\")],_);export{_ as Graphics3DFilterVisibility};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../Graphic.js\";import i from\"../../../../core/Accessor.js\";import{neverReached as s}from\"../../../../core/compilerUtils.js\";import r from\"../../../../core/Handles.js\";import{logOnError as n}from\"../../../../core/promiseUtils.js\";import{init as a}from\"../../../../core/watchUtils.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{diff as p}from\"../../../../core/accessorSupport/diffUtils.js\";import{canProject as h,project as d}from\"../../../../geometry/support/webMercatorUtils.js\";import c from\"../../../../rest/support/Query.js\";import{SUSPEND_RESUME_EXTENT_OPTIMISM as u}from\"./constants.js\";import{Graphics3DCore as g}from\"./Graphics3DCore.js\";import m from\"./Graphics3DElevationAlignment.js\";import{Graphics3DFilterVisibility as y}from\"./Graphics3DFilterVisibility.js\";import f from\"./Graphics3DFrustumVisibility.js\";import{Graphics3DObjectStates as b}from\"./Graphics3DObjectStates.js\";import w from\"./Graphics3DScaleVisibility.js\";import{enlargeExtent as x}from\"./graphicUtils.js\";import{attributeLookup as E}from\"../support/attributeUtils.js\";import{WatchUpdatingTracking as C}from\"../../../support/WatchUpdatingTracking.js\";let V=class extends i{constructor(t){super(t),this._handles=new r,this.watchUpdatingTracking=new C,this.suspendResumeExtentMode=\"computed\",this.dataExtent=null,this.suspendResumeExtent=null}get suspended(){var t;return null==(t=this.scaleVisibility)?void 0:t.suspended}get suspendInfo(){var t,e;const i={};return null!=(t=this.scaleVisibility)&&t.suspended&&(i.outsideScaleRange=!0),null!=(e=this.frustumVisibility)&&e.suspended&&(i.outsideOfView=!0),i}get updating(){var t,e,i;return!!(null!=(t=this.graphicsCore)&&t.updating||null!=(e=this.frustumVisibility)&&e.updating||null!=(i=this.watchUpdatingTracking)&&i.updating)}normalizeCtorArgs(t){const e=t.frustumVisibilityEnabled?new f:null,i=t.scaleVisibilityEnabled?new w:null,s=(t.filterVisibilityEnabled||t.timeExtentVisibilityEnabled)&&\"multipatch\"!==t.layer.geometryType?new y:null,r=t.elevationAlignmentEnabled?new m:null,n=new g({owner:t.owner,layer:t.layer,preferredUpdatePolicy:t.preferredUpdatePolicy,elevationFeatureExpressionEnabled:t.elevationFeatureExpressionEnabled,graphicSymbolSupported:!1,hasZ:t.owner.hasZ,hasM:t.owner.hasM}),{updateClippingExtent:a,suspendResumeExtentMode:o,dataExtent:l}=t;return{graphicsCore:n,frustumVisibility:e,scaleVisibility:i,filterVisibility:s,elevationAlignment:r,updateClippingExtent:a,suspendResumeExtentMode:o,dataExtent:l}}initialize(){this.scaleVisibility&&this.watchUpdatingTracking.add(this.layer,\"scaleRangeId\",(()=>this.scaleVisibility.layerMinMaxScaleChangeHandler())),this.filterVisibility&&(this.watchUpdatingTracking.add(this.owner,\"filter\",(()=>this.filterVisibility.filterChanged())),this.watchUpdatingTracking.add(this.owner,\"timeExtent\",(()=>this.filterVisibility.filterChanged()))),this.elevationAlignment&&this.watchUpdatingTracking.add(this.layer,\"elevationInfo\",((t,e)=>{p(t,e)&&this.watchUpdatingTracking.addPromise(this.graphicsCore.elevationInfoChange())})),this.watchUpdatingTracking.add(this.layer,\"labelsVisible\",(()=>this.graphicsCore.updateVisibilityInfo())),this.watchUpdatingTracking.add(this.layer,\"labelingInfo\",((t,e)=>{p(t,e)&&this.graphicsCore.updateLabelingInfo()}))}async setup(){this.frustumVisibility&&this.frustumVisibility.setup(this.owner);const t=this.owner,e=this.owner.view.basemapTerrain,i=(t,e,i)=>this.graphicsCore.spatialIndex.queryGraphicUIDsInExtent(t,e,i);if(this.scaleVisibility&&this.scaleVisibility.setup(t,this.layer,i,this.graphicsCore,e),this.filterVisibility&&(\"filter\"in t||\"timeExtent\"in t)&&this.filterVisibility.setup(t,this.graphicsCore),this.elevationAlignment){const e=t.view.elevationProvider;this.elevationAlignment.setup(t,i,this.graphicsCore,e)}this._set(\"objectStates\",new b(this.graphicsCore)),this._set(\"labeling\",this.owner.view.labeler.addGraphicsOwner(this.graphicsCore,this.scaleVisibility)),this._set(\"deconfliction\",t.view.deconflictor.addGraphicsOwner(this.graphicsCore)),await n(this.graphicsCore.setup({elevationAlignment:this.elevationAlignment,scaleVisibility:this.scaleVisibility,filterVisibility:this.filterVisibility,deconflictor:this.deconfliction,labeler:this.labeling,objectStates:this.objectStates})),this.watchUpdatingTracking.add(this.layer,\"renderer\",(t=>this.watchUpdatingTracking.addPromise(this.graphicsCore.rendererChange(t)))),this.watchUpdatingTracking.add(t,\"fullOpacity\",(()=>this.graphicsCore.opacityChange())),this.setupSuspendResumeExtent(),this.updateClippingExtent&&(this.watchUpdatingTracking.add(t.view,\"clippingArea\",(()=>this._updateClippingExtent())),this._updateClippingExtent()),this.graphicsCore.startCreateGraphics(),this.graphicsCore.labelsEnabled&&await n(this.graphicsCore.updateLabelingInfo())}destroy(){this._handles&&(this._handles.destroy(),this._handles=null);const t=[\"watchUpdatingTracking\",\"frustumVisibility\",\"scaleVisibility\",\"filterVisibility\",\"elevationAlignment\",\"objectStates\",\"graphicsCore\"];for(const e of t){const t=this[e];t&&(t.destroy(),this._set(e,null))}this._set(\"layer\",null),this._set(\"owner\",null)}maskOccludee(t){const{set:e,handle:i}=this.objectStates.acquireSet(1,null);return this.objectStates.setUid(e,t.uid),i}highlight(t,i){if(t instanceof c){const{set:e,handle:s}=this.objectStates.acquireSet(0,i);return this.owner.queryObjectIds(t).then((t=>this.objectStates.setObjectIds(e,t))),s}if(\"number\"==typeof t||\"string\"==typeof t)return this.highlight([t],i);if(t instanceof e)return this.highlight([t],i);if(\"toArray\"in t&&(t=t.toArray()),Array.isArray(t)&&t.length>0){if(t[0]instanceof e){const e=t;if(null==E(this.layer.fieldsIndex,e[0].attributes,i)){const t=e.map((t=>t.uid)),{set:i,handle:s}=this.objectStates.acquireSet(0,null);return this.objectStates.setUids(i,t),s}t=e.map((t=>E(this.layer.fieldsIndex,t.attributes,i)))}if(\"number\"==typeof t[0]||\"string\"==typeof t[0]){const e=t,{set:s,handle:r}=this.objectStates.acquireSet(0,i);return this.objectStates.setObjectIds(s,e),r}}return S}_updateClippingExtent(){const t=this.owner.view.clippingArea;this.graphicsCore.setClippingExtent(t,this.owner.view.spatialReference)&&(this.updateClippingExtent(t)||this.graphicsCore.recreateAllGraphics())}setupSuspendResumeExtent(){(this.frustumVisibility||this.scaleVisibility)&&this._handles.add(a(this,\"suspendResumeExtentMode\",(()=>{switch(this._handles.remove(j),this.suspendResumeExtentMode){case\"computed\":this._handles.add([a(this.graphicsCore,\"computedExtent\",(t=>this.updateSuspendResumeExtent(t))),this.graphicsCore.watch(\"extentPadding\",(()=>this.updateSuspendResumeExtent(this.graphicsCore.computedExtent)))],j);break;case\"data\":this._handles.add([a(this,\"dataExtent\",(t=>this.updateSuspendResumeExtent(t))),this.graphicsCore.watch(\"extentPadding\",(()=>this.updateSuspendResumeExtent(this.dataExtent)))],j);break;default:s(this.suspendResumeExtentMode)}})))}updateSuspendResumeExtent(t){t?this.suspendResumeExtentChanged(this.extentToSuspendResumeRect(t,this.suspendResumeExtent)):this.suspendResumeExtentChanged(null)}extentToSuspendResumeRect(t,e){const i=this.owner.view.spatialReference;if(!t.spatialReference.equals(i)){if(!h(t,i))return;t=d(t,i)}return x(t,e,u,this.graphicsCore.extentPadding)}suspendResumeExtentChanged(t){this.frustumVisibility&&this.frustumVisibility.setExtent(t),this.scaleVisibility&&this.scaleVisibility.setExtent(t)}};t([o({aliasOf:\"graphicsCore.layer\"})],V.prototype,\"layer\",void 0),t([o({aliasOf:\"graphicsCore.owner\"})],V.prototype,\"owner\",void 0),t([o({constructOnly:!0})],V.prototype,\"updateClippingExtent\",void 0),t([o({constructOnly:!0})],V.prototype,\"graphicsCore\",void 0),t([o({constructOnly:!0})],V.prototype,\"scaleVisibility\",void 0),t([o({constructOnly:!0})],V.prototype,\"filterVisibility\",void 0),t([o({constructOnly:!0})],V.prototype,\"elevationAlignment\",void 0),t([o({constructOnly:!0})],V.prototype,\"frustumVisibility\",void 0),t([o({readOnly:!0})],V.prototype,\"deconfliction\",void 0),t([o({readOnly:!0})],V.prototype,\"labeling\",void 0),t([o({readOnly:!0})],V.prototype,\"objectStates\",void 0),t([o({readOnly:!0})],V.prototype,\"watchUpdatingTracking\",void 0),t([o()],V.prototype,\"suspendResumeExtentMode\",void 0),t([o()],V.prototype,\"dataExtent\",void 0),t([o({readOnly:!0})],V.prototype,\"suspended\",null),t([o({readOnly:!0})],V.prototype,\"suspendInfo\",null),t([o({readOnly:!0,dependsOn:[\"graphicsCore.updating\",\"frustumVisibility.updating\",\"watchUpdatingTracking.updating\"]})],V.prototype,\"updating\",null),V=t([l(\"esri.views.3d.layers.graphics.Graphics3DFeatureLikeLayerView\")],V);const v=V,j=\"suspendResumeExtentMode\",S={remove(){},pause(){},resume(){}};export{v as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/PooledArray.js\";import{create as e,copy as r,area as s,expand as n,contains as o,containsPoint as i}from\"../../../../geometry/support/aaBoundingRect.js\";import{noBudget as h}from\"../../../support/Scheduler.js\";const a=.05;class c{constructor(){this._extents=new t({allocator:t=>t||e()}),this._tmpExtent=e(),this._dirty=!1}get empty(){return 0===this._extents.length}get size(){return this._extents.length}clear(){this._extents.clear()}add(t){this.contains(t)||(this.removeContained(t),r(this._extents.pushNew(),t),this._dirty=!0)}pop(){return this._dirty&&this.mergeTight(),this._extents.pop()}merge(t){return this.mergeTight(t),t.hasProgressed}mergeTight(t=h){const e=this._extents,o=new Set;let i=0;for(;i!==e.length;){e.sort(((t,e)=>t[0]-e[0])),i=e.length,o.clear();for(let i=0;i<e.length;++i){if(t.done)return;const h=e.getItemAt(i);for(let t=i+1;t<e.length;++t){const r=e.getItemAt(t);if(r[0]>=h[2])break;o.add(r)}o.forEach((i=>{if(h===i)return;if(i[2]<=h[0])return void o.delete(i);const c=s(h),g=s(i),m=this._tmpExtent;n(h,i,m);const d=c+g;(s(m)-d)/d<a&&(r(h,m),o.delete(i),e.remove(i),t.madeProgress())})),o.add(h)}}this._dirty=!1}contains(t){return this._extents.some((e=>o(e,t)))}removeContained(t){this._extents.filterInPlace((e=>!o(t,e)))}get test(){const t=this;return{containsPoint:e=>t._extents.some((t=>i(t,e)))}}}export{c as ExtentSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/Accessor.js\";import i from\"../../../../core/Evented.js\";import s from\"../../../../core/Handles.js\";import{isSome as r}from\"../../../../core/maybe.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{ExtentSet as h}from\"./ExtentSet.js\";import{TaskPriority as o}from\"../../../support/Scheduler.js\";let p=class extends e{constructor(){super(...arguments),this.dirtyExtents=new h,this.globalDirty=!1,this.averageExtentUpdateSize=0,this.dirtyGraphicsSet=new Set,this.handles=new s,this.updateElevation=!1,this.layerView=null,this.graphicsCore=null,this.events=new i}setup(t,e,i,s){this.layerView=t,this.queryGraphicUIDsInExtent=e,this.graphicsCore=i,this.elevationProvider=s;const r=this.layerView.view.resourceController.scheduler;this.handles.add([s.on(\"elevation-change\",(t=>this._elevationChanged(t))),this.layerView.watch(\"suspended\",(()=>this.suspendedChange())),r.registerTask(o.ELEVATION_ALIGNMENT,this)])}destroy(){this.dirtyGraphicsSet.clear(),this.handles.destroy(),this.handles=null,this.layerView=null,this.graphicsCore=null,this.queryGraphicUIDsInExtent=null}clear(){this.dirtyGraphicsSet.clear(),this.notifyChange(\"updating\")}suspendedChange(){!0===this.layerView.suspended?this.updateElevation=!1:!1===this.layerView.suspended&&this.updateElevation&&(this.globalDirty=!0,this.notifyChange(\"updating\"))}elevationInfoChange(){this.globalDirty=!0,this.notifyChange(\"updating\")}get updating(){return this.running}get running(){return this.dirtyGraphicsSet.size>0||this.dirtyExtents&&!this.dirtyExtents.empty||this.globalDirty}get updatingRemaining(){return this.dirtyGraphicsSet.size+this.dirtyExtents.size*this.averageExtentUpdateSize}runTask(t){for(this.globalDirty&&(this.markAllGraphicsElevationDirty(),this.globalDirty=!1,t.madeProgress()),t.run((()=>this.dirtyExtents.merge(t)));this.running&&!t.done;)this._updateDirtyGraphics(t),this._updateDirtyExtents(t);this.layerView.view.deconflictor.setDirty(),this.notifyChange(\"updating\")}_updateDirtyGraphics(t){const e=this.layerView.view.renderCoordsHelper,i=0===this.graphicsCore.effectiveUpdatePolicy;for(const s of this.dirtyGraphicsSet.keys()){const a=this.graphicsCore.getGraphics3DGraphicById(s);if(this.dirtyGraphicsSet.delete(s),r(a)&&(a.alignWithElevation(this.elevationProvider,e,i),t.madeProgress()),t.done)return}}_updateDirtyExtents(t){for(;!this.dirtyExtents.empty&&!t.done;){const e=this.dirtyExtents.pop(),i=this.elevationProvider.spatialReference;this.events.emit(\"invalidate-elevation\",{extent:e,spatialReference:i});const s=this.dirtyGraphicsSet.size;this.queryGraphicUIDsInExtent(e,i,(t=>{const e=this.graphicsCore.getGraphics3DGraphicById(t);r(e)&&e.needsElevationUpdates()&&this.dirtyGraphicsSet.add(t)})),this.averageExtentUpdateSize=.1*(this.dirtyGraphicsSet.size-s)+.9*this.averageExtentUpdateSize,t.madeProgress()}}markAllGraphicsElevationDirty(){this.dirtyExtents.clear(),this.dirtyGraphicsSet.clear(),this.graphicsCore.graphics3DGraphics.forEach(((t,e)=>this.dirtyGraphicsSet.add(e)))}_elevationChanged(t){if(\"scene\"===t.context&&(!this.graphicsCore.layer.elevationInfo||\"relative-to-scene\"!==this.graphicsCore.layer.elevationInfo.mode))return;const{extent:e,spatialReference:i}=t;if(this.layerView.suspended){if(!this.updateElevation){const t=this.graphicsCore.computedExtent;t&&e[2]>t.xmin&&e[0]<t.xmax&&e[3]>t.ymin&&e[1]<t.ymax&&(this.updateElevation=!0)}this.events.emit(\"invalidate-elevation\",{extent:e,spatialReference:i})}else e[0]===-1/0?this.globalDirty=!0:this.dirtyExtents.add(e),this.notifyChange(\"updating\")}};t([a({readOnly:!0})],p.prototype,\"updating\",null),t([a({readOnly:!0})],p.prototype,\"updatingRemaining\",null),p=t([n(\"esri.views.3d.layers.graphics.Graphics3DElevationAlignment\")],p);const d=p;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import r from\"../../../../core/Accessor.js\";import{isNone as t}from\"../../../../core/maybe.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../../core/accessorSupport/decorators/subclass.js\";import n from\"../../../../geometry/Extent.js\";import o from\"../../../../layers/graphics/data/QueryEngine.js\";import i from\"../../../../rest/support/FeatureSet.js\";import u from\"../../../../rest/support/Query.js\";import{featureGeometryTypeKebabDictionary as y}from\"../../../../geometry/support/typeUtils.js\";const c=o;let l=class extends r{constructor(e){super(e),this._dataQueryEngineInstance=null}get queryGeometryType(){switch(this.layer.geometryType){case\"multipoint\":case\"point\":case\"polygon\":case\"polyline\":return this.layer.geometryType;case\"mesh\":return\"polygon\";default:return}}get defaultQueryJSON(){return new u({outSpatialReference:this.spatialReference}).toJSON()}get dataQueryEngine(){return this.ensureDataQueryEngine()}destroy(){this.clear()}clear(){return!!this._dataQueryEngineInstance&&(this._dataQueryEngineInstance.destroy(),this._dataQueryEngineInstance=null,!0)}async executeQueryForIdSet(e,r){return this.dataQueryEngine.executeQueryForIdSet(this._ensureQueryJSON(e),r)}async executeQueryForCount(e,r){return this.dataQueryEngine.executeQueryForCount(this._ensureQueryJSON(e),r)}async executeQueryForExtent(e,r){const{count:t,extent:s}=await this.dataQueryEngine.executeQueryForExtent(this._ensureQueryJSON(e),r);return{count:t,extent:n.fromJSON(s)}}async executeQueryForIds(e,r){return this.dataQueryEngine.executeQueryForIds(this._ensureQueryJSON(e),r)}async executeQueryForLatestObservations(e,r){const t=await this.dataQueryEngine.executeQueryForLatestObservations(this._ensureQueryJSON(e),r),s=i.fromJSON(t);return s.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),s}async executeQuery(e,r){const t=await this.dataQueryEngine.executeQuery(this._ensureQueryJSON(e),r),s=i.fromJSON(t);return s.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),s}_ensureQueryJSON(e){return t(e)?this.defaultQueryJSON:(\"outSpatialReference\"in e&&!e.outSpatialReference&&(e.outSpatialReference=this.spatialReference),e.toJSON())}ensureDataQueryEngine(){if(this._dataQueryEngineInstance)return this._dataQueryEngineInstance;const e=\"timeInfo\"in this.layer&&this.layer.timeInfo&&this.layer.timeInfo.toJSON()||null,r=this.layer.objectIdField,t=y.toJSON(this.queryGeometryType),s=this.layer.fields.map((e=>e.toJSON())),a=this.layerView.view.resourceController.scheduler,n=this.priority,o=this.spatialReference.toJSON(),i=this.layerView.graphics3d.graphicsCore.featureStore,{hasZ:u,hasM:l}=this.layerView;return this._dataQueryEngineInstance=new c({hasZ:u,hasM:l,geometryType:t,fields:s,timeInfo:e,spatialReference:o,objectIdField:r,featureStore:i,scheduler:a,priority:n}),this._dataQueryEngineInstance}};e([s({constructOnly:!0})],l.prototype,\"layerView\",void 0),e([s({constructOnly:!0})],l.prototype,\"priority\",void 0),e([s({readOnly:!0,aliasOf:\"layerView.view.spatialReference\"})],l.prototype,\"spatialReference\",void 0),e([s({readOnly:!0,aliasOf:\"layerView.layer\"})],l.prototype,\"layer\",void 0),e([s({readOnly:!0})],l.prototype,\"queryGeometryType\",null),e([s({readOnly:!0})],l.prototype,\"defaultQueryJSON\",null),l=e([a(\"esri.views.3d.layers.graphics.QueryEngine\")],l);const p=l;export{l as QueryEngine,p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l}from\"../../../layers/support/fieldUtils.js\";async function t(t,d=t.popupTemplate){if(!e(d))return[];const i=await d.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:n}=d,{objectIdField:s,typeIdField:a,globalIdField:o,relationships:u}=t;if(i.includes(\"*\"))return[\"*\"];const f=n?await p(t):[],r=l(t.fieldsIndex,[...i,...f]);return a&&r.push(a),r&&s&&t.fieldsIndex.has(s)&&-1===r.indexOf(s)&&r.push(s),r&&o&&t.fieldsIndex.has(o)&&-1===r.indexOf(o)&&r.push(o),u&&u.forEach((e=>{const{keyField:p}=e;r&&p&&t.fieldsIndex.has(p)&&-1===r.indexOf(p)&&r.push(p)})),r}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,t as getRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import s from\"./Accessor.js\";import e from\"./Logger.js\";import{runTracked as r}from\"./accessorSupport/tracking.js\";import{property as a}from\"./accessorSupport/decorators/property.js\";import{subclass as n}from\"./accessorSupport/decorators/subclass.js\";import{SimpleTrackingTarget as c}from\"./accessorSupport/tracking/SimpleTrackingTarget.js\";const o=s=>{let r=class extends s{constructor(){super(...arguments),this._numUpdating=0,this.asyncUpdateState=new Map}get updating(){return this._numUpdating>0}autoUpdateAsync(t,s){return p((s=>this.updateAsync(t,s)),s)}async updateAsync(t,s){if(!this.startAsyncUpdate(t)){try{const e=await s();this._set(t,e)}catch(r){e.getLogger(this.declaredClass).warn(`Async update of \"${t}\" failed. Async update functions should not throw exceptions.`)}this.endAsyncUpdate(t)&&this.updateAsync(t,s)}}startAsyncUpdate(t){var s;const e=null!=(s=this.asyncUpdateState.get(t))?s:0;return 1&e?(this.asyncUpdateState.set(t,2|e),!0):(++this._numUpdating,this.asyncUpdateState.set(t,1|e),!1)}endAsyncUpdate(t){var s;--this._numUpdating;const e=-2&(null!=(s=this.asyncUpdateState.get(t))?s:0);return 2&e?(this.asyncUpdateState.set(t,-3&e),!0):(this.asyncUpdateState.set(t,e),!1)}};return t([a({readOnly:!0})],r.prototype,\"updating\",null),t([a()],r.prototype,\"_numUpdating\",void 0),r=t([n(\"esri.core.AsyncUpdate\")],r),r};function p(t,s){const e=()=>{o&&!p&&t(a)},a=()=>{if(!o||p)return s();o.clear(),p=!0;const t=r(o,s);return p=!1,t},n=()=>{o&&(o.destroy(),o=null)};let o=new c(e),p=!1;return t(a),{remove:n}}let i=class extends(o(s)){};i=t([n(\"esri.core.AsyncUpdate\")],i);export{i as AsyncUpdate,o as AsyncUpdateMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{AsyncUpdateMixin as r}from\"../../../../core/AsyncUpdate.js\";import{HandleOwner as s}from\"../../../../core/HandleOwner.js\";import t from\"../../../../core/Logger.js\";import{unwrapOr as i}from\"../../../../core/maybe.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{fixFields as a,collectLabelingFields as d,collectFilterFields as n}from\"../../../../layers/support/fieldUtils.js\";const p=t.getLogger(\"esri.views.3d.layers.support.SceneLayerViewRequiredFields\");let c=class extends(r(s)){constructor(e){super(e)}get requiredFields(){const{layerView:{layer:{fieldsIndex:e},definitionExpressionFields:r},rendererFields:s,labelingFields:t,viewFilterFields:o}=this;return a(e,[...i(r,[]),...i(s,[]),...i(t,[]),...i(o,[])])}initialize(){const e=this.layerView.layer;this.layer=e,this.handles.add([this.autoUpdateAsync(\"rendererFields\",(()=>{const{fieldsIndex:e,renderer:r}=this.layer;return r?y((s=>r.collectRequiredFields(s,e))):null})),this.autoUpdateAsync(\"labelingFields\",(()=>{const{layer:e}=this;return e.labelsVisible?y((r=>d(r,e))):null})),this.autoUpdateAsync(\"viewFilterFields\",(()=>{const{layer:e,filter:r}=this.layerView;return y((s=>n(s,e,r)))}))])}};async function y(e){const r=new Set;try{return await e(r),Array.from(r).sort()}catch(s){return p.error(s),null}}e([o()],c.prototype,\"layerView\",void 0),e([o()],c.prototype,\"layer\",void 0),e([o()],c.prototype,\"requiredFields\",null),e([o()],c.prototype,\"rendererFields\",void 0),e([o()],c.prototype,\"labelingFields\",void 0),e([o()],c.prototype,\"viewFilterFields\",void 0),c=e([l(\"esri.views.3d.layers.support.SceneLayerViewRequiredFields\")],c);export{c as SceneLayerViewRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{WorkerHandle as r}from\"../../../core/workers/WorkerHandle.js\";class e extends r{constructor(r){super(\"SceneLayerWorker\",\"dracoDecompressPointCloudData\",r,{hasInitialize:!0})}getTransferList(r){return[r.geometryBuffer]}}export{e as I3SPointsWorkerHandle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../Graphic.js\";import r from\"../../../core/Logger.js\";import{destroyMaybe as i,isSome as s,isNone as o,unwrap as a}from\"../../../core/maybe.js\";import{init as n}from\"../../../core/watchUtils.js\";import{property as d}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import{b as h}from\"../../../chunks/vec3.js\";import{f as u,c}from\"../../../chunks/vec3f64.js\";import{projectBuffer as p,projectVectorToVector as g,projectBoundingRect as m}from\"../../../geometry/projection.js\";import{create as y}from\"../../../geometry/support/aaBoundingRect.js\";import{extentContainsCoords3D as f}from\"../../../geometry/support/contains.js\";import{getGeometryZScaler as _}from\"../../../geometry/support/zscale.js\";import{makeDehydratedPoint as b,estimateSize as v}from\"../../../layers/graphics/dehydratedFeatures.js\";import{hydrateGraphic as E}from\"../../../layers/graphics/hydratedFeatures.js\";import x from\"../../../layers/graphics/controllers/I3SOnDemandController.js\";import I from\"../../../layers/support/FeatureFilter.js\";import{getRenderingInfo as w,getRenderingInfoAsync as S}from\"../../../renderers/support/renderingInfoUtils.js\";import C from\"../../../rest/support/Query.js\";import{I3SPointsWorkerHandle as D}from\"./I3SPointsWorkerHandle.js\";import{LayerView3D as F}from\"./LayerView3D.js\";import A from\"./graphics/Graphics3DFeatureLikeLayerView.js\";import O from\"./graphics/QueryEngine.js\";import{createInteractiveEditSession as j,processAttributeEdits as N}from\"./i3s/attributeEditing.js\";import{I3SAttributeOverrides as T}from\"./i3s/I3SAttributeOverrides.js\";import{checkSpatialReferences as G,containsDraco as V,whenGraphicAttributes as M,getCachedAttributeValue as R}from\"./i3s/I3SUtil.js\";import{DefinitionExpressionSceneLayerView as P}from\"./support/DefinitionExpressionSceneLayerView.js\";import{defineFieldProperties as L}from\"./support/fieldProperties.js\";import{PopupSceneLayerView as U}from\"./support/PopupSceneLayerView.js\";import{SceneLayerViewRequiredFields as H}from\"./support/SceneLayerViewRequiredFields.js\";import q from\"../support/debugFlags.js\";import{GraphicsMap as Q}from\"../support/GraphicsMap.js\";import{compute as k}from\"../support/orientedBoundingBox.js\";import{updatingProgress as B}from\"../support/updatingProperties.js\";import z from\"../../layers/SceneLayerView.js\";import{TaskPriority as W}from\"../../support/Scheduler.js\";const K=r.getLogger(\"esri.views.3d.layers.SceneLayerGraphicsView3D\"),Z=L();let J=class extends(P(U(F(z)))){constructor(){super(...arguments),this.type=\"scene-layer-graphics-3d\",this._nodesAddedToStage=new Map,this.drapeSourceType=1,this._queryEngine=null,this._memCache=null,this._interactiveEditingSessions=new Map,this.loadedGraphics=new Q,this.holeFilling=\"always\",this.progressiveLoadFactor=1,this.supportsHeightUnitConversion=!0,this._coordinatesOutsideExtentErrors=0,this._maxCoordinatesOutsideExtentErrors=20}initialize(){var e,t;const r=this.layer;this.addResolvingPromise(r.indexInfo),this._attributeOverrides=new T(this.layer,null==(e=this.view.resourceController)?void 0:e.memoryController),G(r,this.view.spatialReference,this.view.viewingMode),this.fieldsHelper=new H({layerView:this}),this.updatingHandles.add(r,\"rangeInfos\",(e=>this._rangeInfosChanged(e)),2),this.updatingHandles.add(r,\"renderer\",((e,t)=>this._rendererChange(e,t))),this.updatingHandles.add(this,\"parsedDefinitionExpression\",(()=>this._filterChange())),this.updatingHandles.add(this,\"view.floors\",(()=>this.graphics3d.filterVisibility.filterChanged())),this.handles.add(n(q,\"I3S_TREE_SHOW_TILES\",(e=>{if(e&&!this._treeDebugger){const e=this._controller.crsIndex;import(\"./support/I3STreeDebugger.js\").then((({I3STreeDebugger:t})=>{!this._treeDebugger&&q.I3S_TREE_SHOW_TILES&&(this._treeDebugger=new t({lv:this,view:this.view,nodeSR:e}))}))}else e||!this._treeDebugger||q.I3S_TREE_SHOW_TILES||(this._treeDebugger.destroy(),this._treeDebugger=null)}))),this._set(\"graphics3d\",new A({owner:this,layer:r,preferredUpdatePolicy:0,scaleVisibilityEnabled:!0,filterVisibilityEnabled:!0,timeExtentVisibilityEnabled:!1,frustumVisibilityEnabled:!1,elevationAlignmentEnabled:!0,elevationFeatureExpressionEnabled:!1,suspendResumeExtentMode:\"data\",dataExtent:r.fullExtent,updateClippingExtent:e=>this._updateClippingExtent(e)})),null==(t=this.graphics3d.elevationAlignment)||t.events.on(\"invalidate-elevation\",(e=>this._invalidateElevation(e))),this.supportsHeightUnitConversion&&(this._verticalScale=_(\"point\",r.spatialReference,this.view.spatialReference)),this.addResolvingPromise(this.graphics3d.setup()),this._memCache=this.view.resourceController.memoryController.newCache(r.uid),this._controller=new x({layerView:this,scaleVisibilityEnabled:!1}),V(this.layer.geometryDefinitions)&&(this._worker=new D((e=>this.view.resourceController.schedule(e)))),this.handles.add(this.layer.on(\"apply-edits\",(e=>this.updatingHandles.addPromise(e.result)))),this.handles.add(this.layer.on(\"edits\",(e=>this._handleEdits(e)))),this.when((()=>{this._queryEngine=new O({layerView:this,priority:W.FEATURE_QUERY_ENGINE}),this.updatingHandles.add(this,\"maximumNumberOfFeatures\",(e=>this._controller.featureTarget=e),2),this.updatingHandles.add(this,\"suspended\",(e=>{e&&this._removeAllNodeData()}))}))}destroy(){this._treeDebugger=i(this._treeDebugger),this._attributeOverrides=i(this._attributeOverrides),this._set(\"graphics3d\",i(this.graphics3d)),this._controller=i(this._controller),this._queryEngine=i(this._queryEngine),this._worker=i(this._worker),this._memCache=i(this._memCache),this._nodesAddedToStage.clear(),this.fieldsHelper=i(this.fieldsHelper)}get requiredFields(){var e,t;return null!=(e=null==(t=this.fieldsHelper)?void 0:t.requiredFields)?e:[]}get maximumNumberOfFeatures(){const e=this.graphics3d&&this.graphics3d.graphicsCore&&this.graphics3d.graphicsCore.displayFeatureLimit;return e?e.maximumNumberOfFeatures:0}set maximumNumberOfFeatures(e){null!=e?(this._override(\"maximumNumberOfFeatures\",e),this._controller.fixedFeatureTarget=!0):(this._clearOverride(\"maximumNumberOfFeatures\"),this._controller.fixedFeatureTarget=!1)}get maximumNumberOfFeaturesExceeded(){return!this.suspended&&(!!this._controller&&!this._controller.leavesReached)}get hasM(){return!1}get hasZ(){return!0}notifyGraphicGeometryChanged(e){this.graphics3d.graphicsCore.notifyGraphicGeometryChanged(e)}notifyGraphicVisibilityChanged(e){this.graphics3d.graphicsCore.notifyGraphicVisibilityChanged(e)}async whenGraphicAttributes(e,t){return M(this.layer,e,this._getObjectIdField(),t,(()=>[...this._nodesAddedToStage.values()]))}getGraphicFromGraphicUid(e){if(!this.loadedGraphics)return null;const t=E(this.loadedGraphics.find((t=>t.uid===e)),this.layer),r=this._getObjectIdField();return t&&t.attributes&&t.attributes[r]?(t.layer=this.layer,t.sourceLayer=this.layer,t):null}whenGraphicBounds(e,t){return this.graphics3d.graphicsCore.whenGraphicBounds(e,t)}computeAttachmentOrigin(e,t){return this.graphics3d.graphicsCore.computeAttachmentOrigin(e,t)}canResume(){return super.canResume()&&(!this._controller||this._controller.rootNodeVisible)}isUpdating(){var e,t,r;return!!(null!=(e=this._controller)&&e.updating||null!=(t=this.graphics3d)&&t.updating||null!=(r=this.fieldsHelper)&&r.updating)}getRenderingInfo(e,t,r){const i=w(e,{renderer:t,arcade:r});if(s(i)&&i.color){const e=i.color;e[0]=e[0]/255,e[1]=e[1]/255,e[2]=e[2]/255}return i}async getRenderingInfoAsync(e,t,r,i){return S(e,{renderer:t,arcade:r,...i})}get symbolUpdateType(){return this.graphics3d.graphicsCore.symbolUpdateType}highlight(e){return this.graphics3d.highlight(e,this.layer.objectIdField)}get updatePolicy(){return this.graphics3d.graphicsCore.effectiveUpdatePolicy}createInteractiveEditSession(e){return j(this.attributeEditingContext,e)}async extractBinaryPointData(e,t){const r={geometryBuffer:e.geometryBuffer};return o(this._worker)&&(this._worker=new D((e=>this.view.resourceController.schedule(e)))),this._worker.invoke(r,t).then((e=>{if(s(e)){return{positionData:e.positions,featureIds:e.featureIds}}throw new Error(\"Failed to decompress Draco point data\")}))}checkExtent(e,t){e&&!f(e,t)&&(this._coordinatesOutsideExtentErrors<this._maxCoordinatesOutsideExtentErrors&&K.error(\"Service Error: Coordinates outside of layer extent\"),this._coordinatesOutsideExtentErrors+1===this._maxCoordinatesOutsideExtentErrors&&K.error(\"Maximum number of errors reached. Further errors are ignored.\"),this._coordinatesOutsideExtentErrors++)}async addNode(e,t,r){if(!X(t)&&!$(t))return Promise.reject();if(this._nodesAddedToStage.has(e.index))return void K.error(\"I3S node \"+e.id+\" already added\");const i=s(this.layer.fullExtent)?te(this.layer.fullExtent.clone(),.5):null,o=this._controller.crsVertex,a=[],n={graphics:null,featureIds:null,attributeInfo:t.attributeDataInfo,node:e};if(X(t)?await this._addNodeBinaryPointData(e,n,t,i,a,r):$(t)&&this._addNodeLegacyPointData(e,n,t,i,a),await this._attributeOverrides.apply(n.featureIds,t.attributeDataInfo,r),e.numFeatures=n.graphics.length,this._updateNodeMemory(e),ee(n),a.length>0&&(this.computeObb(e,a,o),this._controller.updateVisibility(e.index)),!this._controller.isGeometryVisible(e))return this._cacheNodeData(n),Promise.resolve();if(s(this._verticalScale))for(const s of n.graphics)this._verticalScale(s.geometry);return this._nodesAddedToStage.set(e.index,n),this.loadedGraphics.addMany(n.graphics),this._filterNode(n),this._treeDebugger&&this._treeDebugger.update(),Promise.resolve()}computeObb(e,t,r){const i=this._controller.crsIndex,s=i.isGeographic?this.view.renderSpatialReference:i;p(t,r,0,t,s,0,t.length/3);const o={data:t,size:3};e.serviceObb=k(o),i.isGeographic&&g(e.serviceObb.center,s,e.serviceObb.center,i)}isNodeLoaded(e){return this._nodesAddedToStage.has(e)}isNodeReloading(){return!1}updateNodeState(){}async _addNodeBinaryPointData(e,r,i,o,n,d){const l=await this.extractBinaryPointData(i,d);if(null==l)return Promise.reject();const c=this._getObjectIdField(),g=this._controller.crsVertex,m=this.view.spatialReference,y=this.graphics3d.graphicsCore,{positionData:f,featureIds:_}=l,v=3,E=f.length/v,x=new Array;for(let I=0;I<E;I++){const r=s(e.serviceObb)?e.serviceObb.center:[0,0,0],i=I*v,d=u(f[i+0],f[i+1],f[i+2]);h(d,d,r),e.serviceObb||n.push(d[0],d[1],d[2]),s(o)&&this.checkExtent(o,d);const l=_[I],E={};null!=l&&(E[c]=l);const w=null==l?t.generateUID():l;p(d,g,0,ie,m,0,1);const S=b(ie[0],ie[1],ie[2],m),C=this.loadedGraphics.get(w);if(s(C))C.level<e.level&&(se.property=\"geometry\",se.graphic=C,se.oldValue=a(C.geometry),se.newValue=S,C.geometry=S,y.graphicUpdateHandler(se)),x.push(C);else{const r=t.generateUID();x.push({objectId:w,uid:r,geometry:S,attributes:E,visible:!0,level:e.level})}}r.graphics=x,r.featureIds=_}_addNodeLegacyPointData(e,r,i,o,a){const n=this._getObjectIdField(),d=this._controller.crsVertex,l=this.view.spatialReference,h=[0,0,0],u=new Array,c=new Array;for(const g of i.pointData){const r=g.featureDataPosition,i=r.length,m=g.geometries&&g.geometries[0]||re[i],y=g.featureIds[0];if(\"points\"!==m.params.type)continue;s(o)&&this.checkExtent(o,r);const f={};null!=y&&(f[n]=y);const _=null==y?t.generateUID():y;let v;\"Embedded\"===m.type&&(v=m.params.vertexAttributes.position);for(let o=0;o<v.length;o+=i){for(let e=0;e<i;e++)h[e]=r[e]+v[o+e];const n=3===i;e.serviceObb||a.push(h[0],h[1],n?h[2]:0),p(h,d,0,ie,l,0,1);const u=b(ie[0],ie[1],n?ie[2]:void 0,l),g=this.loadedGraphics.get(_);s(g)?c.push(g):c.push({objectId:_,uid:t.generateUID(),geometry:u,attributes:f,visible:!0})}u.push(y)}r.graphics=c,r.featureIds=u}_updateNodeMemory(e){e.memory=4096+(s(e.numFeatures)?e.numFeatures*this.graphics3d.graphicsCore.usedMemoryPerGraphic:0)}_cacheNodeData(e){const t=e.graphics.reduce(((e,t)=>v(t)+e),512+8*e.featureIds.length+1024);this._memCache.put(this._getMemCacheKey(e.node),e,t)}_getMemCacheKey(e){return`${e.index}`}_removeAllNodeData(){this._nodesAddedToStage.forEach((e=>{if(e){const t=e.node;this._updateNodeMemory(t),this._cacheNodeData(e)}})),this._nodesAddedToStage.clear(),this._treeDebugger&&this._treeDebugger.update(),this.loadedGraphics.clear()}removeNode(e){const t=this._removeNodeStageData(e);t&&(this._updateNodeMemory(t.node),this._cacheNodeData(t))}_removeNodeStageData(e){const t=this._nodesAddedToStage.get(e);return t?(this.loadedGraphics.removeMany(t.graphics),this._nodesAddedToStage.delete(e),this._treeDebugger&&this._treeDebugger.update(),t):null}async loadCachedNodeData(e){return this._memCache.pop(this._getMemCacheKey(e))}async addCachedNodeData(e,t,r,i){if(!this._nodesAddedToStage.has(e.index))return this.loadedGraphics.addMany(t.graphics),this._nodesAddedToStage.set(e.index,t),this._updateNodeMemory(e),await this.updateAttributes(e.index,r,i),this._filterNode(t),this._treeDebugger&&this._treeDebugger.update(),Promise.resolve();K.error(\"I3S node \"+e.id+\" already added\")}getLoadedNodeIds(){const e=[];return this._nodesAddedToStage.forEach((t=>e.push(t.node.id))),e.sort()}getVisibleNodes(){const e=new Array;return this._nodesAddedToStage.forEach((t=>e.push(t.node))),e}getLoadedNodeIndices(e){this._nodesAddedToStage.forEach(((t,r)=>e.push(r)))}getLoadedAttributes(e){const t=this._nodesAddedToStage.get(e);if(t&&s(t.attributeInfo))return t.attributeInfo.loadedAttributes}getAttributeData(e){const t=this._nodesAddedToStage.get(e);if(t&&s(t.attributeInfo))return t.attributeInfo.attributeData}setAttributeData(e,t){const r=this._nodesAddedToStage.get(e);r&&!o(r.attributeInfo)&&(r.attributeInfo.attributeData=t,this._attributeValuesChanged(r))}async updateAttributes(e,t,r){const i=this._nodesAddedToStage.get(e);i&&(await this._attributeOverrides.apply(i.featureIds,t,r),i.attributeInfo=t,this._attributeValuesChanged(i))}_attributeValuesChanged(e){if(ee(e),this._filterNode(e),this.graphics3d.graphicsCore.labelsEnabled){const t=e.graphics.map((e=>e.uid));this.graphics3d.graphicsCore.updateLabelingInfo(t)}}_updateClippingExtent(e){return this._controller&&this._controller.updateClippingArea(e),!1}_getObjectIdField(){return this.layer.objectIdField||\"OBJECTID\"}async _rendererChange(e,t){const{layer:{fieldsIndex:r}}=this,i=new Set;let s,o;e?(await e.collectRequiredFields(i,r),s=Array.from(i).sort()):s=[],i.clear(),t?(await t.collectRequiredFields(i,r),o=Array.from(i).sort()):o=[],s.length===o.length&&s.every(((e,t)=>s[t]===o[t]))||this._reloadAllNodes()}_rangeInfosChanged(e){null!=e&&e.length>0&&K.warn(\"Unsupported property: rangeInfos are currently only serialized to and from web scenes but do not affect rendering.\")}_filterChange(){this._nodesAddedToStage.forEach((e=>this._filterNode(e)))}_reloadAllNodes(){this._removeAllNodeData(),this._controller&&this._controller.restartNodeLoading()}_filterNode(e){const t=this.parsedDefinitionExpression;for(const r of e.graphics){const e=r.visible;r.visible=!t||this._evaluateClause(t,r),e!==r.visible&&(se.graphic=r,se.property=\"visible\",se.oldValue=e,se.newValue=r.visible,this.graphics3d.graphicsCore.graphicUpdateHandler(se))}}_invalidateElevation(e){const t=this._controller.crsIndex;m(e.extent,e.spatialReference,oe,t),this._controller.updateElevationChanged(oe,t)}createQuery(){const e={outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference};return s(this.filter)?this.filter.createQuery(e):new C(e)}queryFeatures(e,t){return this._queryEngine.executeQuery(this._ensureQuery(e),null==t?void 0:t.signal)}queryObjectIds(e,t){return this._queryEngine.executeQueryForIds(this._ensureQuery(e),null==t?void 0:t.signal)}queryFeatureCount(e,t){return this._queryEngine.executeQueryForCount(this._ensureQuery(e),null==t?void 0:t.signal)}queryExtent(e,t){return this._queryEngine.executeQueryForExtent(this._ensureQuery(e),null==t?void 0:t.signal)}_ensureQuery(e){return this._addDefinitionExpressionToQuery(o(e)?this.createQuery():C.from(e))}getUsedMemory(){const e=this.graphics3d&&this.graphics3d.graphicsCore;return e?e.usedMemory:0}getUnloadedMemory(){const e=this.graphics3d&&this.graphics3d.graphicsCore;return.8*((this._controller?this._controller.unloadedMemoryEstimate:0)+(e?e.unprocessedMemoryEstimate:0))}ignoresMemoryFactor(){return this._controller&&this._controller.fixedFeatureTarget}_handleEdits(e){N(this.attributeEditingContext,e)}get attributeEditingContext(){const e=this._getObjectIdField();return{sessions:this._interactiveEditingSessions,fieldsIndex:this.layer.fieldsIndex,objectIdField:e,forEachNode:e=>this._nodesAddedToStage.forEach((t=>e(t.node,t.featureIds))),attributeStorageInfo:this.i3slayer.attributeStorageInfo,attributeOverrides:this._attributeOverrides,getAttributeData:e=>this.getAttributeData(e),setAttributeData:(t,r,i)=>{this.setAttributeData(t,r);const o=this._nodesAddedToStage.get(t);if(s(i)){const t=this.loadedGraphics.get(i.attributes[e]);s(t)&&this.graphics3d.graphicsCore.recreateGraphics([t])}else s(o)&&this.graphics3d.graphicsCore.recreateGraphics(o.graphics)},clearMemCache:()=>{}}}get performanceInfo(){const e={displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:this.maximumNumberOfFeatures,totalNumberOfFeatures:-1,nodes:this._nodesAddedToStage.size,core:this.graphics3d.graphicsCore.performanceInfo};return this._controller&&this._controller.updateStats(e),e}get test(){return{controller:this._controller,numNodes:this._nodesAddedToStage.size,numFeatures:this.loadedGraphics.length}}};e([d()],J.prototype,\"graphics3d\",void 0),e([d({type:I})],J.prototype,\"filter\",void 0),e([d()],J.prototype,\"loadedGraphics\",void 0),e([d({aliasOf:\"layer\"})],J.prototype,\"i3slayer\",void 0),e([d()],J.prototype,\"_controller\",void 0),e([d()],J.prototype,\"updating\",void 0),e([d()],J.prototype,\"suspended\",void 0),e([d()],J.prototype,\"holeFilling\",void 0),e([d(B)],J.prototype,\"updatingProgress\",void 0),e([d({aliasOf:\"_controller.updatingProgress\"})],J.prototype,\"updatingProgressValue\",void 0),e([d(Z.requiredFields)],J.prototype,\"requiredFields\",null),e([d(Z.availableFields)],J.prototype,\"availableFields\",void 0),e([d()],J.prototype,\"fieldsHelper\",void 0),e([d({type:Number})],J.prototype,\"maximumNumberOfFeatures\",null),e([d({readOnly:!0})],J.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([d({readOnly:!0,aliasOf:\"view.qualitySettings.sceneService.point.lodFactor\"})],J.prototype,\"lodFactor\",void 0),e([d({readOnly:!0})],J.prototype,\"hasM\",null),e([d({readOnly:!0})],J.prototype,\"hasZ\",null),J=e([l(\"esri.views.3d.layers.SceneLayerGraphicsView3D\")],J);const Y=J;function $(e){return\"pointData\"in e}function X(e){return\"geometryBuffer\"in e&&null!==e.geometryBuffer}function ee(e){const t=e.attributeInfo;for(let r=0;r<e.graphics.length;r++){const i=e.graphics[r];if(i.attributes||(i.attributes={}),s(t)&&s(t.loadedAttributes))for(const{name:e}of t.loadedAttributes)t.attributeData[e]&&(i.attributes[e]=R(t.attributeData[e],r))}}function te(e,t){return e.xmin-=t,e.ymin-=t,e.xmax+=t,e.ymax+=t,e.hasZ&&(e.zmin-=t,e.zmax+=t),e.hasM&&(e.mmin-=t,e.mmax+=t),e}const re={2:{type:\"Embedded\",params:{type:\"points\",vertexAttributes:{position:[0,0]}}},3:{type:\"Embedded\",params:{type:\"points\",vertexAttributes:{position:[0,0,0]}}}},ie=c(),se={graphic:null,property:null,oldValue:null,newValue:null},oe=y();export{Y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{clone as t}from\"../../../../core/lang.js\";import{isSome as e,isNone as n}from\"../../../../core/maybe.js\";import{attributeLookup as r}from\"../support/attributeUtils.js\";const o={setAttribute(){},rollback(){},commit(){}};function s(e,r){const s=r.attributes[e.objectIdField],i=e.sessions.get(s);if(i)return i;const a=t(r.attributes),u=new Set;if(null==s)return o;const c=e.attributeOverrides.createInteractiveEditSession(s),f=new Map,l=(t,e)=>{const n=f.get(t);if(null==n){const n=e.indexOf(s);return f.set(t,n),n}return n};let d=0;const b={setAttribute(t,o){if(0!==d)return;const s=e.fieldsIndex.get(t);if(n(s))return;const i=e.attributeStorageInfo.findIndex((t=>t.name===s.name));if(i<0)return;c.set(i,o);const a=e.attributeStorageInfo[i];let f=!1;u.add(t),e.forEachNode(((t,n)=>{const s=l(t,n);if(-1===s)return;const i=e.getAttributeData(t.index);if(i){const n=i[a.name];n&&(n[s]=o,e.setAttributeData(t.index,i,r),f=!0)}})),f&&e.clearMemCache()},rollback(){if(0===d){for(const t of u)this.setAttribute(t,a[t]);c.rollback(),d=1,e.sessions.delete(s)}},commit(){0===d&&(c.commit(),d=2,e.sessions.delete(s))}};return e.sessions.set(s,b),b}function i(t,n){const r=a(t,n);if(0===r.size)return;const o=new Map;for(let e=0;e<t.attributeStorageInfo.length;e++)o.set(t.attributeStorageInfo[e].name,e);let s=!1;r.forEach(((n,r)=>{const i=t.getAttributeData(r);let a=!1;n.forEach(((n,r)=>{const u=e(i)?i[r]:null,c=o.get(r);for(const{featureIndex:e,value:o,featureId:i}of n)u&&(u[e]=o,a=!0,s=!0),t.attributeOverrides.updateValue(i,c,o)})),a&&t.setAttributeData(r,i,null)})),s&&t.clearMemCache()}function a(t,e){const n=e.edits.updateFeatures;if(!n||0===n.length)return new d;const o=f(e),s=new d,i=new Map;for(let r=0;r<t.attributeStorageInfo.length;r++)i.set(t.attributeStorageInfo[r].name,r);const a=t.fieldsIndex,c=t.objectIdField,l=n.filter((t=>{const e=r(a,t.attributes,c);return o.has(e)}));return t.forEachNode(((e,n)=>{const o=new Set(n);for(const i of l){const f=r(a,i.attributes,c);if(!o.has(f))continue;const l=n.indexOf(f);for(const n in i.attributes){const r=t.fieldsIndex.normalizeFieldName(n),o=u(s,e.index,r),a=i.attributes[n];o.push({featureIndex:l,featureId:f,value:a})}}})),s}function u(t,e,n){const r=c(t,e),o=r.get(n);if(o)return o;const s=new Array;return r.set(n,s),s}function c(t,e){const n=t.get(e);if(n)return n;const r=new l;return t.set(e,r),r}function f(t){const e=new Set;if(!t.updatedFeatures)return e;for(const n of t.updatedFeatures)null!=n.objectId&&null==n.error&&e.add(n.objectId);return e}const l=Map,d=Map;export{s as createInteractiveEditSession,i as processAttributeEdits};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/accessorSupport/tracking.js\";import\"../../core/accessorSupport/extensions/serializableProperty/reader.js\";import\"../../core/accessorSupport/extensions/serializableProperty/writer.js\";import t from\"./LayerView.js\";class o extends t{constructor(){super(...arguments),this.layer=null,this.filter=null}get availableFields(){return[]}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){throw new Error(\"Not implemented\")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(e){throw new Error(\"Not implemented\")}queryFeatures(e,r){throw new Error(\"Not implemented\")}queryObjectIds(e,r){throw new Error(\"Not implemented\")}queryFeatureCount(e,r){throw new Error(\"Not implemented\")}createQuery(){throw new Error(\"Not implemented\")}queryExtent(e,r){throw new Error(\"Not implemented\")}}e([r()],o.prototype,\"layer\",void 0),e([r()],o.prototype,\"availableFields\",null),e([r()],o.prototype,\"maximumNumberOfFeatures\",null),e([r({readOnly:!0})],o.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([r()],o.prototype,\"filter\",void 0);export{o as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import s from\"../../../../core/Handles.js\";import{init as i}from\"../../../../core/watchUtils.js\";import{property as r}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{getReferenceEllipsoid as o}from\"../../../../geometry/projectionEllipsoid.js\";import{FrustumExtentIntersection as a}from\"../../support/FrustumExtentIntersection.js\";import{TaskPriority as l}from\"../../../support/Scheduler.js\";const h=1.2;let u=class extends t{constructor(){super(...arguments),this.suspended=!1,this.extent=null,this.extentIntersectionDirty=!0,this._isVisibleBelowSurface=!1,this.handles=new s,this.layerView=null,this.updating=!0}setup(e){this.layerView=e,this.extentIntersection=new a({renderCoordsHelper:e.view.renderCoordsHelper});const t=e.view,s=t.basemapTerrain,r=t.resourceController.scheduler;this.handles.add([t.on(\"resize\",(()=>this.viewChange())),t.state.watch(\"camera\",(()=>this.viewChange()),!0),r.registerTask(l.FRUSTUM_VISIBILITY,this),s.on(\"elevation-bounds-change\",(()=>this.elevationBoundsChange()))]),\"local\"===t.viewingMode?this.isVisibleBelowSurface=!0:this.handles.add([i(s,[\"opacity\",\"wireframe\"],(()=>this.updateIsVisibleBelowSurface())),i(t,\"map.ground.navigationConstraint.type\",(()=>this.updateIsVisibleBelowSurface()))])}destroy(){this.layerView=null,this.extent=null,this.extentIntersection=null,this.handles&&(this.handles.destroy(),this.handles=null)}_setDirty(){this.updating||this._set(\"updating\",!0)}setExtent(e){this.extent=e,this.extentIntersectionDirty=!0,this._setDirty()}viewChange(){this._setDirty()}elevationBoundsChange(){this._setDirty(),this.extentIntersectionDirty=!0}set isVisibleBelowSurface(e){this._isVisibleBelowSurface=e,this._setDirty(),this.extentIntersectionDirty=!0}updateIsVisibleBelowSurface(){const e=this.layerView.view,t=e.basemapTerrain,s=\"local\"===e.viewingMode,i=e.map.ground&&e.map.ground.navigationConstraint&&\"none\"===e.map.ground.navigationConstraint.type;this.isVisibleBelowSurface=s||!t.opaque||i}updateExtentIntersection(){if(!this.extentIntersectionDirty)return;this.extentIntersectionDirty=!1;const e=this.layerView.view;let t;if(this._isVisibleBelowSurface)t=-.3*o(e.spatialReference).radius;else{const{min:s,max:i}=e.basemapTerrain.elevationBounds;t=s-Math.max(1,(i-s)*(h-1))}this.extentIntersection.update(this.extent,e.spatialReference,t)}get running(){return this.updating}runTask(){if(this._set(\"updating\",!1),!this.extent)return void this._set(\"suspended\",!1);this.updateExtentIntersection();const e=this.layerView.view.frustum,t=o(this.layerView.view.spatialReference).radius;this._set(\"suspended\",!this.extentIntersection.isVisibleInFrustum(e,t))}};e([r({readOnly:!0})],u.prototype,\"suspended\",void 0),e([r({readOnly:!0})],u.prototype,\"updating\",void 0),u=e([n(\"esri.views.3d.layers.graphics.Graphics3DFrustumVisibility\")],u);const c=u;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{fixFields as e,unpackFieldNames as r}from\"../../../../layers/support/fieldUtils.js\";function i(){return{requiredFields:{type:[String],readOnly:!0},availableFields:{type:[String],readOnly:!0,get:function(){const{layer:i,layer:{fieldsIndex:t},requiredFields:l}=this;return i.outFields?e(t,[...r(t,i.outFields),...l]):e(t,l)}}}}export{i as defineFieldProperties};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Error.js\";import{isSome as s}from\"../../../../core/maybe.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/set.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{unpackFieldNames as o,populateMissingFields as p}from\"../../../../layers/support/fieldUtils.js\";import{getFetchPopupTemplate as a,getRequiredFields as i}from\"../../../layers/support/popupUtils.js\";const c=c=>{let u=class extends c{_validateFetchPopupFeatures(e){const{layer:s}=this,{popupEnabled:t}=s;if(!t)return new r(\"scenelayerview3d:fetchPopupFeatures\",\"Popups are disabled\",{layer:s});return a(s,e)?void 0:new r(\"scenelayerview3d:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:s})}async prepareFetchPopupFeatures(e){}async fetchPopupFeatures(e,r){const t=this._validateFetchPopupFeatures(r);if(t)return Promise.reject(t);const c=s(r)?r.clientGraphics:null;if(!c||0===c.length)return Promise.resolve([]);const u=\"scene\"===this.layer.type&&s(this.layer.associatedLayer)?this.layer.associatedLayer:this.layer,n=o(this.layer.fieldsIndex,await i(u,a(this.layer,r)));await this.prepareFetchPopupFeatures(n);const l=new Set,h=[],y=[];for(const s of c)p(n,s,l)?y.push(s):h.push(s);return 0===y.length?Promise.resolve(h):this.whenGraphicAttributes(y,[...l]).catch((()=>y)).then((e=>h.concat(e)))}};return u=e([t(\"esri.views.3d.layers.support.PopupSceneLayerView\")],u),u};export{c as PopupSceneLayerView};\n"],"sourceRoot":""}