(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a1e94d2c"],{"623b":function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var r,o=i("a4ee"),n=(i("e06a"),i("6a0e")),a=i("7ffa"),s=i("0028"),c=i("59b2"),p=(i("cea0"),i("d386")),l=i("09db"),d=i("c6f7"),b=i("8188"),u=i("1219");let y=r=class extends n["a"]{constructor(e){super(e),this.geometry=null,this.type="clip"}writeGeometry(e,t,i,r){if(r.layer&&r.layer.spatialReference&&!r.layer.spatialReference.equals(this.geometry.spatialReference)){if(!Object(b["b"])(e.spatialReference,r.layer.spatialReference))return void(r&&r.messages&&r.messages.push(new s["a"]("scenemodification:unsupported","Scene modifications with incompatible spatial references are not supported",{modification:this,spatialReference:r.layer.spatialReference,context:r})));const o=new u["a"];Object(b["v"])(e,o,r.layer.spatialReference),t[i]=o.toJSON(r)}else t[i]=e.toJSON(r);delete t[i].spatialReference}clone(){return new r({geometry:Object(a["a"])(this.geometry),type:this.type})}};Object(o["a"])([Object(c["b"])({type:u["a"]}),Object(d["a"])()],y.prototype,"geometry",void 0),Object(o["a"])([Object(l["a"])(["web-scene","portal-item"],"geometry")],y.prototype,"writeGeometry",null),Object(o["a"])([Object(c["b"])({type:["clip","mask","replace"],nonNullable:!0}),Object(d["a"])()],y.prototype,"type",void 0),y=r=Object(o["a"])([Object(p["a"])("esri.layers.support.SceneModification")],y);const f=y},c6f7:function(e,t,i){"use strict";i.d(t,"a",(function(){return j}));var r=i("b2b2"),o=i("2698"),n=i("e041"),a=i("8eed"),s=i("7af8"),c=i("92ef"),p=i("59b2");function l(e){return u[d(e)]||f}function d(e){return e instanceof Blob?e.type:b(e.url)}function b(e){const t=Object(n["n"])(e);return h[t]||y}const u={},y="text/plain",f=u[y],h={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip"};for(const N in h)u[h[N]]=N;var O=i("fcf2");function j(e){const t=Object(r["l"])(e)&&e.origins?e.origins:[void 0];return(i,r)=>{const o=m(e,i,r);for(const e of t){const t=Object(p["c"])(i,e,r);for(const e in o)t[e]=o[e]}}}function m(e,t,i){if(Object(r["l"])(e)&&"resource"===e.type)return g(e,t,i);switch(Object(r["l"])(e)&&e.type?e.type:"other"){case"other":return{read:!0,write:!0};case"url":{const{read:e,write:t}=O["c"];return{read:e,write:t}}}}function g(e,t,i){const a=Object(s["b"])(t,i);return{type:String,read:(e,t,i)=>{const r=Object(O["d"])(e,t,i);return a.type===String?r:"function"==typeof a.type?new a.type({url:r}):void 0},write:{writer(t,s,p,l){if(!l||!l.resources)return"string"==typeof t?void(s[p]=Object(O["e"])(t,l)):void(s[p]=t.write({},l));const d=_(t),b=d?Object(O["e"])(d,{...l,verifyItemRelativeUrls:l&&l.verifyItemRelativeUrls?{writtenUrls:l.verifyItemRelativeUrls.writtenUrls,rootPath:null}:null},1):null,u=a.type!==String&&(!Object(o["a"])(this)||l&&l.origin&&this.originIdOf(i)>Object(c["d"])(l.origin));l&&l.portalItem&&Object(r["l"])(b)&&!Object(n["s"])(b)?u?w(this,i,t,b,s,p,l,e):S(b,s,p,l):l&&l.portalItem&&(Object(r["k"])(b)||Object(r["l"])(Object(O["b"])(b))||Object(n["t"])(b)||u)?v(this,i,t,b,s,p,l,e):s[p]=b}}}}function v(e,t,i,o,s,c,p,d){const b=Object(a["a"])(),u=T(i,o,p),y=Object(n["z"])(Object(r["j"])(d,"prefix"),b),f=`${y}.${l(u)}`,h=p.portalItem.resourceFromPath(f);Object(n["t"])(o)&&p.resources.pendingOperations.push(I(o).then(e=>{h.path=`${y}.${l(e)}`,s[c]=h.itemRelativeUrl}).catch(()=>{})),x(e,t,h,u,p.resources.toAdd),s[c]=h.itemRelativeUrl}function w(e,t,i,r,o,a,s,c){const p=s.portalItem.resourceFromPath(r),d=T(i,r,s);l(d)===Object(n["n"])(p.path)?(x(e,t,p,d,s.resources.toUpdate),o[a]=r):v(e,t,i,r,o,a,s,c)}function S(e,t,i,r){r.resources.toKeep.push({resource:r.portalItem.resourceFromPath(e)}),t[i]=e}function x(e,t,i,r,o){o.push({resource:i,content:r,finish:i=>{R(e,t,i)}})}function T(e,t,i){return"string"==typeof e?{url:t}:new Blob([JSON.stringify(e.toJSON(i))],{type:"application/json"})}async function I(e){const t=(await Promise.resolve().then(i.bind(null,"2eab"))).default,{data:r}=await t(e,{responseType:"blob"});return r}function _(e){return Object(r["k"])(e)?null:"string"==typeof e?e:e.url}function R(e,t,i){"string"==typeof e[t]?e[t]=i.url:e[t].url=i.url}},cafc:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return L}));var r,o=i("a4ee"),n=i("ce50"),a=i("af40"),s=i("b2b2"),c=i("e694"),p=i("f4cc"),l=i("3795"),d=i("59b2"),b=(i("b50f"),i("c120"),i("cea0"),i("afcf")),u=i("d386"),y=i("c6f7"),f=i("a6a3"),h=i("f46e"),O=i("3d59"),j=i("b911"),m=i("0db5"),g=i("5a62"),v=i("96ae"),w=i("22f4"),S=i("5d34"),x=i("2eab"),T=i("2c4f"),I=i("6a0e"),_=i("e041"),R=i("623b");let N=r=class extends(Object(I["b"])(T["a"].ofType(R["a"]))){constructor(e){super(e),this.url=null}toJSON(e){return this.toArray().map(t=>t.toJSON(e)).filter(e=>!!e.geometry)}clone(){return new r({url:this.url,items:this.items.map(e=>e.clone())})}_readModifications(e,t){for(const i of e)this.add(R["a"].fromJSON(i,t))}static fromJSON(e,t){const i=new r;return i._readModifications(e,t),i}static async fromUrl(e,t,i){const o={url:Object(_["K"])(e),origin:"service"},n=await Object(x["default"])(e,{responseType:"json",signal:Object(s["j"])(i,"signal")}),a=t.toJSON(),c=[];for(const r of n.data)c.push(R["a"].fromJSON({...r,geometry:{...r.geometry,spatialReference:a}},o));return new r({url:e,items:c})}};Object(o["a"])([Object(d["b"])({type:String})],N.prototype,"url",void 0),N=r=Object(o["a"])([Object(u["a"])("esri.layers.support.SceneModifications")],N);const M=N;var U=i("fcf2");let J=class extends(Object(v["a"])(Object(O["a"])(Object(j["a"])(Object(m["a"])(Object(g["a"])(Object(c["a"])(Object(h["a"])(f["a"])))))))){constructor(...e){super(...e),this.handles=new a["a"],this.geometryType="mesh",this.operationalLayerType="IntegratedMeshLayer",this.type="integrated-mesh",this.nodePages=null,this.materialDefinitions=null,this.textureSetDefinitions=null,this.geometryDefinitions=null,this.serviceUpdateTimeStamp=null,this.profile="mesh-pyramids",this.modifications=null,this._modificationsSource=null,this.elevationInfo=null,this.path=null}destroy(){this.handles.destroy()}initialize(){this.handles.add(Object(l["b"])(this,"modifications","after-changes",()=>this.modifications=this.modifications,null,null,!0))}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}readModifications(e,t,i){this._modificationsSource={url:Object(U["a"])(e,i),context:i}}async load(e){return this.addResolvingPromise(this._doLoad(e)),this}async _doLoad(e){const t=Object(s["j"])(e,"signal");try{await this.loadFromPortal({supportedTypes:["Scene Service"]},e)}catch(i){Object(p["v"])(i)}if(await this._fetchService(t),Object(s["l"])(this._modificationsSource)){const t=await M.fromUrl(this._modificationsSource.url,this.spatialReference,e);this.setAtOrigin("modifications",t,this._modificationsSource.context.origin),this._modificationsSource=null}await this._fetchIndexAndUpdateExtent(this.nodePages,t)}beforeSave(){if(!Object(s["k"])(this._modificationsSource))return this.load().then(()=>{},()=>{})}async saveAs(e,t){return this._debouncedSaveOperations(1,{...t,getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:"integrated-mesh"},e)}async save(){const e={getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:"integrated-mesh"};return this._debouncedSaveOperations(0,e)}validateLayer(e){if(e.layerType&&"IntegratedMesh"!==e.layerType)throw new n["a"]("integrated-mesh-layer:layer-type-not-supported","IntegratedMeshLayer does not support this layer type",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new n["a"]("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"});if(this.version.major>1)throw new n["a"]("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"})}_getTypeKeywords(){return["IntegratedMeshLayer"]}};Object(o["a"])([Object(d["b"])({type:String,readOnly:!0})],J.prototype,"geometryType",void 0),Object(o["a"])([Object(d["b"])({type:["show","hide"]})],J.prototype,"listMode",void 0),Object(o["a"])([Object(d["b"])({type:["IntegratedMeshLayer"]})],J.prototype,"operationalLayerType",void 0),Object(o["a"])([Object(d["b"])({json:{read:!1},readOnly:!0})],J.prototype,"type",void 0),Object(o["a"])([Object(d["b"])({type:S["c"],readOnly:!0})],J.prototype,"nodePages",void 0),Object(o["a"])([Object(d["b"])({type:[S["b"]],readOnly:!0})],J.prototype,"materialDefinitions",void 0),Object(o["a"])([Object(d["b"])({type:[S["d"]],readOnly:!0})],J.prototype,"textureSetDefinitions",void 0),Object(o["a"])([Object(d["b"])({type:[S["a"]],readOnly:!0})],J.prototype,"geometryDefinitions",void 0),Object(o["a"])([Object(d["b"])({readOnly:!0})],J.prototype,"serviceUpdateTimeStamp",void 0),Object(o["a"])([Object(d["b"])({type:M}),Object(y["a"])({origins:["web-scene","portal-item"],type:"resource",prefix:"modifications"})],J.prototype,"modifications",void 0),Object(o["a"])([Object(b["a"])(["web-scene","portal-item"],"modifications")],J.prototype,"readModifications",null),Object(o["a"])([Object(d["b"])(w["b"])],J.prototype,"elevationInfo",void 0),Object(o["a"])([Object(d["b"])({type:String,json:{origins:{"web-scene":{read:!0,write:!0},"portal-item":{read:!0,write:!0}},read:!1}})],J.prototype,"path",void 0),J=Object(o["a"])([Object(u["a"])("esri.layers.IntegratedMeshLayer")],J);const L=J}}]);
//# sourceMappingURL=chunk-a1e94d2c.adbef178.js.map