{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/views/2d/engine/vectorTiles/SchemaHelper.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/jobs.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/vectorTiles/RectangleBinPack.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/vectorTiles/GlyphMosaic.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/vectorTiles/GlyphSource.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/vectorTiles/SpriteMosaic.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/vectorTiles/TileHandler.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/SymbolDeclutterer.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/debugging.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/jobsUtil.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/vectorTiles/TileHandler3D.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/vectorTiles/VTLPainter3D.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/VectorTileLayerView3D.js","webpack:///./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/SymbolRepository.js"],"names":["s","e","i","this","lockedSchemaPixelSize","isGCS","t","size","l","spatialReference","isGeographic","r","o","lods","length","resolution","push","level","scale","dpi","format","compressionQuality","origin","n","iconRotationAlignment","textRotationAlignment","iconTranslate","a","iconTranslateAnchor","c","textTranslate","h","textTranslateAnchor","u","d","y","colliders","partIndex","x","g","minLod","maxLod","enabled","xScreen","xTile","yTile","yScreen","dxScreen","dxPixels","dyScreen","dyPixels","width","height","unique","show","_symbols","_styleRepository","_zoom","_currentLayerCursor","_currentSymbolCursor","_styleProps","Map","_allNeededMatrices","_gridIndex","_si","Math","sin","PI","_co","cos","symbols","has","tile","set","transforms","tileUnitsToPixels","getCellSpan","cells","performance","now","_getProperties","styleLayerUID","get","iconAllowOverlap","iconIgnorePlacement","textAllowOverlap","textIgnorePlacement","parts","hard","getStyleLayerByUID","getLayoutValue","getPaintValue","_width","_height","_free","w","splice","release","_dirties","_glyphData","_currentPage","_glyphIndex","_textures","_rangePromises","_glyphSource","_binPack","Uint8Array","Set","floor","add","forEach","getRange","then","delete","Promise","all","sdf","rect","metrics","page","code","getGlyph","allocate","isEmpty","bitmap","p","tileIDs","pixelFormat","dataType","setSamplingMode","setData","bindTexture","dispose","_metrics","_bitmaps","next","tag","getMessage","getUInt32","getBytes","getSInt32","skip","left","top","advance","_ranges","_glyphInfo","_baseURL","_getFontStack","resolve","replace","responseType","addRange","data","DataView","catch","getMetrics","getBitmap","_size","_mosaicsData","_maxItemSize","_pageWidth","_pageHeight","_mosaicRects","pixelRatio","console","error","devicePixelRatio","Uint32Array","_sprites","loadStatus","startsWith","_rasterizeDash","getSpriteInfo","_","_allocateImage","_copy","simplePattern","name","getSpriteItem","repeat","tl","br","wrapMode","buffer","image","_copyBits","max","match","split","map","Number","slice","lastIndexOf","rasterizeDash","_layer","_spriteMosaic","_glyphMosaic","_connection","close","_spriteSourcePromise","loadSpriteSource","setSpriteSource","currentStyleInfo","glyphsUrl","customParameters","token","apiKey","_broadcastPromise","client","schedule","signal","broadcast","style","vectorTileLayerMaxBuffers","_getRefKeys","sourceNameToSource","_getSourcesData","sourceName2DataAndRefKey","transferList","Object","keys","getAvailableClient","invoke","key","id","styleLayerUIDs","getSpriteItems","getGlyphItems","font","codePoints","milliseconds","pool","acquire","getSourceTileUrl","row","col","protobuff","request","sourceName","Array","getRefKey","value","_getTilePayload","byteLength","refKey","priority","world","_visibleTiles","_symbolRepository","_createCollisionJob","_assignTileSymbolsOpacity","_symbolLayerSorter","_isLayerVisible","_selectionJob","_selectionJobCompleted","_collisionJob","_collisionJobCompleted","_opacityJob","_opacityJobCompleted","_running","_screenWidth","_screenHeight","restart","_createSelectionJob","work","sortedSymbols","_createOpacityJob","uniqueSymbols","tileSymbols","selectedForRendering","isCoverage","neededForCoverage","sort","childrenTiles","parentTile","targetOpacity","startOpacity","startTime","min","fillStyle","fillRect","strokeStyle","strokeRect","window","COLLISION_XRAY","m","globalAlpha","PERFORMANCE_RECORDING_STORAGE","perf","start","time","samples","unit","styleRepository","getLayoutProperty","getValue","setScreenSize","continue","super","_memCache","_loader","_ongoingTileRequests","_ongoingRequestToController","abort","clear","retain","_getVectorTileData","T","tileInfo","getTileBounds","put","memoryUsage","referenced","AbortController","_getParsedVectorTileData","fetchTileData","parseTileData","spriteMosaic","glyphMosaic","_brushCache","_vtlMaterialManager","context","layers","backgroundBucketIds","renderPass","_renderStyleLayer","getLayerById","setBlendingEnabled","setDepthTestEnabled","setDepthWriteEnabled","setDepthFunction","setBlendFunctionSeparate","bindVAO","layerData","uid","type","displayLevel","minzoom","maxzoom","styleLayer","drawWithBrush","drawMany","arguments","layer","fullExtent","addResolvingPromise","reject","force512VTL","compatibleTileInfo256","_getTileInfoSupportError","basemapTerrain","view","tilingScheme","pixelSize","schemaHelper","compatibleTileInfo512","_getTileInfoCompatibilityError","_set","_tileHandlerController","resourceController","memoryController","newCache","mapTileRequester","_tileHandler","v","H","C","painter","updatingHandles","addPromise","emit","destroy","j","levelRangeFromScaleRange","minLevel","getVectorTile","aliasOf","prototype","tileCoordRange","_createUnique","_tiles","_uniqueSymbolsReferences","_uniqueSymbolLayerArray","_createUniqueSymbolLayerArray","_removeSymbols","f","flat","index","getCell","_addSymbols","equals","_matchSymbols","symbol","xTransformed","yTransformed","hash","abs"],"mappings":"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","file":"js/chunk-a3066c78.c784a5a7.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../layers/support/LOD.js\";import i from\"../../../../layers/support/TileInfo.js\";class s{constructor(e,i){this.lockedSchemaPixelSize=e,this.isGCS=i}getLevelRowColumn(e){return this.isGCS?[e[0],e[1]>>1,e[2]>>1]:256===this.lockedSchemaPixelSize&&e[0]>0?[e[0]-1,e[1]>>1,e[2]>>1]:e}adjustLevel(e){return this.isGCS?e:256===this.lockedSchemaPixelSize?e>0?e-1:0:e}getShift(e,i){let s=0,t=0;return(256===this.lockedSchemaPixelSize||this.isGCS)&&(e[2]%2&&(s=i),e[1]%2&&(t=i)),[s,t]}getScale(e){if(this.isGCS){if(512===this.lockedSchemaPixelSize)return 4}else if(256===this.lockedSchemaPixelSize&&0===e)return 1;return 2}static create256x256CompatibleTileInfo(s){if(!s)return null;if(256===s.size[0]&&256===s.size[1])return s;const t=256,l=s.spatialReference.isGeographic,r=[],o=s.lods.length;for(let i=0;i<o;i++){const t=s.lods[i],o=l?t.resolution:2*t.resolution;r.push(new e({level:t.level,scale:t.scale,resolution:o}))}return new i({size:[t,t],dpi:s.dpi,format:s.format,compressionQuality:s.compressionQuality,origin:s.origin,spatialReference:s.spatialReference,lods:r})}static create512x512CompatibleTileInfo(s){if(!s)return null;if(256===s.size[0]||256===s.size[1])return null;const t=512,l=[],r=s.lods.length;for(let i=0;i<r;i++){const t=s.lods[i],r=.5*t.resolution;l.push(new e({level:t.level,scale:t.scale,resolution:r}))}return new i({size:[t,t],dpi:s.dpi,format:s.format,compressionQuality:s.compressionQuality,origin:s.origin,spatialReference:s.spatialReference,lods:l})}}export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{a as e}from\"../../../../../chunks/mat3f32.js\";import{COLLISION_GRID_CELL_SIZE as t}from\"./config.js\";import{GridIndex as n}from\"./util.js\";function o(e,t,n,o,r,s){const{iconRotationAlignment:i,textRotationAlignment:l,iconTranslate:a,iconTranslateAnchor:c,textTranslate:h,textTranslateAnchor:u}=o;let d=0;for(const y of e.colliders){const[e,o]=0===y.partIndex?a:h,x=0===y.partIndex?c:u,g=y.minLod<=s&&s<=y.maxLod;d+=g?0:1,y.enabled=g,y.xScreen=y.xTile*r[0]+y.yTile*r[3]+r[6],y.yScreen=y.xTile*r[1]+y.yTile*r[4]+r[7],0===x?(y.xScreen+=n*e-t*o,y.yScreen+=t*e+n*o):(y.xScreen+=e,y.yScreen+=o),1===(0===y.partIndex?i:l)?(y.dxScreen=y.dxPixels,y.dyScreen=y.dyPixels):(y.dxScreen=n*(y.dxPixels+y.width/2)-t*(y.dyPixels+y.height/2)-y.width/2,y.dyScreen=t*(y.dxPixels+y.width/2)+n*(y.dyPixels+y.height/2)-y.height/2)}e.colliders.length>0&&d===e.colliders.length&&(e.unique.show=!1)}class r{constructor(o,r,s,i,l,a){this._symbols=o,this._styleRepository=i,this._zoom=l,this._currentLayerCursor=0,this._currentSymbolCursor=0,this._styleProps=new Map,this._allNeededMatrices=new Map,this._gridIndex=new n(r,s,t),this._si=Math.sin(Math.PI*a/180),this._co=Math.cos(Math.PI*a/180);for(const t of o)for(const n of t.symbols)this._allNeededMatrices.has(n.tile)||this._allNeededMatrices.set(n.tile,e(n.tile.transforms.tileUnitsToPixels))}work(e){const t=this._gridIndex;function n(e){const n=e.xScreen+e.dxScreen,o=e.yScreen+e.dyScreen,r=n+e.width,s=o+e.height,[i,l,a,c]=t.getCellSpan(n,o,r,s);for(let h=l;h<=c;h++)for(let e=i;e<=a;e++){const i=t.cells[h][e];for(const e of i){const t=e.xScreen+e.dxScreen,i=e.yScreen+e.dyScreen,l=t+e.width,a=i+e.height;if(!(r<t||n>l||s<i||o>a))return!0}}return!1}const r=performance.now();for(;this._currentLayerCursor<this._symbols.length;this._currentLayerCursor++,this._currentSymbolCursor=0){const t=this._symbols[this._currentLayerCursor],s=this._getProperties(t.styleLayerUID);for(;this._currentSymbolCursor<t.symbols.length;this._currentSymbolCursor++){if(this._currentSymbolCursor%100==99&&performance.now()-r>e)return!1;const i=t.symbols[this._currentSymbolCursor];if(!i.unique.show)continue;o(i,this._si,this._co,s,this._allNeededMatrices.get(i.tile),this._zoom);const l=i.unique;if(!l.show)continue;const{iconAllowOverlap:a,iconIgnorePlacement:c,textAllowOverlap:h,textIgnorePlacement:u}=s;for(const e of i.colliders){if(!e.enabled)continue;const t=l.parts[e.partIndex];if(!t.show)continue;!(e.partIndex?h:a)&&n(e)&&(e.hard?l.show=!1:t.show=!1)}if(l.show)for(const e of i.colliders){if(!e.enabled)continue;if(e.partIndex?u:c)continue;if(!l.parts[e.partIndex].show)continue;const t=e.xScreen+e.dxScreen,n=e.yScreen+e.dyScreen,o=t+e.width,r=n+e.height,[s,i,a,h]=this._gridIndex.getCellSpan(t,n,o,r);for(let l=i;l<=h;l++)for(let t=s;t<=a;t++){this._gridIndex.cells[l][t].push(e)}}}}return!0}_getProperties(e){const t=this._styleProps.get(e);if(t)return t;const n=this._zoom,o=this._styleRepository.getStyleLayerByUID(e),r=0!==o.getLayoutValue(\"symbol-placement\",n);let s=o.getLayoutValue(\"icon-rotation-alignment\",n);2===s&&(s=r?0:1);let i=o.getLayoutValue(\"text-rotation-alignment\",n);2===i&&(i=r?0:1);const l=o.getPaintValue(\"icon-translate\",n),a=o.getPaintValue(\"icon-translate-anchor\",n),c=o.getPaintValue(\"text-translate\",n),h=o.getPaintValue(\"text-translate-anchor\",n),u={iconAllowOverlap:o.getLayoutValue(\"icon-allow-overlap\",n),iconIgnorePlacement:o.getLayoutValue(\"icon-ignore-placement\",n),textAllowOverlap:o.getLayoutValue(\"text-allow-overlap\",n),textIgnorePlacement:o.getLayoutValue(\"text-ignore-placement\",n),iconRotationAlignment:s,textRotationAlignment:i,iconTranslateAnchor:a,iconTranslate:l,textTranslateAnchor:h,textTranslate:c};return this._styleProps.set(e,u),u}}export{r as CollisionJob};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport h from\"../webgl/Rect.js\";class e{constructor(e,t){this._width=0,this._height=0,this._free=[],this._width=e,this._height=t,this._free.push(new h(0,0,e,t))}get width(){return this._width}get height(){return this._height}allocate(e,t){if(e>this._width||t>this._height)return new h;let i=null,s=-1;for(let h=0;h<this._free.length;++h){const w=this._free[h];e<=w.width&&t<=w.height&&(null===i||w.y<=i.y&&w.x<=i.x)&&(i=w,s=h)}return null===i?new h:(this._free.splice(s,1),i.width<i.height?(i.width>e&&this._free.push(new h(i.x+e,i.y,i.width-e,t)),i.height>t&&this._free.push(new h(i.x,i.y+t,i.width,i.height-t))):(i.width>e&&this._free.push(new h(i.x+e,i.y,i.width-e,i.height)),i.height>t&&this._free.push(new h(i.x,i.y+t,e,i.height-t))),new h(i.x,i.y,e,t))}release(h){for(let e=0;e<this._free.length;++e){const t=this._free[e];if(t.y===h.y&&t.height===h.height&&t.x+t.width===h.x)t.width+=h.width;else if(t.x===h.x&&t.width===h.width&&t.y+t.height===h.y)t.height+=h.height;else if(h.y===t.y&&h.height===t.height&&h.x+h.width===t.x)t.x=h.x,t.width+=h.width;else{if(h.x!==t.x||h.width!==t.width||h.y+h.height!==t.y)continue;t.y=h.y,t.height+=h.height}this._free.splice(e,1),this.release(h)}this._free.push(h)}}export{e as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../webgl/BufferObject.js\";import\"../../../webgl/FramebufferObject.js\";import\"../../../../core/has.js\";import\"../../../webgl/checkWebGLError.js\";import\"../../../webgl/enums.js\";import\"../../../../chunks/builtins.js\";import t from\"../../../webgl/Texture.js\";import\"../../../webgl/VertexArrayObject.js\";import e from\"./RectangleBinPack.js\";import i from\"../webgl/Rect.js\";class s{constructor(t,i,s){this.width=0,this.height=0,this._dirties=[],this._glyphData=[],this._currentPage=0,this._glyphIndex={},this._textures=[],this._rangePromises=new Map,this.width=t,this.height=i,this._glyphSource=s,this._binPack=new e(t-4,i-4),this._glyphData.push(new Uint8Array(t*i)),this._dirties.push(!0),this._textures.push(void 0)}getGlyphItems(t,s){const h=[],r=this._glyphSource,n=new Set,o=1/256;for(const e of s){const t=Math.floor(e*o);n.add(t)}const a=[];return n.forEach((e=>{if(e<=256){const i=t+e;if(this._rangePromises.has(i))a.push(this._rangePromises.get(i));else{const s=r.getRange(t,e).then((()=>{this._rangePromises.delete(i)}),(()=>{this._rangePromises.delete(i)}));this._rangePromises.set(i,s),a.push(s)}}})),Promise.all(a).then((()=>{let n=this._glyphIndex[t];n||(n={},this._glyphIndex[t]=n);for(const o of s){const s=n[o];if(s){h[o]={sdf:!0,rect:s.rect,metrics:s.metrics,page:s.page,code:o};continue}const a=r.getGlyph(t,o);if(!a||!a.metrics)continue;const c=a.metrics;let l;if(0===c.width)l=new i(0,0,0,0);else{const t=3,i=c.width+2*t,s=c.height+2*t;let h=i%4?4-i%4:4,r=s%4?4-s%4:4;1===h&&(h=5),1===r&&(r=5),l=this._binPack.allocate(i+h,s+r),l.isEmpty&&(this._dirties[this._currentPage]||(this._glyphData[this._currentPage]=null),this._currentPage=this._glyphData.length,this._glyphData.push(new Uint8Array(this.width*this.height)),this._dirties.push(!0),this._textures.push(void 0),this._binPack=new e(this.width-4,this.height-4),l=this._binPack.allocate(i+h,s+r));const n=this._glyphData[this._currentPage],o=a.bitmap;let g,p;if(o)for(let e=0;e<s;e++){g=i*e,p=this.width*(l.y+e+1)+l.x;for(let t=0;t<i;t++)n[p+t+1]=o[g+t]}}n[o]={rect:l,metrics:c,tileIDs:null,page:this._currentPage},h[o]={sdf:!0,rect:l,metrics:c,page:this._currentPage,code:o},this._dirties[this._currentPage]=!0}return h}))}removeGlyphs(t){for(const e in this._glyphIndex){const i=this._glyphIndex[e];if(!i)continue;let s;for(const e in i)if(s=i[e],s.tileIDs.delete(t),0===s.tileIDs.size){const t=this._glyphData[s.page],h=s.rect;let r,n;for(let e=0;e<h.height;e++)for(r=this.width*(h.y+e)+h.x,n=0;n<h.width;n++)t[r+n]=0;delete i[e],this._dirties[s.page]=!0}}}bind(e,i,s,h=0){this._textures[s]||(this._textures[s]=new t(e,{pixelFormat:6406,dataType:5121,width:this.width,height:this.height},new Uint8Array(this.width*this.height)));const r=this._textures[s];r.setSamplingMode(i),this._dirties[s]&&r.setData(this._glyphData[s]),e.bindTexture(r,h),this._dirties[s]=!1}dispose(){this._binPack=null;for(const t of this._textures)t&&t.dispose();this._textures.length=0}}export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport t from\"../../../../request.js\";import e from\"../../../../core/pbf.js\";class s{constructor(t){if(this._metrics=[],this._bitmaps=[],t)for(;t.next();)switch(t.tag()){case 1:{const e=t.getMessage();for(;e.next();)switch(e.tag()){case 3:{const t=e.getMessage();let s,a,r,n,i,c,g;for(;t.next();)switch(t.tag()){case 1:s=t.getUInt32();break;case 2:a=t.getBytes();break;case 3:r=t.getUInt32();break;case 4:n=t.getUInt32();break;case 5:i=t.getSInt32();break;case 6:c=t.getSInt32();break;case 7:g=t.getUInt32();break;default:t.skip()}t.release(),s&&(this._metrics[s]={width:r,height:n,left:i,top:c,advance:g},this._bitmaps[s]=a);break}default:e.skip()}e.release();break}default:t.skip()}}getMetrics(t){return this._metrics[t]}getBitmap(t){return this._bitmaps[t]}}class a{constructor(){this._ranges=[]}getRange(t){return this._ranges[t]}addRange(t,e){this._ranges[t]=e}}class r{constructor(t){this._glyphInfo={},this._baseURL=t}getRange(a,r){const n=this._getFontStack(a);if(n.getRange(r))return Promise.resolve();const i=256*r,c=i+255,g=this._baseURL.replace(\"{fontstack}\",a).replace(\"{range}\",i+\"-\"+c);return t(g,{responseType:\"array-buffer\"}).then((t=>{n.addRange(r,new s(new e(new Uint8Array(t.data),new DataView(t.data))))})).catch((()=>{n.addRange(r,new s)}))}getGlyph(t,e){const s=this._getFontStack(t);if(!s)return;const a=Math.floor(e/256);if(a>256)return;const r=s.getRange(a);return r?{metrics:r.getMetrics(e),bitmap:r.getBitmap(e)}:void 0}_getFontStack(t){let e=this._glyphInfo[t];return e||(e=this._glyphInfo[t]=new a),e}}export{r as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{SymbolHelper as t}from\"../../../../symbols/cim/CIMSymbolHelper.js\";import\"../../../webgl/BufferObject.js\";import\"../../../webgl/FramebufferObject.js\";import\"../../../../core/has.js\";import\"../../../webgl/checkWebGLError.js\";import\"../../../webgl/enums.js\";import\"../../../../chunks/builtins.js\";import i from\"../../../webgl/Texture.js\";import\"../../../webgl/VertexArrayObject.js\";import e from\"./RectangleBinPack.js\";import s from\"../webgl/Rect.js\";const h=\"dasharray-\";class r{constructor(t,i,s=0){this._size=[],this._mosaicsData=[],this._textures=[],this._dirties=[],this._maxItemSize=0,this._currentPage=0,this._pageWidth=0,this._pageHeight=0,this._mosaicRects={},this.pixelRatio=1,(t<=0||i<=0)&&console.error(\"Sprites mosaic defaultWidth and defaultHeight must be greater than zero!\"),this._pageWidth=t,this._pageHeight=i,s>0&&(this._maxItemSize=s),this._binPack=new e(t-4,i-4)}dispose(){this._binPack=null,this._mosaicRects={};for(const t of this._textures)t&&t.dispose();this._textures.length=0}getWidth(t){return t>=this._size.length?-1:this._size[t][0]}getHeight(t){return t>=this._size.length?-1:this._size[t][1]}getPageSize(t){return t>=this._size.length?null:this._size[t]}setSpriteSource(t){if(this.dispose(),this.pixelRatio=t.devicePixelRatio,0===this._mosaicsData.length){this._binPack=new e(this._pageWidth-4,this._pageHeight-4);const t=Math.floor(this._pageWidth),i=Math.floor(this._pageHeight),s=new Uint32Array(t*i);this._mosaicsData[0]=s,this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0)}this._sprites=t}getSpriteItem(t,i=!1){let e,s,r=this._mosaicRects[t];if(r)return r;if(!this._sprites||\"loaded\"!==this._sprites.loadStatus)return null;if(t&&t.startsWith(h)?([e,s]=this._rasterizeDash(t),i=!0):e=this._sprites.getSpriteInfo(t),!e||!e.width||!e.height||e.width<0||e.height<0)return null;const a=e.width,o=e.height,[n,_,g]=this._allocateImage(a,o);return n.width<=0?null:(this._copy(n,e,_,g,i,s),r={rect:n,width:a,height:o,sdf:e.sdf,simplePattern:!1,pixelRatio:e.pixelRatio,page:_},this._mosaicRects[t]=r,r)}getSpriteItems(t){const i={};for(const e of t)i[e.name]=this.getSpriteItem(e.name,e.repeat);return i}getMosaicItemPosition(t,i){const e=this.getSpriteItem(t,i),s=e&&e.rect;if(!s)return null;s.width=e.width,s.height=e.height;const h=e.width,r=e.height,a=2;return{tl:[s.x+a,s.y+a],br:[s.x+a+h,s.y+a+r],page:e.page}}bind(t,e,s=0,h=0){this._textures[s]||(this._textures[s]=new i(t,{pixelFormat:6408,dataType:5121,wrapMode:33071,width:this._size[s][0],height:this._size[s][1]},new Uint8Array(this._mosaicsData[s].buffer)));const r=this._textures[s];r.setSamplingMode(e),this._dirties[s]&&r.setData(new Uint8Array(this._mosaicsData[s].buffer)),t.bindTexture(r,h),this._dirties[s]=!1}static _copyBits(t,i,e,s,h,r,a,o,n,_,g){let c=s*i+e,p=o*r+a;if(g){p-=r;for(let a=-1;a<=_;a++,c=((a+_)%_+s)*i+e,p+=r)for(let i=-1;i<=n;i++)h[p+i]=t[c+(i+n)%n]}else for(let l=0;l<_;l++){for(let i=0;i<n;i++)h[p+i]=t[c+i];c+=i,p+=r}}_copy(t,i,e,s,h,a){if(!this._sprites||\"loaded\"!==this._sprites.loadStatus||e>=this._mosaicsData.length)return;const o=new Uint32Array(a?a.buffer:this._sprites.image.buffer),n=this._mosaicsData[e];n&&o||console.error(\"Source or target images are uninitialized!\");const _=2,g=a?i.width:this._sprites.width;r._copyBits(o,g,i.x,i.y,n,s[0],t.x+_,t.y+_,i.width,i.height,h),this._dirties[e]=!0}_allocateImage(t,i){t+=2,i+=2;const h=Math.max(t,i);if(this._maxItemSize&&this._maxItemSize<h){const e=new s(0,0,t,i);return this._mosaicsData.push(new Uint32Array(t*i)),this._dirties.push(!0),this._size.push([t,i]),this._textures.push(void 0),[e,this._mosaicsData.length-1,[t,i]]}let r=t%4?4-t%4:4,a=i%4?4-i%4:4;1===r&&(r=5),1===a&&(a=5);const o=this._binPack.allocate(t+r,i+a);return o.width<=0?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new e(this._pageWidth-4,this._pageHeight-4),this._allocateImage(t,i)):[o,this._currentPage,[this._pageWidth,this._pageHeight]]}_rasterizeDash(i){const e=/\\[(.*?)\\]/,s=i.match(e);if(!s)return null;const h=s[1].split(\",\").map(Number),r=i.slice(i.lastIndexOf(\"-\")+1),[a,o,n]=t.rasterizeDash(h,r);return[{x:0,y:0,width:o,height:n,sdf:!0,pixelRatio:1},new Uint8Array(a.buffer)]}}export{r as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../request.js\";import t from\"../../../../core/has.js\";import{isAbortError as s,eachAlways as r}from\"../../../../core/promiseUtils.js\";import{addQueryParameters as i}from\"../../../../core/urlUtils.js\";import{open as o}from\"../../../../core/workers/workers.js\";import a from\"./GlyphMosaic.js\";import l from\"./GlyphSource.js\";import n from\"./SpriteMosaic.js\";import{perfAdd as c}from\"./decluttering/debugging.js\";import h from\"../../tiling/TileKey.js\";class u{constructor(e,t,s){this._layer=e,this._styleRepository=t,this.devicePixelRatio=s,this._spriteMosaic=null,this._glyphMosaic=null,this._connection=null}destroy(){this._connection&&(this._connection.close(),this._connection=null),this._styleRepository=null,this._layer=null,this._spriteMosaic&&(this._spriteMosaic=null),this._glyphMosaic&&(this._glyphMosaic=null)}get spriteMosaic(){return this._spriteSourcePromise.then((()=>this._spriteMosaic))}get glyphMosaic(){return this._glyphMosaic}async start(e){this._spriteSourcePromise=this._layer.loadSpriteSource(this.devicePixelRatio,e),this._spriteSourcePromise.then((e=>{this._spriteMosaic=new n(1024,1024,250),this._spriteMosaic.setSpriteSource(e)}));const s=new l(this._layer.currentStyleInfo.glyphsUrl?i(this._layer.currentStyleInfo.glyphsUrl,{...this._layer.customParameters,token:this._layer.apiKey}):null);this._glyphMosaic=new a(1024,1024,s),this._broadcastPromise=o(\"WorkerTileHandler\",{client:this,schedule:e.schedule,signal:e.signal}).then((s=>(this._connection=s,Promise.all(this._connection.broadcast(\"setStyle\",{style:this._layer.currentStyleInfo.style,vectorTileLayerMaxBuffers:t(\"vectortilelayer-max-buffers\")},e)))))}async updateStyle(e){return await this._broadcastPromise,this._broadcastPromise=Promise.all(this._connection.broadcast(\"updateStyle\",e)),this._broadcastPromise}async setStyle(e,s){await this._broadcastPromise,this._styleRepository=e,this._spriteSourcePromise=this._layer.loadSpriteSource(this.devicePixelRatio,null),this._spriteSourcePromise.then((e=>{this._spriteMosaic=new n(1024,1024,250),this._spriteMosaic.setSpriteSource(e)}));const r=new l(this._layer.currentStyleInfo.glyphsUrl?i(this._layer.currentStyleInfo.glyphsUrl,{...this._layer.customParameters,token:this._layer.apiKey}):null);return this._glyphMosaic=new a(1024,1024,r),this._broadcastPromise=Promise.all(this._connection.broadcast(\"setStyle\",{style:s,vectorTileLayerMaxBuffers:t(\"vectortilelayer-max-buffers\")})),this._broadcastPromise}fetchTileData(e,t){return this._getRefKeys(e,t).then((e=>{const s=this._layer.sourceNameToSource,r=[];for(const t in s)r.push(t);return this._getSourcesData(r,e,t)}))}parseTileData(e,t){const s=e&&e.data;if(!s)return Promise.resolve(null);const{sourceName2DataAndRefKey:r,transferList:i}=s;return 0===Object.keys(r).length?Promise.resolve(null):this._broadcastPromise.then((()=>this._connection.getAvailableClient().then((s=>s.invoke(\"createTileAndParse\",{key:e.key.id,sourceName2DataAndRefKey:r,styleLayerUIDs:e.styleLayerUIDs},{...t,transferList:i})))))}async getSprites(e){return await this._spriteSourcePromise,this._spriteMosaic.getSpriteItems(e)}getGlyphs(e){return this._glyphMosaic.getGlyphItems(e.font,e.codePoints)}perfReport({key:e,milliseconds:t}){c(e,t,\"ms\")}async _getTilePayload(e,t,r){const i=h.pool.acquire(e.id),o=this._layer.sourceNameToSource[t].getSourceTileUrl(i.level,i.row,i.col);h.pool.release(i);try{return{protobuff:await this.request(o,r),sourceName:t}}catch(a){if(s(a))throw a;return{protobuff:null,sourceName:t}}}request(t,s){return e(t,{responseType:\"array-buffer\",...s}).then((({data:e})=>e))}_getRefKeys(e,t){const s=this._layer.sourceNameToSource,i=new Array;for(const r in s){const o=s[r].getRefKey(e,t);i.push(o)}return r(i)}_getSourcesData(e,t,s){const i=[];for(let r=0;r<t.length;r++)if(null==t[r].value||null==e[r])i.push(null);else{const o=this._getTilePayload(t[r].value,e[r],s);i.push(o)}return r(i).then((e=>{const s={},r=[];for(let i=0;i<e.length;i++)if(e[i].value&&e[i].value&&e[i].value.protobuff&&e[i].value.protobuff.byteLength>0){const o=t[i].value.id;s[e[i].value.sourceName]={refKey:o,protobuff:e[i].value.protobuff},r.push(e[i].value.protobuff)}return{sourceName2DataAndRefKey:s,transferList:r}}))}}export{u as TileHandler};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as o}from\"../../../../../core/maybe.js\";import{FADE_DURATION as e}from\"./config.js\";function t(o,e){if(o.priority-e.priority)return o.priority-e.priority;const t=o.tile.key,i=e.tile.key;return t.world-i.world?t.world-i.world:t.level-i.level?t.level-i.level:t.row-i.row?t.row-i.row:t.col-i.col?t.col-i.col:o.xTile-e.xTile?o.xTile-e.xTile:o.yTile-e.yTile}class i{constructor(o,e,t,i,s,r){this._visibleTiles=o,this._symbolRepository=e,this._createCollisionJob=t,this._assignTileSymbolsOpacity=i,this._symbolLayerSorter=s,this._isLayerVisible=r,this._selectionJob=null,this._selectionJobCompleted=!1,this._collisionJob=null,this._collisionJobCompleted=!1,this._opacityJob=null,this._opacityJobCompleted=!1,this._running=!0}get running(){return this._running}setScreenSize(o,e){this._screenWidth===o&&this._screenHeight===e||this.restart(),this._screenWidth=o,this._screenHeight=e}restart(){this._selectionJob=null,this._selectionJobCompleted=!1,this._collisionJob=null,this._collisionJobCompleted=!1,this._opacityJob=null,this._opacityJobCompleted=!1,this._running=!0}continue(o){if(this._selectionJob||(this._selectionJob=this._createSelectionJob()),!this._selectionJobCompleted){const e=performance.now();if(!this._selectionJob.work(o))return!1;if(this._selectionJobCompleted=!0,0===(o=Math.max(0,o-(performance.now()-e))))return!1}if(this._collisionJob||(this._collisionJob=this._createCollisionJob(this._selectionJob.sortedSymbols,this._screenWidth,this._screenHeight)),!this._collisionJobCompleted){const e=performance.now();if(!this._collisionJob.work(o))return!1;if(this._collisionJobCompleted=!0,0===(o=Math.max(0,o-(performance.now()-e))))return!1}if(this._opacityJob||(this._opacityJob=this._createOpacityJob()),!this._opacityJobCompleted){const e=performance.now();if(!this._opacityJob.work(o))return!1;if(this._opacityJobCompleted=!0,0===(o=Math.max(0,o-(performance.now()-e))))return!1}return this._running=!1,!0}_createSelectionJob(){const o=this._symbolRepository.uniqueSymbols;for(let t=0;t<o.length;t++){const e=o[t];for(let o=0;o<e.uniqueSymbols.length;o++){const t=e.uniqueSymbols[o];for(const o of t.tileSymbols)o.selectedForRendering=!1}}const e=[];let i=0,s=0;const r=this._isLayerVisible;function n(n){let l;const c=performance.now();for(;s<o.length;s++,i=0){const t=o[s],h=t.styleLayerUID;if(!r(h)){e[s]||(e[s]={styleLayerUID:h,symbols:[]});continue}e[s]=e[s]||{styleLayerUID:h,symbols:[]};const a=e[s];for(;i<t.uniqueSymbols.length;i++){if(l=t.uniqueSymbols[i],i%100==99&&performance.now()-c>n)return!1;let o=null,e=!1,s=!1;for(const t of l.tileSymbols)if(!s||!e){const i=t.tile;(!o||i.isCoverage||i.neededForCoverage&&!e)&&(o=t,(i.neededForCoverage||i.isCoverage)&&(s=!0),i.isCoverage&&(e=!0))}if(o.selectedForRendering=!0,s){a.symbols.push(o),l.show=!0;for(const o of l.parts)o.show=!0}else l.show=!1}}for(const o of e)o.symbols.sort(t);return!0}const l=this._symbolLayerSorter;return{work:n,get sortedSymbols(){return e.sort(l)}}}_createOpacityJob(){const e=this._assignTileSymbolsOpacity,t=this._visibleTiles;let i=0;function r(o,t){const i=o.symbols;for(const[e,r]of i)s(r,t);e(o,t);for(const e of o.childrenTiles)r(e,t)}return{work(e){const s=performance.now();for(;i<t.length;i++){if(performance.now()-s>e)return!1;const n=t[i];if(o(n.parentTile))continue;r(n,performance.now())}return!0}}}}function s(o,t){for(const i of o){const o=i.unique;for(const i of o.parts){const s=i.targetOpacity>.5?1:-1;i.startOpacity+=s*((t-i.startTime)/e),i.startOpacity=Math.min(Math.max(i.startOpacity,0),1),i.startTime=t,i.targetOpacity=o.show&&i.show?1:0}}}export{i as SymbolDeclutterer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction t(t,e,n,o,l,i){t.fillStyle=e,t.fillRect(n,o,l,i)}function e(t,e,n,o,l,i){t.strokeStyle=e,t.strokeRect(n,o,l,i)}function n(t,e){t.strokeStyle=\"black\";const n=e.cellSize,o=e.rows,l=e.columns;for(let i=0;i<o;i++){const o=e.cells[i],r=i*n,s=(i+1)*n;for(let e=0;e<l;e++){const l=o[e],i=e*n,d=(e+1)*n;t.strokeRect(i,r,d-i,s-r),t.fillText(`cells:${l.length}`,i+4,r+12)}}}function o(n,o){const l=window.COLLISION_XRAY;for(let i=0;i<o.length;++i){const r=!o[i].unique.show;if(l||!r)for(const s of o[i].colliders){if(!s.enabled)continue;const d=!o[i].unique.parts[s.partIndex].show;if(!l&&d)continue;const a=s.xScreen,c=s.yScreen,m=s.dxScreen,h=s.dyScreen;n.globalAlpha=r||d?.2:1,t(n,\"green\",a-1,c-1,3,3),e(n,\"red\",a+m,c+h,s.width,s.height),t(n,\"blue\",a+m-1,c+h-1,3,3),n.globalAlpha=1}}}function l(t,e,n){if(!window.PERFORMANCE_RECORDING_STORAGE)return;const o=window.PERFORMANCE_RECORDING_STORAGE;o.perf=o.perf||{};const l=o.perf;l[t]=l[t]||{start:null,time:0,min:void 0,max:void 0,samples:[],unit:n},l[t].time+=e,l[t].samples.push(e),(null==l[t].min||e<l[t].min)&&(l[t].min=e),(null==l[t].max||e>l[t].max)&&(l[t].max=e)}function i(){if(!window.PERFORMANCE_RECORDING_STORAGE)return;window.PERFORMANCE_RECORDING_STORAGE.perf={}}function r(t,e){return`${Math.round(10*t)/10}${e}`}function s(t){if(!window.PERFORMANCE_RECORDING_STORAGE){const t=document.createElement(\"div\");return t.innerHTML=\"No recorded data is present because performance recording is disabled.\",t}const e=document.createElement(\"div\");let n=\"\";const o=window.PERFORMANCE_RECORDING_STORAGE.perf,l=50;n+='<table style=\"border-collapse: collapse;\">',n+=`<tr style=\"text-weight: bold; border-bottom: 1px solid \"${t}\";\"><td>Name</td><td>Total</td><td>Runs</td><td>Average</td><td>Min</td><td>Distribution</td><td>Max</td><td>Histogram (${l} bins)</td></tr>`;const i=[];for(const r in o)i.push({name:r,value:o[r].time/o[r].samples.length,sortkey:o[r].max});i.sort(((t,e)=>-(t.sortkey-e.sortkey)));const s=i.map((t=>t.name));for(const m of s)n+=\"<tr>\",n+=`<td>${m}</td>`,n+=`<td>${r(o[m].time,o[m].unit)}</td>`,n+=`<td>${o[m].samples.length}</td>`,n+=`<td>${r(o[m].time/o[m].samples.length,o[m].unit)}</td>`,n+=`<td style=\"text-align: right;\">${r(o[m].min,o[m].unit)}</td>`,n+=\"<td data-distribution='1'></td>\",n+=`<td>${r(o[m].max,o[m].unit)}</td>`,n+=\"<td data-histogram='1'></td>\",n+=\"</tr>\";n+=\"<table>\",e.innerHTML=n;const d=e.querySelectorAll(\"td[data-distribution='1']\"),a=e.querySelectorAll(\"td[data-histogram='1']\");for(let r=0;r<d.length;r++){let e=d[r];{const n=document.createElement(\"canvas\");n.height=10,n.width=100;const l=n.getContext(\"2d\");if(l.strokeStyle=t,l.beginPath(),l.moveTo(0,5),l.lineTo(100,5),o[s[r]].max>o[s[r]].min+.001)for(const t of o[s[r]].samples){const e=(t-o[s[r]].min)/(o[s[r]].max-o[s[r]].min);l.moveTo(100*e,3),l.lineTo(100*e,7)}l.stroke(),l.strokeRect((i[r].value-o[s[r]].min)/(o[s[r]].max-o[s[r]].min)*100-2,0,4,9),e.appendChild(n)}e=a[r];{const n=new Array(l);for(let t=0;t<n.length;t++)n[t]=0;for(const t of o[s[r]].samples){const e=(t-o[s[r]].min)/(o[s[r]].max-o[s[r]].min);n[1===e?n.length-1:Math.floor(e*n.length)]++}const i=document.createElement(\"canvas\");i.height=30,i.width=120;const d=i.getContext(\"2d\");d.strokeStyle=t,d.fillStyle=t;let a=0;for(let t=0;t<n.length;t++){const e=n[t];a=Math.max(a,e)}for(let t=0;t<n.length;t++){const e=n[t];d.fillRect(t*i.width/n.length,i.height*(1-e/a),i.width/n.length,i.height*(e/a))}d.beginPath(),d.moveTo(0,i.height),d.lineTo(i.width,i.height),d.stroke(),e.appendChild(i)}}const c=e.querySelectorAll(\"td\");for(let r=0;r<c.length;r++)c[r].style.padding=\"5px\";return e}export{o as drawColliders,n as drawGridIndex,l as perfAdd,i as perfClear,s as perfElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{VTLUniqueSymbol as t}from\"./core.js\";import{CollisionJob as e}from\"./jobs.js\";import{SymbolDeclutterer as r}from\"./SymbolDeclutterer.js\";import{SymbolRepository as o}from\"./SymbolRepository.js\";import{writeOpacityToBuffers as s}from\"./util.js\";function i(i,p){const a=[],y=new o(4096,a,(()=>{const e=new t;return e.show=!1,e.parts.push({startTime:0,startOpacity:0,targetOpacity:0,show:!1}),e.parts.push({startTime:0,startOpacity:0,targetOpacity:0,show:!1}),e})),m=new r(a,y,((t,r,o)=>new e(t,r,o,i.styleRepository,i.key.level,0)),((t,e)=>{s(t,e,!1)}),(()=>0),(t=>{const e=p.getStyleLayerByUID(t).getLayoutProperty(\"visibility\");return!e||1!==e.getValue()}));a.push(i),y.add(i),m.setScreenSize(512,512),m.continue(1/0)}export{i as declutterSingleTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../../core/maybe.js\";import{MIN_PRIORITY as t}from\"../../../../core/MemCache.js\";import{throwIfAborted as o}from\"../../../../core/promiseUtils.js\";import{f as s}from\"../../../../chunks/mat3f32.js\";import{create as i}from\"../../../../geometry/support/aaBoundingRect.js\";import{VectorTile as r}from\"./VectorTile.js\";import{TileHandler as n}from\"./TileHandler.js\";import{declutterSingleTile as l}from\"./decluttering/jobsUtil.js\";import a from\"../../tiling/TileKey.js\";class g extends n{constructor(e,t,o,s,i){super(e,t,o),this._memCache=s,this._loader=i,this._ongoingTileRequests=new Map,this._ongoingRequestToController=new Map}destroy(){this._ongoingRequestToController.forEach((e=>e.abort())),this._ongoingRequestToController.clear(),this._ongoingTileRequests.clear()}async getVectorTile(n,g,h,m){const u=new a(n,g,h,0);let c=this._memCache.get(u.id);if(e(c))return c.retain(),c;const _=await this._getVectorTileData(u);if(o(m),!this._layer)return null;if(c=this._memCache.get(u.id),e(c))return c.retain(),c;const T=this._layer.tileInfo.getTileBounds(i(),u);return c=new r(u,T[0],T[3],512,512,this._styleRepository,this._memCache),e(_)?(c.setData(_),c.retain(),this._memCache.put(u.id,c,c.memoryUsage*c.referenced,t)):c.setData(null),c.neededForCoverage=!0,c.transforms.tileUnitsToPixels=s(1/8,0,0,0,1/8,0,0,0,1),l(c,this._styleRepository),c}_getVectorTileData(e){const t=e.id;if(this._ongoingTileRequests.has(t))return this._ongoingTileRequests.get(t);const o=new AbortController,s={signal:o.signal},i=this._getParsedVectorTileData(e,s).then((e=>(this._ongoingTileRequests.delete(t),this._ongoingRequestToController.delete(t),e))).catch((()=>(this._ongoingTileRequests.delete(t),this._ongoingRequestToController.delete(t),null)));return this._ongoingTileRequests.set(t,i),this._ongoingRequestToController.set(t,o),i}_getParsedVectorTileData(e,t){return this.fetchTileData(e,t).then((o=>this.parseTileData({key:e,data:o},t)))}request(e,t){return this._loader.request(e,\"binary\",t)}}export{g as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{disposeMaybe as e}from\"../../../../core/maybe.js\";import{vtlBrushes as t}from\"../brushes.js\";import r from\"./shaders/VTLMaterialManager.js\";const s=1e-6;class a{constructor(e,t){this.spriteMosaic=e,this.glyphMosaic=t,this._brushCache=new Map,this._vtlMaterialManager=new r}dispose(){this._brushCache&&(this._brushCache.forEach((e=>e.dispose())),this._brushCache=null),this._vtlMaterialManager=e(this._vtlMaterialManager),this.spriteMosaic.dispose(),this.glyphMosaic.dispose()}get vectorTilesMaterialManager(){return this._vtlMaterialManager}drawTile(e,t,r){const{context:s}=e,a=r.layers;r.backgroundBucketIds.length>0&&(e.renderPass=\"background\",r.backgroundBucketIds.forEach((s=>this._renderStyleLayer(r.getLayerById(s),e,t,!0)))),s.setBlendingEnabled(!1),s.setDepthTestEnabled(!0),s.setDepthWriteEnabled(!0),s.setDepthFunction(515),e.renderPass=\"opaque\";for(let i=a.length-1;i>=0;i--)this._renderStyleLayer(a[i],e,t,!1);s.setDepthWriteEnabled(!1),s.setBlendingEnabled(!0),s.setBlendFunctionSeparate(1,771,1,771),e.renderPass=\"translucent\";for(let i=0;i<a.length;i++)this._renderStyleLayer(a[i],e,t,!1);s.setDepthTestEnabled(!1),e.renderPass=\"symbol\";for(let i=0;i<a.length;i++)this._renderStyleLayer(a[i],e,t,!1);s.bindVAO()}_renderStyleLayer(e,t,r,a=!1){if(!(a||e&&r.layerData.has(e.uid)))return;const i=e.getLayoutProperty(\"visibility\");if(i&&1===i.getValue())return;const{renderPass:n}=t;let l;switch(e.type){case 0:if(\"background\"!==n)return;l=\"vtlBackground\";break;case 1:if(\"opaque\"!==n&&\"translucent\"!==t.renderPass)return;l=\"vtlFill\";break;case 2:if(\"translucent\"!==n)return;l=\"vtlLine\";break;case 4:if(\"symbol\"!==n)return;l=\"vtlCircle\";break;case 3:if(\"symbol\"!==n)return;l=\"vtlSymbol\"}const h=t.displayLevel;void 0!==e.minzoom&&e.minzoom>h+s||void 0!==e.maxzoom&&e.maxzoom<=h-s||(t.styleLayerUID=e.uid,t.styleLayer=e,this.drawWithBrush(t,r,l))}drawWithBrush(e,r,s){if(!this._brushCache.has(s)){const e=t[s];this._brushCache.set(s,new e)}this._brushCache.get(s).drawMany(e,[r])}}export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import{isNone as i,disposeMaybe as r,destroyMaybe as l}from\"../../../core/maybe.js\";import{isAborted as s}from\"../../../core/promiseUtils.js\";import{whenTrueOnce as o}from\"../../../core/watchUtils.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import h from\"../../2d/engine/vectorTiles/SchemaHelper.js\";import c from\"../../2d/engine/vectorTiles/TileHandler3D.js\";import d from\"../../2d/engine/vectorTiles/VTLPainter3D.js\";import p from\"../../2d/engine/vectorTiles/style/StyleRepository.js\";import{LayerView3D as m}from\"./LayerView3D.js\";import{TiledLayerView3D as y}from\"./TiledLayerView3D.js\";import{test as f}from\"../terrain/terrainUtils.js\";import u from\"../../layers/LayerView.js\";let g=class extends(y(m(u))){constructor(){super(...arguments),this.type=\"vector-tile-3d\"}initialize(){if(i(this.layer.fullExtent))return void this.addResolvingPromise(Promise.reject(new t(\"vectortilelayerview:full-extent-undefined\",\"This layer view's layer does not define a fullExtent.\")));const e=f.force512VTL?this.layer.tileInfo:this.layer.compatibleTileInfo256,r=this._getTileInfoSupportError(e,this.layer.fullExtent);if(r)return this.addResolvingPromise(Promise.reject(r));const{basemapTerrain:l,spatialReference:n,pixelRatio:a}=this.view,m=o(this.view,\"basemapTerrain.tilingSchemeLocked\").then((()=>{const e=l.tilingScheme,t=e.pixelSize;let i;this.schemaHelper=new h(t,n.isGeographic),i=256===t?this.layer.compatibleTileInfo256:this.view.spatialReference.isGeographic?this.layer.compatibleTileInfo512:this.layer.tileInfo;const r=this._getTileInfoCompatibilityError(i,e);if(r)throw r;this._set(\"tileInfo\",i)}));this._tileHandlerController=new AbortController;const y=this.view.resourceController;this._memCache=y.memoryController.newCache(this.layer.uid,(e=>{e.release()}));const{style:u}=this.layer.currentStyleInfo,g=new p(u),_=l.mapTileRequester;this._tileHandler=new c(this.layer,g,a,this._memCache,_);const v=this._tileHandlerController.signal,H=e=>y.schedule(e),w=this._tileHandler.start({signal:v,schedule:H}),C=this._tileHandler.spriteMosaic;C.then((e=>{!s(v)&&this._tileHandler&&(this.painter=new d(e,this._tileHandler.glyphMosaic))})),w.then((()=>this._tileHandlerController=null));const T=()=>{this._tileHandlerController&&this._tileHandlerController.abort(),this._tileHandlerController=new AbortController,this._memCache.clear();const{style:e}=this.layer.currentStyleInfo,t=new p(e),i=new c(this.layer,t,a,this._memCache,_),r=i.start({signal:this._tileHandlerController.signal,schedule:H}),l=i.spriteMosaic;r.then((()=>this._tileHandlerController=null)),this.updatingHandles.addPromise(Promise.all([r,l]).then((([,e])=>{const t=this._tileHandler,r=this.painter;this.painter=new d(e,i.glyphMosaic),this._tileHandler=i,this.emit(\"data-changed\"),t.destroy(),r&&r.dispose()})))};this.updatingHandles.add(this,\"layer.currentStyleInfo\",T),this.updatingHandles.add(this,\"view.pixelRatio\",T);const j=Promise.all([m,w,C]);this.addResolvingPromise(j)}destroy(){this.painter=r(this.painter),this._tileHandlerController&&(this._tileHandlerController.abort(),this._tileHandlerController=null),l(this._tileHandler),this._memCache=l(this._memCache),this._tileHandler=null}get dataLevelRange(){const e=this.tileInfo.lods,t=e[0].scale,i=e[e.length-1].scale,r=this.levelRangeFromScaleRange(t,i);return 1===r.minLevel&&256===this.tileInfo.size[0]&&(r.minLevel=0),r}async fetchTile(e,t,i,r){return this._tileHandler.getVectorTile(e,t,i,r)}};e([n({aliasOf:\"layer.fullExtent\"})],g.prototype,\"fullExtent\",void 0),e([n()],g.prototype,\"layer\",void 0),e([n()],g.prototype,\"tileInfo\",void 0),e([n()],g.prototype,\"dataLevelRange\",null),e([n()],g.prototype,\"updatingProgressValue\",void 0),g=e([a(\"esri.views.3d.layers.VectorTileLayerView3D\")],g);const _=g;export{_ as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as s}from\"../../../../../core/maybe.js\";import{GridIndex as o,tileCoordChange as t}from\"./util.js\";const l=32,i=8,n=64;class r{constructor(e,s,o){this.tileCoordRange=e,this._visibleTiles=s,this._createUnique=o,this._tiles=new Map,this._uniqueSymbolsReferences=new Map}get uniqueSymbols(){return e(this._uniqueSymbolLayerArray)&&(this._uniqueSymbolLayerArray=this._createUniqueSymbolLayerArray()),this._uniqueSymbolLayerArray}add(e,s){this._uniqueSymbolLayerArray=null;let t=this._tiles.get(e.id);t||(t={symbols:new Map},this._tiles.set(e.id,t));const r=new Map;if(s)for(const o of s)t.symbols.has(o)&&(r.set(o,t.symbols.get(o)),t.symbols.delete(o));else for(const[o,l]of e.layerData)t.symbols.has(o)&&(r.set(o,t.symbols.get(o)),t.symbols.delete(o));this._removeSymbols(r);const y=e.symbols,a=new Map;for(const[f,c]of y){let e=c.length;if(e>=l){let s=this.tileCoordRange;do{s/=2,e/=4}while(e>i&&s>n);const l=new o(this.tileCoordRange,this.tileCoordRange,s);a.set(f,{flat:c,index:l}),t.symbols.set(f,{flat:c,index:l});for(const e of c)l.getCell(e.xTile,e.yTile).push(e)}else a.set(f,{flat:c}),t.symbols.set(f,{flat:c})}this._addSymbols(e.key,y)}deleteStyleLayers(e){this._uniqueSymbolLayerArray=null;for(const[s,o]of this._tiles){const t=new Map;for(const s of e)o.symbols.has(s)&&(t.set(s,o.symbols.get(s)),o.symbols.delete(s));this._removeSymbols(t),0===o.symbols.size&&this._tiles.delete(s)}}removeTile(e){this._uniqueSymbolLayerArray=null;const s=this._tiles.get(e.id);if(!s)return;const o=new Map;for(const[t,l]of e.symbols)s.symbols.has(t)&&(o.set(t,s.symbols.get(t)),s.symbols.delete(t));this._removeSymbols(o),0===s.symbols.size&&this._tiles.delete(e.id)}_removeSymbols(e){for(const[s,{flat:o}]of e)for(const e of o){const o=e.unique,t=o.tileSymbols,l=t.length-1;for(let s=0;s<l;s++)if(t[s]===e){t[s]=t[l];break}if(t.length=l,0===l){const e=this._uniqueSymbolsReferences.get(s);e.delete(o),0===e.size&&this._uniqueSymbolsReferences.delete(s)}e.unique=null}}_addSymbols(s,o){if(0===o.size)return;const t=this._visibleTiles;for(const e of t)e.parentTile||e.key.world!==s.world||e.key.level===s.level&&!e.key.equals(s)||this._matchSymbols(e,s,o);for(const[l,i]of o)for(const s of i)if(e(s.unique)){const e=this._createUnique();s.unique=e,e.tileSymbols.push(s);let o=this._uniqueSymbolsReferences.get(l);o||(o=new Set,this._uniqueSymbolsReferences.set(l,o)),o.add(e)}}_matchSymbols(e,o,l){if(e.key.level>o.level){const s=e.key.level-o.level;if(e.key.row>>s!==o.row||e.key.col>>s!==o.col)return}if(o.level>e.key.level){const s=o.level-e.key.level;if(o.row>>s!==e.key.row||o.col>>s!==e.key.col)return}if(o.equals(e.key)){for(const s of e.childrenTiles)this._matchSymbols(s,o,l);return}const i=new Map;for(const[n,r]of l){const l=[];for(const s of r){const i=t(this.tileCoordRange,s.xTile,o.level,o.col,e.key.level,e.key.col),n=t(this.tileCoordRange,s.yTile,o.level,o.row,e.key.level,e.key.row);i>=0&&i<this.tileCoordRange&&n>=0&&n<this.tileCoordRange&&l.push({symbol:s,xTransformed:i,yTransformed:n})}const y=[],a=e.key.level<o.level?1:1<<e.key.level-o.level,f=this._tiles.get(e.id).symbols.get(n);if(f){const e=f.flat;for(const o of l){let t,l=!1;const i=o.xTransformed,n=o.yTransformed;t=s(f.index)?f.index.getCell(i,n):e;const r=o.symbol,c=r.hash;for(const e of t)if(c===e.hash&&Math.abs(i-e.xTile)<=a&&Math.abs(n-e.yTile)<=a){const s=e.unique;r.unique=s,s.tileSymbols.push(r),l=!0;break}l||y.push(r)}}y.length>0&&i.set(n,y)}for(const s of e.childrenTiles)this._matchSymbols(s,o,i)}_createUniqueSymbolLayerArray(){const e=this._uniqueSymbolsReferences,s=new Array(e.size);let o,t=0;for(const[l,i]of e){const e=new Array(i.size);o=0;for(const s of i)e[o++]=s;s[t]={styleLayerUID:l,uniqueSymbols:e},t++}return s}}export{r as SymbolRepository};\n"],"sourceRoot":""}