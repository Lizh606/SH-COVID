{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/chunks/MeasurementArrow.glsl.js","webpack:///./node_modules/@arcgis/core/views/3d/analysis/DirectLineMeasurement/DirectLineMeasurementController.js","webpack:///./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/MeasurementArrowTechnique.js","webpack:///./node_modules/@arcgis/core/views/3d/webgl-engine/materials/MeasurementArrowMaterial.js","webpack:///./node_modules/@arcgis/core/views/3d/interactive/visualElements/MeasurementArrowVisualElement.js","webpack:///./node_modules/@arcgis/core/views/3d/interactive/visualElements/RightAngleQuadVisualElement.js","webpack:///./node_modules/@arcgis/core/views/3d/analysis/DirectLineMeasurement/DirectLineMeasurementVisualization.js","webpack:///./node_modules/@arcgis/core/views/3d/analysis/DirectLineMeasurement/DirectLineMeasurementView3D.js"],"names":["o","vertex","uniforms","add","attributes","varyings","code","fragment","r","Math","sqrt","float","Object","freeze","__proto__","build","G","S","e","super","this","_unitNormalizer","_handles","_tempStartPosition","_tempEndPosition","_tempCornerPosition","view","_initialize","spatialReference","t","i","_sphericalPCPF","s","viewData","startPoint","analysis","elevationAlignedStartPoint","_applyElevationAlignment","endPoint","elevationAlignedEndPoint","result","_computedResult","hasZ","clone","z","elevationProvider","_euclideanDistances","_exactGeodesicDistanceAndAngle","horizontal","value","measurementMode","unit","distance","direct","mode","directDistance","horizontalDistance","verticalDistance","vertical","geodesicDistance","geodesicAngle","angle","a","n","c","d","m","p","abs","h","normalizeDistance","u","g","f","addPath","isGeographic","isWebMercator","_fallbackGeodesicAngle","_fallbackGeodesicDistance","metersPerDegree","U","C","l","sin","cos","prototype","shader","get","rctx","program","camera","projectionMatrix","setUniform1f","width","outlineSize","setUniform4fv","outlineColor","stripeLength","stripeEvenColor","stripeOddColor","rebindTextures","configuration","blending","transparent","polygonOffset","polygonOffsetEnabled","factor","units","depthTest","func","depthWrite","colorWrite","setPipelineState","transparencyPassType","arguments","count","techniqueConfig","parameters","output","ensureTechnique","updateParameters","bindPass","_material","getPassParameters","vec3f","vec2f","f32","b","q","vertexBufferLayout","createBuffer","indices","length","vertexAttributes","data","console","warn","x","P","w","transformation","T","invTranspTransformation","j","position","L","normal","M","uv0","O","v","setVec","set","A","auxpos1","_parameters","_origin","_originTransform","_arrowCenter","_renderOccluded","_geometry","_stripeLength","_stripesEnabled","_opacity","applyProps","_arrowMaterial","setParameters","renderOccluded","geometryChanged","attached","opacity","arrowStripeEvenColor","arrowStripeOddColor","_","_updateArrowOpacity","arrowOutlineColor","state","watch","viewChanged","destroy","startRenderSpace","endRenderSpace","_createArrowGeometry","addGeometry","renderCoordsHelper","push","type","eval","worldUpAtPosition","arrowSubdivisions","createPolylineGeometry","recreateGeometry","ready","computeScreenPixelSizeAt","arrowWidth","arrowOutlineWidth","arrowStripeLength","_quadMaterial","_outlineMaterial","_maxSize","_position","_up","_right","_color","_outlineColor","_outlineSize","_size","_outlineRenderOccluded","_updateQuadMaterial","_updateOutlineMaterial","_updateTransform","previous","center","next","min","quadMaterialParameters","outlineMaterialParameters","removeAll","_createQuadGeometry","_createOutlineGeometry","_quadGeometryData","object","size","exclusive","Uint16Array","color","writeDepth","_params","Q","_segmentVisualElement","_triangleVisualElement","_rightAngleQuad","_projectedGeodesicLine","_geodesicStartHint","_geodesicEndHint","_segmentLabel","_verticalLabel","_horizontalLabel","_startPosition","_endPosition","_cornerPosition","_startPositionAtSeaLevel","_endPositionAtSeaLevel","_state","_triangleOrientationOverride","messages","loadingMessages","visualElementOrientation","triangleCollapseRatioThreshold","analysisView","visible","equals","_requiresGeodesicGuideAt","_actualVisualElementsOrientation","actualVisualizedMeasurement","labels","Error","geometry","triangleLineWidth","triangleColor","W","geodesicProjectionLineWidth","geodesicProjectionLineColor","stipplePattern","guideStippleLengthPixels","guideLineWidth","fontSize","direcLabelFontSize","verticalLabelFontSize","horizontalLabelFontSize","viewMode","orientation","visualizedMeasurement","_measurementArrowStripeLength","_updateGeometryAndViewMode","_updateVisualElementVisibility","text","_labelsText","_updateLabelText","_updateLabelVisibility","_updateSegmentStripeLength","_updateMessageBundle","toRenderCoords","getAltitude","_updateSegment","_updateSegmentAndTriangle","segment","startPosition","endPosition","deltaSign","altitudeDelta","_updateSegmentAndProjection","anchor","sampleLocation","F","setAltitude","setGeometryFromSegment","euclideanDistance","notifyChange","stripesEnabled","aboveGround","toUnit","then","finally","B","I","projectToRenderScreen","J","K","sign","N","laserLineGlowColor","laserLineGlowWidth","laserLineGlowFalloff","laserLineInnerColor","laserLineInnerWidth","laserLineGlobalAlpha","laserLineEnabled","handleColor","handleOpacity","handleRadius","triangleCornerSize","triangleSubdivisions","guideLineColor","labelDistance","_analysisVisualization","_analysisController","whenReady","allowVisualElementsOrientationChange","destroyed","visualization","controller","testData","_defaultUnit","readOnly"],"mappings":"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","file":"js/chunk-e74c9fa4.9d752d3a.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as t}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function o(){const o=new t;o.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\").add(\"width\",\"float\"),o.attributes.add(\"position\",\"vec3\"),o.attributes.add(\"normal\",\"vec3\"),o.attributes.add(\"uv0\",\"vec2\"),o.attributes.add(\"auxpos1\",\"float\"),o.varyings.add(\"vtc\",\"vec2\"),o.varyings.add(\"vlength\",\"float\"),o.varyings.add(\"vradius\",\"float\"),o.vertex.code.add(e`void main(void) {\nvec3 bitangent = normal;\nvtc = uv0;\nvlength = auxpos1;\nvradius = 0.5 * width;\nvec4 pos = view * vec4(position + vradius * bitangent * uv0.y, 1.0);\ngl_Position = proj * pos;\n}`),o.fragment.uniforms.add(\"outlineSize\",\"float\").add(\"outlineColor\",\"vec4\").add(\"stripeLength\",\"float\").add(\"stripeEvenColor\",\"vec4\").add(\"stripeOddColor\",\"vec4\");const r=1/Math.sqrt(2);return o.fragment.code.add(e`\n    const float INV_SQRT2 = ${e.float(r)};\n\n    vec4 arrowColor(vec2 tc, float len) {\n      float d = INV_SQRT2 * (tc.x - abs(tc.y));\n      d = min(d, INV_SQRT2 * (len - tc.x - abs(tc.y)));\n      d = min(d, 1.0 - abs(tc.y));\n\n      if (d < 0.0) {\n        return vec4(0.0);\n      } else if (d < outlineSize) {\n        return outlineColor;\n      } else {\n        return fract(0.5 / stripeLength * tc.x * vradius) >= 0.5 ? stripeOddColor : stripeEvenColor;\n      }\n    }\n\n    void main(void) {\n      vec2 ntc = vec2(vtc.x / vradius, vtc.y);\n      vec4 color = arrowColor(ntc, vlength / vradius);\n      if (color.a == 0.0) {\n        discard;\n      }\n      gl_FragColor = color;\n    }\n  `),o}const r=Object.freeze({__proto__:null,build:o});export{r as M,o as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import i from\"../../../../core/Handles.js\";import{deg2rad as s,rad2deg as o,acosClamped as r}from\"../../../../core/mathUtils.js\";import{destroyMaybe as a,isNone as n,unwrapOr as c}from\"../../../../core/maybe.js\";import l from\"../../../../core/Quantity.js\";import{react as d,syncAndInitial as m}from\"../../../../core/reactiveUtils.js\";import{whenOnce as p}from\"../../../../core/watchUtils.js\";import{property as h}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as u}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{i as v}from\"../../../../chunks/vec3.js\";import{c as g}from\"../../../../chunks/vec3f64.js\";import{geodesicLength as f}from\"../../../../geometry/geometryEngine.js\";import _ from\"../../../../geometry/Polyline.js\";import{canProjectWithoutEngine as w,projectPointToVector as D,projectPointToWGS84ComparableLonLat as y}from\"../../../../geometry/projection.js\";import{getSphericalPCPF as P,getReferenceEllipsoid as j,SphericalECEFSpatialReference as z,WGS84ECEFSpatialReference as A}from\"../../../../geometry/projectionEllipsoid.js\";import{isSupported as b,geodesicLengths as M,inverseGeodeticSolver as k}from\"../../../../geometry/support/geodesicUtils.js\";import{UnitNormalizer as E}from\"../support/UnitNormalizer.js\";import{getElevationAtPoint as R}from\"../../support/ElevationProvider.js\";const G=1e5;let S=class extends t{constructor(e){super(e),this._unitNormalizer=new E,this._handles=new i,this._tempStartPosition=g(),this._tempEndPosition=g(),this._tempCornerPosition=g()}initialize(){this._handles.add(p(this.view,\"ready\",(()=>this._initialize()),!0))}destroy(){this._handles=a(this._handles)}_initialize(){const e=this.view.spatialReference,t=P(e),i=t===z?A:t;this._sphericalPCPF=i;const s=w(e,i);this._unitNormalizer.spatialReference=s?i:e,this._handles.add([d((()=>({viewData:this.viewData,startPoint:this.analysis.startPoint})),(({viewData:e,startPoint:t})=>{e.elevationAlignedStartPoint=this._applyElevationAlignment(t)}),m),d((()=>({viewData:this.viewData,endPoint:this.analysis.endPoint})),(({viewData:e,endPoint:t})=>{e.elevationAlignedEndPoint=this._applyElevationAlignment(t)}),m),d((()=>({result:this._computedResult,viewData:this.viewData})),(({result:e,viewData:t})=>{t.result=e}),m)])}_applyElevationAlignment(e){if(n(e)||e.hasZ)return e;const t=e.clone();return t.z=c(R(this.view.elevationProvider,t),0),t}get _computedResult(){const{elevationAlignedStartPoint:e,elevationAlignedEndPoint:t}=this.viewData;if(n(e)||n(t))return null;const i=this._euclideanDistances(e,t),s=this._exactGeodesicDistanceAndAngle(e,t,i.horizontal.value);let o=null;switch(this.viewData.measurementMode){case 0:{var r;o=\"euclidean\";const e=this.viewData.unit,t=(null==(r=i.horizontal)?void 0:r.value)>G;(\"degrees\"===e||\"degrees-minutes-seconds\"===e||t)&&(o=\"geodesic\");break}case 1:o=\"euclidean\";break;case 2:o=\"geodesic\"}return{distance:\"euclidean\"===o?i.direct:s.distance,mode:o,directDistance:i.direct,horizontalDistance:i.horizontal,verticalDistance:i.vertical,geodesicDistance:s.distance,geodesicAngle:s.angle}}_euclideanDistances(e,t){const i=e.clone();i.z=t.z;const s=this._tempStartPosition,o=this._tempEndPosition,r=this._tempCornerPosition,a=this.view.spatialReference,n=this._sphericalPCPF,c=w(a,n)?n:a;D(e,s,c),D(t,o,c),D(i,r,c);const d=v(s,o),m=v(r,o),p=Math.abs(t.z-e.z),h=e=>this._unitNormalizer.normalizeDistance(e),u=h(d),g=h(m),f=h(p);return{direct:new l(u,\"meters\"),horizontal:new l(g,\"meters\"),vertical:new l(f,\"meters\")}}_exactGeodesicDistanceAndAngle(e,t,i){const s=e.spatialReference,o=new _({spatialReference:s});o.addPath([e,t]);const r=s.isGeographic&&b(s)?M([o],\"meters\")[0]:s.isWebMercator?f(o,\"meters\"):void 0,{distance:a,angle:n}=r?{distance:r,angle:this._fallbackGeodesicAngle(r,s)}:this._fallbackGeodesicDistance(e,t,i);return{distance:new l(a,\"meters\"),angle:new l(n,\"degrees\")}}_fallbackGeodesicAngle(e,t){return e/j(t).metersPerDegree}_fallbackGeodesicDistance(e,t,i){if(y(e,U)){y(t,C);const e=s(U[0]),i=s(U[1]),a=s(C[0]),n=s(C[1]),c=Math.abs(a-e),l=r(Math.sin(i)*Math.sin(n)+Math.cos(i)*Math.cos(n)*Math.cos(c)),d=o(l),m={distance:0};return k(m,[U[0],U[1]],[C[0],C[1]]),{distance:m.distance,angle:d}}const a=e.spatialReference,n=i;return{distance:n,angle:this._fallbackGeodesicAngle(n,a)}}};e([h()],S.prototype,\"view\",void 0),e([h()],S.prototype,\"analysis\",void 0),e([h()],S.prototype,\"viewData\",void 0),e([h()],S.prototype,\"_computedResult\",null),S=e([u(\"esri.views.3d.analysis.DirectLineMeasurement.DirectLineMeasurementController\")],S);const U=g(),C=g();export{S as DirectLineMeasurementController};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import{bindProjectionMatrix as e,bindView as t}from\"../core/shaderLibrary/util/View.glsl.js\";import{ReloadableShaderModule as o}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as i}from\"../core/shaderTechnique/ShaderTechnique.js\";import{parameter as s,ShaderTechniqueConfiguration as n}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as a}from\"../lib/DefaultVertexAttributeLocations.js\";import{blendingDefault as p,OITBlending as l}from\"../lib/OrderIndependentTransparency.js\";import{Program as m}from\"../lib/Program.js\";import{M as h}from\"../../../../chunks/MeasurementArrow.glsl.js\";import{makePipelineState as f,defaultDepthWriteParams as d,defaultColorWriteParams as u}from\"../../../webgl/renderState.js\";class c extends i{constructor(r,e,t){super(r,e,t)}initializeProgram(r){const e=c.shader.get().build();return new m(r.rctx,e,a)}bindPass(r,t){e(this.program,t.camera.projectionMatrix),this.program.setUniform1f(\"width\",r.width),this.program.setUniform1f(\"outlineSize\",r.outlineSize),this.program.setUniform4fv(\"outlineColor\",r.outlineColor),this.program.setUniform1f(\"stripeLength\",r.stripeLength),this.program.setUniform4fv(\"stripeEvenColor\",r.stripeEvenColor),this.program.setUniform4fv(\"stripeOddColor\",r.stripeOddColor)}bindDraw(r){t(this.program,r),this.program.rebindTextures()}setPipelineState(r){const e=3===r,t=this.configuration;return f({blending:t.transparent?e?p:l(r):null,polygonOffset:this.configuration.polygonOffsetEnabled&&{factor:0,units:-4},depthTest:{func:513},depthWrite:d,colorWrite:u})}initializePipeline(){return this.setPipelineState(this.configuration.transparencyPassType)}get primitiveType(){return 5}}c.shader=new o(h,(()=>import(\"./MeasurementArrow.glsl.js\")));class g extends n{constructor(){super(...arguments),this.polygonOffsetEnabled=!1,this.transparent=!1,this.transparencyPassType=3}}r([s()],g.prototype,\"polygonOffsetEnabled\",void 0),r([s()],g.prototype,\"transparent\",void 0),r([s({count:4})],g.prototype,\"transparencyPassType\",void 0);export{c as MeasurementArrowTechnique,g as MeasurementArrowTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{s as e,n as t,f as r,c as s,i as n,m as o}from\"../../../../chunks/vec3.js\";import{c as i}from\"../../../../chunks/vec3f64.js\";import{newLayout as a}from\"../../support/buffer/InterleavedLayout.js\";import u from\"../lib/GLMaterial.js\";import{Material as c,materialParametersDefaults as l}from\"../lib/Material.js\";import{MeasurementArrowTechniqueConfiguration as p,MeasurementArrowTechnique as f}from\"../shaders/MeasurementArrowTechnique.js\";class h extends c{constructor(e){super(e,d),this.techniqueConfig=new p}getTechniqueConfig(e,t){var r;return this.techniqueConfig.polygonOffsetEnabled=this.parameters.polygonOffset,this.techniqueConfig.transparent=this.parameters.stripeEvenColor[3]<1||this.parameters.stripeOddColor[3]<1||this.parameters.outlineColor[3]<1,this.techniqueConfig.transparencyPassType=null!=(r=null==t?void 0:t.transparencyPassType)?r:3,this.techniqueConfig}dispose(){}getPassParameters(){return this.parameters}intersect(){}requiresSlot(e){return 2===e}createGLMaterial(e){return 0===e.output?new m(e):null}createBufferWriter(){return new x}}class m extends u{updateParameters(e){return this.ensureTechnique(f,e)}beginSlot(e){return this.updateParameters(e)}bind(e,t){t.bindPass(this._material.getPassParameters(),e)}}const d={width:32,outlineSize:.2,outlineColor:[1,.5,0,1],stripeLength:1,stripeEvenColor:[1,1,1,1],stripeOddColor:[1,.5,0,1],polygonOffset:!1,...l},g=a().vec3f(\"position\").vec3f(\"normal\").vec2f(\"uv0\").f32(\"auxpos1\"),v=i(),C=i(),y=i(),b=i(),q=i();class x{constructor(){this.vertexBufferLayout=g}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){return 2*(e.indices.get(\"position\").length/2+1)}write(i,a,u,c){const l=a.vertexAttributes.get(\"position\").data,p=a.vertexAttributes.get(\"normal\").data,f=l.length/3,h=a&&a.indices&&a.indices.get(\"position\");h&&h.length!==2*(f-1)&&console.warn(\"MeasurementArrowMaterial does not support indices\");const m=v,d=C,g=y,x=b,P=q,w=i.transformation,T=i.invTranspTransformation,j=u.position,L=u.normal,M=u.uv0;let O=0;for(let v=0;v<f;++v){const i=3*v;if(e(m,l[i],l[i+1],l[i+2]),v<f-1){const n=3*(v+1);e(d,l[n],l[n+1],l[n+2]),e(P,p[n],p[n+1],p[n+2]),t(P,P),r(g,d,m),t(g,g),s(x,P,g),t(x,x)}const a=n(m,d);w&&T&&(o(m,m,w),o(d,d,w),o(x,x,T));const u=c+2*v,h=u+1;j.setVec(u,m),j.setVec(h,m),L.setVec(u,x),L.setVec(h,x),M.set(u,0,O),M.set(u,1,-1),M.set(h,0,O),M.set(h,1,1),v<f-1&&(O+=a)}const A=u.auxpos1;for(let e=0;e<2*f;++e)A.set(c+e,O)}}export{h as MeasurementArrowMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Handles.js\";import{applyOpacity as r}from\"../../../../core/mathUtils.js\";import{isNone as t,isSome as s}from\"../../../../core/maybe.js\";import{c as i}from\"../../../../chunks/mat4f64.js\";import{f as o}from\"../../../../chunks/vec3.js\";import{c as a}from\"../../../../chunks/vec3f64.js\";import{c as n}from\"../../../../chunks/vec4f64.js\";import{sv3d as h}from\"../../../../geometry/support/vectorStacks.js\";import{Object3DVisualElement as l}from\"./Object3DVisualElement.js\";import d from\"../../webgl-engine/lib/GeometryUtil.js\";import{MeasurementArrowMaterial as c}from\"../../webgl-engine/materials/MeasurementArrowMaterial.js\";class p extends l{constructor(e){super(e),this._parameters=m,this._handles=null,this._origin=a(),this._originTransform=i(),this._arrowCenter=a(),this._renderOccluded=4,this._geometry=null,this._stripeLength=1,this._stripesEnabled=!0,this._opacity=1,this.applyProps(e)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._arrowMaterial&&this._arrowMaterial.setParameters({renderOccluded:e}))}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.geometryChanged()}get stripeLength(){return this._stripeLength}set stripeLength(e){this._stripeLength=e,this.attached&&this._arrowMaterial.setParameters({stripeLength:this._stripeLength})}get stripesEnabled(){return this._stripesEnabled}set stripesEnabled(e){if(this._stripesEnabled=e,this.attached){const e=this.opacity,{arrowStripeEvenColor:t,arrowStripeOddColor:s}=this._parameters,i=r(_,this._stripesEnabled?t:s,e);this._arrowMaterial.setParameters({stripeEvenColor:i})}}get opacity(){return this._opacity}set opacity(e){e!==this._opacity&&(this._opacity=e,this._updateArrowOpacity())}createExternalResources(){const{arrowStripeEvenColor:r,arrowStripeOddColor:t,arrowOutlineColor:s}=this._parameters,i=this._stripesEnabled?r:t;this._arrowMaterial=new c({outlineColor:s,stripeEvenColor:i,stripeOddColor:t,renderOccluded:this.renderOccluded,polygonOffset:!0}),this._handles=new e,this._handles.add(this.view.state.watch(\"camera\",(()=>{this.viewChanged()})))}destroyExternalResources(){this._arrowMaterial=null,this._handles.destroy(),this._handles=null}forEachExternalMaterial(e){e(this._arrowMaterial)}createGeometries(e){if(t(this._geometry)||t(this._geometry.startRenderSpace)||t(this._geometry.endRenderSpace))return;const r=this._createArrowGeometry(this._geometry.startRenderSpace,this._geometry.endRenderSpace,this._origin,this._geometry);e.addGeometry(r,this._arrowMaterial,this._originTransform),this.viewChanged()}_createArrowGeometry(e,r,t,s){const i=this.view.renderCoordsHelper,a=[],n=[],l=(e,r)=>{const s=h.get();o(s,e,t),a.push(s),n.push(r)};if(\"euclidean\"===s.type){s.eval(.5,this._arrowCenter);const t=h.get();i.worldUpAtPosition(this._arrowCenter,t),l(e,t),l(r,t)}else{s.eval(.5,this._arrowCenter);const e=this._parameters.arrowSubdivisions+1&-2;for(let r=0;r<e;++r){const t=r/(e-1),o=h.get(),a=h.get();s.eval(t,o),i.worldUpAtPosition(o,a),l(o,a)}}return d.createPolylineGeometry(a,n)}geometryChanged(){this.recreateGeometry()}viewChanged(){if(this.view.ready&&this.attached&&s(this._geometry)){const e=this.view.state.camera.computeScreenPixelSizeAt(this._arrowCenter);this._arrowMaterial.setParameters({width:this._parameters.arrowWidth*e})}}_updateArrowOpacity(){const e=this.opacity,{arrowStripeEvenColor:t,arrowStripeOddColor:s,arrowOutlineColor:i}=this._parameters,o=r(_,this._stripesEnabled?t:s,e),a=r(w,i,e),n=r(g,s,e);this._arrowMaterial.setParameters({stripeEvenColor:o,outlineColor:a,stripeOddColor:n})}}const m={arrowWidth:16,arrowOutlineColor:[1,.5,0,1],arrowOutlineWidth:.2,arrowStripeEvenColor:[1,1,1,1],arrowStripeOddColor:[1,.5,0,1],arrowStripeLength:16,arrowSubdivisions:128},_=n(),w=n(),g=n();export{p as MeasurementArrowVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Handles.js\";import{isSome as t}from\"../../../../core/maybe.js\";import{i,a as r,f as s}from\"../../../../chunks/mat4.js\";import{c as a}from\"../../../../chunks/mat4f64.js\";import{i as o,n as l,f as n,g as u,b as h}from\"../../../../chunks/vec3.js\";import{c as d}from\"../../../../chunks/vec3f64.js\";import{c}from\"../../../../chunks/vec4.js\";import{f as _}from\"../../../../chunks/vec4f32.js\";import{sv3d as m}from\"../../../../geometry/support/vectorStacks.js\";import{Object3DVisualElement as p}from\"./Object3DVisualElement.js\";import{Geometry as M}from\"../../webgl-engine/lib/Geometry.js\";import f from\"../../webgl-engine/lib/GeometryUtil.js\";import{ColorMaterial as g}from\"../../webgl-engine/materials/ColorMaterial.js\";import{RibbonLineMaterial as O}from\"../../webgl-engine/materials/RibbonLineMaterial.js\";class y extends p{constructor(t){super(t),this._handles=new e,this._quadMaterial=null,this._outlineMaterial=null,this._maxSize=0,this._position=d(),this._up=d(),this._right=d(),this._renderOccluded=4,this._color=_(1,0,0,1),this._outlineColor=_(0,0,0,1),this._outlineSize=0,this._size=32,this._outlineRenderOccluded=16,this.applyProps(t)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateQuadMaterial())}get color(){return this._color}set color(e){c(this._color,e),this._updateQuadMaterial()}get outlineColor(){return this._outlineColor}set outlineColor(e){c(this._outlineColor,e),this._updateOutlineMaterial()}get outlineSize(){return this._outlineSize}set outlineSize(e){const t=0===this._outlineSize!=(0===e);this._outlineSize=e,t?this.recreateGeometry():this._updateOutlineMaterial()}get size(){return this._size}set size(e){e!==this._size&&(this._size=e,this._updateTransform())}get outlineRenderOccluded(){return this._outlineRenderOccluded}set outlineRenderOccluded(e){this._outlineRenderOccluded=e,this._updateOutlineMaterial()}set geometry({previous:e,center:t,next:i}){this._maxSize=Math.min(o(t,e),o(t,i))/3,l(this._up,n(this._up,e,t)),l(this._right,n(this._right,i,t)),u(this._position,t),this.recreateGeometry()}createExternalResources(){this._quadMaterial=new g(this.quadMaterialParameters),this._outlineMaterial=new O(this.outlineMaterialParameters),this._handles.add(this.view.state.watch(\"camera\",(()=>this._updateTransform())))}destroyExternalResources(){this._quadMaterial=null,this._outlineMaterial=null,this._handles.removeAll()}forEachExternalMaterial(e){e(this._quadMaterial),e(this._outlineMaterial)}createGeometries(e){this._createQuadGeometry(e),this._createOutlineGeometry(e),this._updateTransform(e)}_createQuadGeometry(e){const t=this._quadGeometryData(this._up,this._right);e.addGeometry(t,this._quadMaterial)}_createOutlineGeometry(e){if(0===this._outlineSize)return;const t=h(m.get(),this._up,this._right),i=f.createPolylineGeometry([this._up,t,this._right]);e.addGeometry(i,this._outlineMaterial)}_updateTransform(e=this.object){const a=this.view.state.camera,o=this._size*a.computeScreenPixelSizeAt(this._position),l=Math.min(this._maxSize,o);i(z),r(z,z,this._position),s(z,z,[l,l,l]),t(e)&&(e.transformation=z)}_quadGeometryData(e,t){const i=h(m.get(),e,t);return new M([[\"position\",{size:3,data:[0,0,0,...t,...e,...i],exclusive:!0}]],[[\"position\",new Uint16Array([0,1,2,1,2,3])]])}get quadMaterialParameters(){return{color:this._color,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded}}_updateQuadMaterial(){this._quadMaterial&&this._quadMaterial.setParameters(this.quadMaterialParameters)}get outlineMaterialParameters(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded}}_updateOutlineMaterial(){this._outlineMaterial&&this._outlineMaterial.setParameters(this.outlineMaterialParameters)}}const z=a();export{y as RightAngleQuadVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../intl.js\";import t from\"../../../../core/Accessor.js\";import i from\"../../../../core/Handles.js\";import{nextHighestPowerOfTen as s,deg2rad as n}from\"../../../../core/mathUtils.js\";import{isNone as a,destroyMaybe as r,isSome as o}from\"../../../../core/maybe.js\";import{formatDecimal as l,formatDMS as c,formatImperialLength as h,formatImperialVerticalLength as d,formatMetricLength as u,formatMetricVerticalLength as m}from\"../../../../core/quantityFormatUtils.js\";import{react as g,syncAndInitial as p}from\"../../../../core/reactiveUtils.js\";import{createRenderScreenPointArray3 as _,createRenderScreenPointArray as v}from\"../../../../core/screenUtils.js\";import{preferredImperialLengthUnit as b,convertUnit as L}from\"../../../../core/unitUtils.js\";import{whenOnce as w}from\"../../../../core/watchUtils.js\";import{property as y}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as S}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{k as f}from\"../../../../chunks/vec2.js\";import{a as E,b as P}from\"../../../../chunks/vec3.js\";import{c as V}from\"../../../../chunks/vec3f64.js\";import{f as z}from\"../../../../chunks/vec4f32.js\";import{getReferenceEllipsoid as A}from\"../../../../geometry/projectionEllipsoid.js\";import{screenSpaceTangent as j}from\"../support/viewUtils.js\";import{LabelVisualElement as M,mirrorPosition as D}from\"../../interactive/visualElements/LabelVisualElement.js\";import{LineVisualElement as O}from\"../../interactive/visualElements/LineVisualElement.js\";import{MeasurementArrowVisualElement as C}from\"../../interactive/visualElements/MeasurementArrowVisualElement.js\";import{RightAngleQuadVisualElement as G}from\"../../interactive/visualElements/RightAngleQuadVisualElement.js\";import{GeodesicSegment as x,EuclideanSegment as H}from\"../../interactive/visualElements/support/Segment.js\";import{createStipplePatternSimple as k}from\"../../webgl-engine/materials/lineStippleUtils.js\";import{onLocaleChange as U}from\"../../../../intl/locale.js\";import{fetchMessageBundle as R}from\"../../../../intl/messages.js\";let T=class extends t{constructor(e){super(e),this._params={...Q},this._handles=new i,this._segmentVisualElement=null,this._triangleVisualElement=null,this._rightAngleQuad=null,this._projectedGeodesicLine=null,this._geodesicStartHint=null,this._geodesicEndHint=null,this._segmentLabel=null,this._verticalLabel=null,this._horizontalLabel=null,this._startPosition=V(),this._endPosition=V(),this._cornerPosition=V(),this._startPositionAtSeaLevel=V(),this._endPositionAtSeaLevel=V(),this._state=0,this._triangleOrientationOverride=null,this.messages=null,this.loadingMessages=!0,this.visualElementOrientation=0,this.triangleCollapseRatioThreshold=.03}get ready(){return 1===this._state}get visible(){return this.analysisView.visible}get viewMode(){const{elevationAlignedStartPoint:e,elevationAlignedEndPoint:t}=this.analysisView;if(a(e)||a(t)||e.equals(t))return 0;const i=this.analysisView.result;if(a(i))return 1;if(\"geodesic\"===i.mode)return this._requiresGeodesicGuideAt(this._startPosition)||this._requiresGeodesicGuideAt(this._endPosition)?3:1;const{verticalDistance:s,horizontalDistance:n}=i,r=s.value,o=n.value;return Math.min(r/o,o/r)<this.triangleCollapseRatioThreshold?1:2}get actualVisualizedMeasurement(){if(a(this.analysisView.result))switch(this.analysisView.measurementMode){case 0:case 1:default:return\"euclidean\";case 2:return\"geodesic\"}return this.analysisView.result.mode}get allowVisualElementsOrientationChange(){return a(this._triangleOrientationOverride)}set allowVisualElementsOrientationChange(e){a(this._triangleOrientationOverride)!==e&&(a(this._triangleOrientationOverride)?this._triangleOrientationOverride=this._actualVisualElementsOrientation:this._triangleOrientationOverride=null)}get labels(){const e=\"geodesic\"===this.actualVisualizedMeasurement;return{direct:this._segmentLabel,horizontal:e?this._segmentLabel:this._horizontalLabel,vertical:this._verticalLabel}}get testData(){var e;return{labels:this.labels,stripeLength:null==(e=this._segmentVisualElement)?void 0:e.stripeLength}}initialize(){this._handles.add(w(this.view,\"ready\",(()=>this._initialize()),!0))}_initialize(){switch(this._state){case 1:throw new Error(\"invalid state\");case 2:return}const e=this._params,t={attached:!0,view:this.view};this._segmentVisualElement=new C({...t,geometry:null,renderOccluded:4}),this._triangleVisualElement=new O({...t,width:e.triangleLineWidth,color:e.triangleColor,renderOccluded:4}),this._rightAngleQuad=new G({...t,color:W,renderOccluded:4});const i={...t,polygonOffset:!0,renderOccluded:4};this._projectedGeodesicLine=new O({...i,width:e.geodesicProjectionLineWidth,color:e.geodesicProjectionLineColor,stipplePattern:k(e.guideStippleLengthPixels)}),this._geodesicStartHint=new O({...i,width:e.guideLineWidth,color:e.geodesicProjectionLineColor,stipplePattern:k(e.guideStippleLengthPixels)}),this._geodesicEndHint=new O({...i,width:e.guideLineWidth,color:e.geodesicProjectionLineColor,stipplePattern:k(e.guideStippleLengthPixels)}),this._segmentLabel=new M({...t,fontSize:e.direcLabelFontSize}),this._verticalLabel=new M({...t,fontSize:e.verticalLabelFontSize}),this._horizontalLabel=new M({...t,fontSize:e.horizontalLabelFontSize}),this._handles.add([g((()=>{const{elevationAlignedStartPoint:e,elevationAlignedEndPoint:t}=this.analysisView,i=this.view;return{view:i,camera:i.state.camera,viewMode:this.viewMode,elevationAlignedStartPoint:e,elevationAlignedEndPoint:t,orientation:this._actualVisualElementsOrientation,visualizedMeasurement:this.actualVisualizedMeasurement,stripeLength:this._measurementArrowStripeLength}}),(e=>this._updateGeometryAndViewMode(e)),p),g((()=>({visible:this.visible,viewMode:this.viewMode})),(e=>this._updateVisualElementVisibility(e)),p),g((()=>({text:this._labelsText,visualizedMeasurement:this.actualVisualizedMeasurement})),(e=>this._updateLabelText(e)),p),g((()=>({visible:this.visible,viewMode:this.viewMode,state:this._state})),(e=>this._updateLabelVisibility(e)),p),g((()=>this._measurementArrowStripeLength),(e=>this._updateSegmentStripeLength(e)),p),U((async()=>this._updateMessageBundle()))]),this._state=1,this._updateMessageBundle()}destroy(){2!==this._state&&(this._handles=r(this._handles),this._segmentVisualElement=r(this._segmentVisualElement),this._triangleVisualElement=r(this._triangleVisualElement),this._rightAngleQuad=r(this._rightAngleQuad),this._projectedGeodesicLine=r(this._projectedGeodesicLine),this._geodesicStartHint=r(this._geodesicStartHint),this._geodesicEndHint=r(this._geodesicEndHint),this._segmentLabel=r(this._segmentLabel),this._verticalLabel=r(this._verticalLabel),this._horizontalLabel=r(this._horizontalLabel),this.set(\"view\",null),this._state=2)}async whenReady(){await w(this,\"ready\")}_updateVisualElementVisibility({visible:e,viewMode:t}){if(this._segmentVisualElement.visible=!1,this._triangleVisualElement.visible=!1,this._rightAngleQuad.visible=!1,this._projectedGeodesicLine.visible=!1,this._geodesicStartHint.visible=!1,this._geodesicEndHint.visible=!1,e)switch(t){case 0:break;case 1:this._segmentVisualElement.visible=!0;break;case 2:this._segmentVisualElement.visible=!0,this._triangleVisualElement.visible=!0,this._rightAngleQuad.visible=!0;break;case 3:this._segmentVisualElement.visible=!0,this._projectedGeodesicLine.visible=!0,this._geodesicStartHint.visible=!0,this._geodesicEndHint.visible=!0}}_updateGeometryAndViewMode({view:e,camera:t,viewMode:i,elevationAlignedStartPoint:s,elevationAlignedEndPoint:n,orientation:r,visualizedMeasurement:o,stripeLength:l}){const c=e.renderCoordsHelper;if(a(s)||a(n)||s.equals(n))return;let h=this._startPosition,d=this._endPosition;c.toRenderCoords(s,h),c.toRenderCoords(n,d);const u=1===r?1:-1,m=u*(c.getAltitude(d)-c.getAltitude(h));m<0&&(h=this._endPosition,d=this._startPosition);const g=\"geodesic\"===o?new x(this._startPosition,this._endPosition,c.spatialReference):new H(this._startPosition,this._endPosition);switch(this._segmentVisualElement.geometry=g,this._updateSegmentStripeLength(l),i){case 1:this._updateSegment(g,r);break;case 2:this._updateSegmentAndTriangle({view:e,camera:t,segment:g,orientation:r,startPosition:h,endPosition:d,deltaSign:u,altitudeDelta:m});break;case 3:this._updateSegmentAndProjection({view:e,orientation:r,startPosition:h,endPosition:d})}}_updateSegment(e,t){this._segmentLabel.anchor=1===t?\"top\":\"bottom\",this._segmentLabel.geometry={type:\"segment\",segment:e,sampleLocation:\"center\"}}_updateSegmentAndTriangle({view:{renderCoordsHelper:e},camera:t,segment:i,orientation:s,startPosition:n,endPosition:a,deltaSign:r,altitudeDelta:o}){const l=this._cornerPosition;e.worldUpAtPosition(n,l),E(l,l,r*Math.abs(o)),P(l,l,n),this._triangleVisualElement.geometry=[[[n[0],n[1],n[2]],[l[0],l[1],l[2]],[a[0],a[1],a[2]]]],this._rightAngleQuad.geometry={previous:n,center:l,next:a};const c=new H(n,l),h=new H(l,a),d=F(n,a,l,s,t);this._segmentLabel.anchor=d.segment,this._segmentLabel.geometry={type:\"segment\",segment:i,sampleLocation:\"center\"},this._verticalLabel.geometry={type:\"segment\",segment:c,sampleLocation:\"center\"},this._verticalLabel.anchor=d.vertical,this._horizontalLabel.geometry={type:\"segment\",segment:h,sampleLocation:\"center\"},this._horizontalLabel.anchor=d.horizontal}_updateSegmentAndProjection({view:{renderCoordsHelper:e},orientation:t,startPosition:i,endPosition:s}){e.setAltitude(this._startPositionAtSeaLevel,0,i),e.setAltitude(this._endPositionAtSeaLevel,0,s);const n=new x(this._startPositionAtSeaLevel,this._endPositionAtSeaLevel,e.spatialReference);this._projectedGeodesicLine.setGeometryFromSegment(n),this._geodesicStartHint.setGeometryFromSegment(new H(this._startPositionAtSeaLevel,i)),this._geodesicEndHint.setGeometryFromSegment(new H(this._endPositionAtSeaLevel,s)),this._segmentLabel.geometry={type:\"segment\",segment:n,sampleLocation:\"center\"},this._segmentLabel.anchor=1===t?\"top\":\"bottom\"}_updateLabelText({text:e,visualizedMeasurement:t}){o(e)?(this._segmentLabel.text=\"euclidean\"===t?e.euclideanDistance:e.geodesicDistance,this._horizontalLabel.text=e.horizontalDistance,this._verticalLabel.text=e.verticalDistance):(this._segmentLabel.text=null,this._horizontalLabel.text=null,this._verticalLabel.text=null),this.notifyChange(\"labels\")}_updateLabelVisibility({state:e,visible:t,viewMode:i}){if(1!==e)return;const s=this._segmentLabel,n=this._horizontalLabel,a=this._verticalLabel;if(s.visible=!1,n.visible=!1,a.visible=!1,t)switch(i){case 1:case 3:s.visible=!0;break;case 2:s.visible=!0,n.visible=!0,a.visible=!0}}get _labelsText(){if(1!==this._state)return null;const e=this.messages,t=this.analysisView.result;if(a(t)||a(e))return null;const{directDistance:i,horizontalDistance:s,verticalDistance:n,geodesicDistance:r,geodesicAngle:o}=t,g=this.analysisView.unit,p=e=>({euclideanDistance:\"\",geodesicDistance:\"\",horizontalDistance:\"\",verticalDistance:\"\",...e});switch(g){case\"metric\":return p({euclideanDistance:i&&u(e,i),geodesicDistance:r&&u(e,r),horizontalDistance:s&&u(e,s),verticalDistance:n&&m(e,n)});case\"imperial\":return p({euclideanDistance:i&&h(e,i),geodesicDistance:r&&h(e,r),horizontalDistance:s&&h(e,s),verticalDistance:n&&d(e,n)});case\"degrees\":{const t=o&&l(e,o,\"degrees\");return p({euclideanDistance:t,geodesicDistance:t,horizontalDistance:t})}case\"degrees-minutes-seconds\":return p({horizontalDistance:o&&c(o)});default:return p({euclideanDistance:i&&l(e,i,g),geodesicDistance:r&&l(e,r,g),horizontalDistance:s&&l(e,s,g),verticalDistance:n&&l(e,n,g)})}}_updateSegmentStripeLength(e){const t=this._segmentVisualElement;o(e)?(t.stripeLength=e,t.stripesEnabled=!0):t.stripesEnabled=!1}get _actualVisualElementsOrientation(){if(o(this._triangleOrientationOverride))return this._triangleOrientationOverride;const e=this.visualElementOrientation;return 0===e?this.view.state.camera.aboveGround?1:2:e}_requiresGeodesicGuideAt(e){const t=this.view;if(null==t||!t.state)return!1;const i=t.state.camera,s=t.renderCoordsHelper,n=i.computeScreenPixelSizeAt(e);return s.getAltitude(e)/n>=10}get _measurementArrowStripeLength(){const{result:e,unit:t}=this.analysisView;if(a(e))return null;let i=null;const n=e.directDistance;switch(t){case\"metric\":i=n&&n.toUnit(\"meters\");break;case\"imperial\":i=n&&n.toUnit(b(n.value,n.unit));break;case\"degrees\":case\"degrees-minutes-seconds\":{const t=e.geodesicAngle;i=t&&t.toUnit(\"degrees\");break}default:i=n&&n.toUnit(t)}if(a(i))return null;return s(i.value/30)*(\"degrees\"===i.unit?A(this.view.spatialReference).metersPerDegree:L(1,i.unit,\"meters\"))}_updateMessageBundle(){this.loadingMessages=!0,R(\"esri/core/t9n/Units\").then((e=>{this.messages=e})).finally((()=>{this.loadingMessages=!1}))}};function F(e,t,i,s,n){const a=B,r=I;n.projectToRenderScreen(i,a),n.projectToRenderScreen(t,r);const o={segment:\"bottom\",horizontal:\"top\",vertical:a[0]<r[0]?\"left\":\"right\"};{const s=J,a=K;if(j(e,i,s,n),j(e,t,a,n),f(s,a)>=q){const e=Math.sign(s[1])===Math.sign(a[1]);o.segment=e?D(o.vertical):o.vertical}else{const e=N;j(i,t,e,n),f(e,a)>=q&&(o.segment=Math.sign(e[0])===Math.sign(a[0])?D(o.horizontal):o.horizontal)}}if(2===s){const e=e=>\"top\"===e?\"bottom\":\"top\";o.segment=e(o.segment),o.horizontal=e(o.horizontal),o.vertical=e(o.vertical)}return o}e([y()],T.prototype,\"_state\",void 0),e([y()],T.prototype,\"_triangleOrientationOverride\",void 0),e([y()],T.prototype,\"messages\",void 0),e([y()],T.prototype,\"view\",void 0),e([y()],T.prototype,\"analysis\",void 0),e([y()],T.prototype,\"analysisView\",void 0),e([y()],T.prototype,\"ready\",null),e([y()],T.prototype,\"loadingMessages\",void 0),e([y()],T.prototype,\"visible\",null),e([y()],T.prototype,\"viewMode\",null),e([y()],T.prototype,\"actualVisualizedMeasurement\",null),e([y()],T.prototype,\"visualElementOrientation\",void 0),e([y()],T.prototype,\"triangleCollapseRatioThreshold\",void 0),e([y()],T.prototype,\"allowVisualElementsOrientationChange\",null),e([y()],T.prototype,\"labels\",null),e([y()],T.prototype,\"testData\",null),e([y()],T.prototype,\"_labelsText\",null),e([y()],T.prototype,\"_actualVisualElementsOrientation\",null),e([y()],T.prototype,\"_measurementArrowStripeLength\",null),T=e([S(\"esri.views.3d.analysis.DirectLineMeasurement.DirectLineMeasurementVisualization\")],T);const W=z(1,.5,0,.75),Q={laserLineGlowColor:[1,.5,0],laserLineGlowWidth:8,laserLineGlowFalloff:8,laserLineInnerColor:[1,1,1],laserLineInnerWidth:.75,laserLineGlobalAlpha:.75,laserLineEnabled:!0,handleColor:[1,.5,0],handleOpacity:.5,handleRadius:5,triangleColor:W,triangleLineWidth:3,triangleCornerSize:32,triangleSubdivisions:128,arrowWidth:16,arrowOutlineColor:[1,.5,0,1],arrowOutlineWidth:.2,arrowStripeEvenColor:[1,1,1,1],arrowStripeOddColor:[1,.5,0,1],arrowStripeLength:16,arrowSubdivisions:128,geodesicProjectionLineWidth:2,geodesicProjectionLineColor:W,guideLineWidth:2,guideLineColor:W,guideStippleLengthPixels:6,labelDistance:25,direcLabelFontSize:16,horizontalLabelFontSize:12,verticalLabelFontSize:12},q=Math.cos(n(12)),B=_(),I=_(),J=v(),K=v(),N=v();export{T as DirectLineMeasurementVisualization};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/Accessor.js\";import{destroyMaybe as i,unwrapOr as a}from\"../../../../core/maybe.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{defaultUnitPropertyMetadata as n}from\"../../../../properties/defaultUnit.js\";import{AnalysisView3D as o}from\"../AnalysisView3D.js\";import{DirectLineMeasurementController as r}from\"./DirectLineMeasurementController.js\";import{DirectLineMeasurementVisualization as u}from\"./DirectLineMeasurementVisualization.js\";let p=class extends(o(e)){constructor(t){super(t),this.type=\"direct-line-measurement-view-3d\",this.result=null,this.measurementMode=0,this.elevationAlignedStartPoint=null,this.elevationAlignedEndPoint=null}initialize(){const t=this.view,e=this.analysis;this._analysisVisualization=new u({view:t,analysis:e,analysisView:this}),this._analysisController=new r({view:t,analysis:e,viewData:this})}destroy(){this._analysisController=i(this._analysisController),this._analysisVisualization=i(this._analysisVisualization)}whenReady(){return this._analysisVisualization.whenReady()}get updating(){var t;return!(null==(t=this._analysisVisualization)||!t.loadingMessages)}get viewMode(){return this._analysisVisualization.viewMode}get visualizedMeasurement(){return this.measurementMode}set visualizedMeasurement(t){this.measurementMode=t}get actualVisualizedMeasurement(){return this._analysisVisualization.actualVisualizedMeasurement}get visualElementOrientation(){return this._analysisVisualization.visualElementOrientation}set visualElementOrientation(t){this._analysisVisualization.visualElementOrientation=t}get allowVisualElementsOrientationChange(){return this._analysisVisualization.allowVisualElementsOrientationChange}set allowVisualElementsOrientationChange(t){this._analysisVisualization.allowVisualElementsOrientationChange=t}get triangleCollapseRatioThreshold(){return this._analysisVisualization.triangleCollapseRatioThreshold}set triangleCollapseRatioThreshold(t){this._analysisVisualization.triangleCollapseRatioThreshold=t}get directLabelText(){return this._analysisVisualization.labels.direct.text}get horizontalLabelText(){return this._analysisVisualization.labels.horizontal.text}get verticalLabelText(){return this._analysisVisualization.labels.vertical.text}get testData(){var t;return this.destroyed?{labels:null,stripeLength:null,visualization:null,controller:null}:{...null==(t=this._analysisVisualization)?void 0:t.testData,visualization:this._analysisVisualization,controller:this._analysisController}}get unit(){return a(this.analysis.unit,this._defaultUnit)}};t([s()],p.prototype,\"updating\",null),t([s()],p.prototype,\"type\",void 0),t([s()],p.prototype,\"analysis\",void 0),t([s()],p.prototype,\"result\",void 0),t([s()],p.prototype,\"measurementMode\",void 0),t([s()],p.prototype,\"elevationAlignedStartPoint\",void 0),t([s()],p.prototype,\"elevationAlignedEndPoint\",void 0),t([s({readOnly:!0})],p.prototype,\"viewMode\",null),t([s()],p.prototype,\"visualizedMeasurement\",null),t([s({readOnly:!0})],p.prototype,\"actualVisualizedMeasurement\",null),t([s()],p.prototype,\"visualElementOrientation\",null),t([s()],p.prototype,\"allowVisualElementsOrientationChange\",null),t([s()],p.prototype,\"triangleCollapseRatioThreshold\",null),t([s({readOnly:!0})],p.prototype,\"directLabelText\",null),t([s({readOnly:!0})],p.prototype,\"horizontalLabelText\",null),t([s({readOnly:!0})],p.prototype,\"verticalLabelText\",null),t([s()],p.prototype,\"testData\",null),t([s()],p.prototype,\"_analysisVisualization\",void 0),t([s()],p.prototype,\"_analysisController\",void 0),t([s()],p.prototype,\"unit\",null),t([s(n)],p.prototype,\"_defaultUnit\",void 0),p=t([l(\"esri.views.3d.analysis.DirectLineMeasurement.DirectLineMeasurementView3D\")],p);const y=p;export{y as default};\n"],"sourceRoot":""}