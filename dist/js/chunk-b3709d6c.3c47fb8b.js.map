{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js","webpack:///./node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js","webpack:///./node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js","webpack:///./node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js","webpack:///./node_modules/@arcgis/core/layers/ogc/dateUtils.js","webpack:///./node_modules/@arcgis/core/layers/ogc/wfsUtils.js","webpack:///./node_modules/@arcgis/core/layers/ogc/xmlUtils.js","webpack:///./node_modules/@arcgis/core/layers/graphics/sources/WFSSourceWorker.js","webpack:///./node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js","webpack:///./node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js"],"names":["d","n","minX","minY","maxX","maxY","t","i","s","search","e","this","_indexInvalid","_boundsToLoad","_boundsById","Map","_idByBounds","_index","_loadIndex","Array","size","forEach","clear","load","length","filter","has","get","delete","remove","set","push","o","code","description","l","error","globalId","objectId","success","uniqueId","u","a","c","f","Set","r","m","name","message","details","field","originalValue","sanitizedValue","add","editable","requiredFields","parseFloat","String","p","h","TypeError","simplify","async","g","y","getObjectId","getAttributes","attributes","getAttribute","cloneWithGeometry","getGeometry","geometry","getCentroid","centroid","hasZ","hasM","geometryInfo","_boundsStore","_featuresById","_markedIds","events","featureAdapter","geometryType","numFeatures","Math","min","max","coords","featureCount","vertexCount","_add","_emitChanged","_remove","invalidateIndex","forEachInBounds","emit","getLogger","feature","displayId","onFeatureAdd","onFeatureRemove","Date","getTime","Number","isNaN","exec","groups","year","month","day","hours","minutes","seconds","ms","T","padEnd","substring","N","isUTC","UTC","offsetSign","offsetHours","offsetMinutes","S","x","v","C","E","P","R","j","A","G","k","U","D","I","responseType","query","SERVICE","REQUEST","VERSION","customParameters","signal","data","$","te","ne","ae","firstElementChild","M","operations","L","from","readFeatureTypes","O","GetCapabilities","url","DescribeFeatureType","GetFeature","outputFormat","supportsPagination","OperationsMetadata","Operation","DCP","HTTP","Get","Parameter","AllowedValues","Value","textContent","toLowerCase","Constraint","DefaultValue","FeatureTypeList","FeatureType","typeName","title","extent","namespacePrefix","namespaceUri","supportedSpatialReferences","parseInt","match","wkid","Name","prefix","re","lookupNamespaceURI","Abstract","Title","WGS84BoundingBox","V","DefaultSRS","DefaultCRS","OtherSRS","OtherCRS","children","localName","split","map","xmin","ymin","xmax","ymax","spatialReference","W","X","featureType","Y","fields","swapXY","objectIdField","geometryField","q","WGS84","wfsCapabilities","next","value","J","_","errors","z","find","type","alias","unshift","Promise","all","K","count","Z","features","fromJSON","coordinates","toFixed","Q","TYPENAME","element","complexType","B","document","XMLSerializer","serializeToString","H","complexContent","extension","sequence","hasAttribute","simpleType","restriction","maxLength","nullable","replace","dateFields","JSON","parse","response","TYPENAMES","OUTPUTFORMAT","SRSNAME","STARTINDEX","startIndex","COUNT","DOMParser","parseFromString","trim","Exception","ExceptionText","_queryEngine","_customParameters","_snapshotFeatures","_getFeatureUrl","_featureType","_getFeatureOutputFormat","fieldsIndex","_fieldsIndex","destroy","getFeatureUrl","getFeatureOutputFormat","_checkProjection","timeInfo","featureStore","addMany","fullExtent","_waitSnapshotComplete","executeQuery","executeQueryForCount","executeQueryForIds","executeQueryForExtent","executeQueryForSnapping","_snapshotTask","abort","promise","then","finished","compareMinX","compareMinY","toBBox","_maxEntries","_minEntries","ceil","_initFormat","prune","_all","leaf","pop","insert","_build","slice","height","_splitRoot","_insert","b","indexHint","splice","_condense","pushArray","log","sqrt","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","console","_allDistMargin","sort","Function","join","deallocator","w","super","arguments","LineString","MultiLineString","MultiPoint","Point","Polygon","MultiPolygon","properties","id","F","lengths","crs","RegExp","test","Object","keys","objectIdFieldName","objectIdFieldType","unknownFields"],"mappings":"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","file":"js/chunk-b3709d6c.3c47fb8b.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport i from\"../../../core/has.js\";import{PooledRBush as s}from\"../../../core/libs/rbush/PooledRBush.js\";const d=5e4,n={minX:0,minY:0,maxX:0,maxY:0};function t(i,s,d){n.minX=s[0],n.minY=s[1],n.maxX=s[2],n.maxY=s[3],i.search(n,d)}class e{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new s(9,i(\"esri-csp-restrictions\")?i=>({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}):[\"[0]\",\"[1]\",\"[2]\",\"[3]\"]),this._loadIndex=()=>{if(this._indexInvalid){const i=new Array(this._idByBounds.size);let s=0;this._idByBounds.forEach(((d,n)=>{i[s++]=n})),this._indexInvalid=!1,this._index.clear(),this._index.load(i)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((i=>this._idByBounds.has(i)))),this._boundsToLoad.length=0)}}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(i){const s=this._boundsById.get(i);this._boundsById.delete(i),s&&(this._idByBounds.delete(s),this._indexInvalid||this._index.remove(s))}forEachInBounds(i,s){this._loadIndex(),t(this._index,i,(i=>s(this._idByBounds.get(i))))}get(i){return this._boundsById.get(i)}has(i){return this._boundsById.has(i)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(i,s){if(!this._indexInvalid){const s=this._boundsById.get(i);s&&(this._index.remove(s),this._idByBounds.delete(s))}this._boundsById.set(i,s),s&&(this._idByBounds.set(s,i),this._indexInvalid||(this._boundsToLoad.push(s),this._boundsToLoad.length>d&&this._loadIndex()))}}export{e as BoundsStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isValid as e}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{sanitizeNullFieldValue as t,validateFieldValue as n,validationErrorToString as i,isNumericField as r,isStringField as s}from\"../../../support/fieldUtils.js\";class o{constructor(){this.code=null,this.description=null}}class l{constructor(e){this.error=new o,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e}}function u(e){return new l(e)}class a{constructor(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e}}function c(e){return new a(e)}const f=new Set;function d(e,t,r,s=!1,o){f.clear();for(const l in r){const a=e.get(l);if(!a)continue;const c=r[l],d=m(a,c);if(d!==c&&o&&o.push({name:\"invalid-value-type\",message:\"attribute value was converted to match the field type\",details:{field:a,originalValue:c,sanitizedValue:d}}),f.add(a.name),a&&(s||a.editable)){const e=n(a,d);if(e)return u(i(e,a,d));t[a.name]=d}}for(const n of e.requiredFields)if(!f.has(n.name))return u(`missing required field \"${n.name}\"`);return null}function m(e,n){let i=n;return\"string\"==typeof n&&r(e)?i=parseFloat(n):null!=n&&s(e)&&\"string\"!=typeof n&&(i=String(n)),t(i)}let p;function h(t,n){if(!t||!e(n))return t;if(\"rings\"in t||\"paths\"in t){if(!p)throw new TypeError(\"geometry engine not loaded\");return p.simplify(n,t)}return t}async function g(){return p||(p=await import(\"../../../../geometry/geometryEngineJSON.js\"),p)}async function y(t,n){!e(t)||\"esriGeometryPolygon\"!==n&&\"esriGeometryPolyline\"!==n||await g()}export{u as createFeatureEditErrorResult,c as createFeatureEditSuccessResult,g as loadGeometryEngine,y as loadGeometryEngineForSimplify,d as mixAttributes,h as simplify};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{getCentroidOptimizedGeometry as t}from\"../centroid.js\";import e from\"../OptimizedFeature.js\";import r from\"../OptimizedGeometry.js\";const o={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(t,r)=>new e(r,t.attributes,null,t.objectId),getGeometry:t=>t.geometry,getCentroid:(e,o)=>(e.centroid||(e.centroid=t(new r,e.geometry,o.hasZ,o.hasM)),e.centroid)};export{o as default,o as optimizedFeatureQueryEngineAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import t from\"../../../core/Evented.js\";import r from\"../../../core/Logger.js\";import{isSome as s,isNone as o}from\"../../../core/maybe.js\";import{fromRect as i}from\"../../../geometry/support/aaBoundingBox.js\";import{create as a,NEGATIVE_INFINITY as d}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as n}from\"../featureConversionUtils.js\";import{BoundsStore as h}from\"./BoundsStore.js\";import{optimizedFeatureQueryEngineAdapter as u}from\"./optimizedFeatureQueryEngineAdapter.js\";class m{constructor(e){this.geometryInfo=e,this._boundsStore=new h,this._featuresById=new Map,this._markedIds=new Set,this.events=new t,this.featureAdapter=u}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){if(!this.numFeatures)return null;const e=a(d);return this._featuresById.forEach((t=>{const r=this._boundsStore.get(t.objectId);r&&(e[0]=Math.min(r[0],e[0]),e[1]=Math.min(r[1],e[1]),e[2]=Math.max(r[2],e[2]),e[3]=Math.max(r[3],e[3]))})),e}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{s(t.geometry)&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t,r){for(const s of e){const e=this._boundsStore.get(s.objectId);e&&t(i(r,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach(((t,r)=>{this._markedIds.has(r)||(e=!0,this._remove(t))})),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit(\"changed\",void 0)}_add(t){if(!t)return;const i=t.objectId;if(null==i)return void r.getLogger(\"esri.layers.graphics.data.FeatureStore\").error(new e(\"featurestore:invalid-feature\",\"feature id is missing\",{feature:t}));const d=this._featuresById.get(i);let h;if(this._markedIds.add(i),d?(t.displayId=d.displayId,h=this._boundsStore.get(i),this._boundsStore.delete(i)):s(this.onFeatureAdd)&&this.onFeatureAdd(t),o(t.geometry)||!t.geometry.coords||!t.geometry.coords.length)return this._boundsStore.set(i,null),void this._featuresById.set(i,t);h=n(s(h)?h:a(),t.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),s(h)&&this._boundsStore.set(i,h),this._featuresById.set(i,t)}_remove(e){return s(this.onFeatureRemove)&&this.onFeatureRemove(e),this._markedIds.delete(e.objectId),this._boundsStore.delete(e.objectId),this._featuresById.delete(e.objectId),e}}export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction n(n){var s;return null!=(s=t(n))?s:e(n)}function e(n){const e=new Date(n).getTime();return Number.isNaN(e)?null:e}function t(n){var e,t,u,r;const o=s.exec(n);if(!o)return null;const l=o.groups,f=+l.year,i=+l.month-1,d=+l.day,a=+(null!=(e=l.hours)?e:\"0\"),c=+(null!=(t=l.minutes)?t:\"0\"),m=+(null!=(u=l.seconds)?u:\"0\");if(a>23)return null;if(c>59)return null;if(m>59)return null;const g=null!=(r=l.ms)?r:\"0\",T=g?+g.padEnd(3,\"0\").substring(0,3):0;let N;if(l.isUTC)N=Date.UTC(f,i,d,a,c,m,T);else if(l.offsetSign){const n=+l.offsetHours,e=+l.offsetMinutes;N=6e4*(\"+\"===l.offsetSign?-1:1)*(60*n+e)+Date.UTC(f,i,d,a,c,m,T)}else N=new Date(f,i,d,a,c,m,T).getTime();return Number.isNaN(N)?null:N}const s=/^(?:(?<year>-?\\d{4,})-(?<month>\\d{2})-(?<day>\\d{2}))(?:T(?<hours>\\d{2}):(?<minutes>\\d{2}):(?<seconds>\\d{2})(?:\\.(?<ms>\\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\\+|-)(?<offsetHours>\\d{2}):(?<offsetMinutes>\\d{2})))?$/;export{n as parseDate,e as parseJSDate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import e from\"../../request.js\";import t from\"../../core/Error.js\";import{find as r,cache as n}from\"../../core/iteratorUtils.js\";import{isNone as a,isSome as o}from\"../../core/maybe.js\";import{eachAlways as i}from\"../../core/promiseUtils.js\";import{isHTTPSProtocol as s,hasSameOrigin as u,toHTTPS as l}from\"../../core/urlUtils.js\";import{initializeProjection as p,project as c}from\"../../geometry/projection.js\";import{WGS84 as m,equals as y}from\"../../geometry/support/spatialReferenceUtils.js\";import{featureGeometryTypeKebabDictionary as f}from\"../../geometry/support/typeUtils.js\";import{getGeometryType as d}from\"../graphics/sources/geojson/geojson.js\";import{parseDate as g}from\"./dateUtils.js\";import{iterateXML as w,visitXML as b}from\"./xmlUtils.js\";import h from\"../support/Field.js\";import T from\"../../geometry/SpatialReference.js\";import F from\"../../geometry/Extent.js\";const S=\"xlink:href\",x=\"2.0.0\",v=\"__esri_wfs_id__\",C=\"wfs-layer:getWFSLayerTypeInfo-error\",E=\"wfs-layer:empty-service\",N=\"wfs-layer:feature-type-not-found\",P=\"wfs-layer:geojson-not-supported\",R=\"wfs-layer:kvp-encoding-not-supported\",j=\"wfs-layer:malformed-json\",A=\"wfs-layer:unknown-geometry-type\",G=\"wfs-layer:unknown-field-type\",k=\"wfs-layer:unsupported-spatial-reference\",U=\"wfs-layer:unsupported-wfs-version\";async function D(t,r){const n=I((await e(t,{responseType:\"text\",query:{SERVICE:\"WFS\",REQUEST:\"GetCapabilities\",VERSION:x,...null==r?void 0:r.customParameters},signal:null==r?void 0:r.signal})).data);return $(t,n),n}function I(e){const t=te(e);ne(t),ae(t);const r=t.firstElementChild,a=n(M(r));return{operations:L(r),get featureTypes(){return Array.from(a())},readFeatureTypes:a}}const O=new Set([\"json\",\"application/json\",\"geojson\",\"application/json; subtype=geojson\"]);function L(e){let r=!1;const n={GetCapabilities:{url:\"\"},DescribeFeatureType:{url:\"\"},GetFeature:{url:\"\",outputFormat:null,supportsPagination:!1}};if(b(e,{OperationsMetadata:{Operation:e=>{switch(e.getAttribute(\"name\")){case\"GetCapabilities\":return{DCP:{HTTP:{Get:e=>{n.GetCapabilities.url=e.getAttribute(S)}}}};case\"DescribeFeatureType\":return{DCP:{HTTP:{Get:e=>{n.DescribeFeatureType.url=e.getAttribute(S)}}}};case\"GetFeature\":return{DCP:{HTTP:{Get:e=>{n.GetFeature.url=e.getAttribute(S)}}},Parameter:e=>{if(\"outputFormat\"===e.getAttribute(\"name\"))return{AllowedValues:{Value:e=>{const t=e.textContent;O.has(t.toLowerCase())&&(n.GetFeature.outputFormat=t)}}}}}}},Constraint:e=>{switch(e.getAttribute(\"name\")){case\"KVPEncoding\":return{DefaultValue:e=>{r=\"true\"===e.textContent.toLowerCase()}};case\"ImplementsResultPaging\":return{DefaultValue:e=>{n.GetFeature.supportsPagination=\"true\"===e.textContent.toLowerCase()}}}}}}),!r)throw new t(R,\"WFS service doesn't support key/value pair (KVP) encoding\");if(a(n.GetFeature.outputFormat))throw new t(P,\"WFS service doesn't support GeoJSON output format\");return n}function $(e,t){s(e)&&(u(e,t.operations.DescribeFeatureType.url,!0)&&(t.operations.DescribeFeatureType.url=l(t.operations.DescribeFeatureType.url)),u(e,t.operations.GetFeature.url,!0)&&(t.operations.GetFeature.url=l(t.operations.GetFeature.url)))}function M(e){return w(e,{FeatureTypeList:{FeatureType:e=>{const t={typeName:\"undefined:undefined\",name:\"\",title:\"\",description:\"\",extent:null,namespacePrefix:\"\",namespaceUri:\"\",supportedSpatialReferences:[]},r=new Set([4326]),n=e=>{var t,n;const a=parseInt(null==(t=e.textContent.match(/(?<wkid>\\d+$)/i))||null==(n=t.groups)?void 0:n.wkid,10);Number.isNaN(a)||r.add(a)};return b(e,{Name:e=>{const{name:r,prefix:n}=re(e.textContent);t.typeName=`${n}:${r}`,t.name=r,t.namespacePrefix=n,t.namespaceUri=e.lookupNamespaceURI(n)},Abstract:e=>{t.description=e.textContent},Title:e=>{t.title=e.textContent},WGS84BoundingBox:e=>{t.extent=V(e)},DefaultSRS:n,DefaultCRS:n,OtherSRS:n,OtherCRS:n}),t.title||(t.title=t.name),t.supportedSpatialReferences.push(...r),t}}})}function V(e){let t,r,n,a;for(const o of e.children)switch(o.localName){case\"LowerCorner\":[t,r]=o.textContent.split(\" \").map((e=>Number.parseFloat(e)));break;case\"UpperCorner\":[n,a]=o.textContent.split(\" \").map((e=>Number.parseFloat(e)))}return{xmin:t,ymin:r,xmax:n,ymax:a,spatialReference:m}}function W(e,t,n){return r(e,(e=>n?e.name===t&&e.namespaceUri===n:e.typeName===t||e.name===t))}async function X(e,t,r,n={}){var a;const{featureType:o,extent:i}=await Y(e,t,r,n),{fields:s,geometryType:u,swapXY:l,objectIdField:p,geometryField:c}=await q(e,o.typeName,n);return{url:e.operations.GetCapabilities.url,name:o.name,namespaceUri:o.namespaceUri,fields:s,geometryField:c,geometryType:u,objectIdField:p,spatialReference:null!=(a=n.spatialReference)?a:T.WGS84,extent:i,swapXY:l,wfsCapabilities:e,customParameters:n.customParameters}}async function Y(e,r,n,o={}){const{spatialReference:i=T.WGS84}=o,s=e.readFeatureTypes(),u=r?W(s,r,n):s.next().value;if(a(u))throw r?new t(N,`The type '${r}' could not be found in the service`):new t(E,\"The service is empty\");let l=new F({...u.extent,spatialReference:i});if(!y(i,m))try{await p(m,i,void 0,o),l=c(l,m)}catch{throw new t(k,\"Projection not supported\")}return{extent:l,spatialReference:i,featureType:u}}async function q(e,r,n={}){const[o,s]=await i([J(e.operations.DescribeFeatureType.url,r,n),_(e,r,n)]);if(o.error||s.error)throw new t(C,`An error occurred while getting info about the feature type '${r}'`,{error:o.error||s.error});const{fields:u,errors:l}=o.value,p=o.value.geometryType||s.value.geometryType,c=s.value.swapXY;if(a(p))throw new t(A,`The geometry type could not be determined for type '${r}`,{typeName:r,geometryType:p,fields:u,errors:l});return{...z(u),geometryType:p,swapXY:c}}function z(e){var t;const r=e.find((e=>\"geometry\"===e.type));let n=e.find((e=>\"oid\"===e.type));return e=e.filter((e=>\"geometry\"!==e.type)),n||(n=new h({name:v,type:\"oid\",alias:v}),e.unshift(n)),{geometryField:null!=(t=null==r?void 0:r.name)?t:null,objectIdField:n.name,fields:e}}async function _(t,r,n={}){var a;let o,i=!1;const[s,u]=await Promise.all([K(t.operations.GetFeature.url,r,t.operations.GetFeature.outputFormat,{...n,count:1}),e(t.operations.GetFeature.url,{responseType:\"text\",query:Z(r,void 0,{...n,count:1}),signal:null==n?void 0:n.signal})]),l=\"FeatureCollection\"===s.type&&(null==(a=s.features[0])?void 0:a.geometry);if(l){let e;switch(o=f.fromJSON(d(l.type)),l.type){case\"Point\":e=l.coordinates;break;case\"LineString\":case\"MultiPoint\":e=l.coordinates[0];break;case\"MultiLineString\":case\"Polygon\":e=l.coordinates[0][0];break;case\"MultiPolygon\":e=l.coordinates[0][0][0]}const t=/<[^>]*pos[^>]*> *(-?\\d+(?:\\.\\d+)?) (-?\\d+(?:\\.\\d+)?)/.exec(u.data);if(t){const r=e[0].toFixed(3),n=e[1].toFixed(3),a=parseFloat(t[1]).toFixed(3);r===parseFloat(t[2]).toFixed(3)&&n===a&&(i=!0)}}return{geometryType:o,swapXY:i}}async function J(t,r,n){return Q(r,(await e(t,{responseType:\"text\",query:{SERVICE:\"WFS\",REQUEST:\"DescribeFeatureType\",VERSION:x,TYPENAME:r,...null==n?void 0:n.customParameters},signal:null==n?void 0:n.signal})).data)}function Q(e,n){const{name:a}=re(e),i=te(n);ae(i);const s=r(w(i.firstElementChild,{element:e=>({name:e.getAttribute(\"name\"),typeName:re(e.getAttribute(\"type\")).name})}),(({name:e})=>e===a));if(o(s)){const e=r(w(i.firstElementChild,{complexType:e=>e}),(e=>e.getAttribute(\"name\")===s.typeName));if(o(e))return B(e)}throw new t(N,`Type '${e}' not found in document`,{document:(new XMLSerializer).serializeToString(i)})}const H=new Set([\"objectid\",\"fid\"]);function B(e){var r,n;const a=[],o=[];let i;const s=w(e,{complexContent:{extension:{sequence:{element:e=>e}}}});for(const u of s){const s=u.getAttribute(\"name\");if(!s)continue;let l,p;if(u.hasAttribute(\"type\")?l=re(u.getAttribute(\"type\")).name:b(u,{simpleType:{restriction:e=>(l=re(e.getAttribute(\"base\")).name,{maxLength:e=>{p=+e.getAttribute(\"value\")}})}}),!l)continue;const c=\"true\"===u.getAttribute(\"nillable\");let m=!1;switch(l.toLowerCase()){case\"integer\":case\"nonpositiveinteger\":case\"negativeinteger\":case\"long\":case\"int\":case\"short\":case\"byte\":case\"nonnegativeinteger\":case\"unsignedlong\":case\"unsignedint\":case\"unsignedshort\":case\"unsignedbyte\":case\"positiveinteger\":o.push(new h({name:s,alias:s,type:\"integer\",nullable:c}));break;case\"float\":case\"double\":case\"decimal\":o.push(new h({name:s,alias:s,type:\"double\",nullable:c}));break;case\"boolean\":case\"string\":case\"gyearmonth\":case\"gyear\":case\"gmonthday\":case\"gday\":case\"gmonth\":case\"anyuri\":case\"qname\":case\"notation\":case\"normalizedstring\":case\"token\":case\"language\":case\"idrefs\":case\"entities\":case\"nmtoken\":case\"nmtokens\":case\"name\":case\"ncname\":case\"id\":case\"idref\":case\"entity\":case\"duration\":case\"time\":o.push(new h({name:s,alias:s,type:\"string\",nullable:c,length:null!=(r=p)?r:255}));break;case\"datetime\":case\"date\":o.push(new h({name:s,alias:s,type:\"date\",nullable:c,length:null!=(n=p)?n:36}));break;case\"pointpropertytype\":i=\"point\",m=!0;break;case\"multipointpropertytype\":i=\"multipoint\",m=!0;break;case\"curvepropertytype\":case\"multicurvepropertytype\":case\"multilinestringpropertytype\":i=\"polyline\",m=!0;break;case\"surfacepropertytype\":case\"multisurfacepropertytype\":case\"multipolygonpropertytype\":i=\"polygon\",m=!0;break;case\"geometrypropertytype\":case\"multigeometrypropertytype\":m=!0,a.push(new t(A,`geometry type '${l}' is not supported`,{type:(new XMLSerializer).serializeToString(e)}));break;default:a.push(new t(G,`Unknown field type '${l}'`,{type:(new XMLSerializer).serializeToString(e)}))}m&&o.push(new h({name:s,alias:s,type:\"geometry\",nullable:c}))}for(const t of o)if(\"integer\"===t.type&&!t.nullable&&H.has(t.name.toLowerCase())){t.type=\"oid\";break}return{geometryType:i,fields:o,errors:a}}async function K(r,n,a,o){let{data:i}=await e(r,{responseType:\"text\",query:Z(n,a,o),signal:null==o?void 0:o.signal});i=i.replace(/\": +(-?\\d+),(\\d+)(,)?/g,'\": $1.$2$3');try{var s;if(null!=o&&null!=(s=o.dateFields)&&s.length){const e=new Set(o.dateFields);return JSON.parse(i,((t,r)=>e.has(t)?g(r):r))}return JSON.parse(i)}catch(u){throw new t(j,\"Error while parsing the response\",{response:i,error:u})}}function Z(e,t,r){return{SERVICE:\"WFS\",REQUEST:\"GetFeature\",VERSION:x,TYPENAMES:e,OUTPUTFORMAT:t,SRSNAME:\"EPSG:4326\",STARTINDEX:null==r?void 0:r.startIndex,COUNT:null==r?void 0:r.count,...null==r?void 0:r.customParameters}}async function ee(t,r,n){const a=te((await e(t,{responseType:\"text\",query:{SERVICE:\"WFS\",REQUEST:\"GetFeature\",VERSION:x,TYPENAMES:r,RESULTTYPE:\"hits\",...null==n?void 0:n.customParameters},signal:null==n?void 0:n.signal})).data);ae(a);const o=Number.parseFloat(a.firstElementChild.getAttribute(\"numberMatched\"));return Number.isNaN(o)?0:o}function te(e){return(new DOMParser).parseFromString(e.trim(),\"text/xml\")}function re(e){const[t,r]=e.split(\":\");return{prefix:r?t:\"\",name:null!=r?r:t}}function ne(e){const r=e.firstElementChild.getAttribute(\"version\");if(r&&r!==x)throw new t(U,`Unsupported WFS version ${r}. Supported version: ${x}`)}function ae(e){let r,n;if(b(e.firstElementChild,{Exception:e=>(r=e.getAttribute(\"exceptionCode\"),{ExceptionText:e=>{n=e.textContent}})}),r)throw new t(`wfs-layer:${r}`,n)}export{v as WFS_OID_FIELD_NAME,J as describeFeatureType,W as findFeatureType,D as getCapabilities,K as getFeature,ee as getFeatureCount,Y as getFeatureTypeInfo,X as getWFSLayerInfo,Q as parseDescribeFeatureTypeResponse,I as parseGetCapabilitiesResponse,z as prepareWFSLayerFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction o(n,c){for(const e of n.children)if(e.localName in c){const n=c[e.localName];if(\"function\"==typeof n){const c=n(e);c&&o(e,c)}else o(e,n)}}function*n(o,c){for(const e of o.children)if(e.localName in c){const o=c[e.localName];\"function\"==typeof o?yield o(e):yield*n(e,o)}}export{n as iterateXML,o as visitXML};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import t from\"../../../core/Logger.js\";import{isSome as r,unwrap as s}from\"../../../core/maybe.js\";import{throwIfAborted as a,createTask as i,isAbortError as n}from\"../../../core/promiseUtils.js\";import{equals as o,WGS84 as u}from\"../../../geometry/support/spatialReferenceUtils.js\";import{convertFromGeometry as p,convertToGeometry as h}from\"../featureConversionUtils.js\";import y from\"../data/FeatureStore.js\";import{project as l,checkProjectionSupport as c}from\"../data/projectionSupport.js\";import m from\"../data/QueryEngine.js\";import{validateGeoJSON as g,createOptimizedFeatures as _}from\"./geojson/geojson.js\";import{mixAttributes as f}from\"./support/sourceUtils.js\";import{getFeature as d}from\"../../ogc/wfsUtils.js\";import w from\"../../support/FieldsIndex.js\";class E{constructor(){this._queryEngine=null,this._customParameters=null,this._snapshotFeatures=async e=>{const{objectIdField:t}=this._queryEngine,s=await d(this._getFeatureUrl,this._featureType.typeName,this._getFeatureOutputFormat,{customParameters:this._customParameters,dateFields:this._queryEngine.fieldsIndex.dateFields.map((e=>e.name)),signal:e});await g(s),a(e);const i=_(s,{geometryType:this._queryEngine.geometryType,hasZ:!1,objectIdField:t});if(!o(this._queryEngine.spatialReference,u))for(const a of i)r(a.geometry)&&(a.geometry=p(l(h(a.geometry,this._queryEngine.geometryType,!1,!1),u,this._queryEngine.spatialReference)));let n=1;for(const r of i){const e={};f(this._fieldsIndex,e,r.attributes,!0),r.attributes=e,null==r.attributes[t]&&(r.objectId=r.attributes[t]=n++)}return i}}destroy(){var e;null==(e=this._queryEngine)||e.destroy(),this._queryEngine=null}async load(e,t){const{getFeatureUrl:r,getFeatureOutputFormat:i,spatialReference:n,fields:o,geometryType:u,featureType:p,objectIdField:h,customParameters:l}=e;this._featureType=p,this._customParameters=l,this._getFeatureUrl=r,this._getFeatureOutputFormat=i,this._fieldsIndex=new w(o),await this._checkProjection(n),a(t),this._queryEngine=new m({fields:o,geometryType:u,hasM:!1,hasZ:!1,objectIdField:h,spatialReference:n,timeInfo:null,featureStore:new y({geometryType:u,hasM:!1,hasZ:!1})});const c=await this._snapshotFeatures(s(t.signal));return this._queryEngine.featureStore.addMany(c),{extent:this._queryEngine.fullExtent}}async applyEdits(){throw new e(\"wfs-source:editing-not-supported\",\"applyEdits() is not supported on WFSLayer\")}async queryFeatures(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(e,t.signal)}async querySnapping(e,t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(e,t.signal)}async refresh(r){var s;return this._customParameters=r,null==(s=this._snapshotTask)||s.abort(),this._snapshotTask=i(this._snapshotFeatures),this._snapshotTask.promise.then((e=>{this._queryEngine.featureStore.clear(),e&&this._queryEngine.featureStore.addMany(e)}),(r=>{this._queryEngine.featureStore.clear(),n(r)||t.getLogger(\"esri.layers.WFSLayer\").error(new e(\"wfs-layer:getfeature-error\",\"An error occurred during the GetFeature request\",{error:r}))})),await this._waitSnapshotComplete(),{extent:this._queryEngine.fullExtent}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _checkProjection(t){try{await c(u,t)}catch{throw new e(\"unsupported-projection\",\"Projection not supported\",{spatialReference:t})}}}export{E as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{indexOf as t,PositionHint as i}from\"../../arrayUtils.js\";import{assumeNonNull as n}from\"../../maybe.js\";import e from\"../../PooledArray.js\";import{q as s}from\"../../../chunks/quickselect.js\";class h{constructor(t=9,i){this.compareMinX=l,this.compareMinY=c,this.toBBox=function(t){return t},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&(\"function\"==typeof i?this.toBBox=i:this._initFormat(i)),this.clear()}destroy(){this.clear(),M.prune(),X.prune(),Y.prune(),B.prune()}all(t){this._all(this.data,t)}search(t,i){let n=this.data;const e=this.toBBox;if(p(t,n))for(M.clear();n;){for(let s=0,h=n.children.length;s<h;s++){const h=n.children[s],a=n.leaf?e(h):h;p(t,a)&&(n.leaf?i(h):x(t,a)?this._all(h,i):M.push(h))}n=M.pop()}}collides(t){let i=this.data;const n=this.toBBox;if(!p(t,i))return!1;for(M.clear();i;){for(let e=0,s=i.children.length;e<s;e++){const s=i.children[e],h=i.leaf?n(s):s;if(p(t,h)){if(i.leaf||x(t,h))return!0;M.push(s)}}i=M.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}let i=this._build(t.slice(0,t.length),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const t=this.data;this.data=i,i=t}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=new b([]),this}remove(i){if(!i)return this;let e,s=this.data,h=null,a=0,r=!1;const o=this.toBBox(i);for(Y.clear(),B.clear();s||Y.length>0;){var l;if(!s)s=n(Y.pop()),h=Y.data[Y.length-1],a=null!=(l=B.pop())?l:0,r=!0;if(s.leaf&&(e=t(s.children,i,s.children.length,s.indexHint),-1!==e))return s.children.splice(e,1),Y.push(s),this._condense(Y),this;r||s.leaf||!x(s,o)?h?(a++,s=h.children[a],r=!1):s=null:(Y.push(s),B.push(a),a=0,h=s,s=s.children[0])}return this}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,i){let n=t;for(X.clear();n;){var e;if(!0===n.leaf)for(const t of n.children)i(t);else X.pushArray(n.children);n=null!=(e=X.pop())?e:null}}_build(t,i,n,e){const s=n-i+1;let h=this._maxEntries;if(s<=h){const e=new b(t.slice(i,n+1));return a(e,this.toBBox),e}e||(e=Math.ceil(Math.log(s)/Math.log(h)),h=Math.ceil(s/h**(e-1)));const r=new j([]);r.height=e;const o=Math.ceil(s/h),l=o*Math.ceil(Math.sqrt(h));g(t,i,n,l,this.compareMinX);for(let a=i;a<=n;a+=l){const i=Math.min(a+l-1,n);g(t,a,i,o,this.compareMinY);for(let n=a;n<=i;n+=o){const s=Math.min(n+o-1,i);r.children.push(this._build(t,n,s,e-1))}}return a(r,this.toBBox),r}_chooseSubtree(t,i,n,e){for(;e.push(i),!0!==i.leaf&&e.length-1!==n;){let n,e=1/0,s=1/0;for(let h=0,a=i.children.length;h<a;h++){const a=i.children[h],r=m(a),o=d(t,a)-r;o<s?(s=o,e=r<e?r:e,n=a):o===s&&r<e&&(e=r,n=a)}i=n||i.children[0]}return i}_insert(t,i,n){const e=this.toBBox,s=n?t:e(t);Y.clear();const h=this._chooseSubtree(s,this.data,i,Y);for(h.children.push(t),o(h,s);i>=0&&Y.data[i].children.length>this._maxEntries;)this._split(Y,i),i--;this._adjustParentBBoxes(s,Y,i)}_split(t,i){const n=t.data[i],e=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,e);const h=this._chooseSplitIndex(n,s,e);if(!h)return void console.log(\"  Error: assertion failed at PooledRBush._split: no valid split index\");const r=n.children.splice(h,n.children.length-h),o=n.leaf?new b(r):new j(r);o.height=n.height,a(n,this.toBBox),a(o,this.toBBox),i?t.data[i-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,i){this.data=new j([t,i]),this.data.height=t.height+1,a(this.data,this.toBBox)}_chooseSplitIndex(t,i,n){let e,s,h;e=s=1/0;for(let a=i;a<=n-i;a++){const i=r(t,0,a,this.toBBox),o=r(t,a,n,this.toBBox),l=f(i,o),c=m(i)+m(o);l<e?(e=l,h=a,s=c<s?c:s):l===e&&c<s&&(s=c,h=a)}return h}_chooseSplitAxis(t,i,n){const e=t.leaf?this.compareMinX:l,s=t.leaf?this.compareMinY:c;this._allDistMargin(t,i,n,e)<this._allDistMargin(t,i,n,s)&&t.children.sort(e)}_allDistMargin(t,i,n,e){t.children.sort(e);const s=this.toBBox,h=r(t,0,i,s),a=r(t,n-i,n,s);let l=u(h)+u(a);for(let r=i;r<n-i;r++){const i=t.children[r];o(h,t.leaf?s(i):i),l+=u(h)}for(let r=n-i-1;r>=i;r--){const i=t.children[r];o(a,t.leaf?s(i):i),l+=u(a)}return l}_adjustParentBBoxes(t,i,n){for(let e=n;e>=0;e--)o(i.data[e],t)}_condense(i){for(let n=i.length-1;n>=0;n--){const e=i.data[n];if(0===e.children.length)if(n>0){const s=i.data[n-1],h=s.children;h.splice(t(h,e,h.length,s.indexHint),1)}else this.clear();else a(e,this.toBBox)}}_initFormat(t){const i=[\"return a\",\" - b\",\";\"];this.compareMinX=new Function(\"a\",\"b\",i.join(t[0])),this.compareMinY=new Function(\"a\",\"b\",i.join(t[1])),this.toBBox=new Function(\"a\",\"return {minX: a\"+t[0]+\", minY: a\"+t[1]+\", maxX: a\"+t[2]+\", maxY: a\"+t[3]+\"};\")}}function a(t,i){r(t,0,t.children.length,i,t)}function r(t,i,n,e,s){s||(s=new b([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let h,a=i;a<n;a++)h=t.children[a],o(s,t.leaf?e(h):h);return s}function o(t,i){t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY)}function l(t,i){return t.minX-i.minX}function c(t,i){return t.minY-i.minY}function m(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function f(t,i){const n=Math.max(t.minX,i.minX),e=Math.max(t.minY,i.minY),s=Math.min(t.maxX,i.maxX),h=Math.min(t.maxY,i.maxY);return Math.max(0,s-n)*Math.max(0,h-e)}function x(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function p(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function g(t,i,e,h,a){const r=[i,e];for(;r.length;){const i=n(r.pop()),e=n(r.pop());if(i-e<=h)continue;const o=e+Math.ceil((i-e)/h/2)*h;s(t,o,e,i,a),r.push(e,o,o,i)}}const M=new e,X=new e,Y=new e,B=new e({deallocator:void 0});class _{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class w extends _{constructor(){super(...arguments),this.height=1,this.indexHint=new i}}class b extends w{constructor(t){super(),this.children=t,this.leaf=!0}}class j extends w{constructor(t){super(),this.children=t,this.leaf=!1}}export{_ as BBox,h as PooledRBush,h as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import t from\"../../OptimizedFeature.js\";import n from\"../../OptimizedGeometry.js\";import{isNumericField as o}from\"../../../support/fieldUtils.js\";const r={LineString:\"esriGeometryPolyline\",MultiLineString:\"esriGeometryPolyline\",MultiPoint:\"esriGeometryMultipoint\",Point:\"esriGeometryPoint\",Polygon:\"esriGeometryPolygon\",MultiPolygon:\"esriGeometryPolygon\"};function i(e){return r[e]}function*s(e){switch(e.type){case\"Feature\":yield e;break;case\"FeatureCollection\":for(const t of e.features)t&&(yield t)}}function*c(e){if(!e)return null;switch(e.type){case\"Point\":yield e.coordinates;break;case\"LineString\":case\"MultiPoint\":yield*e.coordinates;break;case\"MultiLineString\":case\"Polygon\":for(const t of e.coordinates)yield*t;break;case\"MultiPolygon\":for(const t of e.coordinates)for(const e of t)yield*e}}function*u(e,o={}){const{geometryType:r,objectIdField:s}=o;for(const u of e){var c;const{geometry:e,properties:l,id:f}=u;if(e&&i(e.type)!==r)continue;const a=l||{};let y=null!=(c=a[s])?c:null;s&&null!=f&&!a[s]&&(a[s]=y=f);const p=new t(e?d(new n,e,o):null,a,null,y);yield p}}function l(e){for(const t of e)if(t.length>2)return!0;return!1}function f(e){return!y(e)}function a(e){return y(e)}function y(e){let t=0;for(let n=0;n<e.length;n++){const o=e[n],r=e[(n+1)%e.length];t+=o[0]*r[1]-r[0]*o[1]}return t<=0}function p(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function d(e,t,n){switch(t.type){case\"LineString\":return g(e,t,n);case\"MultiLineString\":return m(e,t,n);case\"MultiPoint\":return h(e,t,n);case\"MultiPolygon\":return w(e,t,n);case\"Point\":return P(e,t,n);case\"Polygon\":return b(e,t,n)}}function g(e,t,n){return F(e,t.coordinates,n),e}function m(e,t,n){for(const o of t.coordinates)F(e,o,n);return e}function h(e,t,n){return F(e,t.coordinates,n),e}function w(e,t,n){for(const o of t.coordinates){j(e,o[0],n);for(let t=1;t<o.length;t++)S(e,o[t],n)}return e}function P(e,t,n){return M(e,t.coordinates,n),e}function b(e,t,n){const o=t.coordinates;j(e,o[0],n);for(let r=1;r<o.length;r++)S(e,o[r],n);return e}function j(e,t,n){const o=p(t);f(o)?G(e,o,n):F(e,o,n)}function S(e,t,n){const o=p(t);a(o)?G(e,o,n):F(e,o,n)}function F(e,t,n){for(const o of t)M(e,o,n);e.lengths.push(t.length)}function G(e,t,n){for(let o=t.length-1;o>=0;o--)M(e,t[o],n);e.lengths.push(t.length)}function M(e,t,n){const[o,r,i]=t;e.coords.push(o,r),n.hasZ&&e.coords.push(i||0)}function k(e){switch(typeof e){case\"string\":return\"esriFieldTypeString\";case\"number\":return\"esriFieldTypeDouble\";default:return\"unknown\"}}function O(t){if(!t)throw new e(\"geojson-layer:empty\",\"GeoJSON data is empty\");if(\"Feature\"!==t.type&&\"FeatureCollection\"!==t.type)throw new e(\"geojson-layer:unsupported-geojson-object\",\"missing or not supported GeoJSON object type\",{data:t});const{crs:n}=t;if(!n)return;const o=\"string\"==typeof n?n:\"name\"===n.type?n.properties.name:\"EPSG\"===n.type?n.properties.code:null,r=new RegExp(\".*(CRS84H?|4326)$\",\"i\");if(!o||!r.test(o))throw new e(\"geojson-layer:unsupported-crs\",\"unsupported GeoJSON 'crs' member\",{crs:n})}function T(e,t={}){const n=[],r=new Set,u=new Set;let f,a=!1,y=null,p=!1,{geometryType:d=null}=t,g=!1;for(const o of s(e)){const{geometry:e,properties:t,id:s}=o;if(!e||(d||(d=i(e.type)),i(e.type)===d)){if(!a){a=l(c(e))}if(p||(p=null!=s,p&&(f=typeof s,y=Object.keys(t).filter((e=>t[e]===s)))),p&&null!=s&&(y.length>1?y=y.filter((e=>t[e]===s)):1===y.length&&(y=t[y[0]]===s?y:[])),!g&&t){let e=!0;for(const o in t){if(r.has(o))continue;const i=t[o];if(null==i){e=!1,u.add(o);continue}const s=k(i);\"unknown\"!==s?(u.delete(o),r.add(o),n.push({name:o,alias:o,type:s})):u.add(o)}g=e}}}const m=y&&1===y.length&&y[0]||null;if(m)for(const i of n)if(i.name===m&&o(i)){i.type=\"esriFieldTypeOID\";break}return{fields:n,geometryType:d,hasZ:a,objectIdFieldName:m,objectIdFieldType:f,unknownFields:Array.from(u)}}function L(e,t){return Array.from(u(s(e),t))}export{L as createOptimizedFeatures,i as getGeometryType,T as inferLayerProperties,O as validateGeoJSON};\n"],"sourceRoot":""}