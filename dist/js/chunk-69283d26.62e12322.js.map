{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/views/3d/layers/OGCFeatureLayerView3D.js","webpack:///./node_modules/@arcgis/core/views/layers/RefreshableLayerView.js","webpack:///./node_modules/@arcgis/core/views/3d/support/PBFDecoder.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/support/featureTileQuery3D.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/support/FeatureTileFetcher3DLayerViewContext.js","webpack:///./node_modules/@arcgis/core/views/3d/layers/FeatureLayerViewBase3D.js","webpack:///./node_modules/@arcgis/core/views/layers/support/popupUtils.js","webpack:///./node_modules/@arcgis/core/views/layers/FeatureLayerView.js","webpack:///./node_modules/@arcgis/core/views/layers/OGCFeatureLayerView.js"],"names":["a","super","arguments","this","type","prototype","p","i","c","handles","add","r","doRefresh","dataChanged","catch","getLogger","declaredClass","error","e","_schedule","_handle","destroy","o","buffer","byteLength","options","sourceSpatialReference","toJSON","invoke","then","spatialReference","fromJSON","fields","length","t","features","uid","generateUID","geometry","Promise","resolve","d","layer","capabilities","query","supportsFormatPBF","y","_decoder","schedule","applyTransform","maxStringAttributeLength","parsedUrl","_createRequestOptions","data","signal","reject","queryFeatureCount","customParameters","token","apiKey","constructOnly","readOnly","h","queryFeatures","m","f","source","queryFeaturesJSON","name","q","infoFor3D","_memoryCache","_capabilities","layerView","objectIdField","globalIdField","returnZ","returnM","view","resourceController","memoryCacheEnabled","memoryController","newCache","createQuery","outFields","availableFields","outSpatialReference","tilingScheme","state","viewingMode","featureTiles","scheduler","geometryType","fullExtent","tileMaxRecordCount","maxRecordCount","message","_controllerTotal","_graphicsCoreTotal","suspendResumeExtentMode","updatingHandles","graphics3d","filterVisibility","filterChanged","fetcherContext","controller","maximumNumberOfFeatures","_get","_set","suspended","maximumNumberOfFeaturesExceeded","s","updating","updatingRemaining","Math","max","updatingTotal","graphicsCore","mode","F","serviceDataCount","supportsZ","supportsM","setObjectIdVisibility","_queryFeaturesMesh","_ensureQuery","hasZ","hasM","context","graphics","extent","clippingExtent","dataExtent","suspend","resume","updateDisplayFeatureLimit","events","on","notifyChange","refetch","dirty","usedMemory","memoryForUnusedFeatures","unprocessedMemoryEstimate","expectedFeatureDiff","usedMemoryPerGraphic","hasMaximumNumberOfFeaturesOverride","displayFeatureLimit","memoryFactor","ceil","maximumTotalNumberOfFeatures","minimumTotalNumberOfFeatures","_validateQueryFeaturesMesh","outStatistics","graphics3DGraphicsByObjectID","get","attributes","graphic","push","returnCentroid","equals","averageSymbolComplexity","primitivesPerFeature","primitivesPerCoordinate","_getResourceInfo","storedFeatures","totalVertices","partial","symbolComplexity","nodes","tileDescriptors","displayedNumberOfFeatures","debug","updatePolicy","dependsOn","point","polygon","polyline","x","async","popupTemplate","getRequiredFields","fieldsIndex","lastEditInfoEnabled","n","typeIdField","relationships","u","includes","has","indexOf","forEach","keyField","l","defaultPopupTemplateEnabled","defaultPopupTemplate","P","O","_updatingRequiredFieldsPromise","filter","timeExtent","requiredFields","_handleRequiredFieldsChange","replacement","version","featureEffect","_override","_clearOverride","Error","returnGeometry","where","intersection","clone","validateFetchPopupFeatures","fetchClientPopupFeatures","Array","isArray","content","some","_updateRequiredFields","renderer","orderBy","featureReduction","Set","collectRequiredFields","timeInfo","startField","endField","floorInfo","floorField","subtypeField","sublayers","map","all","displayField","from","sort","clientGraphics","popupEnabled","isAggregate","Map","createPopupQuery","_loadArcadeModules","arcadeUtils","hasGeometryOperations","set","getObjectId","size","Boolean","objectIds","keys","canResume","isEmpty","Number","supportsSpatialReference","addResolvingPromise"],"mappings":"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","file":"js/chunk-69283d26.62e12322.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import o from\"./FeatureLayerViewBase3D.js\";import{OGCFeatureLayerView as t}from\"../../layers/OGCFeatureLayerView.js\";let a=class extends(t(o)){constructor(){super(...arguments),this.type=\"ogc-feature-3d\"}};r([e()],a.prototype,\"layer\",void 0),a=r([s(\"esri.views.3d.layers.OGCFeatureLayerView3D\")],a);const p=a;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Logger.js\";import{isAbortError as s}from\"../../core/promiseUtils.js\";import{on as o}from\"../../core/watchUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";const i=i=>{let c=class extends i{initialize(){this.handles.add(o(this,\"layer\",\"refresh\",(r=>{this.doRefresh(r.dataChanged).catch((r=>{s(r)||e.getLogger(this.declaredClass).error(r)}))})),\"RefreshableLayerView\")}};return r([t()],c.prototype,\"layer\",void 0),c=r([a(\"esri.layers.mixins.RefreshableLayerView\")],c),c};export{i as RefreshableLayerView,i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../Graphic.js\";import{isSome as r}from\"../../../core/maybe.js\";import{WorkerHandle as o}from\"../../../core/workers/WorkerHandle.js\";import t from\"../../../geometry/SpatialReference.js\";import s from\"../../../layers/support/Field.js\";class i{constructor(e){this._schedule=e,this._handle=new n(e)}destroy(){this._handle.destroy()}invoke(o,i){return o.buffer&&0!==o.buffer.byteLength?(o.options.sourceSpatialReference&&o.options.sourceSpatialReference instanceof t&&(o.options={...o.options,sourceSpatialReference:o.options.sourceSpatialReference.toJSON()}),this._handle.invoke(o,i).then((o=>this._schedule((()=>{if(o.spatialReference=t.fromJSON(o.spatialReference),o.fields)for(let e=0;e<o.fields.length;e++)o.fields[e]=s.fromJSON(o.fields[e]);const i=o.spatialReference;for(const t of o.features)t.uid=e.generateUID(),r(t.geometry)&&(t.geometry.spatialReference=i);return o}))))):Promise.resolve(null)}}class n extends o{constructor(e){super(\"PBFDecoderWorker\",\"_parseFeatureQuery\",e)}getTransferList(e){return[e.buffer]}}export{i as PBFDecoder};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import{isNone as t,isSome as s,destroyMaybe as o}from\"../../../../core/maybe.js\";import{throwIfAborted as u,createAbortError as a}from\"../../../../core/promiseUtils.js\";import{property as y}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as i}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{fromFeatureSetJSON as l}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{runQuery as p,executeQuery as n}from\"../../../../rest/query/operations/query.js\";import{PBFDecoder as c}from\"../../support/PBFDecoder.js\";let d=class extends r{constructor(e){super(e)}get queryFeaturesDehydrated(){const e=this.layer.capabilities,r=e&&e.query;if(r&&r.supportsFormatPBF){var o,y;t(this._decoder)&&(this._decoder=new c(this.schedule));const e={sourceSpatialReference:null!=(o=null==(y=this.layer.spatialReference)?void 0:y.toJSON())?o:null,applyTransform:!0,maxStringAttributeLength:1024};return(r,t)=>p(this.layer.parsedUrl,r,\"pbf\",this._createRequestOptions(t)).then((r=>(u(t),s(this._decoder)?this._decoder.invoke({buffer:r.data,options:e},t.signal):Promise.reject(a()))))}return(e,r)=>n(this.layer.parsedUrl,e,this.layer.spatialReference,this._createRequestOptions(r)).then((e=>l(e.data)))}queryFeatureCount(e,r){return this.layer.queryFeatureCount(e,r)}destroy(){this._decoder=o(this._decoder)}_createRequestOptions(e){return{...e,query:{...this.layer.customParameters,token:this.layer.apiKey,...null==e?void 0:e.query}}}};e([y({constructOnly:!0})],d.prototype,\"layer\",void 0),e([y({constructOnly:!0})],d.prototype,\"schedule\",void 0),e([y({readOnly:!0})],d.prototype,\"queryFeaturesDehydrated\",null),d=e([i(\"esri.views.3d.layers.support.featureTileQuery3D.FeatureTileServiceQuery3D\")],d);let h=class extends r{constructor(e){super(e)}queryFeaturesDehydrated(e,r){return this.layer.queryFeatures(e,r)}queryFeatureCount(e,r){return this.layer.queryFeatureCount(e,r)}};e([y({constructOnly:!0})],h.prototype,\"layer\",void 0),e([y({readOnly:!0})],h.prototype,\"queryFeaturesDehydrated\",null),h=e([i(\"esri.views.3d.layers.support.featureTileQuery3D.FeatureTileServiceMeshQuery3D\")],h);let m=class extends r{constructor(e){super(e)}queryFeaturesDehydrated(e,r){return this.layer.queryFeatures(e,r)}};e([y({constructOnly:!0})],m.prototype,\"layer\",void 0),m=e([i(\"esri.views.3d.layers.support.featureTileQuery3D.FeatureTileServiceQuery3D\")],m);let f=class extends r{constructor(e){super(e)}queryFeaturesDehydrated(e,r){return this.source.queryFeaturesJSON(e,r).then(l,(t=>{if(t&&\"query-features-json:unsupported\"===t.name)return this.layer.queryFeatures(e,r);throw t}))}queryFeatureCount(e,r){return this.layer.queryFeatureCount(e,r)}};function q(e,r){return\"feature\"===e.type&&\"feature-layer\"===e.source.type?s(e.infoFor3D)?new h({layer:e}):new d({layer:e,schedule:r}):\"feature\"===e.type&&\"memory\"===e.source.type||\"csv\"===e.type||\"geojson\"===e.type||\"wfs\"===e.type?new f({layer:e,source:e.source}):\"ogc-feature\"===e.type?new m({layer:e}):null}e([y({constructOnly:!0})],f.prototype,\"layer\",void 0),e([y({constructOnly:!0})],f.prototype,\"source\",void 0),f=e([i(\"esri.views.3d.layers.support.featureTileQuery3D.FeatureTileClientQuery3D\")],f);export{q as createFeatureTileQuery3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{destroyMaybe as e,isSome as r}from\"../../../../core/maybe.js\";import{contextCapabilitiesFromLayer as t}from\"./FeatureTileFetcher3D.js\";import{createFeatureTileQuery3D as i}from\"./featureTileQuery3D.js\";class l{constructor(e){this._memoryCache=null,this._capabilities=null;const r=e.layerView.layer;this.layerView=e.layerView,this.objectIdField=r.objectIdField,this.globalIdField=\"globalIdField\"in r?r.globalIdField:null,this.returnZ=e.returnZ,this.returnM=e.returnM;const t=this.layerView.view.resourceController;this.query=i(r,(e=>t.schedule(e))),t&&this.memoryCacheEnabled&&(this._memoryCache=t.memoryController.newCache(r.uid))}get memoryCacheEnabled(){switch(this.layerView.layer.source.type){case\"feature-layer\":case\"ogc-feature\":return!0;case\"csv\":case\"geojson\":case\"memory\":case\"wfs\":return!1}}destroy(){this._memoryCache=e(this._memoryCache),this.query.destroy()}createQuery(){const e=this.layerView.layer.createQuery();return e.outFields=this.layerView.availableFields,e.returnZ=this.returnZ,e.returnM=this.returnM,e.outSpatialReference=this.tilingScheme.spatialReference,e}get memoryCache(){return this._memoryCache}get viewingMode(){return this.layerView.view.state.viewingMode}get tilingScheme(){return this.layerView.view.featureTiles.tilingScheme}get scheduler(){const e=this.layerView.view.resourceController;return e?e.scheduler:null}get geometryType(){return this.layerView.layer.geometryType}get fullExtent(){return this.layerView.layer.fullExtent}get tileMaxRecordCount(){return this.layerView.layer.capabilities.query.tileMaxRecordCount}get maxRecordCount(){return this.layerView.layer.capabilities.query.maxRecordCount}get capabilities(){return r(this._capabilities)||(this._capabilities=t(this.layerView.layer)),this._capabilities}logFetchError(e,r){e.error(\"#fetchTile()\",this.layerView.layer,r&&r.message?r.message:r)}}export{l as FeatureTileFetcher3DLayerViewContext};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import{isSome as r}from\"../../../core/maybe.js\";import{init as s,whenFalse as i}from\"../../../core/watchUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{hydrateGeometry as l}from\"../../../layers/graphics/hydratedFeatures.js\";import{FeatureTileController3D as u}from\"../../../layers/graphics/controllers/FeatureTileController3D.js\";import{FeatureLikeLayerView3D as n}from\"./FeatureLikeLayerView3D.js\";import{LayerView3D as c}from\"./LayerView3D.js\";import{FeatureTileFetcher3DLayerViewContext as h}from\"./support/FeatureTileFetcher3DLayerViewContext.js\";import{EventedSet as p}from\"../support/EventedSet.js\";import{updatingProgress as m}from\"../support/updatingProperties.js\";import{FeatureLayerView as d}from\"../../layers/FeatureLayerView.js\";import y from\"../../layers/LayerView.js\";import{RefreshableLayerView as g}from\"../../layers/RefreshableLayerView.js\";let f=class extends(g(n(d(c(y))))){constructor(e){super(e),this._controllerTotal=0,this._graphicsCoreTotal=0,this.suspendResumeExtentMode=\"data\"}initialize(){this.updatingHandles.add(this,\"view.floors\",(()=>this.graphics3d.filterVisibility.filterChanged()))}destroy(){this.fetcherContext&&(this.fetcherContext.destroy(),this.fetcherContext=null)}get maximumNumberOfFeatures(){var e,t;return null!=(e=null==(t=this.controller)?void 0:t.maximumNumberOfFeatures)?e:this._get(\"maximumNumberOfFeatures\")}set maximumNumberOfFeatures(e){this._set(\"maximumNumberOfFeatures\",e),this.controller&&(this.controller.maximumNumberOfFeatures=e)}get maximumNumberOfFeaturesExceeded(){return!!this.controller&&!(this.suspended||!this.controller.maximumNumberOfFeaturesExceeded)}get updatingProgressValue(){var e,t,r;let s=0;if(null!=(e=this.controller)&&e.updating){const e=this.controller.updatingRemaining,t=Math.max(this.controller.updatingTotal,this._controllerTotal);t>0&&(s=(t-e)/t,this._controllerTotal=t)}let i=0;if(null!=(t=this.graphics3d)&&null!=(r=t.graphicsCore)&&r.updating){const e=this.graphics3d.graphicsCore.updatingRemaining,t=Math.max(e,this._graphicsCoreTotal);t>0&&(i=(t-e)/t,this._graphicsCoreTotal=t)}return.5*(s+i)}get updatePolicy(){if(!this.controller)return 0;switch(this.controller.mode){case\"snapshot\":{const e=F[this.layer.geometryType];return null==e||this.controller.serviceDataCount>e?0:1}case\"tiles\":return 0}}get hasZ(){const e=this.layer,t=e.capabilities&&e.capabilities.data;return!(!t||!t.supportsZ)&&(\"returnZ\"in e&&null!=e.returnZ?e.returnZ:t.supportsZ)}get hasM(){const e=this.layer,t=e.capabilities&&e.capabilities.data;return!(!t||!t.supportsM)&&(\"returnM\"in e&&null!=e.returnM&&e.returnM)}setVisibility(e,t){this.graphics3d&&this.graphics3d.graphicsCore.setObjectIdVisibility(e,t)}createQuery(){return super.createQuery()}queryFeatures(e,t){const r=()=>super.queryFeatures(e,t);return\"mesh\"===this.layer.geometryType?this._queryFeaturesMesh(this._ensureQuery(e),r):r()}beforeSetController(e){e.maximumNumberOfFeatures=this.maximumNumberOfFeatures}createController(){this.fetcherContext=new h({layerView:this,returnZ:this.hasZ,returnM:this.hasM});const e=new u({layerView:this,context:this.fetcherContext,graphics:new p,extent:this.clippingExtent});return this.updatingHandles.add(e,\"serviceDataExtent\",(e=>{this.graphics3d&&(this.graphics3d.dataExtent=e)}),2),this.handles.add(s(this,\"suspended\",(t=>{t?e.suspend():e.resume()}),!0)),this.updatingHandles.add(this.graphics3d.graphicsCore,\"displayFeatureLimit\",(()=>this.updateDisplayFeatureLimit(e)),2),this.handles.add([this.view.resourceController.memoryController.events.on(\"quality-changed\",(()=>this.updateDisplayFeatureLimit())),i(this,\"updating\",(()=>{this._controllerTotal=0,this._graphicsCoreTotal=0,this.notifyChange(\"updatingProgressValue\")}))]),e}async doRefresh(e){e&&!this.suspended&&this.controller&&this.controller.refetch(),this.graphics3d.filterVisibility.dirty=!0}getUsedMemory(){const e=this.graphics3d&&this.graphics3d.graphicsCore;return(e?e.usedMemory:0)+(this.controller?this.controller.memoryForUnusedFeatures:0)}getUnloadedMemory(){const e=this.graphics3d&&this.graphics3d.graphicsCore;return(e?e.unprocessedMemoryEstimate:0)+(this.controller?this.controller.expectedFeatureDiff*e.usedMemoryPerGraphic:0)}ignoresMemoryFactor(){return this.controller&&this.controller.hasMaximumNumberOfFeaturesOverride}updateDisplayFeatureLimit(e=this.controller){if(!e||!this.graphics3d||!this.graphics3d.graphicsCore)return;const t=this.graphics3d.graphicsCore.displayFeatureLimit,r=this.view.resourceController.memoryController.memoryFactor;if(1===r)e.displayFeatureLimit=t;else{const s=Math.ceil(t.maximumNumberOfFeatures*r),i=Math.ceil(t.maximumTotalNumberOfFeatures*r),o=Math.ceil(t.minimumTotalNumberOfFeatures*r);e.displayFeatureLimit={...t,maximumNumberOfFeatures:s,maximumTotalNumberOfFeatures:i,minimumTotalNumberOfFeatures:o}}}async _queryFeaturesMesh(e,t){await this._validateQueryFeaturesMesh(e);const r=await t();if(e&&e.outStatistics)return r;const s=this.layer.objectIdField,i=this.graphics3d.graphicsCore.graphics3DGraphicsByObjectID,o=[];for(const a of r.features)if(a.geometry){const e=i.get(a.attributes[s]);e&&(a.geometry=l(e.graphic.geometry),o.push(a))}else o.push(a);return r.features=o,r}async _validateQueryFeaturesMesh(e){if(!e)return;const s=e=>{throw new t(\"feature-layer-view:unsupported-query\",`Queries on Mesh feature collection layers do not support '${e}'`)},i=[\"quantizationParameters\",\"geometryPrecision\",\"maxAllowableOffset\"];for(const t of i)null!=e[t]&&s(t);\"returnM\"in e&&e.returnM&&s(\"returnM\"),\"returnCentroid\"in e&&e.returnCentroid&&s(\"returnCentroid\"),r(e.outSpatialReference)&&!e.outSpatialReference.equals(this.view.spatialReference)&&s(\"outSpatialReference\")}get performanceInfo(){const e=this.controller&&this.controller.displayFeatureLimit,t=r(e)&&e.averageSymbolComplexity,s=r(t)?`f:${t.primitivesPerFeature},v:${t.primitivesPerCoordinate}`:\"n/a\",i={...this._getResourceInfo(),storedFeatures:0,totalVertices:0,partial:this.maximumNumberOfFeaturesExceeded,mode:this.controller?this.controller.mode:\"n/a\",symbolComplexity:s,nodes:this.controller?this.controller.tileDescriptors.length:0};if(this.controller&&i.displayedNumberOfFeatures){const e=this.controller.debug;i.storedFeatures=e.storedFeatures,i.totalVertices=e.totalVertices}return i}get test(){return{updatePolicy:this.updatePolicy,controller:this.controller}}};e([o()],f.prototype,\"layer\",void 0),e([o()],f.prototype,\"controller\",void 0),e([o()],f.prototype,\"maximumNumberOfFeatures\",null),e([o()],f.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([o(m)],f.prototype,\"updatingProgress\",void 0),e([o({readOnly:!0,dependsOn:[\"controller.updatingRemaining\",\"controller.updatingTotal\",\"graphics3d.graphicsCore.updatingRemaining\"]})],f.prototype,\"updatingProgressValue\",null),e([o({readOnly:!0})],f.prototype,\"updatePolicy\",null),e([o({readOnly:!0})],f.prototype,\"hasZ\",null),e([o({readOnly:!0})],f.prototype,\"hasM\",null),e([o()],f.prototype,\"suspendResumeExtentMode\",void 0),f=e([a(\"esri.views.3d.layers.FeatureLayerViewBase3D\")],f);const F={point:5e3,polygon:500,polyline:1e3},x=f;export{x as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as l}from\"../../../layers/support/fieldUtils.js\";async function t(t,d=t.popupTemplate){if(!e(d))return[];const i=await d.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:n}=d,{objectIdField:s,typeIdField:a,globalIdField:o,relationships:u}=t;if(i.includes(\"*\"))return[\"*\"];const f=n?await p(t):[],r=l(t.fieldsIndex,[...i,...f]);return a&&r.push(a),r&&s&&t.fieldsIndex.has(s)&&-1===r.indexOf(s)&&r.push(s),r&&o&&t.fieldsIndex.has(o)&&-1===r.indexOf(o)&&r.push(o),u&&u.forEach((e=>{const{keyField:p}=e;r&&p&&t.fieldsIndex.has(p)&&-1===r.indexOf(p)&&r.push(p)})),r}function d(p,l){return p.popupTemplate?p.popupTemplate:e(l)&&l.defaultPopupTemplateEnabled&&e(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}export{d as getFetchPopupTemplate,t as getRequiredFields};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{deprecatedProperty as t}from\"../../core/deprecate.js\";import r from\"../../core/Error.js\";import i from\"../../core/Logger.js\";import{isSome as s,isNone as o}from\"../../core/maybe.js\";import{eachAlways as a}from\"../../core/promiseUtils.js\";import{init as n,on as l}from\"../../core/watchUtils.js\";import{property as u}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as f}from\"../../layers/support/commonProperties.js\";import d from\"../../layers/support/FeatureEffect.js\";import c from\"../../layers/support/FeatureFilter.js\";import{fixFields as m,unpackFieldNames as y,collectLabelingFields as h,collectElevationFields as F,collectFilterFields as w,collectFeatureReductionFields as g,collectOrderByInfos as E,collectFields as x,collectField as v,featureHasFields as b}from\"../../layers/support/fieldUtils.js\";import j from\"../../rest/support/Query.js\";import{loadArcade as R}from\"../../support/arcadeOnDemand.js\";import{getFetchPopupTemplate as q,getRequiredFields as I}from\"./support/popupUtils.js\";import{getFloorFilterClause as _}from\"../support/floorFilterUtils.js\";const P=i.getLogger(\"esri.views.layers.FeatureLayerView\"),O=i=>{let O=class extends i{constructor(...e){super(...e),this._updatingRequiredFieldsPromise=null,this.filter=null,this.timeExtent=null,this.layer=null,this.requiredFields=[],this.view=null}initialize(){n(this,[\"layer.renderer\",\"layer.labelingInfo\",\"layer.elevationInfo.featureExpressionInfo\",\"layer.displayField\",\"filter\",\"featureEffect\",\"layer.timeInfo\",\"layer.floorInfo\",\"timeExtent\"],(()=>this._handleRequiredFieldsChange()),!0),l(this,\"view.floors\",\"change\",(()=>this._handleRequiredFieldsChange())),l(this,\"layer.sublayer\",\"change\",(()=>this._handleRequiredFieldsChange()))}get availableFields(){const{layer:e,layer:{fieldsIndex:t},requiredFields:r}=this;return\"outFields\"in e&&e.outFields?m(t,[...y(t,e.outFields),...r]):m(t,r)}set effect(e){t(P,\"effect\",{replacement:\"featureEffect\",version:\"4.22\"}),this.featureEffect=e}get effect(){return t(P,\"effect\",{replacement:\"featureEffect\",version:\"4.22\"}),this.featureEffect}get featureEffect(){return this.layer&&\"featureEffect\"in this.layer?this.layer.featureEffect:null}set featureEffect(e){void 0!==e?this._override(\"featureEffect\",e):this._clearOverride(\"featureEffect\")}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){P.error(\"#maximumNumberOfFeatures=\",\"Setting maximum number of features is not supported\")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(e){throw new Error(\"missing implementation\")}createQuery(){const e={outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},t=s(this.filter)?this.filter.createQuery(e):new j(e);if(\"feature\"===this.layer.type){const e=_(this);s(e)&&(t.where=t.where?`(${t.where}) AND (${e})`:e)}return s(this.timeExtent)&&(t.timeExtent=s(t.timeExtent)?t.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),t}queryFeatures(e,t){throw new Error(\"missing implementation\")}queryObjectIds(e,t){throw new Error(\"missing implementation\")}queryFeatureCount(e,t){throw new Error(\"missing implementation\")}queryExtent(e,t){throw new Error(\"missing implementation\")}async fetchPopupFeatures(e,t){const r=this.validateFetchPopupFeatures(t);if(r)throw r;return this.fetchClientPopupFeatures(t)}_loadArcadeModules(e){if(e.get(\"expressionInfos.length\")||Array.isArray(e.content)&&e.content.some((e=>\"expression\"===e.type)))return R()}_handleRequiredFieldsChange(){const e=this._updateRequiredFields();this._set(\"_updatingRequiredFieldsPromise\",e),e.then((()=>{this._updatingRequiredFieldsPromise===e&&this._set(\"_updatingRequiredFieldsPromise\",null)}))}async _updateRequiredFields(){if(!this.layer||!this.view)return;const e=\"3d\"===this.view.type,{layer:t,layer:{fieldsIndex:r,objectIdField:i}}=this,o=\"renderer\"in t&&t.renderer,n=\"orderBy\"in t&&t.orderBy,l=t.featureReduction,u=new Set,p=await a([o?o.collectRequiredFields(u,r):null,h(u,t),e?F(u,t):null,s(this.filter)?w(u,t,this.filter):null,s(this.featureEffect)?w(u,t,this.featureEffect.filter):null,l?g(u,t,l):null,n?E(u,t,n):null]);if(t.timeInfo&&this.timeExtent&&x(u,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),\"feature\"===t.type&&t.floorInfo&&x(u,t.fieldsIndex,[t.floorInfo.floorField]),\"subtype-group\"===t.type){v(u,r,t.subtypeField);const e=t.sublayers.map((e=>{var t;return Promise.all([null==(t=e.renderer)?void 0:t.collectRequiredFields(u,r),h(u,e)])}));await a(e)}for(const s of p)s.error&&P.error(s.error);v(u,r,i),e&&\"displayField\"in t&&t.displayField&&v(u,r,t.displayField);const f=Array.from(u).sort();this._set(\"requiredFields\",f)}validateFetchPopupFeatures(e){if(o(e))return null;for(const t of e.clientGraphics){const i=t.layer;if(\"popupEnabled\"in i&&!i.popupEnabled)return new r(\"featurelayerview:fetchPopupFeatures\",\"Popups are disabled\",{layer:i});if(\"popupTemplate\"in i){if(!q(i,e))return new r(\"featurelayerview:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:i})}if(t.isAggregate&&!(i.featureReduction&&\"popupTemplate\"in i.featureReduction&&i.featureReduction.popupEnabled&&i.featureReduction.popupTemplate))return new r(\"featurelayerview:fetchPopupFeatures\",\"Popups are disabled\",{layer:i})}}async fetchClientPopupFeatures(e){const t=s(e)?e.clientGraphics:null;if(!t||0===t.length)return[];const r=new Array(t.length),i=new Map,o=await this.createPopupQuery(e);for(let a=0;a<t.length;a++){const n=t[a];if(n.isAggregate){r[a]=n;continue}const{layer:l}=n;if(!(\"popupEnabled\"in l))continue;const u=y(this.layer.fieldsIndex,o.outFields),p=q(l,e);if(!s(p))continue;const f=await this._loadArcadeModules(p);f&&f.arcadeUtils.hasGeometryOperations(p)||!b(u,n)?i.set(n.getObjectId(),a):r[a]=n}if(\"stream\"===this.layer.type||0===i.size)return r.filter(Boolean);o.objectIds=Array.from(i.keys());try{const e=await this.layer.queryFeatures(o);for(const t of e.features){r[i.get(t.getObjectId())]=t}}catch{}return r.filter(Boolean)}async createPopupQuery(e){const t=this.layer.createQuery(),r=new Set;let i=!1;const o=s(e)&&e.clientGraphics?e.clientGraphics.map((e=>e.layer)):[this.layer];for(const a of o){if(!(\"popupEnabled\"in a))continue;const t=q(a,e);if(!s(t))continue;const o=await this._loadArcadeModules(t),n=o&&o.arcadeUtils.hasGeometryOperations(t);i=!(\"point\"!==this.layer.geometryType&&!n);const l=await I(this.layer,t);for(const e of l)r.add(e)}if(t.returnGeometry=i,t.returnZ=i,t.returnM=i,t.outFields=Array.from(r),t.outSpatialReference=this.view.spatialReference,\"feature\"===this.layer.type){const e=_(this);s(e)&&(t.where=t.where?`(${t.where}) AND (${e})`:e)}return t}canResume(){return!!super.canResume()&&(!s(this.timeExtent)||!this.timeExtent.isEmpty)}};return e([u()],O.prototype,\"_updatingRequiredFieldsPromise\",void 0),e([u({readOnly:!0})],O.prototype,\"availableFields\",null),e([u()],O.prototype,\"effect\",null),e([u({type:d})],O.prototype,\"featureEffect\",null),e([u({type:c})],O.prototype,\"filter\",void 0),e([u(f)],O.prototype,\"timeExtent\",void 0),e([u()],O.prototype,\"layer\",void 0),e([u({type:Number})],O.prototype,\"maximumNumberOfFeatures\",null),e([u({readOnly:!0,type:Boolean})],O.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([u({readOnly:!0})],O.prototype,\"requiredFields\",void 0),e([u()],O.prototype,\"suspended\",void 0),e([u()],O.prototype,\"view\",void 0),O=e([p(\"esri.views.layers.FeatureLayerView\")],O),O};export{O as FeatureLayerView,O as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";const a=a=>{let o=class extends a{initialize(){const{layer:e,view:s}=this;e.source.supportsSpatialReference(s.spatialReference)||this.addResolvingPromise(Promise.reject(new r(\"layerview:spatial-reference-incompatible\",\"The spatial references supported by this OGC layer are incompatible with the spatial reference of the view\",{layer:e})))}get availableFields(){return this.layer.fieldsIndex.fields.map((e=>e.name))}};return e([s()],o.prototype,\"layer\",void 0),e([s({readOnly:!0})],o.prototype,\"availableFields\",null),o=e([t(\"esri.views.layers.OGCFeatureLayerView\")],o),o};export{a as OGCFeatureLayerView,a as default};\n"],"sourceRoot":""}