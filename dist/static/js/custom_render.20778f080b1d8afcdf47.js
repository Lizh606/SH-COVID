(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{Vgju:function(t,e,o){"use strict";o.r(e);var n=o("FuRH"),a=o("yIpb"),i=o("3Dh3"),s=o("oCYn");function r(e,t){var o,a=Object.keys(e);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(e),t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,o)),a}function p(a){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){var e,o;e=a,t=n[o=t],o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(n,t))})}return a}var d={props:{component:{type:Object,required:!0},defaultParams:{type:Object}},data:function(){return{componentId:null}},computed:{selfTarget:function(){return this.defaultParams.props.mapTarget}},watch:{component:{handler:function(){var t="custom-".concat(this.component.componentType.toLowerCase());this.componentId=s.default.component(t)?t:null},deep:!0,immediate:!0},selfTarget:function(t,e){t=n.a.$options.getMap(t),e=n.a.$options.getMap(e);e&&this.callChildRemovedHooks(!1,e),t?(this.map=t,this.callChildLoadedHooks()):(this.map=n.a.$options.getMap(this.getMapTarget()),this.map&&this.callChildLoadedHooks())}},created:function(){this.loadedMapFn=this.loadedMap.bind(this),this.removedMapFn=this.removedMap.bind(this)},mounted:function(){this.componentId&&(this.exsistLoadedHook=!!this.vertifyLoadedHook(),this.exsistLoadedHook&&(this.init(),n.a.$on("load-map",this.loadedMapFn),a.a.$on("delete-map",this.removedMapFn)))},beforeDestroy:function(){this.map&&this.callChildRemovedHooks()},destroyed:function(){this.exsistLoadedHook&&(n.a.$off("load-map",this.loadedMapFn),a.a.$off("delete-map",this.removedMapFn))},methods:{init:function(){this.selfTarget?(this.map=n.a.$options.getMap(this.getMapTarget()),this.map&&this.callChildLoadedHooks()):this.getMapTarget()&&this.updateMapTarget(this.getMapTarget())},getRelatedMapTarget:function(){var t=this.$store.getters,e=t.componentsOnScreen,o=t.gridLayout.content,t=t.activeComponentId;return Object(i.h)(e,o||[],t)},getMapTarget:function(){var t=this.getTopTwoMapTarget(),e=-1!==t.all.indexOf(this.selfTarget)&&this.selfTarget;return-1!==t.all.indexOf(this.prevBindTarget)&&this.prevBindTarget||e||this.getRelatedMapTarget()||t.first},updateMapTarget:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=((0,this.$store.getters.getComponentsByID)(this.component.componentId)||{}).propDatas;this.$store.dispatch("CHANGE_COMPONENT_PROPS_SETTING",{componentId:this.component.componentId,propDatas:p(p({},e),{},{mapTarget:t})})},vertifyLoadedHook:function(){return((this.$children[0]||{}).$options||{}).loaded},callChildLoadedHooks:function(){var t=this.$children[0],e=this.vertifyLoadedHook();e&&e.call(t,this.map)},callChildRemovedHooks:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=1<arguments.length?arguments[1]:void 0,o=this.$children[0],a=(o||{}).$options.removed;a&&a.call(o,e||this.map),e||(this.map=null);e=this.getTopTwoMapTarget();this.prevBindTarget=this.selfTarget;e=this.selfTarget===e.second?e.first:e.second;t&&this.updateMapTarget(e)},loadedMap:function(t,e){this.getMapTarget()===e&&(this.map=t,this.selfTarget===e?this.callChildLoadedHooks():this.updateMapTarget(e))},removedMap:function(t){this.getMapTarget()===t&&this.callChildRemovedHooks(!0)},getTopTwoMapTarget:function(){var t,e,o,a=n.a.$options.getAllMaps();for(o in a)if(t){if(!e){e=o;break}}else t=o;return{first:t,second:e,all:Object.keys(a)}}}},o=o("KHd+"),d=Object(o.a)(d,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",[e(t.componentId,t._b({tag:"component",style:t.defaultParams.style},"component",t.defaultParams.props,!1))],1)},[],!1,null,null,null);e.default=d.exports}}]);