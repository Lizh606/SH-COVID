(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"Ms+m":function(e,t,n){"use strict";var o=n("Kr5Y"),s=n("Qu0N"),i=n("oTir"),a=n("tmJK"),s=Object.assign({},Object(s.b)()),s={name:"SmCollapsePanel",defaultComponent:o.default,mixins:[i.a,a.a],inheritAttrs:!1,props:s,methods:{getPrefixCls:function(e,t){return t||"".concat(this.defaultPrefixCls,"-").concat(e)}}},n=n("KHd+"),s=Object(n.a)(s,void 0,void 0,!1,null,null,null);t.a=s.exports},QOAf:function(e,t,n){"use strict";var o=n("n3EX"),s=n("Qu0N"),i=n("oTir"),a=n("tmJK"),s=Object.assign({},Object(s.a)()),s={name:"SmCollapse",defaultComponent:o.default,mixins:[i.a,a.a],inheritAttrs:!1,model:{prop:"activeKey",event:"change"},props:s,computed:{extralListeners:function(){var t=this;return{change:function(e){t.$emit("change",e)}}}}},n=n("KHd+"),s=Object(n.a)(s,void 0,void 0,!1,null,null,null);t.a=s.exports},cDJF:function(e,t,n){"use strict";n.r(t);var o=n("oTir"),s=n("rn6b"),i=n("CKgU"),a=n("Kwrx"),l=n("s1Pg"),r=n("QOAf"),c=n("Ms+m"),d=n("hdLw"),p=n.n(d);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=f(n);return function(e,t){{if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,o?(e=f(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(s,p.a.Evented);var e,t,n,o=y(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).webmap=e,t.sourceListModel=t.webmap?t.webmap.getSourceListModel:{},t}return e=s,(t=[{key:"getStyle",value:function(e){return this.sourceListModel&&this.sourceListModel.getLegendStyle(e)}}])&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(),v=n("qAG6");function h(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}a={name:"SmLegend",components:{SmCard:l.a,SmCollapse:r.a,SmCollapsePanel:c.a},filters:{selectLayerType:function(e,t){return t.className||("POINT"===e&&"BASIC_POINT"!==t.type?"":{POLYGON:"sm-components-icon-ploygon",POINT:"sm-components-icon-multi-point",LINE:"sm-components-icon-line"}[e])}},mixins:[i.a,s.a,o.a,a.a],props:{headerName:{type:String,default:function(){return this.$t("legend.title")}},iconClass:{type:String,default:"sm-components-icon-list"},layerNames:{type:Array,required:!0},isShowTitle:{type:Boolean,default:!1},isShowField:{type:Boolean,default:!1},mode:{type:String,default:"simple",validator:function(e){return-1!==["simple","panel"].indexOf(e)}},position:{type:String,default:"bottom-left"}},data:function(){return{legendList:{},activeLegend:[],themeStyle:{}}},computed:{uniqueSymbolStyle:function(){return function(e){var t=e.style,n=e.radius,o=e.color,s={};switch(t.type){case"BASIC_POINT":s.color=Object(v.c)(t.fillColor||o,t.fillOpacity);break;case"SYMBOL_POINT":s.color=Object(v.c)(t.fillColor||o,t.fillOpacity),s.fontSize="".concat(2*n,"px");break;case"IMAGE_POINT":s.background="url(".concat(t.imageInfo.url,")"),s.backgroundSize="contain",s.width="".concat(2*(t.radius||n),"px"),s.height="".concat(2*(t.radius||n),"px");break;case"SVG_POINT":s["-webkit-mask"]="url(".concat(t.url,")"),s.backgroundColor=Object(v.c)(t.fillColor||o,t.fillOpacity),s["-webkit-mask-size"]="contain",s.width="".concat(2*(t.radius||n),"px"),s.height="".concat(2*(t.radius||n),"px");break;default:s.color=Object(v.c)(t.fillColor||o,t.fillOpacity)}return s}},rankSymbolStyle:function(){return function(e){var t=e.style,n=e.radius,o=e.color,s={};switch(t.type){case"BASIC_POINT":s.background=Object(v.c)(o||t.fillColor,t.fillOpacity),s.width="".concat(2*n,"px"),s.height="".concat(2*n,"px"),s.borderRadius="".concat(n,"px");break;case"SYMBOL_POINT":s.color=Object(v.c)(o||t.fillColor,t.fillOpacity),s.fontSize="".concat(2*n,"px");break;case"IMAGE_POINT":s.background="url(".concat(t.imageInfo.url,")"),s.backgroundSize="contain",s.width="".concat(2*n,"px"),s.height="".concat(2*n,"px")}return s}},showRangeInfo:function(){var o=this;return function(e,t){var n=e.start,e=e.end;return void 0!==n&&void 0!==e?o.legendList[t].integerType?o.getIntegerRangeInfo(n,e):"".concat(n," - ").concat(e):void 0!==n?"≥".concat(n):"≤".concat(e)}},rankIconStyle:function(){return function(e){if(e instanceof Array){e=e.map(function(e){return e.radius}),e=Math.max.apply(Math,h(e));return{width:"".concat(2*e,"px")}}return{}}}},watch:{layerNames:function(){this.initLegendList()}},methods:{initLegendList:function(){var n=this;this.legendList={},this.viewModel&&(this.layerNames.forEach(function(e){var t=n.viewModel.getStyle(e);t&&(n.legendList[e]||n.$set(n.legendList,e,t))}),this.activeLegend="{}"!==JSON.stringify(this.legendList)?Object.keys(this.legendList)[0]:[],this.activeLegend=this.isShowTitle?this.activeLegend:Object.keys(this.legendList))},getIntegerRangeInfo:function(e,t){return t-1===e||t===e?"".concat(e):"".concat(e," - ").concat(t-1)}},loaded:function(){this.viewModel=new g(this.webmap),this.initLegendList()},removed:function(){this.legendList={}}},n=n("KHd+"),a=Object(n.a)(a,function(){var s=this,e=s.$createElement,i=s._self._c||e;return i("sm-collapse-card",{directives:[{name:"show",rawName:"v-show",value:s.isShow,expression:"isShow"}],staticClass:"sm-component-legend",attrs:{"icon-class":"simple"===s.mode?"":s.iconClass,"icon-position":s.position,"header-name":"simple"===s.mode?"":s.headerName,"auto-rotate":s.autoRotate,collapsed:s.collapsed,background:s.background,textColor:s.textColor,"split-line":s.splitLine}},[i("sm-card",{style:"simple"!==s.mode&&s.collapseCardBackgroundStyle,attrs:{bordered:!1}},[("panel"===s.mode||1<s.layerNames.length&&"simple"!==s.mode)&&"{}"!==JSON.stringify(s.legendList)?i("sm-collapse",{staticClass:"sm-component-legend__table",model:{value:s.activeLegend,callback:function(e){s.activeLegend=e},expression:"activeLegend"}},s._l(s.legendList,function(n,o){return i("sm-collapse-panel",{key:o,class:[s.isShowTitle?"":"sm-component-legend__panel"],attrs:{disabled:!s.isShowTitle,showArrow:!1}},[i("template",{slot:"header"},[s.isShowTitle?i("div",{staticClass:"header-wrap",style:s.headingTextColorStyle},[i("div",{staticClass:"sm-component-legend__title add-ellipsis"},[s._v(s._s(n.layerId))]),s._v(" "),i("i",{class:s.activeLegend.includes(o)?"sm-components-icon-solid-triangle-down":"sm-components-icon-solid-triangle-right"})]):s._e()]),s._v(" "),s.isShowField?i("div",{staticClass:"sm-component-legend__themefield add-ellipsis",style:s.secondaryTextColorStyle},[s._v("\n          "+s._s(s.$t("legend.themeField"))+":"+s._s(n.themeField)+"\n        ")]):s._e(),s._v(" "),"UNIQUE"===n.layerType?i("div",{staticClass:"sm-component-legend__wrap"},[i("div",{staticClass:"sm-component-legend__point"},s._l(n.styleGroup,function(e,t){return i("div",{key:t,staticClass:"sm-component-legend__item"},[i("div",{staticClass:"sm-component-legend__rank-icon"},[i("i",{class:s._f("selectLayerType")(n.featureType,e.style),style:s.uniqueSymbolStyle(e)})]),s._v(" "),i("span",{staticClass:"add-ellipsis"},[s._v("\n                "+s._s(e.value)+"\n              ")])])}),0)]):s._e(),s._v(" "),"HEAT"===n.layerType?i("div",{staticClass:"sm-component-legend__wrap"},[i("div",{staticClass:"sm-component-legend__heatbox"},[i("div",{staticClass:"sm-component-legend__heat"},[i("i",{style:{background:"linear-gradient(to top,"+n.styleGroup.join(",")+")"}})]),s._v(" "),i("div",{staticClass:"sm-component-legend__heatText"},[i("span",{staticClass:"sm-component-legend__top"},[i("i",{staticClass:"sm-components-icon-solid-triangle-left"}),s._v("\n                "+s._s(s.$t("legend.top"))+"\n              ")]),s._v(" "),i("span",{staticClass:"sm-component-legend__bottom"},[i("i",{staticClass:"sm-components-icon-solid-triangle-left"}),s._v("\n                "+s._s(s.$t("legend.bottom"))+"\n              ")])])])]):s._e(),s._v(" "),"RANGE"===n.layerType?i("div",{staticClass:"sm-component-legend__wrap"},[i("div",{staticClass:"sm-component-legend__range"},s._l(n.styleGroup,function(e,t){return i("div",{key:t,staticClass:"sm-component-legend__range-item"},[i("div",[i("i",{style:{background:e.color}})]),s._v(" "),i("span",{staticClass:"add-ellipsis"},[i("i",{staticClass:"sm-components-icon-solid-triangle-left"}),s._v("\n                "+s._s(s.showRangeInfo(e,o))+"\n              ")])])}),0)]):s._e(),s._v(" "),"RANK_SYMBOL"===n.layerType?i("div",{staticClass:"sm-component-legend__wrap"},[i("div",{staticClass:"sm-component-legend__rank"},s._l(n.styleGroup,function(e,t){return i("div",{key:t,staticClass:"sm-component-legend__rank-item"},[i("div",{staticClass:"sm-component-legend__rank-icon",style:s.rankIconStyle(n.styleGroup)},[i("i",{class:e.style.className,style:s.rankSymbolStyle(e)})]),s._v(" "),i("span",{staticClass:"add-ellipsis"},[i("i",{staticClass:"sm-components-icon-solid-triangle-left"}),s._v("\n                "+s._s(e.start)+"-"+s._s(e.end)+"\n              ")])])}),0)]):s._e()],2)}),1):"simple"===s.mode||1===s.layerNames.length?s._l(s.legendList,function(n,o,e){return i("div",{key:e,staticClass:"sm-component-legend__noBorder"},[s.isShowTitle?i("div",{staticClass:"sm-component-legend__title add-ellipsis",style:s.headingTextColorStyle},[s._v("\n        "+s._s(n.layerId)+"\n      ")]):s._e(),s._v(" "),s.isShowField?i("div",{staticClass:"sm-component-legend__themefield add-ellipsis",style:s.secondaryTextColorStyle},[s._v("\n        "+s._s(s.$t("legend.themeField"))+":"+s._s(n.themeField)+"\n      ")]):s._e(),s._v(" "),"UNIQUE"===n.layerType?i("div",{staticClass:"sm-component-legend__wrap"},[i("div",{staticClass:"sm-component-legend__point"},s._l(n.styleGroup,function(e,t){return i("div",{key:t,staticClass:"sm-component-legend__item"},[i("div",{staticClass:"sm-component-legend__rank-icon"},[i("i",{class:s._f("selectLayerType")(n.featureType,e.style),style:s.uniqueSymbolStyle(e)})]),s._v(" "),i("span",{staticClass:"add-ellipsis"},[s._v("\n              "+s._s(e.value)+"\n            ")])])}),0)]):s._e(),s._v(" "),"HEAT"===n.layerType?i("div",{staticClass:"sm-component-legend__wrap"},[i("div",{staticClass:"sm-component-legend__heatbox"},[i("div",{staticClass:"sm-component-legend__heat"},[i("i",{style:{background:"linear-gradient(to top,"+n.styleGroup.join(",")+")"}})]),s._v(" "),i("div",{staticClass:"sm-component-legend__heatText"},[i("span",{staticClass:"sm-component-legend__top"},[i("i",{staticClass:"sm-components-icon-solid-triangle-left"}),s._v("\n              "+s._s(s.$t("legend.top"))+"\n            ")]),s._v(" "),i("span",{staticClass:"sm-component-legend__bottom"},[i("i",{staticClass:"sm-components-icon-solid-triangle-left"}),s._v("\n              "+s._s(s.$t("legend.bottom"))+"\n            ")])])])]):s._e(),s._v(" "),"RANGE"===n.layerType?i("div",{staticClass:"sm-component-legend__wrap"},[i("div",{staticClass:"sm-component-legend__range"},s._l(n.styleGroup,function(e,t){return i("div",{key:t,staticClass:"sm-component-legend__range-item"},[i("div",[i("i",{style:{background:e.color}})]),s._v(" "),i("span",{staticClass:"add-ellipsis"},[i("i",{staticClass:"sm-components-icon-solid-triangle-left"}),s._v("\n              "+s._s(s.showRangeInfo(e,o))+"\n            ")])])}),0)]):s._e(),s._v(" "),"RANK_SYMBOL"===n.layerType?i("div",{staticClass:"sm-component-legend__wrap"},[i("div",{staticClass:"sm-component-legend__rank"},s._l(n.styleGroup,function(e,t){return i("div",{key:t,staticClass:"sm-component-legend__rank-item"},[i("div",{staticClass:"sm-component-legend__rank-icon",style:s.rankIconStyle(n.styleGroup)},[i("i",{class:e.style.className,style:s.rankSymbolStyle(e)})]),s._v(" "),i("span",{staticClass:"add-ellipsis"},[i("i",{staticClass:"sm-components-icon-solid-triangle-left"}),s._v("\n              "+s._s(e.start)+"-"+s._s(e.end)+"\n            ")])])}),0)]):s._e()])}):s._e()],2)],1)},[],!1,null,null,null);t.default=a.exports}}]);