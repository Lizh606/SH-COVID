(window.webpackJsonp=window.webpackJsonp||[]).push([[20,17],{EBC7:function(e,t,o){"use strict";o.r(t);var n=o("oCYn"),r=o("3Dh3"),a=o("zT9C"),i=o.n(a),a=o("XaGS"),s=o.n(a),c=o("GSdF"),p=o("FuRH"),a={props:{component:{type:Object,required:!0},defaultParams:{type:Object}},data:function(){return{componentId:null,renderProps:null}},computed:{background:function(){return-1!==this.excludeComponentsBackground.indexOf(this.component.componentType)?{}:Object(c.a)(this.component.propDatas)},subComponentList:function(){var e=this.$store.getters.components;return Object.values(e.mapSubComponent).map(function(e){return e.type})},excludeComponentsBackground:function(){return this.subComponentList.concat("Container")},mapsOnScreen:function(){return this.$store.getters.mapsOnScreen()},firstMapTarget:function(){return(this.$store.getters.mapsOnScreen()[0]||{}).value}},watch:{component:{handler:function(){var e=Object(r.d)(this.component.uri);this.componentId=n.default.component(e)?e:null},deep:!0,immediate:!0},"defaultParams.props":{handler:function(e,t){s()(e,t)||(this.renderProps=i()(this.defaultParams.props),-1===this.excludeComponentsBackground.indexOf(this.component.componentType)&&(this.renderProps.background=""),-1!==["LiquidFill","TimeRange"].indexOf(this.component.componentType)&&(this.renderProps.backgroundColor=this.renderProps.backgroundColorReplacer,delete this.renderProps.backgroundColorReplacer))},immediate:!0},mapsOnScreen:function(e,t){s()(e,t)||this.renderProps.mapTarget&&!p.a.$options.getMap(this.renderProps.mapTarget)&&(this.renderProps.mapTarget=this.firstMapTarget)}},created:function(){this.setDefaultMapTarget()},methods:{setDefaultMapTarget:function(){this.renderProps&&this.renderProps.hasOwnProperty("mapTarget")&&!this.renderProps.mapTarget&&(this.renderProps.mapTarget=this.getRelatedMapTarget())},getRelatedMapTarget:function(){var e=this.$store.getters,t=e.componentsOnScreen,o=e.gridLayout.content,e=e.activeComponentId;return Object(r.h)(t,o||[],e)}}},o=o("KHd+"),a=Object(o.a)(a,function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("div",{style:e.background},[t(e.componentId,e._b({tag:"component",style:e.defaultParams.style,attrs:{componentId:e.component.componentId}},"component",e.renderProps,!1))],1)},[],!1,null,null,null);t.default=a.exports},GAzf:function(e,t,o){"use strict";var n=o("4zwu"),r=o("FuRH"),a=o("3Dh3"),i=o("+NyJ");t.a={data:function(){return{listenMapLoad:!1}},computed:{dataIds:function(){return this.component.dataIds||[]},dataId:function(){return this.dataIds[0]},currentDataCache:function(){return this.$store.getters.getDataCache(this.dataId)},components:function(){return this.$store.getters.components},componentType:function(){return this.component.componentType},mapTarget:function(){return this.component.propDatas.mapTarget},currentProps:function(){var e,t;return"server"===(e=this.renderProps).dataType&&0<this.dataIds.length&&(t=this.getValueProps(e),Object.assign(e,t)),e},labelConfig:function(){return Object(i.f)(this.component.componentId,this.dataId)}},beforeCreate:function(){this.watcher=[]},mounted:function(){this.listenMapLoad&&r.a.$on("load-map",this.loadMapSucceed)},beforeDestroy:function(){this.listenMapLoad&&r.a.$off("load-map",this.loadMapSucceed)},methods:{cleanWatcher:function(){this.watcher.forEach(function(e){e()}),this.watcher=[]},loadMapSucceed:function(e,t){t===this.mapTarget&&this.loadMap(t)},loadMap:function(){},getValueProps:function(e){var t=this.getFeatureId(this.dataId),t=this.currentDataCache&&this.currentDataCache.type&&-1!==this.currentDataCache.type.indexOf("time")&&e.filterCategoryValue?n.a.$options.getDataByCategory(this.currentDataCache,[e.filterCategoryValue])||{}:n.a.$options.getData(t)||{};return this.updateDataPropsHandler(e,{features:t})},getValueByField:function(e,t){var o=this.currentDataCache&&this.currentDataCache.type&&-1!==this.currentDataCache.type.indexOf("time"),e=e&&e.features&&e.features.features,o=o?e&&e.length-1:0,t=e&&0<=o&&e[o]&&e[o].properties[t];return t||0===t?t.toString():""},hasField:function(e,t){return e&&e.features&&e.features.features[0]&&e.features.features[0].properties.hasOwnProperty(t)},getFeatureId:function(e){return Object(a.f)(this.$store.getters.getDataCache,e)}}}},jWoB:function(e,t,o){"use strict";o.r(t);var n=o("EBC7"),r=o("GAzf"),a=o("qAG6"),p=o("Qiv1"),i=o("4zwu"),s=o("XaGS"),u=o.n(s),s=o("zT9C"),c=o.n(s),l={switch:"value",switchDataSource:"value"},r={mixins:[n.default,r.a],data:function(){return{props:{value:void 0}}},computed:{nextProps:function(){var e=c()(this.currentProps);return void 0!==this.props.value&&(e.options.series[0].data[0].value=this.props.value),this.dealWithProps(e),e},listeners:function(){var e=this.component.componentId;return this.$store.getters.getListensByComponentId(e)},currentPropsValue:function(){var e=(this.currentProps.options||{}).series||[],e=e[0]&&e[0].data||[];return e[0]&&e[0].value}},watch:{currentPropsValue:function(e,t){e!==t&&(this.props.value=e)},listeners:function(e,s){var c=this;e&&!u()(e,s)?e.forEach(function(e){var t,o=e.targetData,n=e.actionId,r=e.timestamp,a=e.blockEventLinkage,i=o&&o.dataId,o=s&&s.find(function(e){return e.actionId===n});o&&o.timestamp===r||a||(i&&(t=c.getFeatures(i)),t=p.b[e.type].callback(e,t,c),c.props[l[e.type]]=t)}):e||this.props.value&&(this.props.value=void 0)}},methods:{updateDataPropsHandler:function(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=this.getValueByField(t.features,e.field);return e.options.series[0].data[0].value=isNaN(+t)||""===t?0:+t,o},dealWithProps:function(e){var t,o=e.options.series;this.component.subType&&"GaugeMark"!==this.component.subType||("server"===e.dataType&&e.field&&(o[0].data[0].name=e.field),this.component.subType||this.dealWithBaseGaugeProps(e)),"GaugeShine"!==this.component.subType&&"GaugeMark"!==this.component.subType||(t=(e.options.series[0].data[0].value-o[1].min)/(o[1].max-o[1].min),o[0].axisLine.lineStyle.color[0][0]=isNaN(t)?0:t.toFixed(2),void 0===o[1].min&&(o[1].min=0),void 0===o[1].max&&(o[1].max=100),o[0].min=o[1].min,o[0].max=o[1].max,"GaugeShine"===this.component.subType&&this.dealWithGaugeShineProps(e)),"GaugeSpin"===this.component.subType?this.dealWithGaugeSpinProps(e):this.dealWithColor(e)},dealWithColor:function(e){var t=e.options.series,o=e.colorGroup,e=this.component.subType?t[1]:t[0];t[0].itemStyle&&!t[0].itemStyle.color&&(t[0].itemStyle.color="auto"),this.component.subType&&t[0].axisLine.lineStyle.color&&(t[0].axisLine.lineStyle.color[0][1]||(t[0].axisLine.lineStyle.color[0][1]=o[0]),t[0].axisLine.lineStyle.color[1][1]||(t[0].axisLine.lineStyle.color[1][1]=o[1])),e.splitLine.lineStyle.color||(e.splitLine.lineStyle.color=this.component.subType?o[0]:"#ffffff"),e.axisTick.lineStyle.color||(e.axisTick.lineStyle.color=this.component.subType?o[0]:"#ffffff"),e.axisLabel.color||(e.axisLabel.color="auto")},dealWithBaseGaugeProps:function(e){var t=e.options.series,o=e.thresholdConfig.pieces;if(o.length){var n=e.colorGroup,r=n.length,a=t[0].min,i=t[0].max,s=[];o.sort(function(e,t){return e.min-t.min});for(var c=0;c<o.length;c++)(void 0===o[c].min||o[c].min<a||o[c].max<a)&&(o[c].min=a),(void 0===o[c].max||o[c].min>i||o[c].max>i)&&(o[c].max=i),s.find(function(e){return e[0]===i})||s.push([o[c].max,o[c].color]),0===c&&o[c].min>a&&s.push([o[c].min,""]),o[c+1]&&o[c].max!==o[c+1].min&&s.push([o[c+1].min||a,""]),c===o.length-1&&o[c].max<i&&s.push([i,""]);for(var s=s.filter(function(e){return e[0]!==a}),p=0;p<s.length;p++){var u=(s[p][0]-a)/(i-a);s[p][0]=u}s.sort(function(e,t){return e[0]-t[0]});for(var l=0;l<s.length;l++)s[l][1]||(s[l][1]=n[l%r]);e.options.series[0].axisLine.lineStyle.color=s}else delete e.options.series[0].axisLine.lineStyle.color},dealWithGaugeShineProps:function(e){var t=e.options.series;t[2].itemStyle.normal.color.colorStops[0].color=e.colorGroup[0],t[2].itemStyle.normal.color.colorStops[1].color=e.colorGroup[1];e=t[2].itemStyle.normal.color.colorStops[0].color;t[3].itemStyle.normal.color.colorStops[0].color=Object(a.c)(e,.8),t[3].itemStyle.normal.color.colorStops[1].color=Object(a.c)(e,.5),t[4].itemStyle.normal.color.colorStops[0].color=Object(a.c)(e,.5),t[4].itemStyle.normal.color.colorStops[1].color=Object(a.c)(e,.3),t[5].itemStyle.normal.color.colorStops[0].color=Object(a.c)(e,.3),t[5].itemStyle.normal.color.colorStops[1].color=Object(a.c)(e,0)},dealWithGaugeSpinProps:function(e){var t=e.options.series;t[0].radius=t[1].radius[0];var o=(+t[1].radius[0].replace("%","")-+t[1].radius[1].replace("%",""))/+t[0].radius.replace("%","");t[0].splitLine.length="".concat(100*o.toFixed(2),"%");o=t[0].data[0].value||0;t[0].data[0].value=o,t[1].data[0].value=o,t[1].data[1].value=0<100-o?100-o:0;o=e.colorGroup;e.options.series[0].customOptions&&!e.options.series[0].customOptions.color&&(e.options.series[0].customOptions.color=o[0]),t[0].splitLine.lineStyle.color||(t[0].splitLine.lineStyle.color=Object(a.c)(e.background,1))},getFeatures:function(e){var t=this.$store.getters.getDataCache(e),e=this.getFeatureId(e),e=t&&t.type&&-1!==t.type.indexOf("time")&&this.currentProps.filterCategoryValue?i.a.$options.getDataByCategory(t,[this.currentProps.filterCategoryValue])||{}:i.a.$options.getData(e)||{};return e.features.features}}},o=o("KHd+"),r=Object(o.a)(r,function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("div",{style:e.background},[t(e.componentId,e._b({ref:"chart",tag:"component",style:e.defaultParams.style,attrs:{componentId:e.component.componentId}},"component",e.nextProps,!1))],1)},[],!1,null,null,null);t.default=r.exports}}]);