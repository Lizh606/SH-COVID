(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{4:function(t,e){},5:function(t,e){},6:function(t,e){},7:function(t,e){},8:function(t,e){},9:function(t,e){},BeCp:function(t,e,n){"use strict";n("DHoB")},DHoB:function(t,e,n){},"I/MP":function(t,e,n){"use strict";n.r(e);var d=n("hyZ5"),i=n("MZFn"),i=n.n(i),h=n("FuRH");n("C1Pg");function c(t,e){return function(t){if(Array.isArray(t))return t}
/**
 * @license
 * Copyright 2018 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var p="aqua",a="tryResNetButton";function r(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)}function s(t,e,n){e=1<arguments.length&&void 0!==e?e:"loading",n=2<arguments.length&&void 0!==n?n:"main";t?(document.getElementById(e).style.display="block",document.getElementById(n).style.display="none"):(document.getElementById(e).style.display="none",document.getElementById(n).style.display="block")}function l(t){return[t.y,t.x]}function f(t,e,s,n){var u=3<arguments.length&&void 0!==n?n:1;d.a(t,e).forEach(function(t){var e,n,i,o,r,a;e=l(t[0].position),n=l(t[1].position),i=p,o=u,r=s,t=(a=c(e,2))[0],e=a[1],n=(a=c(n,2))[0],a=a[1],r.beginPath(),r.moveTo(e*o,t*o),r.lineTo(a*o,n*o),r.lineWidth=2,r.strokeStyle=i,r.stroke()})}function m(t,e,n,i){for(var o,r=3<arguments.length&&void 0!==i?i:1,a=0;a<t.length;a++){var s,u,c,l=t[a];l.score<e||(u=(s=l.position).y,c=s.x,o=u*r,l=c*r,s=3,u=p,(c=n).beginPath(),c.arc(l,o,s,0,2*Math.PI),c.fillStyle=u,c.fill())}}function u(t,e,n,i,o,r,a){try{var s=t[r](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(i,o)}function g(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var i=s.apply(t,a);function o(t){u(i,e,n,o,r,"next",t)}function r(t){u(i,e,n,o,r,"throw",t)}o(void 0)})}}
/**
 * @license
 * Copyright 2018 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var v,y,w,b,x,P,k,M,C,S=544,B=430,E=new i.a;function D(){return(D=g(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){t.next=2;break}throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");case 2:return(e=document.getElementById("video")).width=S,e.height=B,n=r(),t.next=8,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:n?void 0:S,height:n?void 0:B}});case 8:return n=t.sent,e.srcObject=n,t.abrupt("return",new Promise(function(t){e.onloadedmetadata=function(){t(e)}}));case 11:case"end":return t.stop()}},t)}))).apply(this,arguments)}function V(){return(V=g(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(){return D.apply(this,arguments)}();case 2:return(e=t.sent).play(),t.abrupt("return",e);case 5:case"end":return t.stop()}},t)}))).apply(this,arguments)}var W={algorithm:"single-pose",input:{architecture:"MobileNetV1",outputStride:16,inputResolution:513,multiplier:r()?.5:.75,quantBytes:2},singlePoseDetection:{minPoseConfidence:.1,minPartConfidence:.5},multiPoseDetection:{maxPoseDetections:5,minPoseConfidence:.15,minPartConfidence:.1,nmsRadius:30},output:{showVideo:!0,showSkeleton:!0,showPoints:!0,showBoundingBox:!1},net:null};function R(a){var t=document.getElementById("output"),s=t.getContext("2d"),u=!0;function c(t,e){if(t[0]){var n,i,o,r,a,s,u;t[0].keypoints.forEach(function(t){switch(t.part){case"rightWrist":n=t;break;case"leftWrist":i=t;break;case"leftHip":o=t;break;case"leftShoulder":r=t;break;case"rightShoulder":a=t;break;case"rightElbow":s=t;break;case"leftElbow":u=t}});var c,l,d,h,p,f=50<(f=a.position.x-r.position.x)?f:50,m=r.position.y+.8*(o.position.y-r.position.y),t=n.position.y,g={newlefthtWrist:i,newrightWristY:t,newrightWrist:n,leftElbow:u,rightElbow:s,validHeight:m,shoulderWidth:f};switch(function(t){var e,n=t.newlefthtWrist,i=t.newrightWristY,o=t.newrightWrist,r=t.leftElbow,a=t.rightElbow,s=t.validHeight,t=t.shoulderWidth,r=n.position.y<s&&i<s&&.5<o.score&&.5<n.score&&Math.abs(n.position.y-i)<.3*t&&i<a.position.y&&n.position.y<r.position.y,n=s<i&&n.position.y<s&&.5<n.score,a=i<s&&.5<o.score&&i<a.position.y;r?e="zoom":n?e="dashboard":a&&(e="pan");return e}(g)){case"zoom":v&&(l=(c=g).newlefthtWrist,d=c.newrightWrist,h=Math.abs(d.position.x-l.position.x),p=v.getMaxZoom(),c=v.getMinZoom(),d=1.5*S/8,P?(d=x+(l=h-P)/d,10<Math.abs(h)&&c<d<p&&20<=Math.abs(l)&&.2<Math.abs(v.getZoom()-d)&&v.zoomTo(d)):(P=h,x=v.getZoom()));break;case"dashboard":window.DashboardSwtich&&function(t,e){var n=t.newlefthtWrist,t=t.shoulderWidth,n=n.position.x;k||(!M||1500<=e-M)&&(k=n,M=null);M||(n=n-k,Math.abs(n)>.5*t&&(n<0&&window.DashboardSwtich.changePrevScreen(),0<n&&window.DashboardSwtich.changeNextScreen(),setTimeout(function(){v=null},500),k=null,M=e))}(g,e);break;case"pan":v&&function(t){var e=t.newrightWrist,n=t.newrightWristY;{var i,o,r;w?(i=-(e.position.x-w.position.x),o=n-w.position.y,(25<Math.abs(i)||25<Math.abs(o))&&(y=y||I(v),r=25<Math.abs(i)?i:0,t=25<Math.abs(o)?o:0,r=[b.lng+r/4*y,b.lat+t/4*y],C?(t=Math.abs(-(e.position.x-C.position.x)),n=Math.abs(n-C.position.y),(35<Math.abs(t-Math.abs(i))||35<Math.abs(n-Math.abs(o)))&&v.panTo(r)):v.panTo(r),C=e)):(w=e,b=v.getCenter(),C=null)}}(g);break;default:w=k=P=null}}}function l(t){return e.apply(this,arguments)}function e(){return(e=g(regeneratorRuntime.mark(function t(e){var n,i,o,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:E.begin(),n=[],t.t0=W.algorithm,t.next="single-pose"===t.t0?5:"multi-pose"===t.t0?12:19;break;case 5:return t.next=7,W.net.estimatePoses(a,{flipHorizontal:u,decodingMethod:"single-person"});case 7:return r=t.sent,n=n.concat(r),i=+W.singlePoseDetection.minPoseConfidence,o=+W.singlePoseDetection.minPartConfidence,t.abrupt("break",19);case 12:return t.next=14,W.net.estimatePoses(a,{flipHorizontal:u,decodingMethod:"multi-person",maxDetections:W.multiPoseDetection.maxPoseDetections,scoreThreshold:W.multiPoseDetection.minPartConfidence,nmsRadius:W.multiPoseDetection.nmsRadius});case 14:return r=t.sent,n=n.concat(r),i=+W.multiPoseDetection.minPoseConfidence,o=+W.multiPoseDetection.minPartConfidence,t.abrupt("break",19);case 19:s.clearRect(0,0,S,B),W.output.showVideo&&(s.save(),s.scale(-1,1),s.translate(-S,0),s.drawImage(a,0,0,S,B),s.restore()),n.forEach(function(t){var e=t.score,t=t.keypoints;i<=e&&(W.output.showPoints&&m(t,o,s),W.output.showSkeleton&&f(t,o,s),W.output.showBoundingBox&&(e=t,t=s,e=d.b(e),t.rect(e.minX,e.minY,e.maxX-e.minX,e.maxY-e.minY),t.strokeStyle="red",t.stroke()))}),E.end(),function(){if(!v){var t,e,n;for(n in h.a.$options.getAllMaps()){t=n,e=h.a.$options.getMap(t);break}(v=e||null)&&(v.on("zoomend",function(){y=I(v)}),y=I(v))}}(),c(n,e),requestAnimationFrame(l);case 26:case"end":return t.stop()}},t)}))).apply(this,arguments)}t.width=S,t.height=B,l()}function I(t){if(t){var e=t.getContainer().offsetWidth;return(t.getBounds().getEast()-t.getBounds().getWest())/e*6}}function A(){return(A=g(regeneratorRuntime.mark(function t(){var i,o,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s(!0),t.next=3,d.c({architecture:W.input.architecture,outputStride:W.input.outputStride,inputResolution:W.input.inputResolution,multiplier:W.input.multiplier,quantBytes:W.input.quantBytes});case 3:return i=t.sent,s(!1),t.prev=5,t.next=8,function(){return V.apply(this,arguments)}();case 8:o=t.sent,t.next=17;break;case 11:throw t.prev=11,t.t0=t.catch(5),(r=document.getElementById("info")).textContent="this browser does not support video capture,or this device does not have a camera",r.style.display="block",t.t0;case 17:e=[],n=i,W.net=n,0<e.length&&(W.camera=e[0].deviceId),W[a]=function(){null.setValue("ResNet50")},W.architecture=W.input.architecture,E.showPanel(0),document.getElementById("main").appendChild(E.dom),R(o);case 20:case"end":return t.stop()}var e,n},t,null,[[5,11]])}))).apply(this,arguments)}navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;i={name:"CameraControl",computed:{gestureControlVideoShow:function(){return this.$store.getters.appGlobalModule.gestureControlVideoShow},gestureControl:function(){return this.$store.getters.appGlobalModule.gestureControl}},watch:{gestureControlVideoShow:function(){this.handleVideo()},gestureControl:function(){this.handleVideo()}},mounted:function(){!function(){A.apply(this,arguments)}(),window.showVideo=this.showVideo.bind(this),window.hiddenVideo=this.hiddenVideo.bind(this),this.handleVideo()},methods:{handleVideo:function(){this.gestureControl&&this.gestureControlVideoShow?this.showVideo():this.hiddenVideo()},showVideo:function(){this.$el&&(this.$el.style.display="block")},hiddenVideo:function(){this.$el&&(this.$el.style.display="none")}}},n("BeCp"),n=n("KHd+"),i=Object(n.a)(i,function(){var t=this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{staticClass:"camera-box"},[e("div",{staticStyle:{display:"none"},attrs:{id:"info"}}),t._v(" "),e("div",{staticStyle:{display:"flex"},attrs:{id:"loading"}},[e("div",{staticClass:"spinner-text"},[t._v("Loading PoseNet model...")]),t._v(" "),e("div",{staticClass:"sk-spinner sk-spinner-pulse"})]),t._v(" "),e("div",{staticStyle:{display:"none"},attrs:{id:"main"}},[e("video",{staticStyle:{"-moz-transform":"scaleX(-1)","-o-transform":"scaleX(-1)","-webkit-transform":"scaleX(-1)",transform:"scaleX(-1)",display:"none"},attrs:{id:"video",playsinline:""}}),t._v(" "),e("canvas",{attrs:{id:"output"}})])])}],!1,null,"4208873e",null);e.default=i.exports}}]);