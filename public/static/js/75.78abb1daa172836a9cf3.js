(window.webpackJsonp=window.webpackJsonp||[]).push([[75,31],{CKgU:function(t,e,o){"use strict";var i=o("FuRH"),a=o("yIpb"),c=o("K79h"),s=o("oCYn"),n=o("YKMj");function l(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(o){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=r(o);return function(t,e){{if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,n?(t=r(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var h=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(r=t[c])&&(a=(i<3?r(a):3<i?r(e,o,a):r(e,o))||a);return 3<i&&a&&Object.defineProperty(e,o,a),a};function d(e,o){for(var t=arguments.length,n=new Array(2<t?t-2:0),r=2;r<t;r++)n[r-2]=arguments[r];var i=e.constructor.options;i.mixins&&i.mixins.forEach(function(t){t[o]&&(t=t[o]).call.apply(t,[e].concat(n))}),i[o]&&(i=i[o]).call.apply(i,[e].concat(n))}o=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(r,s["default"]);var t,e,o,n=p(r);function r(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),n.apply(this,arguments)}return t=r,(e=[{key:"mapTargetChanged",value:function(t,e){var o;t&&e&&t!==e&&(o=e||this.firstDefaultTarget,(e=i.a.$options.getMap(o))&&this.removeMap(e,o),i.a.$options.getMap(t)&&this.loadMap(t))}},{key:"mounted",value:function(){var t=this.getTargetName();this.firstDefaultTarget=t,i.a.$options.getMap(t)&&this.loadMap(t),i.a.$on("load-map",this.loadMapSucceed),a.a.$on("delete-map",this.removeMapSucceed)}},{key:"beforeDestroy",value:function(){this.removeMap(),i.a.$off("load-map",this.loadMapSucceed),a.a.$off("delete-map",this.removeMapSucceed)}},{key:"getFirstTarget",value:function(){var t,e;for(e in i.a.$options.getAllMaps())if(e){t=e;break}return t}},{key:"getTargetName",value:function(){var t=this.$parent,t=t&&t.$options.name&&-1!==["smwebmap","smncpmap"].indexOf(t.$options.name.toLowerCase())&&t.target;return this.mapTarget||t||this.getFirstTarget()}},{key:"loadMap",value:function(t){var e=this;this.firstDefaultTarget||(this.firstDefaultTarget=t),this.map=i.a.$options.getMap(t),this.webmap=i.a.$options.getWebMap(t),this.viewModel&&"function"==typeof this.viewModel.setMap&&this.viewModel.setMap({map:this.map,webmap:this.webmap,mapTarget:t}),d(this,"loaded",this.map,t),this.$nextTick(function(){e.$emit("loaded")})}},{key:"removeMap",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.map,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getTargetName();t&&(this.viewModel&&this.viewModel.removed&&this.viewModel.removed(),d(this,"removed",t,e),this.map=null,this.webmap=null,this.firstDefaultTarget=null)}},{key:"loadMapSucceed",value:function(t,e){e===this.getTargetName()&&this.loadMap(e)}},{key:"removeMapSucceed",value:function(t){t===this.getTargetName()&&this.removeMap()}},{key:"mapNotLoadedTip",value:function(){return!this.map&&(c.a.destroy(),c.a.warning(this.$t("warning.unassociatedMap")),!0)}}])&&l(t.prototype,e),o&&l(t,o),Object.defineProperty(t,"prototype",{writable:!1}),r}();h([Object(n.Prop)()],o.prototype,"mapTarget",void 0),h([Object(n.Watch)("mapTarget")],o.prototype,"mapTargetChanged",null),o=h([n.Component],o),e.a=o},K79h:function(t,e,o){"use strict";var n=o("Iv0b");function i(e,t){var o,n=Object.keys(e);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(e),t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)),n}function r(n){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var e,o;e=n,t=r[o=t],o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))})}return n}var a="sm-component-message",c=n.default.config;c({prefixCls:a}),n.default.config=function(t){t.prefixCls&&t.prefixCls!==a&&n.default.destroy(),c(r(r({},t),{},{prefixCls:t.prefixCls||a}))},e.a=n.default},Kwrx:function(t,e,o){"use strict";var i=o("oCYn"),n=o("YKMj"),r={name:"SmCollapseCard",mixins:[o("oTir").a],props:{iconPosition:{type:String,default:"top-left"},iconClass:{type:String},autoRotate:{type:Boolean,default:!1},headerName:{type:String},collapsed:{type:Boolean,default:!1},splitLine:{type:Boolean,default:!0}},data:function(){return{isShow:!0,transform:null}},computed:{getCardStyle:function(){return this.iconClass||this.headerName?this.collapseCardBackgroundStyle:{background:"transparent"}},iconStyle:function(){return{transform:this.transform}},position:function(){return this.iconPosition},rotateDeg:function(){return{"top-right":["rotate(-45deg)","rotate(135deg)"],"top-left":["rotate(-135deg)","rotate(45deg)"],"bottom-left":["rotate(135deg)","rotate(-45deg)"],"bottom-right":["rotate(45deg)","rotate(-135deg)"]}},hasHeaderRotateDeg:function(){return{"top-right":["rotate(-45deg)","rotate(135deg)"],"top-left":["rotate(-135deg)","rotate(45deg)"],"bottom-left":["rotate(-135deg)","rotate(45deg)"],"bottom-right":["rotate(-45deg)","rotate(135deg)"]}}},watch:{iconClass:function(t,e){t&&!e?(this.isShow=!this.collapsed,this.toggleTransition(this.collapsed?"leave":"enter")):t||(this.isShow=!0)},iconPosition:function(){this.resetIconTransform()}},created:function(){this.iconClass&&(this.isShow=!this.collapsed),this.resetIconTransform()},mounted:function(){this.toggleTransition(this.collapsed?"leave":"enter")},methods:{iconClicked:function(){this.isShow=!this.isShow,this.resetIconTransform(),this.$emit("content-show-state",this.isShow)},toggleTransition:function(e){var o=this;this.$nextTick(function(){var t=o.$el.querySelector(".sm-component-collapse-card__icon");t&&(t.style.position="leave"===e?"relative":"absolute")})},resetIconTransform:function(){var t=this.headerName?this.hasHeaderRotateDeg:this.rotateDeg;this.autoRotate&&(this.transform=t[this.position][this.isShow?1:0])}}},a=o("KHd+"),o=Object(a.a)(r,function(){var t,e=this,o=e.$createElement,o=e._self._c||o;return o("div",{staticClass:"sm-component-collapse-card",style:e.getTextColorStyle},[e.iconClass?o("div",{class:((t={})["sm-component-collapse-card__icon"]=!0,t["is-"+e.position]=!0,t["is-click-"+(e.isShow?"out":"in")]=!0,t["is-not-header"]=!e.headerName,t["icon-box-shadow"]=!e.isShow,t),style:[e.collapseCardHeaderBgStyle,e.headingTextColorStyle],on:{click:e.iconClicked}},[o("i",{class:((t={})[e.iconClass]=!0,t["is-auto-rotate"]=e.autoRotate,t),style:e.iconStyle})]):e._e(),e._v(" "),o("transition",{attrs:{name:"sm-component-zoom-in"},on:{"after-leave":function(t){return e.toggleTransition("leave")},enter:function(t){return e.toggleTransition("enter")}}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],class:((t={})["sm-component-collapse-card__content"]=!0,t["is-not-header"]=!e.headerName,t["is-"+e.position]=!0,t["is-icon"]=e.iconClass,t),style:e.getCardStyle},[e.headerName?o("div",{class:((t={"sm-component-collapse-card__header":!0,"with-split-line":e.splitLine})["is-"+e.position]=!0,t),style:[e.collapseCardHeaderBgStyle,e.headingTextColorStyle]},[o("span",{staticClass:"sm-component-collapse-card__header-name"},[e._v(e._s(e.headerName))])]):e._e(),e._v(" "),o("div",{staticClass:"sm-component-collapse-card__body",style:e.getCardStyle},[e._t("default")],2)])])],1)},[],!1,null,null,null).exports;function c(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(o){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=u(o);return function(t,e){{if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,n?(t=u(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(r=t[c])&&(a=(i<3?r(a):3<i?r(e,o,a):r(e,o))||a);return 3<i&&a&&Object.defineProperty(e,o,a),a},r=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(r,i["default"]);var t,e,o,n=l(r);function r(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),n.apply(this,arguments)}return t=r,e&&c(t.prototype,e),o&&c(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}();a([Object(n.Prop)({default:"top-left",validator:function(t){return-1!==["top-left","top-right","bottom-left","bottom-right"].indexOf(t)}})],r.prototype,"position",void 0),a([Object(n.Prop)()],r.prototype,"headerName",void 0),a([Object(n.Prop)()],r.prototype,"iconClass",void 0),a([Object(n.Prop)({default:!1})],r.prototype,"autoRotate",void 0),a([Object(n.Prop)({default:!0})],r.prototype,"collapsed",void 0),a([Object(n.Prop)({default:!0})],r.prototype,"splitLine",void 0);r=a([Object(n.Component)({components:{SmCollapseCard:o}})],r),e.a=r},kwgj:function(t,e,o){"use strict";o.r(e);var n=o("rn6b"),r=o("CKgU"),i=o("Kwrx"),a=o("oTir"),c=o("m7gn"),s=o("hdLw"),l=o.n(s),u=o("kzZv");function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(o){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=y(o);return function(t,e){{if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,n?(t=y(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m={vec:"cva",img:"cia",ter:"cta"},b=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(r,l.a.Evented);var t,e,o,n=d(r);function r(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=n.call(this)).tk=t,e.proj="w",e}return t=r,(e=[{key:"setMap",value:function(t){t=t.map;this.map=t}},{key:"setTk",value:function(t){this.tk=t}},{key:"changeBaseLayer",value:function(t){var e,o,n,r=this;this.map&&(this.removeLayer(),e=this.map.getCRS(),this.proj="EPSG:3857"===e.epsgCode?"w":"c",o=this.getSources(t),Object.keys(o).forEach(function(t){r.map.addSource(t,o[t])}),t=this.getLayers(t),n=this.map.getStyle().layers.length?this.map.getStyle().layers[0].id:"",t.forEach(function(t){r.map.addLayer(t,n)}))}},{key:"togglerLabelLayer",value:function(t){t=t?"visible":"none";this.map&&this.map.getLayer(Object(u.b)().tc("tdtMapSwitcher.Tianditu".concat(this.tdtLabelType)))&&this.map.setLayoutProperty(Object(u.b)().tc("tdtMapSwitcher.Tianditu".concat(this.tdtLabelType)),"visibility",t)}},{key:"removeLayer",value:function(){var e=this,o=this.map.getStyle().sources;this.map.getStyle().layers.forEach(function(t){"raster"===t.type&&e.map.removeLayer(t.id)}),Object.keys(o).forEach(function(t){"raster"===o[t].type&&e.map.removeSource(t)})}},{key:"getLayers",value:function(t){return t=t.replace(t[0],t[0].toUpperCase()),[{id:Object(u.b)().tc("tdtMapSwitcher.Tianditu".concat(t)),type:"raster",source:Object(u.b)().tc("tdtMapSwitcher.Tianditu".concat(t)),minzoom:0,maxzoom:18},{id:Object(u.b)().tc("tdtMapSwitcher.Tianditu".concat(this.tdtLabelType)),type:"raster",source:Object(u.b)().tc("tdtMapSwitcher.Tianditu".concat(this.tdtLabelType)),minzoom:0,maxzoom:18}]}},{key:"getSources",value:function(t){var e=t.replace(t[0],t[0].toUpperCase()),o={};o[Object(u.b)().tc("tdtMapSwitcher.Tianditu".concat(e))]={type:"raster",tiles:this.listUrls(t),tileSize:256};e=m[t];return this.tdtLabelType=e.replace(e[0],e[0].toUpperCase()),o[Object(u.b)().tc("tdtMapSwitcher.Tianditu".concat(this.tdtLabelType))]={type:"raster",tiles:this.listUrls(m[t]),tileSize:256},o}},{key:"listUrls",value:function(t){var e=[];if(t)for(var o=0;o<8;o++)e.push("https://t{s}.tianditu.gov.cn/{type}_{proj}/wmts?tk={tk}&service=WMTS&request=GetTile&version=1.0.0&style=default&tilematrixSet={proj}&format=tiles&width=256&height=256&layer={type}&tilematrix={z}&tilerow={y}&tilecol={x}".replace("{tk}",this.tk).replace("{s}",o).replace(/{proj}/g,this.proj).replace(/{type}/g,t));return e}}])&&f(t.prototype,e),o&&f(t,o),Object.defineProperty(t,"prototype",{writable:!1}),r}(),a={name:"SmTdtMapSwitcher",components:{SmCheckbox:c.a},mixins:[n.a,r.a,i.a,a.a],props:{iconClass:{type:String,default:"sm-components-icon-map-switch"},headerName:{type:String,default:function(){return this.$t("tdtMapSwitcher.title")}},data:{type:Object,default:function(){return{select:"",label:!1,tk:""}}}},watch:{"data.tk":function(t){this.viewModel&&this.viewModel.setTk(t)}},data:function(){return{labelChecked:!0,currentSelect:this.data.select}},created:function(){this.viewModel=new b(this.data.tk)},methods:{changeBaseLayer:function(t){this.viewModel.changeBaseLayer(t),this.togglerLabelLayer(this.labelChecked),this.currentSelect=t,this.$emit("change-select-map-type",t)},togglerLabelLayer:function(t){this.viewModel.togglerLabelLayer(t),this.labelChecked=t,this.$emit("change-label-status",this.labelChecked)}},loaded:function(){this.data.select&&(this.viewModel.changeBaseLayer(this.data.select),this.togglerLabelLayer(this.data.label))}},o=o("KHd+"),a=Object(o.a)(a,function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("sm-collapse-card",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"sm-component-map-switch",attrs:{"icon-class":e.iconClass,"icon-position":e.position,"header-name":e.headerName,"auto-rotate":e.autoRotate,collapsed:e.collapsed,background:e.background,textColor:e.textColor,"split-line":e.splitLine}},[t("div",{staticClass:"sm-component-map-switch__panel",style:e.headingTextColorStyle},[t("div",{staticClass:"sm-component-map-switch__layers-wrap"},[t("div",{staticClass:"sm-component-map-switch__content-holder"},[t("div",{staticClass:"sm-component-map-switch__layers"},[t("div",{class:["layer-item map-item",{"active-item":"vec"===e.currentSelect}],on:{click:function(t){return e.changeBaseLayer("vec")}}},[t("div",{staticClass:"sm-component-map-switch__layer-name"},[e._v(e._s(e.$t("tdtMapSwitcher.vector")))])]),e._v(" "),t("div",{class:["layer-item image-item",{"active-item":"img"===e.currentSelect}],on:{click:function(t){return e.changeBaseLayer("img")}}},[t("div",{staticClass:"sm-component-map-switch__layer-name"},[e._v(e._s(e.$t("tdtMapSwitcher.image")))])]),e._v(" "),t("div",{class:["layer-item landform-item",{"active-item":"ter"===e.currentSelect}],on:{click:function(t){return e.changeBaseLayer("ter")}}},[t("div",{staticClass:"sm-component-map-switch__layer-name"},[e._v(e._s(e.$t("tdtMapSwitcher.terrain")))])])]),e._v(" "),e.currentSelect?t("div",{staticClass:"sm-component-map-switch__labelSetting"},[t("sm-checkbox",{attrs:{checked:e.labelChecked},on:{change:function(t){return e.togglerLabelLayer(t.target.checked)}}},[e._v("\n            "+e._s(e.$t("tdtMapSwitcher.placeName"))+"\n          ")])],1):e._e()])])])])},[],!1,null,null,null);e.default=a.exports},m7gn:function(t,e,o){"use strict";var n=o("Y+Mx"),r=o("ghbr"),i=o("oTir"),a=o("tmJK"),r={defaultChecked:r.a.bool,checked:r.a.bool,disabled:r.a.bool,indeterminate:r.a.bool,autoFocus:r.a.bool},r={name:"SmCheckbox",__ANT_CHECKBOX:!0,defaultComponent:n.default,mixins:[i.a,a.a],inheritAttrs:!1,model:{prop:"checked",event:"input"},props:r,computed:{extralListeners:function(){var e=this;return{input:function(t){e.$emit("input",t)}}}}},o=o("KHd+"),r=Object(o.a)(r,void 0,void 0,!1,null,null,null);e.a=r.exports},rn6b:function(t,e,o){"use strict";var i=o("oCYn"),n=o("YKMj"),a=o("FuRH");function c(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(o){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=r(o);return function(t,e){{if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,n?(t=r(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var p=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(r=t[c])&&(a=(i<3?r(a):3<i?r(e,o,a):r(e,o))||a);return 3<i&&a&&Object.defineProperty(e,o,a),a},o=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(r,i["default"]);var t,e,o,n=l(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.apply(this,arguments)).isShow=!0,t}return t=r,(e=[{key:"positionChanged",value:function(){this.$el&&this.parentIsWebMapOrMap&&(this.remove(),this.addTo())}},{key:"created",value:function(){var t=this.$parent.$options.name;this.parentIsWebMapOrMap=t&&-1!==["smwebmap","smncpmap"].indexOf(this.$parent.$options.name.toLowerCase())}},{key:"mounted",value:function(){var t;this.filterDelayLoad=!(-1!==["smwebmap","smminimap","smncpmap"].indexOf(this.$options.name&&this.$options.name.toLowerCase())),this.$el&&this.parentIsWebMapOrMap&&(this.filterDelayLoad&&(this.isShow=!1,(t=this.$el).style&&(t.style.display="none")),t=this.getControlMapName(),a.a.$options.getMap(t)&&this.mapLoaded(a.a.$options.getMap(t)),a.a.$on("load-map",this.controlLoadMapSucceed))}},{key:"beforeDestroy",value:function(){this.remove(),a.a.$off("load-map",this.controlLoadMapSucceed)}},{key:"initControl",value:function(){var t=this;return{onAdd:function(){return t.$el},onRemove:function(){return t.map}}}},{key:"addTo",value:function(){this.control=this.initControl(),this.map.addControl(this.control,this.position),this.$el&&this.$el.classList&&this.$el.classList.add("mapboxgl-ctrl")}},{key:"remove",value:function(){this.control&&this.map&&this.map.removeControl(this.control)}},{key:"getControlMapName",value:function(){var t=this.$parent,t=t&&t.$options.name&&"smwebmap"===t.$options.name.toLowerCase()&&t.target;return this.mapTarget||t||Object.keys(a.a.$options.getAllMaps())[0]}},{key:"controlLoadMapSucceed",value:function(t,e){e===this.getControlMapName()&&this.mapLoaded(t)}},{key:"mapLoaded",value:function(t){this.map=t,this.addTo(),this.filterDelayLoad&&(this.isShow=!0,(t=this.$el)&&t.style&&(t.style.display="block"))}}])&&c(t.prototype,e),o&&c(t,o),Object.defineProperty(t,"prototype",{writable:!1}),r}();p([Object(n.Prop)()],o.prototype,"mapTarget",void 0),p([Object(n.Prop)({default:"top-left",validator:function(t){return-1!==["top-left","top-right","bottom-left","bottom-right"].indexOf(t)}})],o.prototype,"position",void 0),p([Object(n.Watch)("position")],o.prototype,"positionChanged",null),o=p([n.Component],o),e.a=o}}]);