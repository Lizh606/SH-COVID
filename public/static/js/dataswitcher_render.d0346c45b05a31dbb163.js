(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{ITEj:function(t,e,n){"use strict";n.r(e);var r=n("3Dh3"),i=n("GSdF"),s=n("E3LD");function o(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function c(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach(function(t){var e,n;e=r,t=i[n=t],n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(i,t))})}return r}var a={props:{component:{type:Object,required:!0},defaultParams:{type:Object}},data:function(){return{componentId:null,currentUuid:"",eventList:[]}},computed:{background:function(){return Object(i.a)(this.component.propDatas)},nextProps:function(){var t={background:""};return Object.assign({},this.defaultParams.props,t)},dataIds:function(){return this.component.dataIds},options:function(){return this.nextProps.options},triggers:function(){return this.$store.getters.getActionsByComponentId(this.component.componentId)},uuid:function(){return this.options&&this.options[0]&&this.options[0].value}},watch:{component:{handler:function(){this.componentId=Object(r.d)(this.component.uri)},deep:!0,immediate:!0},options:{handler:function(t){var e=this;!t||this.currentUuid&&t.find(function(t){return t.value===e.currentUuid})||this.$emit("dataChange",t&&t[0]&&t[0].value||"")},deep:!0,immediate:!0},triggers:{handler:function(t,e){this.handleTriggers(t),this.$emit("dataChange",this.uuid)},deep:!0}},methods:{handleChange:function(t){this.currentUuid=t,this.$emit("dataChange",t)},initTriggers:function(){var t=this;this.triggers&&this.handleTriggers(this.triggers),this.currentUuid=this.uuid,setTimeout(function(){return t.$emit("dataChange",t.uuid)},3e3)},handleTriggers:function(e){var a=this;if(this.eventList.length&&this.eventList.forEach(function(t){var e=t.eventName,t=t.listenerName;a[t]&&(a.$off(e,a[t]),a[t]=null)}),this.eventList=[],e)for(var t in e)!function(i){var t=s.b[i].events||[],o=e[i];t.forEach(function(t){var e="handleTrigger".concat(t.replace(t[0],t[0].toUpperCase()));a[e]=function(n){var r=[];o.forEach(function(t){var e=s.b[i].callback({uuid:n},t,a);r.push(c({actionId:t.actionId},e))}),a.$store.dispatch("UPDATE_ACTION",{componentId:a.component.componentId,type:i,datas:r,status:"active"})},a.$on(t,a[e]),a.eventList.push({eventName:t,listenerName:e})})}(t)}}},n=n("KHd+"),a=Object(n.a)(a,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{style:t.background},[e(t.componentId,t._b({tag:"component",style:t.defaultParams.style,on:{change:t.handleChange,"hook:mounted":t.initTriggers}},"component",t.nextProps,!1))],1)},[],!1,null,null,null);e.default=a.exports}}]);