(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{CKgU:function(e,t,r){"use strict";var a=r("FuRH"),i=r("yIpb"),c=r("K79h"),p=r("oCYn"),o=r("YKMj");function u(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=n(r);return function(e,t){{if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,o?(e=n(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y=function(e,t,r,o){var n,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;0<=c;c--)(n=e[c])&&(i=(a<3?n(i):3<a?n(t,r,i):n(t,r))||i);return 3<a&&i&&Object.defineProperty(t,r,i),i};function h(t,r){for(var e=arguments.length,o=new Array(2<e?e-2:0),n=2;n<e;n++)o[n-2]=arguments[n];var a=t.constructor.options;a.mixins&&a.mixins.forEach(function(e){e[r]&&(e=e[r]).call.apply(e,[t].concat(o))}),a[r]&&(a=a[r]).call.apply(a,[t].concat(o))}r=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(n,p["default"]);var e,t,r,o=s(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),o.apply(this,arguments)}return e=n,(t=[{key:"mapTargetChanged",value:function(e,t){var r;e&&t&&e!==t&&(r=t||this.firstDefaultTarget,(t=a.a.$options.getMap(r))&&this.removeMap(t,r),a.a.$options.getMap(e)&&this.loadMap(e))}},{key:"mounted",value:function(){var e=this.getTargetName();this.firstDefaultTarget=e,a.a.$options.getMap(e)&&this.loadMap(e),a.a.$on("load-map",this.loadMapSucceed),i.a.$on("delete-map",this.removeMapSucceed)}},{key:"beforeDestroy",value:function(){this.removeMap(),a.a.$off("load-map",this.loadMapSucceed),i.a.$off("delete-map",this.removeMapSucceed)}},{key:"getFirstTarget",value:function(){var e,t;for(t in a.a.$options.getAllMaps())if(t){e=t;break}return e}},{key:"getTargetName",value:function(){var e=this.$parent,e=e&&e.$options.name&&-1!==["smwebmap","smncpmap"].indexOf(e.$options.name.toLowerCase())&&e.target;return this.mapTarget||e||this.getFirstTarget()}},{key:"loadMap",value:function(e){var t=this;this.firstDefaultTarget||(this.firstDefaultTarget=e),this.map=a.a.$options.getMap(e),this.webmap=a.a.$options.getWebMap(e),this.viewModel&&"function"==typeof this.viewModel.setMap&&this.viewModel.setMap({map:this.map,webmap:this.webmap,mapTarget:e}),h(this,"loaded",this.map,e),this.$nextTick(function(){t.$emit("loaded")})}},{key:"removeMap",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.map,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getTargetName();e&&(this.viewModel&&this.viewModel.removed&&this.viewModel.removed(),h(this,"removed",e,t),this.map=null,this.webmap=null,this.firstDefaultTarget=null)}},{key:"loadMapSucceed",value:function(e,t){t===this.getTargetName()&&this.loadMap(t)}},{key:"removeMapSucceed",value:function(e){e===this.getTargetName()&&this.removeMap()}},{key:"mapNotLoadedTip",value:function(){return!this.map&&(c.a.destroy(),c.a.warning(this.$t("warning.unassociatedMap")),!0)}}])&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),n}();y([Object(o.Prop)()],r.prototype,"mapTarget",void 0),y([Object(o.Watch)("mapTarget")],r.prototype,"mapTargetChanged",null),r=y([o.Component],r),t.a=r},K79h:function(e,t,r){"use strict";var o=r("Iv0b");function a(t,e){var r,o=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)),o}function n(o){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach(function(e){var t,r;t=o,e=n[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(n,e))})}return o}var i="sm-component-message",c=o.default.config;c({prefixCls:i}),o.default.config=function(e){e.prefixCls&&e.prefixCls!==i&&o.default.destroy(),c(n(n({},e),{},{prefixCls:e.prefixCls||i}))},t.a=o.default}}]);